{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"BUG系统修正","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://migbug.ruijie.net/*"],"orig_noframes":null,"orig_run_at":"document-end","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":"document-end"},"storage":{"ts":1453789574142,"data":{}},"enabled":true,"position":1,"file_url":"migbug.ruijie.net/","uuid":"15031dce-5488-4b4f-b230-f42d91a18b31","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICBCVUfns7vnu5/kv67mraMKLy8gQG5hbWVzcGFjZSAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3VzZXJzLzQKLy8gQGRlc2NyaXB0aW9uICAgICBSZXN0b3JlIFN0eWxpc2ggc3R5bGVzIGZyb20gZGVsZXRpb24gb24gYmFpZHUuY29tCi8vIEB2ZXJzaW9uICAgICAgICAgMS4wCi8vIEBhdXRob3IgICAgICAgICAgbHVhbnR1QHZpcC5xcS5jb20KLy8gQG1hdGNoICAgICAgICAgICAqOi8vbWlnYnVnLnJ1aWppZS5uZXQvKgovLyBAcnVuLWF0ICAgICAgICAgIGRvY3VtZW50LWVuZAovLyA9PS9Vc2VyU2NyaXB0PT0KCmZ1bmN0aW9uIGZpeFN0eWxlQlVHKCkgewogICAgLy9hbGVydCgiZml4U3R5bGUiKTsKICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgieHRiLXRleHQiKTsKICAgIC8vYWxlcnQoZWxlbWVudFswXS5pbm5lckhUTUwpOwp9CmZpeFN0eWxlQlVHKCk7"},{"name":"百度云插件+APIKey","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"excludes":false,"includes":false,"matches":false,"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["/https?\\:\\/\\/pan\\.baidu\\.com.*/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_connects":["cn.bing.com","www.googleapis.com"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1438062561880,"data":{}},"enabled":true,"position":2,"file_url":"https://greasyfork.org/scripts/496-%E7%99%BE%E5%BA%A6%E4%BA%91%E6%8F%92%E4%BB%B6-apikey/code/%E7%99%BE%E5%BA%A6%E4%BA%91%E6%8F%92%E4%BB%B6+APIKey.user.js","uuid":"18535954-ccfc-4d3b-b7ba-094aaa1da78e","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAg55m+5bqm5LqR5o+S5Lu2K0FQSUtleQovLyBAbmFtZXNwYWNlICAKLy8gQHZlcnNpb24gICAgNS4wLjEKLy8gQGRlc2NyaXB0aW9uICDlnKjnmb7luqbkupHnvZHnm5jnmoTpobXpnaLmt7vliqDkuIDkuKrmkJzntKLmoYbvvIzosIPnlKjmkJzntKJBUEnmkJzntKLmiYDmnInlhazlvIDliIbkuqvmlofku7YvLyBUbyBhZGQgYSBzZWFyY2ggZnJhbWUgdGhhdCBjYWxscyBzb21lIGFwaSBmb3Igc2VhcmNoaW5nIHNvbWUgcHVibGljIHNoYXJlZCBmaWxlcyBpbiBCYWlkdVl1biBjbG91ZCBuZXRkaXNrLiAKLy8gQGRlc2NyaXB0aW9uICBGb3IgbW9yZSBpbWZvcm1hdGlvbixwbGVhc2UgZW1haWwgbWUgYXQgd2FuZ2hzaW5jaGVAaG90bWFpbC5jb20uIAovLyBAaW5jbHVkZSAgICAgICAvaHR0cHM/XDpcL1wvcGFuXC5iYWlkdVwuY29tLiovCi8vIEBncmFudCAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAcnVuLWF0IGRvY3VtZW50LWVuZAovLyBAY29weXJpZ2h0ICAyMDE0LDA0LDIwIF9fQnkgV2FuZyBIc2luLWNoZSAgIAovLyA9PS9Vc2VyU2NyaXB0PT0KCi8qdGhhbmtzIHRvIHRoZSB0dXRvcmlhbCBvZiBtdmMgIGF0IApodHRwczovL2FsZXhhdG5ldC5jb20vYXJ0aWNsZXMvbW9kZWwtdmlldy1jb250cm9sbGVyLW12Yy1qYXZhc2NyaXB0Ki8KCgovL0V2ZW50IGlzIGEgc2ltcGxlIGNsYXNzIGZvciBpbXBsZW1lbnRpbmcgdGhlIE9ic2VydmVyIHBhdHRlcm46CmZ1bmN0aW9uIEV2ZW50KHNlbmRlcikgewogICAgdGhpcy5fc2VuZGVyID0gc2VuZGVyOwogICAgdGhpcy5fbGlzdGVuZXJzID0gW107Cn0KCkV2ZW50LnByb3RvdHlwZSA9IHsKICAgIGF0dGFjaCA6IGZ1bmN0aW9uIChsaXN0ZW5lcikgey8vcHVzaCB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gaW50byBfbGlzdGVuZXJzW107CiAgICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogICAgfSwKICAgIG5vdGlmeSA6IGZ1bmN0aW9uIChhcmdzKSB7Ly9wb3AgYWxsIHRoZSBjYWxsYmFjayBmdW5jdGlvbnMgYW5kIGV4ZWN1dGUgdGhlIGZ1bmN0aW9ucyB3aXRoIHNhbWUgYXJncz8KICAgICAgICB2YXIgaW5kZXg7CgogICAgICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7IGluZGV4ICs9IDEpIHsKICAgICAgICAgICAgdGhpcy5fbGlzdGVuZXJzW2luZGV4XSh0aGlzLl9zZW5kZXIsIGFyZ3MpOy8vYXV0byBwYXNzIHNlbmRlciBhbmQgYXJncyBpbnRvIGNhbGxiYWNrIGZ1bmN0aW9uLCBzbyB0aGUgZGVmYXVsdCBmb3JtIG9mIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIGZ1bmN0aW9uKHNlbmRlcixhcmdzKXt9CiAgICAgICAgfQogICAgfQp9OwoKLy9KYXZhc2NyaXB0LXRlbXBsYXRlLWVuZ2luZS1pbi1qdXN0LTIwLWxpbmUKLy9ieSBieSBLcmFzaW1pciBodHRwOi8va3Jhc2ltaXJ0c29uZXYuY29tL2Jsb2cvYXJ0aWNsZS9KYXZhc2NyaXB0LXRlbXBsYXRlLWVuZ2luZS1pbi1qdXN0LTIwLWxpbmUKdmFyIFRlbXBsYXRlRW5naW5lID0gZnVuY3Rpb24oaHRtbCwgb3B0aW9ucykgewogICAgdmFyIHJlID0gLzwlKFteJT5dKyk/JT4vZywgcmVFeHAgPSAvKF4oICk/KGlmfGZvcnxlbHNlfHN3aXRjaHxjYXNlfGJyZWFrfHt8fSkpKC4qKT8vZywgY29kZSA9ICd2YXIgcj1bXTtcbicsIGN1cnNvciA9IDAsIG1hdGNoOwogICAgdmFyIGFkZCA9IGZ1bmN0aW9uKGxpbmUsIGpzKSB7CiAgICAgICAganM/IChjb2RlICs9IGxpbmUubWF0Y2gocmVFeHApID8gbGluZSArICdcbicgOiAnci5wdXNoKCcgKyBsaW5lICsgJyk7XG4nKSA6CiAgICAgICAgICAgIChjb2RlICs9IGxpbmUgIT0gJycgPyAnci5wdXNoKCInICsgbGluZS5yZXBsYWNlKC8iL2csICdcXCInKSArICciKTtcbicgOiAnJyk7CiAgICAgICAgcmV0dXJuIGFkZDsKICAgIH07CiAgICB3aGlsZShtYXRjaCA9IHJlLmV4ZWMoaHRtbCkpIHsKICAgICAgICBhZGQoaHRtbC5zbGljZShjdXJzb3IsIG1hdGNoLmluZGV4KSkobWF0Y2hbMV0sIHRydWUpOwogICAgICAgIGN1cnNvciA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoOwogICAgfQogICAgYWRkKGh0bWwuc3Vic3RyKGN1cnNvciwgaHRtbC5sZW5ndGggLSBjdXJzb3IpKTsKICAgIGNvZGUgKz0gJ3JldHVybiByLmpvaW4oIiIpOyc7CiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKGNvZGUucmVwbGFjZSgvW1xyXHRcbl0vZywgJycpKS5hcHBseShvcHRpb25zKTsKfTsKCi8qKgogKiBUaGUgTW9kZWwuIE1vZGVsIHN0b3JlcyBpdGVtcyBhbmQgbm90aWZpZXMKICogb2JzZXJ2ZXJzIGFib3V0IGNoYW5nZXMuCiAqLwoKIHZhciBCYXNlTW9kZWw9ZnVuY3Rpb24oZW5naW5lTHN0KXsKICAgIHRoaXMua2V5d29yZD0iIjsKICAgIHRoaXMuZW5naW5lPSJkZWZhdWx0IjsKICAgIHRoaXMuZW5naW5lTHN0PWVuZ2luZUxzdDsKICAgIHRoaXMuanNvbk9iaj17IAogICAgICAgICAgICAgICAgICAgIGN1cnNvcjogeyAKICAgICAgICAgICAgICAgICAgICAgICAgZXN0aW1hdGVkUmVzdWx0Q291bnQ6IDAsIAogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRDb3VudDogMCB9LCAKICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiBbXQogICAgICAgICAgICAgICAgfTsKICAgIHRoaXMuY3Vycj0xOwogICAgdGhpcy50b3RhbFBhZ2U9MTsKICAgIHRoaXMudXJscz17ZGVmYXVsdDonaHR0cDovLycsfTsKICAgIHRoaXMuc3RhdGU9ZmFsc2U7CiAgICB0aGlzLmNvbnRlbnRVcGRhdGVkPW5ldyBFdmVudCh0aGlzKTsKICAgIHRoaXMucmVxdWVzdEV2ZW50PW5ldyBFdmVudCh0aGlzKTsKIH07CiBCYXNlTW9kZWwucHJvdG90eXBlPXsKICAgIHNldEVuZ2luZTpmdW5jdGlvbihlbmdpbmUpewogICAgICAgIHRoaXMuZW5naW5lPWVuZ2luZTsKICAgIH0sCiAgICB1cGRhdGVDdXJyOmZ1bmN0aW9uKGN1cnIpewogICAgICAgIHRoaXMuY3Vycj1jdXJyOwogICAgfSwKICAgIHVwZGF0ZUtleXdvcmQ6ZnVuY3Rpb24oa2V5d29yZCl7CiAgICAgICAgdGhpcy5rZXl3b3JkPWtleXdvcmQ7CiAgICB9LAogICAgcmVxdWVzdDpmdW5jdGlvbigpewogICAgICAgIHRoaXMucmVxdWVzdEV2ZW50Lm5vdGlmeSgpOwogICAgICAgIHZhciBfdGhpcz10aGlzOwogICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHVybDogX3RoaXMuY29tcGlsZVVybFtfdGhpcy5lbmdpbmVdKF90aGlzKSwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIiwgLy8gSWYgbm90IHNwZWNpZmllZCwgbmF2aWdhdG9yLnVzZXJBZ2VudCB3aWxsIGJlIHVzZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC94bWwiIC8vIElmIG5vdCBzcGVjaWZpZWQsIGJyb3dzZXIgZGVmYXVsdHMgd2lsbCBiZSB1c2VkLgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5qc29uT2JqPV90aGlzLnRvSnNvbltfdGhpcy5lbmdpbmVdKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRvdGFsUGFnZT0ocGFyc2VJbnQoX3RoaXMuanNvbk9iai5jdXJzb3IucmVzdWx0Q291bnQpLXBhcnNlSW50KF90aGlzLmpzb25PYmouY3Vyc29yLnJlc3VsdENvdW50KSUxMCkvMTArMTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RhdGU9dHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9zZWxmPV90aGlzOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb250ZW50VXBkYXRlZC5ub3RpZnkoX3NlbGYuc3RhdGUpOyAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5qc29uT2JqPXsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlc3RpbWF0ZWRSZXN1bHRDb3VudDogMCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvdW50OiAwIH0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IFtdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50b3RhbFBhZ2U9MTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RhdGU9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfc2VsZj1fdGhpczsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29udGVudFVwZGF0ZWQubm90aWZ5KF9zZWxmLnN0YXRlKTsgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgfSwKICAgIGRlc3Rvcnk6ZnVuY3Rpb24oKXsKICAgICAgICB0aGlzLmpzb25PYmo9e307CiAgICAgICAgdGhpcy50b3RhbFBhZ2U9MDsKICAgICAgICB0aGlzLnN0YXRlPWZhbHNlOyAKICAgICAgICB0aGlzLmN1cnI9MDsKICAgICAgICB0aGlzLmtleXdvcmQ9IiI7CiAgICB9LAogICAgdG9Kc29uOnsKICAgICAgICBkZWZhdWx0OmZ1bmN0aW9uKHRleHQpewogICAgICAgICAgICB2YXIganNvbk9iaiA9IHsgCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiB7IAogICAgICAgICAgICAgICAgICAgICAgICBlc3RpbWF0ZWRSZXN1bHRDb3VudDogMCwgCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENvdW50OiAwIH0sIAogICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IFtdCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuIGpzb25PYmo7CiAgICAgICAgfSwKICAgIH0sCiAgICBjb21waWxlVXJsOnsKICAgICAgICBkZWZhdWx0OmZ1bmN0aW9uKF90aGlzKXsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51cmwgKyBfdGhpcy5rZXl3b3JkICsgJytzaXRlJTNBcGFuLmJhaWR1LmNvbScgKyAnJmZpcnN0PScgKyBfdGhpcy5jdXJyOwogICAgICAgICAgICB9LCAgICAgICAgCiAgICB9LAogfTsKCiB2YXIgVmlld2VyPWZ1bmN0aW9uKG1vZGVsLFVJZWxlbWVudHMpewogICAgdGhpcy5tb2RlbD1tb2RlbDsKICAgIHRoaXMuVUk9VUllbGVtZW50czsKICAgIHRoaXMuc2VhcmNoQ2xpY2s9bmV3IEV2ZW50KHRoaXMpOwogICAgdGhpcy5jbG9zZUNsaWNrPW5ldyBFdmVudCh0aGlzKTsKICAgIHRoaXMubmV4dENsaWNrPW5ldyBFdmVudCh0aGlzKTsKICAgIHRoaXMucHJlQ2xpY2s9bmV3IEV2ZW50KHRoaXMpOwogICAgdGhpcy50b1BhZ2VDbGljaz1uZXcgRXZlbnQodGhpcyk7CiAgICB0aGlzLmVuZ2luZU9wdENoYW5nZT1uZXcgRXZlbnQodGhpcyk7CiAgICB2YXIgYm9keU5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7CiAgICB2YXIgX3NlbGY9dGhpczsKICAgIHRoaXMuVUkuc2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihldmVudCkgewogICAgICAgIC8qIEFjdCBvbiB0aGUgZXZlbnQgKi8KICAgICAgICB2YXIgY3Vycj0xOwogICAgICAgIHZhciBrZXl3b3JkPV9zZWxmLlVJLmlucHV0RWxlLnZhbHVlOwogICAgICAgIGlmKGtleXdvcmQucmVwbGFjZSgvXHMqLywnJykhPT0nJyl7CiAgICAgICAgICAgIF9zZWxmLnNlYXJjaENsaWNrLm5vdGlmeSh7Y3VycjpjdXJyLGtleXdvcmQ6a2V5d29yZH0pOwogICAgICAgIH0KICAgIH0pOwogICAgdGhpcy5VSS5jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICAvKiBBY3Qgb24gdGhlIGV2ZW50ICovCiAgICAgICAgX3NlbGYuY2xvc2VDbGljay5ub3RpZnkoKTsKICAgIH0pOwogICAgLy8gdGhpcy5VSS5pbnB1dEVsZS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsZnVuY3Rpb24oZXZlbnQpIHsKICAgIC8vICAgICAgICAgdmFyIGNsaWNrRXZlbnQgPSBuZXcgTW91c2VFdmVudCgiY2xpY2siKTsgICAgICAgICAgICAKICAgIC8vICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09IDEzKSB7CiAgICAvLyAgICAgICAgICAgICBfc2VsZi5VSS5zZWFyY2hCdG4uZGlzcGF0Y2hFdmVudChjbGlja0V2ZW50KTsKICAgIC8vICAgICAgICAgfQogICAgLy8gICAgICAgICBjbGlja0V2ZW50ID0gbnVsbDsKICAgIC8vICAgICB9KTsKICAgIGJvZHlOb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihldmVudCl7CiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihfc2VsZi5VSS5lbmdpbmVCdG5DbGFzc05hbWUpICE9PSAtMSApIHsKICAgICAgICAgICAgX3NlbGYuZW5naW5lT3B0Q2hhbmdlLm5vdGlmeShldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWVuZ2luZScpKTsgICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZihfc2VsZi5VSS50b1BhZ2VCdG5DbGFzc05hbWUpICE9PSAtMSApIHsKICAgICAgICAgICAgX3NlbGYudG9QYWdlQ2xpY2subm90aWZ5KHBhcnNlSW50KGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFnZScpLDEwKSk7CiAgICAgICAgfQogICAgfSk7CiAgICAgICAgICAgICAgICAgIAogfTsKIFZpZXdlci5wcm90b3R5cGU9ewogICAgcmVmbGVzaEVuZ2luZUxzdDpmdW5jdGlvbigpewogICAgICAgIHZhciB0ZW1wbGF0ZT0nPCVmb3IodmFyIGkgaW4gdGhpcyl7JT4nKwogICAgICAgICAgICAgICAgICAgICc8bGkgbm9kZS10eXBlPSJjbGljay1lbGUiIGRhdGEtZW5naW5lPSI8JXRoaXNbaV0lPiIgY2xhc3M9ImxpIHd4ei1tZW51LW9wdGlvbiI+JysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdieSA8JXRoaXNbaV0lPicrCiAgICAgICAgICAgICAgICAgICAgJzwvbGk+JysKICAgICAgICAgICAgICAgICAgICAnPCV9JT4nOwogICAgICAgIHZhciBodG1sPVRlbXBsYXRlRW5naW5lKHRlbXBsYXRlLHRoaXMubW9kZWwuZW5naW5lTHN0KTsKICAgICAgICB0aGlzLlVJLmVuZ2luZUxzdC5pbm5lckhUTUwgPSBodG1sOwogICAgfSwKICAgIHVwZGF0ZUVuZ2luZTpmdW5jdGlvbigpewogICAgICAgIHRoaXMuVUkubWVudS50ZXh0Q29udGVudCA9IHRoaXMubW9kZWwuZW5naW5lOwogICAgfSwKICAgIHNob3c6ZnVuY3Rpb24oKXsKICAgICAgICB0aGlzLlVJLm15RGl2LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIHRoaXMuVUkuYmdOb2RlLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIHRoaXMuVUkubXlEaXYuc3R5bGUudG9wID0gJzUwJSc7CiAgICAgICAgdGhpcy5VSS5teURpdi5zdHlsZS5tYXJnaW5Ub3AgPSAodGhpcy5VSS5teURpdi5jbGllbnRIZWlnaHQgLyAyICogLTEpICsgJ3B4JzsgICAgCiAgICB9LAogICAgcmVmbGVzaDpmdW5jdGlvbihzdWNjZXNzKXsKICAgICAgICB2YXIgdGVtcGxhdGU9IjxwIGFsaWduPSdyaWdodCc+LS0tLSBieSA8JXRoaXMuZW5naW5lJT4uY29tIFNlYXJjaCA8L3A+PHAgd2hpdGUtc3BhY2U9J25vcm1hbCcgY2xhc3M9J3RlbXAnID5rZXl3b3JkIGlzICAgICc8JXRoaXMua2V5d29yZCU+JyAgICBmb3VuZCAgJzwldGhpcy5qc29uT2JqLmN1cnNvci5yZXN1bHRDb3VudCU+JyAgUmVzdWx0czwvcD48cD4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTxwPiI7CiAgICAgICAgCiAgICAgICAgdGVtcGxhdGUrPSc8JWZvcih2YXIgaSBpbiB0aGlzLmpzb25PYmoucmVzdWx0cyl7JT4nKwogICAgICAgICAgICAgICAgICAgICAgICAgJzxwPjxwIGNsYXNzPSJteVRpdGxlIj4nKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxhIGhyZWY9IjwldGhpcy5qc29uT2JqLnJlc3VsdHNbaV0udW5lc2NhcGVkVXJsJT4idGFyZ2V0PSJfYmxhbmsiPjwldGhpcy5qc29uT2JqLnJlc3VsdHNbaV0udGl0bGVOb0Zvcm1hdHRpbmclPjwvYT4nKwogICAgICAgICAgICAgICAgICAgICAgICAgJzwvcD4nKwogICAgICAgICAgICAgICAgICAgICAgICAgJzxwIGNsYXNzPSJteVNuaXBwZXQiPjwldGhpcy5qc29uT2JqLnJlc3VsdHNbaV0uY29udGVudE5vRm9ybWF0dGluZyU+PC9wPicrCiAgICAgICAgICAgICAgICAnPCV9JT4nOwogICAgICAgIHRlbXBsYXRlKz0nPHA+PHA+LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLTxwIGNsYXNzPSJ0ZW1wIiBtYXJnaW4tbGVmdD0iMjBweCI+IiA8JXRoaXMuanNvbk9iai5yZXN1bHRzLmxlbmd0aCU+ICIgIGl0ZW1zIGhhdmUgYmVlbiBsb2FkIDwvcD4nOwogICAgICAgIHZhciBodG1sOwogICAgICAgIGlmKHN1Y2Nlc3M9PT1mYWxzZSl7CiAgICAgICAgICAgIGh0bWw9JzxkaXYgY2xhc3M9ImxvYWRpbmctdGlwcyIgYWxpZ249ImNlbnRlciI+5Ye66ZSZ5LqGLi4uLi4uPC9kaXY+JzsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgaWYodGhpcy5tb2RlbC5qc29uT2JqLnJlc3VsdHMubGVuZ3RoPT09MCl7CiAgICAgICAgICAgICAgICBodG1sPSc8ZGl2IGNsYXNzPSJsb2FkaW5nLXRpcHMiIGFsaWduPSJjZW50ZXIiPuaXoOaQnOe0oue7k+aenC4uLuaNouS4quWFs+mUruivjemHjeaWsOivleivle+8nzwvZGl2Pic7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgaHRtbD1UZW1wbGF0ZUVuZ2luZSh0ZW1wbGF0ZSx0aGlzLm1vZGVsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5VSS5teUNvbnRlbnQuaW5uZXJIVE1MID0gaHRtbDsKICAgIH0sCiAgICBjbG9zZTpmdW5jdGlvbigpewogICAgICAgIHRoaXMuVUkubXlEaXYuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB0aGlzLlVJLmJnTm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgIHRoaXMuVUkuaW5wdXRFbGUudmFsdWUgPSAnJzsKICAgIH0sCiAgICBsb2FkaW5nOmZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy5VSS5teUNvbnRlbnQuaW5uZXJIVE1MID0gJzxpbWcgIHdpZHRoPSI2MDBweCIgc3JjPSJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhKZ0p1QWNRUUFQK0tBQ0ZNZGx4OG01ZXJ2OFRQMmpCWWY5UGI1RTF3a2FhM3lMWEQwVDlraUltZ3RtdUlwSHFVcmZEejl2Ly8vd0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUNIL0MwNUZWRk5EUVZCRk1pNHdBd0VBQUFBaCtRUUZNZ0FRQUN3QUFBQUFKZ0p1QVFBRi8rQWpqbVJwbm1pcXJtenJ2bkFzejNSdDMzaXU3M3p2LzhDZ2NFZ3NHby9JcEhMSmJEcWYwS2gwU3ExYXI5aXNkc3Z0ZXIvZ3NIaE1McHZQNkxSNnpXNjczL0M0ZkU2djIrLzR2SDdQNy92L2dJR0NnNFNGaG9lSWlZcUxqSTJPajVDUmtwT1VsWmFYbUptYW01eWRucCtnb2FLanBLV21wNmlwcXF1c3JhNnZzTEd5czdTMXRyZTR1YnE3dkwyK3Y4REJ3c1BFeGNiSHlNbkt5OHpOenMvUTBkTFQxTlhXMTlqWjJ0dmMzZDdmNE9IaTQrVGw1dWZvNmVycjdPM3U3L0R4OHZQMDlmYjMrUG42Ky96OS92OEFBd29jU0xDZ3dZTUlFeXBjeUxDaHc0Y1FJMHFjU0xHaXhZc1lNMnJjeUxHang0OGdRNG9jU2JLa3laTW9VLytxWE1teXBjdVhNR1BLbkVtenBzMmJPSFBxM01tenA4K2ZRSU1LSFVxMHFOR2pTSk1xWGNxMHFkT25VS05LblVxMXF0V3JXTE5xM2NxMXE5ZXZZTU9LSFV1MnJObXphTk9xWGN1MnJkdTNjT1BLblV1M3J0MjdlUFBxM2N1M3I5Ky9nQU1MSGt5NHNPSERpQk1yWHN5NHNlUEhrQ05Mbmt5NXN1WExtRE5yM3N5NXMrZlBvRU9MSGsyNnRPblRxRk9yWHMyNnRldlhzR1BMbmsyN3R1M2J1SFByM3MyN3QrL2Z3SU1MSDA2OHVIRXJCZ2dRQ0tQOE9CSUJBUVN3R0ZBZ2dQVUFEQXlrT0JDZ0FJb0IxNjhmR0dBQ3V2UVIwQU5vUngvZEJBSUY0UlVrY0U3RS9BcnU0YTBYV0c3Q3dIVUVKNENYbjNVSGxHQWZld0VVeU43L2VTTTBNS0IxQU5JWHhJSGZXWmZkQXc0Z1VKMTNKaXh3SFlNa0NLZ2NBUWlrdHdBSkZENlFYZ0RraVpDaWdBS3NwNkYxRWs3WVhnclZnZmdBQWRhMVNFSjErQVZJSXdrTURPbmlqVWZxdCtDUFNJcUFnSFh6MWVoRGlpWHdHRUNVSkhDbll3TFdHVkRkaVNVSVdJSi9WeTdKWG5YWUhjbWdsVmlPc0o2VVV6WVpwcEVoMHZsQWtRVjZxSUFKWXBiUW81bHFlaGpBY2hUMkNXY1JWTllaZ0pDTGt2QW5tVzArWU9nSWY2cUpZbnZWN1Zrb25mbjVlR2dPaVk0d3FhaDBDb2lBY3RVMU1HZWpqcklJcUlydFBjbmlwcXcrME9tbk80UXFBcGRsbHNDZGdpTGdOK0NxWTBMNTZvSHB3YmVtc1NLTVdDbXVPT2dxUW81VlBrdm0vNE1SaWpDcWc3V21TR0Y0SUFKcHdyUFEyZ0RkQVNPT3FHaU1HRkxYSFFtQytwcWdvaU1td0MyWWxnSXFZSk13cnBkQWVwNE80Q2tCQXBPQXdBRFpsZ3ZyZzU2dUdGNEJiVmJIUUFteXZybHZmc0RtcS9FRDhNbko3WUFGdkdrbGY1TFNLUzJjRG9mbnFhUWRXL2ptQTd3bUxJSjErRjVNNE1xd2dwaWlsVG8rOEY1OEs0OU1hcmR5S3Z4Q2NpUjcwWnpSVERmdDlOTlFSeTMxMUZSWGJmWFZXR2V0OWRaY2QrMzExMkNITFhZekFKUnQ5dGxtcTREMjJtV3J6VGJhYnIrZGRncHlueDEzM1hmTG5mZmJtTlU5TndwK3QwMTM0SHV6WGZqYWg4TTl1TitKMjMxWjRBQzRQYmprZ0VjK2VlV1VueUE0NXB4M2JzTG1tbHNlZXYvZmhGOCt1dW1maTM3NjZxeVhBSHJxcU1QdXVleXRUd1o1NXJUWFBzTHJycXZlTys2L3gwNEM3OFA3WGp6d3h6OWUrdXpKTTcrNzhjM25MbjMwMHorUHZQWENZMi9aN2RtTFFMejIxWU1mdlBQZVF5OCs5ZU9IWDM3M2tIRlAvZ1Bmci84Ky9PYlRmNzM4Nzhkdi8veng2KytZKzdyRFh3RDNsNy82RVZCOUIweWYrdlRYUHdQK2IzbWhZOXppOERaQnZWV1FieGMwWEFZUnQwSEZiUStDcVpOZzVVUVlRUXFPMElRbHRPQUpWWmhDREk3dGhUQ01vUXhuU01NYTJ2Q0dPTXloRG5mSXd4NzY4SWRBREtJUWgwakVJaHJ4aUVoTW9oS1h5TVFtT3ZHSlVJeWlGS2RJeFNwYThZcFl6S0lXdDhqRkxucnhpMkFNb3hqSFNNYVdNcHJ4akdoTW94clh5TVkydXZHTmNJeWpIT2RJeHpyYThZNTR6S01lOThqSFB2cnhqNEFNcENBSFNjaENHdktRaUV5a0loZkp5RVk2OHBHUWpLUWtKMG5KU2xyeWtwak1wQ1kzeWNsT2V2S1RvQXlsS0VkSnlsS2E4cFNvVEtVcVY4bktWcnJ5bGJDTXBTeG5TY3RhMnZLV3VNeWxMbmZKeTE3NjhwZkFES1l3aDBuTVlocnptTWhNcGpLWHljeG1Pdk9aYUFnQkFDSDVCQVV5QUJBQUxOZ0F4Z0FKQUFjQUFBVUtJQ0NPWkdtZWFLcWlJUUFoK1FRRk1nQVFBQ3p2QU1ZQUNRQUhBQUFGQ2lBZ2ptUnBubWlxb2lFQUlma0VCVElBRUFBc0JnSEdBQWtBQndBQUJRb2dJSTVrYVo1b3FxSWhBQ0g1QkFVeUFCQUFMQjBCeGdBSkFBY0FBQVVLSUNDT1pHbWVhS3FpSVFBaCtRUUZNZ0FRQUN3MEFjWUFDUUFIQUFBRkNpQWdqbVJwbm1pcW9pRUFJZmtFQlRJQUVBQXNTd0hHQUFrQUJ3QUFCUW9nSUk1a2FaNW9xcUloQUNINUJBVXlBQkFBTEdJQnhnQUpBQWNBQUFVS0lDQ09aR21lYUtxaUlRQTciIC8+JzsKICAgIH0sCiAgICByZWZsZXNoUGFnZU5hdmk6ZnVuY3Rpb24oKXsKICAgICAgICB2YXIgcGFnZT17Y3VycjoxLHRvdGFsUGFnZToxLHByZTp0cnVlLG5leHQ6dHJ1ZSxsc3Q6W119OwogICAgICAgIHBhZ2UuY3Vycj10aGlzLm1vZGVsLmN1cnI7CiAgICAgICAgcGFnZS50b3RhbFBhZ2U9dGhpcy5tb2RlbC50b3RhbFBhZ2U+PTEwPzEwOnRoaXMubW9kZWwudG90YWxQYWdlOwogICAgICAgIHBhZ2UucHJlPXBhZ2UuY3Vycj4xP3RydWU6ZmFsc2U7CiAgICAgICAgcGFnZS5uZXh0PXBhZ2UudG90YWxQYWdlPnBhZ2UuY3Vycj90cnVlOmZhbHNlOwogICAgICAgIGZvcih2YXIgaT0xO2k8PXBhZ2UudG90YWxQYWdlO2krKyl7CiAgICAgICAgICAgIHBhZ2UubHN0LnB1c2goaSk7CiAgICAgICAgfQogICAgICAgIHZhciB0ZW1wbGF0ZT0gJ1wKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InBhZ2VzZSAiaWQ9Ind4ei1wYWdlc2UiPlwKICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJwYWdlLWNvbnRlbnQiPlwKICAgICAgICAgICAgICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9IiA8JSBpZih0aGlzLnByZSl7ICU+IHBhZ2UtbnVtYmVyIDwlfWVsc2V7JT4gZ2xvYmFsLWRpc2FibGVkIDwlfSU+IG1vdS1ldnQiIGRhdGEtcGFnZT0iPCV0aGlzLmN1cnItMSU+Ij7kuIrkuIDpobU8L2E+XAogICAgICAgICAgICAgICAgPCVmb3IodmFyIGkgaW4gdGhpcy5sc3QpeyU+XAogICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJwYWdlLW51bWJlciA8JWlmKHRoaXMubHN0W2ldPT10aGlzLmN1cnIpeyU+IGdsb2JhbC1kaXNhYmxlZCA8JX0lPiIgZGF0YS1wYWdlPSI8JXRoaXMubHN0W2ldJT4iPjwldGhpcy5sc3RbaV0lPjwvc3Bhbj5cCiAgICAgICAgICAgICAgICA8JX0lPlwKICAgICAgICAgICAgICAgIDwvc3Bhbj5cCiAgICAgICAgICAgICAgICA8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGNsYXNzPSIgPCUgaWYodGhpcy5uZXh0KXsgJT4gcGFnZS1udW1iZXIgPCV9ZWxzZXslPiBnbG9iYWwtZGlzYWJsZWQgPCV9JT4gbW91LWV2dCIgZGF0YS1wYWdlPSI8JXRoaXMuY3VycisxJT4iPuS4i+S4gOmhtTwvYT5cCiAgICAgICAgICAgICAgICA8L2Rpdj5cCiAgICAgICAgICAgICAgICAnOwogICAgICAgIHZhciBodG1sPVRlbXBsYXRlRW5naW5lKHRlbXBsYXRlLHBhZ2UpOwogICAgICAgIHRoaXMuVUkucGFnZXNlLmlubmVySFRNTCA9IGh0bWw7CiAgICB9CiB9OwoKCiB2YXIgQ29udHJvbGxlcj1mdW5jdGlvbihtb2RlbCx2aWV3ZXIpewogICAgdGhpcy5tb2RlbD1tb2RlbDsKICAgIHRoaXMudmlld2VyPXZpZXdlcjsKCiAgICB2YXIgX3NlbGY9dGhpczsKCiAgICB0aGlzLnZpZXdlci5zZWFyY2hDbGljay5hdHRhY2goZnVuY3Rpb24oc2VuZGVyLGFyZ3MpewogICAgICAgIF9zZWxmLnNlYXJjaChhcmdzLmN1cnIsYXJncy5rZXl3b3JkKTsKICAgIH0pOwogICAgdGhpcy52aWV3ZXIuY2xvc2VDbGljay5hdHRhY2goZnVuY3Rpb24oKXsKICAgICAgICBfc2VsZi5jbG9zZSgpOwogICAgfSk7CiAgICB0aGlzLnZpZXdlci5lbmdpbmVPcHRDaGFuZ2UuYXR0YWNoKGZ1bmN0aW9uKHNlbmRlcixhcmdzKXsKICAgICAgICBfc2VsZi5zZXRFbmdpbmUoYXJncyk7CiAgICB9KTsKICAgIHRoaXMudmlld2VyLnRvUGFnZUNsaWNrLmF0dGFjaChmdW5jdGlvbihzZW5kZXIsYXJncyl7CiAgICAgICAgX3NlbGYudG9QYWdlKGFyZ3MpOwogICAgfSk7CgogICAgdGhpcy5tb2RlbC5yZXF1ZXN0RXZlbnQuYXR0YWNoKGZ1bmN0aW9uKCl7CiAgICAgICAgX3NlbGYubG9hZGluZygpOwogICAgfSk7IAogICAgdGhpcy5tb2RlbC5jb250ZW50VXBkYXRlZC5hdHRhY2goZnVuY3Rpb24oc3RhdGUpewogICAgICAgIF9zZWxmLnJlZmxlc2goc3RhdGUpOwogICAgfSk7CgogfTsKIENvbnRyb2xsZXIucHJvdG90eXBlPXsKICAgIHNlYXJjaDpmdW5jdGlvbihjdXJyLGFyZ3MpewogICAgICAgIHRoaXMubW9kZWwudXBkYXRlQ3VycihjdXJyKTsKICAgICAgICB0aGlzLm1vZGVsLnVwZGF0ZUtleXdvcmQoYXJncyk7CiAgICAgICAgdGhpcy5tb2RlbC5yZXF1ZXN0KCk7CiAgICAgICAgdGhpcy52aWV3ZXIuc2hvdygpOwogICAgfSwKICAgIHNldEVuZ2luZTpmdW5jdGlvbihlbmdpbmUpewogICAgICAgIHRoaXMubW9kZWwuc2V0RW5naW5lKGVuZ2luZSk7CiAgICAgICAgdGhpcy52aWV3ZXIudXBkYXRlRW5naW5lKCk7CiAgICB9LAogICAgdG9QYWdlOmZ1bmN0aW9uKHRvUGFnZU51bSl7CiAgICAgICAgdGhpcy5tb2RlbC51cGRhdGVDdXJyKHRvUGFnZU51bSk7CiAgICAgICAgdGhpcy5tb2RlbC5yZXF1ZXN0KCk7CiAgICB9LAogICAgY2xvc2U6ZnVuY3Rpb24oKXsKICAgICAgICB0aGlzLm1vZGVsLmRlc3RvcnkoKTsKICAgICAgICB0aGlzLnZpZXdlci5jbG9zZSgpOwogICAgfSwKICAgIGxvYWRpbmc6ZnVuY3Rpb24oKXsKICAgICAgICB0aGlzLnZpZXdlci5sb2FkaW5nKCk7CiAgICB9LAogICAgcmVmbGVzaDpmdW5jdGlvbigpewogICAgICAgIHRoaXMudmlld2VyLnJlZmxlc2goKTsKICAgICAgICB0aGlzLnZpZXdlci5yZWZsZXNoUGFnZU5hdmkoKTsKICAgIH0sCiAgICByZWZsZXNoRW5naW5lTHN0OmZ1bmN0aW9uKCl7CiAgICAgICAgdGhpcy52aWV3ZXIucmVmbGVzaEVuZ2luZUxzdCgpOwogICAgfSwKIH07CgoKCmZ1bmN0aW9uIG5ld0luaXQgKCkgewogICAgLy9yZW1vdmUgYWR2cwogICAgLy9jcmVhdGUgc2VhcmNoIGJhcgogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlci11bmlvbicpLnJlbW92ZSgpOwogICAgdmFyIHRhcmdldE5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyLWluZm8nKTsKICAgIHZhciB3eHpTZWFyY2hCYXJOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGQnKTsKICAgIHd4elNlYXJjaEJhck5vZGUuc2V0QXR0cmlidXRlKCdjbGFzcycsJ2hlYWRlci13eHpiYXIgaGVhZGVyLWluZm8nKTsKICAgIHd4elNlYXJjaEJhck5vZGUuc2V0QXR0cmlidXRlKCdub2RlLXR5cGUnLCdoZWFkZXItYXBwcycpOwogICAgd3h6U2VhcmNoQmFyTm9kZS5pbm5lckhUTUwgPQogICAgICAgICAgICAnPHNwYW4gY2xhc3M9Ind4ei1tZW51IHd4ei1kcm9wZG93biI+XAogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InVzZXItbmFtZSIgaWQ9Ind4ek1lbnVEaXNwbGF5Ij5nb29nbGU8L3NwYW4+XAogICAgICAgICAgICAgICAgPGVtIGNsYXNzPSJpY29uIGljb24tZHJvcGRvd24tYXJyb3ciPjwvZW0+XAogICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJ3eHotbWVudS1jb250ZW50IiBpZD0id3h6X2VuZ2luZUxzdCI+XAogICAgICAgICAgICAgICAgPC91bD5cCiAgICAgICAgICAgIDwvc3Bhbj5cCiAgICAgICAgICAgIDxmb3JtIGNsYXNzPSJzZWFyY2gtZm9ybSIgaWQ9Ind4el9zZWFyY2hGb3JtIj5cCiAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9InNlYXJjaC1xdWVyeSIgcGxhY2Vob2xkZXI9IiDmkJzntKLlhazlvIDliIbkuqvmlofku7YiIGlkPSJ3eHpfaW5wdXQiPlwKICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJidXR0b24iIHZhbHVlPSJHTyIgY2xhc3M9InNlYXJjaC1idXR0b24iIGlkPSJ3eHpfc2VhcmNoQnV0dG9uIj5cCiAgICAgICAgICAgIDwvZm9ybT4nOwogICAgLy9pbnNlcnQgYWZ0ZXIgdGFyZ2V0IG5vZGUKICAgIHRhcmdldE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUod3h6U2VhcmNoQmFyTm9kZSx0YXJnZXROb2RlLm5leHRTbGliaW5nKTsKICAgIC8vYmFja2dyb3VuZAogICAgdmFyIHd4emJnTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgd3h6YmdOb2RlLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCd3eHotYmcnKTsKICAgIHd4emJnTm9kZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKHd4emJnTm9kZSk7CgogICAgLy9jcmVhdGUgZGlzcGxheSBmcmFtZQogICAgdmFyIHd4ekRpYWxvZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHd4ekRpYWxvZ05vZGUuc2V0QXR0cmlidXRlKCdjbGFzcycsJ2RpYWxvZyBkaWFsb2ctZ3JheScpOwogICAgd3h6RGlhbG9nTm9kZS5zZXRBdHRyaWJ1dGUoJ2lkJywnd3h6X215RGl2Jyk7CiAgICB3eHpEaWFsb2dOb2RlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCd6LWluZGV4Ojk5O3Bvc3Rpb246YWJzb2x1dGU7Jyk7CiAgICB3eHpEaWFsb2dOb2RlLnN0eWxlLndpZHRoID0gd2luZG93LmlubmVyV2lkdGggLyAzICogMiArICdweCc7CiAgICB3eHpEaWFsb2dOb2RlLnN0eWxlLmxlZnQgPSAnNTAlJzsgICAgCiAgICB3eHpEaWFsb2dOb2RlLnN0eWxlLm1hcmdpbkxlZnQgPSAoLTEgKiB3aW5kb3cuaW5uZXJXaWR0aCAvIDMpICsgJ3B4JzsgCiAgICB3eHpEaWFsb2dOb2RlLmlubmVySFRNTCA9IAogICAgICAgICdcCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpYWxvZy1oZWFkZXIiIGlkPSJ3eHpfbXlEaXZfdGl0bGUiPlwKICAgICAgICAgICAgICAgIDxoMyA+PHNwYW4gY2xhc3M9ImRpYWxvZy1oZWFkZXItdGl0bGUiPuaQnOe0ojwvc3Bhbj48L2gzPlwKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRpYWxvZy1jb250cm9sIiBpZD0id3h6X2Nsb3NlQnV0dG9uIj48c3BhbiBjbGFzcz0iZGlhbG9nLWljb24gZGlhbG9nLWNsb3NlIGljb24gaWNvbi1jbG9zZSI+PHNwYW4gY2xhc3M9InNpY29uIj7Dlzwvc3Bhbj48L3NwYW4+PC9kaXY+XAogICAgICAgICAgICA8L2Rpdj5cCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImRsZy1iZCBnLWNsZWFyZml4IG9mZmxpbmUtbGlzdC1kaWFsb2ciPlwKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Ind4ei1jb250ZW50Ij5cCiAgICAgICAgICAgICAgICA8L2Rpdj5cCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJvZmZsaW5lLWJvdHRvbSI+XAogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im9mZmxpbmUtcGFnZWluZyI+XAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJwYWdlc2UgIiBpZD0id3h6LXBhZ2VzZSI+XAogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cCiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XAogICAgICAgICAgICA8L2Rpdj5cCiAgICAgICAgJzsKCiAgICAvL2FwcGVuZCB0byBib2R5CgogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLmFwcGVuZENoaWxkKHd4ekRpYWxvZ05vZGUpOwoKCiAgICB2YXIgd3h6U3R5bGVOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICAgIHd4elN0eWxlTm9kZS50ZXh0Q29udGVudCA9IAogICAgJ1wKICAgIC53eHotbWVudXtjdXJzb3I6cG9pbnRlcjsgaGVpZ2h0OjEwMCU7IGRpc3BsYXk6aW5saW5lLWJsb2NrOyB2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7cG9zaXRpb246cmVsYXRpdmU7fVwKICAgIC53eHotbWVudTpob3ZlciAud3h6LW1lbnUtY29udGVudHtkaXNwbGF5OmJsb2NrOyB6LWluZGV4Ojk5fVwKICAgIC53eHotbWVudTpob3ZlciAuaWNvbi1kcm9wZG93bi1hcnJvd3t0cmFuc2Zvcm06cm90YXRlKDE4MCk7fVwKICAgIC53eHotbWVudS1vcHRpb257dGV4dC1hbGlnbjpjZW50ZXI7bGluZS1oZWlnaHQ6MzBweDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOndoaXRlO2NvbG9yOmJsYWNrO2JvcmRlcjoxcHggc29saWQgI2VmZjRmODtib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO31cCiAgICAjd3h6X3NlYXJjaEZvcm17ZGlzcGxheTppbmxpbmUtYmxvY2s7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTt9XAogICAgI3d4el9pbnB1dHtwYWRkaW5nOjAgNHB4OyBib3JkZXI6IDFweCBzb2xpZCAjYzBkOWZlO2JvcmRlci1yYWRpdXM6IDRweDtsaW5lLWhlaWdodDogMjJweDt9XAogICAgI3d4el9zZWFyY2hCdXR0b257Y3Vyc29yOnBvaW50ZXI7IGJhY2tncm91bmQ6ICMzYjhjZmY7Ym9yZGVyOiAycHggc29saWQgIzNiOGNmZjtjb2xvcjogI2Y4ZmJmZjtib3JkZXItcmFkaXVzOiA2cHg7fVwKICAgIC53eHotbWVudS1jb250ZW50e2Rpc3BsYXk6bm9uZTsgcG9zaXRpb246YWJzb2x1dGU7dG9wOjEwMCU7bGVmdDowO3dpZHRoOjgwcHg7fVwKICAgICN3eHpNZW51RGlzcGxheXtsaW5lLWhlaWdodDogNDBweDsgZGlzcGxheTppbmxpbmUtYmxvY2s7IHdpZHRoOjQwcHg7fVwKICAgIC53eHotYmd7cG9zaXRpb246IGZpeGVkOyBsZWZ0OiAwcHg7IHRvcDogMHB4OyBib3R0b206IDBweDsgcmlnaHQ6IDBweDsgei1pbmRleDogNTA7IGJhY2tncm91bmQ6IHJnYigwLCAwLCAwKTsgb3BhY2l0eTogMC41O31cCiAgICAud3h6LWNvbnRlbnR7aGVpZ2h0OiA1MDBweDtsaW5lLWhlaWdodDogMjAwJTt0ZXh0LWFsaWduOiBsZWZ0O3doaXRlLXNwYWNlOiBub3JtYWw7cGFkZGluZzowIDEwcHg7b3ZlcmZsb3c6YXV0bzt9XAogICAgLnd4ei1jbG9zZXttYXJnaW4tcmlnaHQ6MjBweDtpbXBvcnRhbnQ7aGVpZ2h0OjIwcHg7Y3Vyc29yOnBvaW50ZXJ9XAogICAgLnd4ei1uZXh0e21hcmdpbi1yaWdodDoyMHB4O2Zsb2F0OnJpZ2h0O2hlaWdodDoyMHB4O2N1cnNvcjpwb2ludGVyfVwKICAgIC53eHotZnJvbnR7bWFyZ2luLXJpZ2h0OjQwcHg7ZmxvYXQ6cmlnaHQ7aGVpZ2h0OjIwcHg7Y3Vyc29yOnBvaW50ZXJ9XAogICAgLnd4ei1jb250ZW50IGF7Y29sb3I6IzAwNjZGRiFpbXBvcnRhbnQ7Zm9udDogMTRweC8xLjUgYXJpYWwsc2Fucy1zZXJpZiFpbXBvcnRhbnQ7fVwKICAgICc7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkJykuYXBwZW5kQ2hpbGQod3h6U3R5bGVOb2RlKTsgICAgCgoKCgogICAgdmFyIGJkTW9kZWw9bmV3IEJhc2VNb2RlbChbJ2JpbmcnLCdnb29nbGUnXSk7CgogICAgYmRNb2RlbC51cmxzLmJpbmc9J2h0dHA6Ly9jbi5iaW5nLmNvbS9zZWFyY2g/cT0nOwogICAgYmRNb2RlbC51cmxzLmdvb2dsZT0naHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vY3VzdG9tc2VhcmNoL3YxZWxlbWVudD9rZXk9QUl6YVN5Q1ZBWGlVelJZc01MMVB2NlJ3U0cxZ3VubU1pa1R6UXFZJnJzej1maWx0ZXJlZF9jc2UmbnVtPTEwJmhsPWVuJnByZXR0eVByaW50PXRydWUmc291cmNlPWdjc2MmZ3NzPS5jb20mc2lnPWVlOTNmOWFhZTljOWU5ZGJhNWVlYTgzMWQ1MDZlNjlhJmN4PTAxODE3NzE0MzM4MDg5MzE1MzMwNTp5azBxcGd5ZHhfZSZxPSc7CgogICAgYmRNb2RlbC50b0pzb24uYmluZz1mdW5jdGlvbihodG1sKXsKICAgICAgICB2YXIgZGF0YSA9IHsgY3Vyc29yOiB7IGVzdGltYXRlZFJlc3VsdENvdW50OiAwLCByZXN1bHRDb3VudDogMCB9LCByZXN1bHRzOiBbXSB9OwogICAgICAgIC8v5YW25Lit5LiA5p2h57uT5p6c77yaCiAgICAgICAgLy88bGkgY2xhc3M9ImJfYWxnbyI+PGgyPgogICAgICAgIC8vPGEgaHJlZj0iaHR0cDovL3Bhbi5iYWlkdS5jb20vd2FwL2xpbms/dWs9MjkyMzExMDY1OCZhbXA7c2hhcmVpZD0zNDY4ODE1ODM0JmFtcDt0aGlyZD0zIiB0YXJnZXQ9Il9ibGFuayIgaD0iSUQ9U0VSUCw1MTAxLjEiPllGSy08c3Ryb25nPlJLMzM2ODwvc3Ryb25nPi04MTg5LTIwMTUwODIxLnJhcl/lhY3otLnpq5jpgJ/kuIvovb1855m+5bqm5LqRIOe9keebmCAuLi48L2E+PC9oMj4KICAgICAgICAvLzxkaXYgY2xhc3M9ImJfY2FwdGlvbiI+PHA+5paH5Lu25ZCNOllGSy08c3Ryb25nPlJLMzM2ODwvc3Ryb25nPi04MTg5LTIwMTUwODIxLnJhciDmlofku7blpKflsI86NDk3LjU1TSDliIbkuqvogIU65pmo6IqvRkFFIOWIhuS6q+aXtumXtDoyMDE1LTgtMjEgMTQ6MDcg5LiL6L295qyh5pWwOjUgLi4uIOeZu+W9leeZvuW6puS6keWuouaIt+err+mAgTJU56m66Ze0IOeUteiEkeeJiDwvcD4KICAgICAgICAvLzxkaXYgY2xhc3M9ImJfYXR0cmlidXRpb24iIHU9IjB8NTA1OHw0ODM1MjcxMzg2OTkxMjQ4fDhPTWhjR0lJajhHVzA4STQxUjVVb1N5SnBsMl81UG55Ij48Y2l0ZT48c3Ryb25nPnBhbi5iYWlkdS5jb208L3N0cm9uZz4vd2FwL2xpbms/dWs9MjkyMzExMDY1OCZhbXA7c2hhcmVpZD0zNDY4ODE1ODM0JmFtcDsuLi48L2NpdGU+PHNwYW4gY2xhc3M9ImNfdGxieFRyZyI+CiAgICAgICAgLy88c3BhbiBjbGFzcz0iY190bGJ4SCIgSD0iQkFTRTpDQUNIRURQQUdFREVGQVVMVCIgSz0iU0VSUCw1MTAyLjEiPjwvc3Bhbj48L3NwYW4+PC9kaXY+PC9kaXY+PC9saT4KICAgICAgICAvL2h0dHA6Ly93d3cuamI1MS5uZXQvYXJ0aWNsZS80OTA4My5odG3lnKhKU+S4reino+aekEhUTUzlrZfnrKbkuLLnpLrkvovku6PnoIHvvJoKICAgICAgICB2YXIgcmF3UmVzdWx0SFRNTCA9IGh0bWwubWF0Y2goLzxsaVxzY2xhc3M9ImJfYWxnbyI+KC4qPyk8XC9saT4vZyk7CiAgICAgICAgdmFyIGJfcmVzdWx0cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7CiAgICAgICAgYl9yZXN1bHRzLmlubmVySFRNTCA9IHJhd1Jlc3VsdEhUTUw7CiAgICAgICAgdmFyIGJfYWxnb19BcnJ5ID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYl9yZXN1bHRzLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JfYWxnbycpKTsKICAgICAgICBiX2FsZ29fQXJyeS5mb3JFYWNoKGZ1bmN0aW9uKGVsZSwgaW5kZXgpIHsKICAgICAgICAgICAgdmFyIHRlbXBSZXN1bHQgPSB7CiAgICAgICAgICAgICAgICB1bmVzY2FwZWRVcmw6ICIiLAogICAgICAgICAgICAgICAgdGl0bGVOb0Zvcm1hdHRpbmc6ICIiLAogICAgICAgICAgICAgICAgY29udGVudE5vRm9ybWF0dGluZzogIiIKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGVtcFJlc3VsdC51bmVzY2FwZWRVcmwgPSBlbGUucXVlcnlTZWxlY3RvcignaDIgYScpLmdldEF0dHJpYnV0ZSgnaHJlZicpOwogICAgICAgICAgICB0ZW1wUmVzdWx0LnRpdGxlTm9Gb3JtYXR0aW5nID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJ2gyIGEnKS50ZXh0Q29udGVudDsKICAgICAgICAgICAgdGVtcFJlc3VsdC5jb250ZW50Tm9Gb3JtYXR0aW5nID0gZWxlLnF1ZXJ5U2VsZWN0b3IoJy5iX2NhcHRpb24gcCcpLnRleHRDb250ZW50OwogICAgICAgICAgICBkYXRhLnJlc3VsdHMucHVzaCh0ZW1wUmVzdWx0KTsKICAgICAgICB9KTsKICAgICAgICAvLy8v5aSE55CG57uf6K6h57uT5p6cCiAgICAgICAgdmFyIHJhd1Jlc3VsdENvdW50PWh0bWwubWF0Y2goLzxzcGFuLio/c2JfY291bnQuKj8+KC4qPyk8XC9zcGFuPi8pWzFdOwogICAgICAgIHZhciBtYXRjaExzdD1bXTsgICAgCiAgICAgICAgbWF0Y2hMc3Q9cmF3UmVzdWx0Q291bnQubWF0Y2goLyhbMC05XXsxLDN9KCxbMC05XXszfSkrKS9nKTsKICAgICAgICBpZihtYXRjaExzdCE9PW51bGwpey8v5Yy56YWNMTAwLDAwMCwxMTHkuYvnsbvnmoTmg4XlhrUKICAgICAgICAgICAgZGF0YS5jdXJzb3IucmVzdWx0Q291bnQ9bWF0Y2hMc3RbMF0ucmVwbGFjZSgnLCcsJycpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBtYXRjaExzdD1yYXdSZXN1bHRDb3VudC5tYXRjaCgvXGQrL2cpOwogICAgICAgICAgICBpZihtYXRjaExzdCE9PW51bGwpey8v5Yy56YWNMTAg5Liq57uT5p6c5LmL57G755qE5oOF5Ya177yM5Lul5Y+KMS0xMe+8jOWFsTEx5Liq55qE5oOF5Ya1CiAgICAgICAgICAgIGRhdGEuY3Vyc29yLnJlc3VsdENvdW50PW1hdGNoTHN0LnBvcCgpOwogICAgICAgICAgICB9ZWxzZXsvL+WMuemFjeaXoOeahOaDheWGtQogICAgICAgICAgICBkYXRhLmN1cnNvci5yZXN1bHRDb3VudD0wOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGRhdGEuY3Vyc29yLnJlc3VsdENvdW50ID0gcGFyc2VJbnQoIGRhdGEuY3Vyc29yLnJlc3VsdENvdW50LnRvU3RyaW5nKCksMTApOwogICAgICAgIGRhdGEuY3Vyc29yLmVzdGltYXRlZFJlc3VsdENvdW50ID0gZGF0YS5jdXJzb3IucmVzdWx0Q291bnQ7CiAgICAgICAgcmV0dXJuIGRhdGE7ICAgICAgICAKICAgIH07CiAgICBiZE1vZGVsLnRvSnNvbi5nb29nbGU9ZnVuY3Rpb24ocmVzcG9uc2VUZXh0KXsKICAgICAgICB2YXIgZGF0YT1KU09OLnBhcnNlKHJlc3BvbnNlVGV4dCk7CiAgICAgICAgZGF0YS5jdXJzb3IucmVzdWx0Q291bnQ9cGFyc2VJbnQoZGF0YS5jdXJzb3IucmVzdWx0Q291bnQuc3BsaXQoJywnKS5qb2luKCcnKSk7CiAgICAgICAgcmV0dXJuIGRhdGE7ICAgICAgICAKICAgIH07CgogICAgYmRNb2RlbC5jb21waWxlVXJsLmJpbmc9ZnVuY3Rpb24oX3NlbGYpewogICAgICAgIHJldHVybiBfc2VsZi51cmxzLmJpbmcgKyBfc2VsZi5rZXl3b3JkICsgJytzaXRlJTNBcGFuLmJhaWR1LmNvbScgKyAnJmZpcnN0PScgKyAoX3NlbGYuY3Vyci0xKSoxMDsKICAgIH07CiAgICBiZE1vZGVsLmNvbXBpbGVVcmwuZ29vZ2xlPWZ1bmN0aW9uKF9zZWxmKXsKICAgICAgICByZXR1cm4gX3NlbGYudXJscy5nb29nbGUgKyBfc2VsZi5rZXl3b3JkICsgJyZzdGFydD0nICsgKF9zZWxmLmN1cnItMSkqMTA7CiAgICB9OwoKICAgIHZhciBiZFZpZXc9bmV3IFZpZXdlcihiZE1vZGVsLHsKICAgICAgICBpbnB1dEVsZTpkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd3h6X2lucHV0JyksCiAgICAgICAgc2VhcmNoQnRuOmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3eHpfc2VhcmNoQnV0dG9uJyksCiAgICAgICAgY2xvc2VCdG46ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3d4el9jbG9zZUJ1dHRvbicpLAogICAgICAgIG15RGl2OmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3eHpfbXlEaXYnKSwKICAgICAgICBteUNvbnRlbnQ6ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnd4ei1jb250ZW50JyksCiAgICAgICAgbWVudTpkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd3h6TWVudURpc3BsYXknKSwKICAgICAgICBlbmdpbmVCdG5DbGFzc05hbWU6J3d4ei1tZW51LW9wdGlvbicsCiAgICAgICAgZW5naW5lTHN0OmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3eHpfZW5naW5lTHN0JyksCiAgICAgICAgcGFnZXNlOmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3eHotcGFnZXNlJyksCiAgICAgICAgdG9QYWdlQnRuQ2xhc3NOYW1lOidwYWdlLW51bWJlcicsCiAgICAgICAgYmdOb2RlOnd4emJnTm9kZQogICAgfSk7CiAgICB2YXIgYmRDb250cm9sbGVyPW5ldyBDb250cm9sbGVyKGJkTW9kZWwsYmRWaWV3KTsKICAgIGJkQ29udHJvbGxlci5yZWZsZXNoRW5naW5lTHN0KCk7CiAgICBiZENvbnRyb2xsZXIuc2V0RW5naW5lKCdiaW5nJyk7Cgp9CgoKdmFyCnQgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7IC8v55m+5bqm5LqR5oqK5LiA5Lqb5YaF5a655pS+5Yiw5ZCO6Z2i5Yqg6L29LOWboOatpOaIkeiuvue9ruS6huS4gOS4quW7tuaXtuW+queOr++8jOavj+malDIwMG1z6YCJ5oup5LiA5LiL5omA6ZyA55qE5YWD57Sg77yM5b2T5omA6ZyA55qE5YWD57Sg5a2Y5Zyo5pe277yM5byA5aeL6ISa5pys77yM5ZCM5pe25YGc5q2i5bu25pe25b6q546vCiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnVzZXItbmFtZSIpICE9PSBudWxsKSB7CiAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwodCk7CiAgICAgICAgbmV3SW5pdCgpOwogICAgfQogICAgY29uc29sZS5sb2coJ3dhaXRpbmcnKTsKfSwgMjAwKTsK"},{"name":"去百度搜索置顶推广","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"excludes":false,"includes":false,"matches":false,"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["*www.baidu.com*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"ts":1438062724214,"data":{}},"enabled":true,"position":3,"uuid":"a772ab1b-939e-4d19-b65f-926d8c227270","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUJ5Y6755m+5bqm5pCc57Si572u6aG25o6o5bm/Ci8vIEBhdXRob3IJYnVybmluZ2FsbAovLyBAZGVzY3JpcHRpb24J5Y676Zmk5o+S5YWl5Zyo55m+5bqm5pCc57Si57uT5p6c5aS06YOo44CB5bC+6YOo55qE5o6o5bm/6ZO+5o6l44CCCi8vIEB2ZXJzaW9uICAgICAyMDE1LjYuMgovLyBAaW5jbHVkZQkJKnd3dy5iYWlkdS5jb20qCi8vIEBzdXBwb3J0VVJMCQlodHRwOi8vd3d3LmJ1cm5pbmdhbGwuY29tCi8vIEBjb250cmlidXRpb25VUkwJdHJveTQ1MDQwOTQwNUBnbWFpbC5jb218YWxpcGF5LmNvbQovLyBAbmFtZXNwYWNlIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvemgtQ04vdXNlcnMvMzQwMC1heGV0cm95Ci8vID09L1VzZXJTY3JpcHQ9PQoKKGZ1bmN0aW9uKCkgewogICAgZnVuY3Rpb24gYWRkRXZlbnQob2JqLCBldmVudCwgZm4pIHsKCXJldHVybiBvYmouYWRkRXZlbnRMaXN0ZW5lciA/IG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpIDogb2JqLmF0dGFjaEV2ZW50TGlzdGVuZXIoJ29uJyArIGV2ZW50LCBmbik7Cgl9OwoJZnVuY3Rpb24gcmVtb3ZlQWRzKCl7CiAgICB2YXIgYWRsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2NvbnRlbnRfbGVmdD4qJykKICAgIGZvciAodmFyIGk9MDtpPGFkbGlzdC5sZW5ndGg7aSsrKSB7CiAgICAJdmFyIGlkPWFkbGlzdFtpXS5nZXRBdHRyaWJ1dGUoImlkIikKICAgIAkgaWYoaWQ+MTAwMCB8fCBpZD09bnVsbCl7CiAgICAJIAlhZGxpc3RbaV0uc3R5bGUuY3NzVGV4dD0iZGlzcGxheTogbm9uZSAhaW1wb3J0YW50OyIKICAgIAkgCWFkbGlzdFtpXS5yZW1vdmUoYWRsaXN0W2ldKTsKICAgIAkgfTsKICAgIH07CiAgfTsKCWFkZEV2ZW50KGRvY3VtZW50LCdET01Ob2RlSW5zZXJ0ZWQnLGZ1bmN0aW9uKCl7CgkJCXJlbW92ZUFkcygpOwoJCX0pCn0pKCk="},{"name":"百度网盘助手","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"excludes":false,"includes":false,"matches":false,"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["http://yun.baidu.com","http://yun.baidu.com/#*","http://pan.baidu.com/share/manage*","http://pan.baidu.com/disk/recyclebin*","http://yun.baidu.com/pcloud/album/info*"],"orig_includes":["http://pan.baidu.com/*","http://yun.baidu.com/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-end","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"ts":1438062769545,"data":{}},"enabled":true,"position":4,"uuid":"3a4d323a-e1b0-483d-8c6b-f92ff3e06db3","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIOeZvuW6pue9keebmOWKqeaJiwovLyBAYXV0aG9yICAgICAg5pyJ5LiA5Lu955SwCi8vIEBkZXNjcmlwdGlvbiDmmL7npLrnmb7luqbnvZHnm5jmlofku7bnmoTnm7TmjqXpk77mjqUs56qB56C05aSn5paH5Lu26ZyA6KaB5L2/55So55S16ISR566h5a6255qE6ZmQ5Yi2Ci8vIEBuYW1lc3BhY2UgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3poLUNOL3NjcmlwdHMvOTg2LeeZvuW6pue9keebmOWKqeaJiwovLyBAaWNvbiAgICAgICAgaHR0cDovL2ltZy5kdW9sdW9odWEuY29tL2FwcGltZy9zY3JpcHRfZHVwYW5saW5rX2ljb25fNDgucG5nCi8vIEBsaWNlbnNlICAgICBHUEwgdmVyc2lvbiAzCi8vIEBlbmNvZGluZyAgICB1dGYtOAovLyBAZGF0ZSAgICAgICAgMjYvMDgvMjAxMwovLyBAbW9kaWZpZWQgICAgMDUvMDkvMjAxNAovLyBAaW5jbHVkZSAgICAgaHR0cDovL3Bhbi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSAgICAgaHR0cDovL3l1bi5iYWlkdS5jb20vKgovLyBAZXhjbHVkZSAgICAgaHR0cDovL3l1bi5iYWlkdS5jb20KLy8gQGV4Y2x1ZGUgICAgIGh0dHA6Ly95dW4uYmFpZHUuY29tLyMqCi8vIEBleGNsdWRlICAgICBodHRwOi8vcGFuLmJhaWR1LmNvbS9zaGFyZS9tYW5hZ2UqCi8vIEBleGNsdWRlICAgICBodHRwOi8vcGFuLmJhaWR1LmNvbS9kaXNrL3JlY3ljbGViaW4qCi8vIEBleGNsdWRlICAgICBodHRwOi8veXVuLmJhaWR1LmNvbS9wY2xvdWQvYWxidW0vaW5mbyoKLy8gQHJlcXVpcmUgICAgIGh0dHA6Ly9jb2RlLmpxdWVyeS5jb20vanF1ZXJ5LTIuMS4xLm1pbi5qcwovLyBAZ3JhbnQgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICBHTV9zZXRDbGlwYm9hcmQKLy8gQHJ1bi1hdCAgICAgIGRvY3VtZW50LWVuZAovLyBAdmVyc2lvbiAgICAgMi40LjcKLy8gPT0vVXNlclNjcmlwdD09CgoKLyoKICogPT09IOivtOaYjiA9PT0KICpA5L2c6ICFOuacieS4gOS7veeUsAogKkDlrpjnvZE6aHR0cDovL3d3dy5kdW9sdW9odWEuY29tL2Rvd25sb2FkLwogKkBFbWFpbDp5b3V5aWZlbnRpYW5AZ21haWwuY29tCiAqQEdpdDpodHRwOi8vZ2l0Lm9zY2hpbmEubmV0L3lvdXlpZmVudGlhbgogKkDovazovb3ph43nlKjor7fkv53nlZnmraTkv6Hmga8KICoKICoKICogKi8KCgoKCgp2YXIgVkVSU0lPTiA9ICcyLjQuNyc7CnZhciBBUFBOQU1FID0gJ1x1NzY3ZVx1NWVhNlx1N2Y1MVx1NzZkOFx1NTJhOVx1NjI0Yic7CnZhciB0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgoKJCA9ICQgfHwgdW5zYWZlV2luZG93LiQ7CnZhciBkaXNrID0gdW5zYWZlV2luZG93LmRpc2s7CnZhciBGaWxlVXRpbHMgPSB1bnNhZmVXaW5kb3cuRmlsZVV0aWxzOwp2YXIgUGFnZSA9IHVuc2FmZVdpbmRvdy5QYWdlOwp2YXIgVXRpbGl0aWVzID0gdW5zYWZlV2luZG93LlV0aWxpdGllczsKdmFyIHl1bkRhdGEgPSB1bnNhZmVXaW5kb3cueXVuRGF0YTsKdmFyIHJlcXVpcmU9IHVuc2FmZVdpbmRvdy5yZXF1aXJlOwoKKGZ1bmN0aW9uICgpewogICAgdmFyIGlzT3RoZXIgPSBsb2NhdGlvbi5ocmVmLmluZGV4T2YoJzovL3Bhbi5iYWlkdS5jb20vZGlzaycpPT0tMSwKICAgIGRvd25Qcm94eSA9IG51bGwsc2hhcmVEYXRhID0gbnVsbCwKICAgIENhbnZhcyxQYW5jZWwsUmVzdEFQSSxUb2FzdD17fSxlcnJvck1zZywKICAgIGlmcmFtZSA9ICcnLGh0dHBId25kID0gbnVsbCxpbmRleCA9IDAsCiAgICBtc2cgPSBbCiAgICAgICAgJ1x1NTRiMVx1ODBmZFx1NGUwZFx1NGU4Y1x1NGU0OCxcdTRlMDBcdTRlMmFcdTY1ODdcdTRlZjZcdTkwZmRcdTRlMGRcdTkwMDlcdTRmNjBcdThiYTlcdTYyMTFcdTU0OGJcdTRlMmFcdTUyOWUuLi4nLCAvLzAKICAgICAgICAnXHU1YzNjXHU3MzliXHU0ZTAwXHU0ZTJhXHU2NTg3XHU0ZWY2XHU5MGZkXHU0ZTBkXHU5MDA5XHU0ZjYwXHU0ZTBiXHU0ZTJhXHU2YmRiXHU3ZWJmXHU1NTRhLi4uJywgLy8xCiAgICAgICAgJ1x1NGY2MFRNXHU3N2U1XHU5MDUzXHU0ZjYwXHU5MDA5XHU0ZTg2PGI+OTA8L2I+XHU1OTFhXHU0ZTJhXHU2NTg3XHU0ZWY2XHU1NDE3P1x1NjBmM1x1N2QyZlx1NmI3Ylx1NjIxMVx1NTU0YS4uLicsIC8vMgogICAgICAgICc8Yj5cdThiZjdcdTZjNDJcdTVkZjJcdTUzZDFcdTkwMDFcdWZmMGNcdTY1NzBcdTYzNmVcdTRlMGJcdTg4NGNcdTRlMmQuLi48L2I+JywgLy8zCiAgICAgICAgJzxiPlx1OGJlNVx1OTg3NVx1OTc2MjwvYj5cdTRlMGRcdTY1MmZcdTYzMDFcdTY1ODdcdTRlZjZcdTU5MzlcdTU0OGNcdTU5MWFcdTY1ODdcdTRlZjZcdTc2ODQ8Zm9udCBjb2xvcj0icmVkIj48Yj5cdTk0ZmVcdTYzYTVcdTU5MGRcdTUyMzZcdTU0OGNcdTY3ZTVcdTc3MGI8L2I+PC9mb250Plx1ZmYwMScsIC8vNAogICAgICAgICc8Zm9udCBjb2xvcj0icmVkIj5cdThiZjdcdTZjNDJcdThkODVcdTY1ZjZcdTRlODYuLi48L2ZvbnQ+JywgLy81CiAgICAgICAgJzxmb250IGNvbG9yPSJyZWQiPlx1OGJmN1x1NmM0Mlx1NTFmYVx1OTUxOVx1NGU4Ni4uLjwvZm9udD4nLCAvLzYKICAgICAgICAnPGZvbnQgY29sb3I9InJlZCI+XHU4ZmQ0XHU1NmRlXHU2NTcwXHU2MzZlXHU2NWUwXHU2Y2Q1XHU3NmY0XHU4OWM2Li4uPC9mb250PicsIC8vNwogICAgICAgICdcdThiZjdcdThmOTNcdTUxNjVcdTlhOGNcdThiYzFcdTc4MDEnLCAvLzgKICAgICAgICAnXHU5YThjXHU4YmMxXHU3ODAxXHU4ZjkzXHU1MTY1XHU5NTE5XHU4YmVmLFx1OGJmN1x1OTFjZFx1NjViMFx1OGY5M1x1NTE2NScsIC8vOQogICAgICAgICc8Yj5cdTk0ZmVcdTYzYTVcdTVkZjJcdTU5MGRcdTUyMzZcdTUyMzBcdTUyNmFcdTUyMDdcdTY3N2ZcdWZmMDE8L2I+JywgLy8xMAogICAgICAgICdcdTY3MmFcdTc3ZTVcdTk1MTlcdThiZWZcdWZmMGNlcnJubzonLC8vMTEKICAgICAgICAnPGZvbnQgY29sb3I9InJlZCI+PGI+XHU1YzNjXHU3MzliXHU3YWRmXHU3MTM2XHU4ZGVhXHU0ZTg2XHU0ZTg2XHVmZjBjXHU0ZTBkXHU4OTgxXHU1NDRhXHU4YmM5XHU2MjExXHU0ZjYwXHU3Njg0XHU2YzM0XHU4ODY4XHU1NzI4XHU5MWNjXHU5NzYyLi4uPC9iPjwvZm9udD4nLC8vMTIKICAgICAgICAnJwogICAgICAgIF0sCiAgICBidG5DbGFzc0Fycj1bCiAgICAgICAge2NzczonaWNvbi1kb3dubG9hZCcsdGFnOidhJyxpZDonJ30sCiAgICAgICAge2NzczonaWNvbi1idG4tZG93bmxvYWQnLHRhZzonbGknLGlkOicnfSwKICAgICAgICB7Y3NzOidpY29uLWJ0bi1kb3dubG9hZCcsdGFnOicnLGlkOicnfSwKICAgICAgICB7Y3NzOidkb3dubG9hZC1idG4nLHRhZzonJyxpZDonJ30sCiAgICAgICAge2NzczonJyx0YWc6JycsaWQ6J2Rvd25GaWxlQnV0dG9uJ30KICAgIF07CiAgICB0cnl7CiAgICAgICAgZG93blByb3h5ID0gaXNPdGhlciA/IGRpc2sudXRpbC5Eb3dubG9hZFByb3h5IHx8IG51bGwgOiBudWxsOwogICAgICAgIHNoYXJlRGF0YSA9IGlzT3RoZXIgPyBkaXNrLnV0aWwuVmlld1NoYXJlVXRpbHMgfHwgbnVsbCA6IG51bGw7CiAgICB9Y2F0Y2goZSl7fQogICAgaWYoIWlzT3RoZXIgfHwgKGlzT3RoZXIgJiYgIUZpbGVVdGlscykpewogICAgICAgIFJlc3RBUEk9cmVxdWlyZSgiY29tbW9uOndpZGdldC9yZXN0QXBpL3Jlc3RBcGkuanMiKTsKICAgICAgICBDYW52YXM9cmVxdWlyZSgiY29tbW9uOndpZGdldC9jYW52YXNQYW5lbC9jYW52YXNQYW5lbC5qcyIpOwogICAgICAgIFBhbmNlbD1yZXF1aXJlKCJjb21tb246d2lkZ2V0L3BhbmVsL3BhbmVsLmpzIik7CiAgICAgICAgVG9hc3QgPSByZXF1aXJlKCJjb21tb246d2lkZ2V0L3RvYXN0L3RvYXN0LmpzIik7CiAgICAgICAgZXJyb3JNc2cgPSByZXF1aXJlKCJjb21tb246d2lkZ2V0L2Vycm9yTXNnL2Vycm9yTXNnLmpzIik7CiAgICB9CiAgICB2YXIgaGVscGVyTWVudUJ0bnM9KGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIG1lbnVUaXRsZUFycj1bJ1x1NzZmNFx1NjNhNVx1NGUwYlx1OGY3ZCcsJ1x1NTkwZFx1NTIzNlx1OTRmZVx1NjNhNScsJ1x1NjdlNVx1NzcwYlx1OTRmZVx1NjNhNSddLHBhbkJ0bnNBcnI9W10saHRtbD0nJzsKICAgICAgICBmb3IodmFyIGk9MDtpPGJ0bkNsYXNzQXJyLmxlbmd0aDtpKyspewogICAgICAgICAgICB2YXIgaXRlbT1idG5DbGFzc0FycltpXTsKICAgICAgICAgICAgdmFyIHRtcEl0ZW09aXRlbS5pZCE9JycgPyAkKCcjJytpdGVtLmlkKSA6ICQoJy4nK2l0ZW0uY3NzKTsKICAgICAgICAgICAgdmFyIHRtcEFycj1pdGVtLnRhZyE9JycgPyB0bXBJdGVtLnBhcmVudChpdGVtLnRhZykgOiB0bXBJdGVtOwogICAgICAgICAgICBwYW5CdG5zQXJyPSQubWVyZ2UocGFuQnRuc0Fycix0bXBBcnIudG9BcnJheSgpKTsKICAgICAgICB9CiAgICAgICAgaWYoIXBhbkJ0bnNBcnIubGVuZ3RoKXtyZXR1cm4gcGFuQnRuc0Fycjt9CiAgICAgICAgaHRtbCs9JzxkaXYgaWQ9InBhbkhlbHBlck1lbnUiIHN0eWxlPSJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDo5OTk5OTk7Ij4nOwogICAgICAgIGh0bWwrPSc8dWwgY2xhc3M9InB1bGwtZG93bi1tZW51IiBzdHlsZT0iZGlzcGxheTpibG9jazttYXJnaW46MHB4O3BhZGRpbmc6MHB4O2xlZnQ6MHB4O3RvcDowcHg7bGlzdC1zdHlsZTpub25lOyI+JzsKICAgICAgICBmb3IodmFyIGk9MDtpPG1lbnVUaXRsZUFyci5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgaHRtbCs9JzxsaT48YSBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJwYW5IZWxwZXJNZW51QnRuIiB0eXBlPSInK2krJyI+PGI+JyttZW51VGl0bGVBcnJbaV0rJzwvYj48L2E+PC9saT4nOwogICAgICAgIH0KICAgICAgICBodG1sKz0nPGxpIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48YSBocmVmPSInICsgZ2V0QXBpVXJsKCdnZXRuZXd2ZXJzaW9uJywgMSkgKyAnIiB0YXJnZXQ9Il9ibGFuayI+JzsKICAgICAgICBodG1sKz0nPGltZyBpZD0idXBkYXRlaW1nIiB0aXRsZT0iXHU2NzA5XHU0ZTAwXHU0ZWZkXHU3NTMwIiBzdHlsZT0iYm9yZGVyOm5vbmU7Ii8+PC9hPjwvbGk+PC91bD48L2Rpdj4nOwogICAgICAgICQoJzxkaXY+JykuaHRtbChodG1sKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhbkJ0bnNBcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGl0ZW0gPSBwYW5CdG5zQXJyW2ldOwogICAgICAgICAgICBjcmVhdGVIZWxwZXJCdG4oaXRlbSk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUhlbHBlckJ0bihidG4pIHsKICAgICAgICAgICAgdmFyIG5ld25vZGU9YnRuLmNsb25lTm9kZSh0cnVlKSxodG1sPW5ld25vZGUuaW5uZXJIVE1MOwogICAgICAgICAgICAkKG5ld25vZGUpLmF0dHIoJ2lkJywnJykuYXR0cignaHJlZicsJ2phdmFzY3JpcHQ6dm9pZCgwKScpLmF0dHIoJ2RhdGEta2V5JywnZG93bmxvYWRoZWxwZXInKS5hdHRyKCdub2RlLXR5cGUnLCdidG4taGVscGVyJykuYXR0cignb25jbGljaycsJycpLmNzcyh7d2lkdGg6NjN9KS5odG1sKGh0bWwucmVwbGFjZSgvW1x1NEUwMC1cdTlGQTVdezIsNH0oXCguKlwpfFx1ZmYwOC4qXHVmZjA5KT8vLCdcdTdmNTFcdTc2ZDhcdTUyYTlcdTYyNGInKSkudW5iaW5kKCk7CiAgICAgICAgICAgIHZhciBvPSQoJzxkaXYgY2xhc3M9InBhbkhlbHBlckJ0biIgc3R5bGU9ImRpc3BsYXk6aW5saW5lLWJsb2NrOyI+JykuYXBwZW5kKG5ld25vZGUpWzBdOwogICAgICAgICAgICBidG4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobywgYnRuLm5leHRTaWJsaW5nKTsKICAgICAgICAgICAgcmV0dXJuIG87CiAgICAgICAgfQogICAgICAgIHZhciBoZWxwZXJCdG4gPSAkKCcucGFuSGVscGVyQnRuJyksaGVscGVyTWVudSA9ICQoJyNwYW5IZWxwZXJNZW51JyksCiAgICAgICAgbWVudUZ1biA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBoZWxwZXJEb3dubG9hZCgkKHRoaXMpLmF0dHIoJ3R5cGUnKSB8fCAwKTsKICAgICAgICAgICAgaGVscGVyTWVudS5oaWRlKCk7CiAgICAgICAgfTsKICAgICAgICBoZWxwZXJCdG4uY2xpY2sobWVudUZ1bikubW91c2VlbnRlcihmdW5jdGlvbigpIHsKICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYi1pbWctb3ZlcicpOwogICAgICAgICAgICB2YXIgbz0kKHRoaXMpLmNoaWxkcmVuKCdhJyksb2Zmc2V0PW8ub2Zmc2V0KCksdz1vLm91dGVyV2lkdGgoKS1wYXJzZUludChvLmNzcygncGFkZGluZ1JpZ2h0JykpOwogICAgICAgICAgICBoZWxwZXJNZW51LmNoaWxkcmVuKCd1bCcpLmNzcygnd2lkdGgnLCB3LTIpOwogICAgICAgICAgICBoZWxwZXJNZW51LmNzcygndG9wJywgb2Zmc2V0LnRvcCArIG8uaGVpZ2h0KCkgKyBwYXJzZUludChvLmNzcygncGFkZGluZ1RvcCcpKSAtICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKTsKICAgICAgICAgICAgaGVscGVyTWVudS5jc3MoJ2xlZnQnLCBvZmZzZXQubGVmdCkuc2hvdygpOwogICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2ItaW1nLW92ZXInKTsKICAgICAgICAgICAgaGVscGVyTWVudS5oaWRlKCk7CiAgICAgICAgfSk7CiAgICAgICAgJChkb2N1bWVudCkuc2Nyb2xsKGZ1bmN0aW9uKCkgewogICAgICAgICAgICBoZWxwZXJNZW51LmhpZGUoKTsKICAgICAgICB9KTsKICAgICAgICBoZWxwZXJNZW51Lm1vdXNlZW50ZXIoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICQodGhpcykuc2hvdygpOwogICAgICAgIH0pLm1vdXNlbGVhdmUoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICQodGhpcykuaGlkZSgpOwogICAgICAgIH0pOwogICAgICAgIGhlbHBlck1lbnUuZmluZCgnYScpLmNzcygndGV4dC1hbGlnbicsICdjZW50ZXInKTsKICAgICAgICByZXR1cm4gaGVscGVyTWVudS5maW5kKCdhLnBhbkhlbHBlck1lbnVCdG4nKS5jbGljayhtZW51RnVuKS50b0FycmF5KCk7CiAgICB9KSgpOwogICAgaWYoIWhlbHBlck1lbnVCdG5zLmxlbmd0aCl7cmV0dXJuO30KICAgIGNoZWNrVXBkYXRlKCk7CiAgICBmdW5jdGlvbiBoZWxwZXJEb3dubG9hZCh0eXBlKXsKICAgICAgICBpZnJhbWU9Y3JlYXRlRG93bmxvYWRJZnJhbWUoKTsKICAgICAgICBpZnJhbWUuc3JjID0gJ2phdmFzY3JpcHQ6Oyc7CiAgICAgICAgdmFyIGl0ZW1zID0gZ2V0TGlzdFZpZXdDaGVja2VkSXRlbXMoKSxsZW4gPSBpdGVtcy5sZW5ndGg7CiAgICAgICAgaWYoIWxlbikgewogICAgICAgICAgICBpbmRleCA9IDEgPT0gaW5kZXggPyAwIDogMTsKICAgICAgICAgICAgcmV0dXJuIG15VG9hc3QobXNnW2luZGV4XSk7CiAgICAgICAgfWVsc2UgaWYgKGxlbiA+IDkwKSB7CiAgICAgICAgICAgIHJldHVybiBteVRvYXN0KG1zZ1syXSk7CiAgICAgICAgfQogICAgICAgIGlmKDEgPT0gbGVuKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSBpdGVtc1swXS5kbGluazsKICAgICAgICAgICAgaWYoaXNVcmwodXJsKSkgewogICAgICAgICAgICAgICAgaWYoMiA9PSB0eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvd0hlbHBlckRpYWxvZyh0eXBlLCBpdGVtcywgeyJlcnJubyI6IDAsImRsaW5rIjogdXJsfSk7CiAgICAgICAgICAgICAgICB9ZWxzZSBpZigxID09IHR5cGUpewogICAgICAgICAgICAgICAgICAgIGNvcHlUZXh0KHVybCk7CiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICBteVRvYXN0KG1zZ1szXSwxKTsKICAgICAgICAgICAgICAgICAgICBpZnJhbWUuc3JjID0gdXJsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGdldERvd25sb2FkSW5mbyh0eXBlLCBpdGVtcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgIGdldERvd25sb2FkSW5mbyh0eXBlLCBpdGVtcyk7CiAgICAgICAgfQogICAgICAgIGRvd25sb2FkQ291bnRlcihpdGVtcyk7CiAgICB9CiAgICBmdW5jdGlvbiBnZXREb3dubG9hZEluZm8odHlwZSwgaXRlbXMsIHZjb2RlKSB7CiAgICAgICAgaWYoIXZjb2RlKSB7CiAgICAgICAgICAgIHNob3dIZWxwZXJEaWFsb2coaGVscGVyTWVudUJ0bnMubGVuZ3RoKzEsIGl0ZW1zKTsKICAgICAgICAgICAgdmNvZGUgPSB7fTsKICAgICAgICB9CiAgICAgICAgdmFyIHVybCA9ICcnLGRhdGEgPSB7fSxmaWRsaXN0ID0gJycsZmlkcyA9IFtdOwogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgZmlkcy5wdXNoKGl0ZW1zW2ldWydmc19pZCddKTsKICAgICAgICB9CiAgICAgICAgZmlkbGlzdCA9ICdbJyArIGZpZHMuam9pbignLCcpICsgJ10nOwogICAgICAgIGlmKGlzT3RoZXIpewogICAgICAgICAgICBpZihGaWxlVXRpbHMpewogICAgICAgICAgICAgICAgdXJsID0gZGlzay5hcGkuUmVzdEFQSS5TSEFSRV9HRVRfRExJTksgKyAnJnVrPScgKyBGaWxlVXRpbHMuc2hhcmVfdWsgKyAnJnNoYXJlaWQ9JyArIEZpbGVVdGlscy5zaGFyZV9pZCArICcmdGltZXN0YW1wPScgKyBGaWxlVXRpbHMuc2hhcmVfdGltZXN0YW1wICsgJyZzaWduPScgKyBGaWxlVXRpbHMuc2hhcmVfc2lnbiArICcmZmlkX2xpc3Q9JyArIGZpZGxpc3Q7CiAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIHNoYXJlaWQ6RmlsZVV0aWxzLnNoYXJlX2lkLAogICAgICAgICAgICAgICAgICAgIHVrOkZpbGVVdGlscy5zaGFyZV91aywKICAgICAgICAgICAgICAgICAgICBmaWRfbGlzdDpmaWRsaXN0CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIHZhciBjb250ZXh0PXl1bkRhdGEuZ2V0Q29udGV4dCgpOwogICAgICAgICAgICAgICAgaWYodHlwZW9mIHZjb2RlID09J29iamVjdCcpewogICAgICAgICAgICAgICAgICAgIHVybCA9ICcvYXBpL3NoYXJlZG93bmxvYWQ/JyArICd1az0nICsgeXVuRGF0YS5TSEFSRV9VSyArICcmc2hhcmVpZD0nICsgeXVuRGF0YS5TSEFSRV9JRCArICcmdGltZXN0YW1wPScgKyB5dW5EYXRhLlRJTUVTVEFNUCArICcmc2lnbj0nICsgeXVuRGF0YS5TSUdOICsgJyZmaWRfbGlzdD0nICsgZmlkbGlzdDsKICAgICAgICAgICAgICAgICAgICBkYXRhID0gJ2VuY3J5cHQ9MCZwcm9kdWN0PXNoYXJlJnByaW1hcnlpZD0nICsgeXVuRGF0YS5TSEFSRV9JRCArICcmc2hhcmVpZD0nICsgeXVuRGF0YS5TSEFSRV9JRCArICcmdWs9JyArIHl1bkRhdGEuU0hBUkVfVUsgKyAnJmZpZF9saXN0PScgKyBmaWRsaXN0KyAnJmV4dHJhPScgKyAneyJzZWtleSI6IicgKyBjb250ZXh0LnNla2V5ICsgJyJ9JzsKICAgICAgICAgICAgICAgICAgICBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICBlbmNyeXB0OjAsCiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhOid7InNla2V5IjoiJyArIGNvbnRleHQuc2VrZXkgKyAnIn0nLAogICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0OidzaGFyZScsCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlpZDp5dW5EYXRhLlNIQVJFX0lELAogICAgICAgICAgICAgICAgICAgICAgICBzaGFyZWlkOnl1bkRhdGEuU0hBUkVfSUQsCiAgICAgICAgICAgICAgICAgICAgICAgIHVrOnl1bkRhdGEuU0hBUkVfVUssCiAgICAgICAgICAgICAgICAgICAgICAgIGZpZF9saXN0OmZpZGxpc3QKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgdXJsID0gUmVzdEFQSS5HRVRfQ0FQVENIQSArICc/cHJvZD1zaGFyZSc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodHlwZW9mIHZjb2RlID09J29iamVjdCcpewogICAgICAgICAgICAgICAgZGF0YSA9ICQuZXh0ZW5kKGRhdGEsdmNvZGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRhdGEudHlwZT0oaXRlbXMubGVuZ3RoID4xIHx8IGl0ZW1zWzBdWydpc2RpciddKSA/ICJiYXRjaCIgOiAiZGxpbmsiOwogICAgICAgIH1lbHNlewogICAgICAgICAgICB1cmwgPSBSZXN0QVBJLkRPV05fR0VUX0RMSU5LOwogICAgICAgICAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgeXVuRGF0YS5zaWduMikgdHJ5IHsKICAgICAgICAgICAgICAgIHl1bkRhdGEuc2lnbjIgPSBuZXcgRnVuY3Rpb24oInJldHVybiAiICsgeXVuRGF0YS5zaWduMikoKTsKICAgICAgICAgICAgfSBjYXRjaCAobykge30KICAgICAgICAgICAgZGF0YT17CiAgICAgICAgICAgICAgICBzaWduOiBiYXNlNjRFbmNvZGUoeXVuRGF0YS5zaWduMih5dW5EYXRhLnNpZ24zLCB5dW5EYXRhLnNpZ24xKSksCiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHl1bkRhdGEudGltZXN0YW1wLAogICAgICAgICAgICAgICAgYmRzdG9rZW46IHl1bkRhdGEuTVlCRFNUT0tFTiwKICAgICAgICAgICAgICAgIGZpZGxpc3Q6IGZpZGxpc3QsCiAgICAgICAgICAgICAgICB0eXBlOiAoaXRlbXMubGVuZ3RoID4xIHx8IGl0ZW1zWzBdWydpc2RpciddKSA/ICJiYXRjaCIgOiAiZGxpbmsiCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGh0dHBId25kID0gJC5wb3N0KHVybCwgZGF0YSwKICAgICAgICAgICAgZnVuY3Rpb24obykgewogICAgICAgICAgICAgICAgdmFyIGRsaW5rID0gdHlwZW9mIG8uZGxpbmsgPT0nb2JqZWN0JyA/IG8uZGxpbmtbMF1bJ2RsaW5rJ10gOiBvLmRsaW5rOwogICAgICAgICAgICAgICAgaWYoLTIwID09PSBvLmVycm5vKXsKICAgICAgICAgICAgICAgICAgICBnZXREb3dubG9hZEluZm8odHlwZSwgaXRlbXMsIEpTT04uc3RyaW5naWZ5KHZjb2RlKSA9PSd7fScgPyAnZ2V0dmNvZGUnIDogJ3Nob3d2Y29kZScpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYgKDAgPT09IG8uZXJybm8pIHsKICAgICAgICAgICAgICAgICAgICBpZihvLmxpc3QgfHwgZGxpbmspewogICAgICAgICAgICAgICAgICAgICAgICBpZighZGxpbmspewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBvLmxpc3Qsb3B0PWxpc3RbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkbGluaz1vcHQuZGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGxpbmsgPSBkbGluayArICcmemlwbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGdldERvd25sb2FkTmFtZShpdGVtcykpOwogICAgICAgICAgICAgICAgICAgICAgICBvLmRsaW5rID0gZGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaGFyZURhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBKU09OLnBhcnNlKHNoYXJlRGF0YS52aWV3U2hhcmVEYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iai5kbGluayA9IGRsaW5rOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVEYXRhLnZpZXdTaGFyZURhdGEgPSBKU09OLnN0cmluZ2lmeShvYmopOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgxID09IGl0ZW1zLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXNbMF1bJ2RsaW5rJ10gPSBkbGluazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW1zWzBdWydpdGVtJ10pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoaXRlbXNbMF1bJ2l0ZW0nXSkuYXR0cignZGxpbmsnLGRsaW5rKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih5dW5EYXRhLlNIQVJFUEFHRVRZUEUgPT0gInNpbmdsZV9maWxlX3BhZ2UiKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeXVuRGF0YS5GSUxFSU5GTyA9IGl0ZW1zOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXt9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoby52Y29kZV9pbWcgJiYgby52Y29kZV9zdHIpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgby5lcnJubyA9IC0yMDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZjb2RlID09ICdnZXR2Y29kZScpewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIGdldERvd25sb2FkSW5mbyh0eXBlLCBpdGVtcywgZ2V0VkNvZGUoJ3Rlc3QnLG8udmNvZGVfc3RyKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgc2hvd0hlbHBlckRpYWxvZyh0eXBlLCBpdGVtcywgbywgdmNvZGUpOwogICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgc2hvd0hlbHBlckRpYWxvZyh0eXBlLCBpdGVtcywgbywgdmNvZGUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIHNob3dIZWxwZXJEaWFsb2codHlwZSwgaXRlbXMsIG9wdCwgdmNvZGUpIHsKICAgICAgICB2YXIgY2FudmFzID1kb2N1bWVudC5jYW52YXMgPyBkb2N1bWVudC5jYW52YXMgOiBDYW52YXMgPyBuZXcgQ2FudmFzKCkgOiBuZXcgZGlzay51aS5DYW52YXMoKSwKICAgICAgICBfID0gZG9jdW1lbnQuaGVscGVyZGlhbG9nIHx8IGNyZWF0ZUhlbHBlckRpYWxvZygpLGlzVmlzaWJsZSA9IF8uaXNWaXNpYmxlKCksc3RhdHVzPTA7CiAgICAgICAgZG9jdW1lbnQuY2FudmFzID0gY2FudmFzOwogICAgICAgIF8uY2FudmFzID0gY2FudmFzOwogICAgICAgIF8udHlwZSA9IHR5cGU7CiAgICAgICAgXy5pdGVtcyA9IGl0ZW1zOwogICAgICAgIGlmICh0eXBlIDwgaGVscGVyTWVudUJ0bnMubGVuZ3RoKSB7CiAgICAgICAgICAgIGlmICgwID09PSBvcHQuZXJybm8pIHsKICAgICAgICAgICAgICAgIHN0YXR1cz0xOwogICAgICAgICAgICAgICAgaWYodHlwZSA8IDIpIHsKICAgICAgICAgICAgICAgICAgICBfLmNhbnZhcy5zZXRWaXNpYmxlKGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICBfLnNldFZpc2libGUoZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIGlmKDAgPT0gdHlwZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmcmFtZS5zcmMgPSBvcHQuZGxpbms7CiAgICAgICAgICAgICAgICAgICAgICAgIG15VG9hc3QobXNnWzNdLDEpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHlUZXh0KG9wdC5kbGluayk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF8uc2hhcmVmaWxlbmFtZS5pbm5lckhUTUwgPSBnZXREb3dubG9hZE5hbWUoaXRlbXMpOwogICAgICAgICAgICAgICAgXy5zaGFyZWRsaW5rLnZhbHVlID0gb3B0LmRsaW5rOwogICAgICAgICAgICAgICAgXy5kbGluayA9IG9wdC5kbGluazsKICAgICAgICAgICAgICAgIC8vXy5kb3dubG9hZGJ0bi5ocmVmPSBvcHQuZGxpbms7CiAgICAgICAgICAgICAgICBfLmZvY3Vzb2JqID0gXy5zaGFyZWRsaW5rOwogICAgICAgICAgICB9IGVsc2UgaWYoLTE5ID09b3B0LmVycm5vKSB7CiAgICAgICAgICAgICAgICBzdGF0dXM9MjsKICAgICAgICAgICAgICAgIF8udmNvZGVpbWcuc3JjID0gb3B0LmltZzsKICAgICAgICAgICAgICAgIF8udmNvZGVpbWdzcmMgPSBvcHQuaW1nOwogICAgICAgICAgICAgICAgXy52Y29kZXZhbHVlID0gb3B0LnZjb2RlOwogICAgICAgICAgICAgICAgXy52Y29kZXRpcC5pbm5lckhUTUwgPSB2Y29kZSA/IG1zZ1s5XSA6ICcnOwogICAgICAgICAgICAgICAgXy52Y29kZWlucHV0LnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBfLmZvY3Vzb2JqID0gXy52Y29kZWlucHV0OwogICAgICAgICAgICB9ZWxzZSBpZigtMjAgPT1vcHQuZXJybm8pIHsKICAgICAgICAgICAgICAgIHN0YXR1cz0yOwogICAgICAgICAgICAgICAgXy52Y29kZWltZy5zcmMgPSBvcHQudmNvZGVfaW1nOwogICAgICAgICAgICAgICAgXy52Y29kZWltZ3NyYyA9IG9wdC52Y29kZV9pbWc7CiAgICAgICAgICAgICAgICBfLnZjb2RldmFsdWUgPSBvcHQudmNvZGVfc3RyOwogICAgICAgICAgICAgICAgXy52Y29kZXRpcC5pbm5lckhUTUwgPSB2Y29kZSAmJiB2Y29kZSE9J2dldHZjb2RlJyA/IG1zZ1s5XSA6ICcnOwogICAgICAgICAgICAgICAgXy52Y29kZWlucHV0LnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICBfLmZvY3Vzb2JqID0gXy52Y29kZWlucHV0OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgXy5jYW52YXMuc2V0VmlzaWJsZShmYWxzZSk7CiAgICAgICAgICAgICAgICBfLnNldFZpc2libGUoZmFsc2UpOwogICAgICAgICAgICAgICAgcmV0dXJuIG15VG9hc3QoZXJyb3JNc2cgPyBlcnJvck1zZy5FcnJvck1lc3NhZ2Vbb3B0LmVycm5vXSA6IGRpc2sudXRpbC5zaGFyZUVycm9yTWVzc2FnZVtvcHQuZXJybm9dIHx8IChtc2dbMTFdICsgb3B0LmVycm5vKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgXy5sb2FkaW5nLnN0eWxlLmRpc3BsYXkgPSAwPT1zdGF0dXMgPyAnJyA6ICdub25lJzsKICAgICAgICBfLnNob3dkbGluay5zdHlsZS5kaXNwbGF5ID0gMT09c3RhdHVzID8gJycgOiAnbm9uZSc7CiAgICAgICAgXy5zaG93dmNvZGUuc3R5bGUuZGlzcGxheSA9IDI9PXN0YXR1cyA/ICcnIDogJ25vbmUnOwogICAgICAgIF8uY29weXRleHQuc3R5bGUuZGlzcGxheSA9IDE9PXN0YXR1cyA/ICcnIDogJ25vbmUnOwogICAgICAgIGlmICghaXNWaXNpYmxlKSB7CiAgICAgICAgICAgIF8uY2FudmFzLnNldFZpc2libGUodHJ1ZSk7CiAgICAgICAgICAgIF8uc2V0VmlzaWJsZSh0cnVlKTsKICAgICAgICB9CiAgICAgICAgXy5zZXRHcmF2aXR5KFBhbmNlbCA/IFBhbmNlbC5DRU5URVIgOiBkaXNrLnVpLlBhbmVsLkNFTlRFUik7CiAgICAgICAgXy5mb2N1c29iai5mb2N1cygpOwogICAgfQogICAgZnVuY3Rpb24gY3JlYXRlSGVscGVyRGlhbG9nKCkgewogICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9ImRsZy1oZCBiLXJsdiJ0aXRsZT0iXHU2NzA5XHU0ZTAwXHU0ZWZkXHU3NTMwIj48c3BhbiB0aXRsZT0iXHU1MTczXHU5NWVkImlkPSJoZWxwZXJkaWFsb2djbG9zZSJjbGFzcz0iZGxnLWNuciBkbGctY25yLXIiPjwvc3Bhbj48aDM+PGEgaHJlZj0iJytnZXRBcGlVcmwoJ2dldG5ld3ZlcnNpb24nLDEpKycidGFyZ2V0PSJfYmxhbmsic3R5bGU9ImNvbG9yOiMwMDA7Ij4nK0FQUE5BTUUrJyZuYnNwOycgKyBWRVJTSU9OICsgJzwvYT48YSBocmVmPSJqYXZhc2NyaXB0OjsidGl0bGU9Ilx1NzBiOVx1NmI2NFx1NTkwZFx1NTIzNiJpZD0iY29weXRleHQic3R5bGU9ImZsb2F0OnJpZ2h0O21hcmdpbi1yaWdodDoyNDBweDtkaXNwbGF5Om5vbmU7Ij5cdTcwYjlcdTZiNjRcdTU5MGRcdTUyMzY8L2E+PC9oMz48L2Rpdj48ZGl2IGNsYXNzPSJkb3dubG9hZC1tZ3ItZGlhbG9nLW1zZyBjZW50ZXIiaWQ9ImhlbHBlcmxvYWRpbmciPjxiPlx1NjU3MFx1NjM2ZVx1OGQ3Nlx1Njc2NVx1NGUyZC4uLjwvYj48L2Rpdj48ZGl2IGlkPSJzaG93dmNvZGUic3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2Rpc3BsYXk6bm9uZTsiPjxkaXYgY2xhc3M9ImRsZy1iZCBkb3dubG9hZC12ZXJpZnkic3R5bGU9InRleHQtYWxpZ246Y2VudGVyO21hcmdpbi10b3A6MjVweDsiPjxkaXYgY2xhc3M9InZlcmlmeS1ib2R5Ij5cdThiZjdcdThmOTNcdTUxNjVcdTlhOGNcdThiYzFcdTc4MDFcdWZmMWE8aW5wdXQgdHlwZT0idGV4dCJtYXhsZW5ndGg9IjQiY2xhc3M9ImlucHV0LWNvZGUgdmNvZGUiPjxpbWcgd2lkdGg9IjEwMCJoZWlnaHQ9IjMwInNyYz0iImFsdD0iXHU5YThjXHU4YmMxXHU3ODAxXHU4M2I3XHU1M2Q2XHU0ZTJkImNsYXNzPSJpbWctY29kZSI+PGEgY2xhc3M9InVuZGVybGluZSJocmVmPSJqYXZhc2NyaXB0OjsiPlx1NjM2Mlx1NGUwMFx1NWYyMDwvYT48L2Rpdj48ZGl2IGNsYXNzPSJ2ZXJpZnktZXJyb3Iic3R5bGU9InRleHQtYWxpZ246bGVmdDttYXJnaW4tbGVmdDo4NHB4OyI+PC9kaXY+PC9kaXY+PGJyPjxkaXY+PGRpdiBjbGFzcz0iYWxlcnQtZGlhbG9nLWNvbW1hbmRzIGNsZWFyZml4Ij48YSBocmVmPSJqYXZhc2NyaXB0OjsiY2xhc3M9InNidG4gb2theSBwb3N0dmNvZGUiPjxiPlx1Nzg2ZVx1NWI5YTwvYj48L2E+PGEgaHJlZj0iamF2YXNjcmlwdDo7ImNsYXNzPSJkYnRuIGNhbmNlbCI+PGI+XHU1MTczXHU5NWVkPC9iPjwvYT48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGlkPSJzaG93ZGxpbmsic3R5bGU9InRleHQtYWxpZ246Y2VudGVyO2Rpc3BsYXk6bm9uZTsiPjxkaXYgY2xhc3M9ImRsZy1iZCBkb3dubG9hZC12ZXJpZnkiPjxkaXYgc3R5bGU9InBhZGRpbmc6NXB4IDBweDsiPjxiPjxzcGFuIGlkPSJzaGFyZWZpbGVuYW1lIj48L3NwYW4+PC9iPjwvZGl2PjxpbnB1dCB0eXBlPSJ0ZXh0Im5hbWU9InNoYXJlZGxpbmsiaWQ9InNoYXJlZGxpbmsiY2xhc3M9ImlucHV0LWNvZGUibWF4bGVuZ3RoPSIxMDI0InZhbHVlPSIic3R5bGU9IndpZHRoOjUwMHB4O2JvcmRlcjoxcHggc29saWQgIzdGQUREQztwYWRkaW5nOjNweDtoZWlnaHQ6MjRweDsiPjwvZGl2Pjxicj48ZGl2PjxkaXYgY2xhc3M9ImFsZXJ0LWRpYWxvZy1jb21tYW5kcyBjbGVhcmZpeCI+PGEgaHJlZj0iamF2YXNjcmlwdDo7ImNsYXNzPSJzYnRuIG9rYXkgcG9zdGRvd25sb2FkIj48Yj5cdTc2ZjRcdTYzYTVcdTRlMGJcdThmN2Q8L2I+PC9hPjxhIGhyZWY9ImphdmFzY3JpcHQ6OyJjbGFzcz0iZGJ0biBjYW5jZWwiPjxiPlx1NTE3M1x1OTVlZDwvYj48L2E+PC9kaXY+PC9kaXY+PC9kaXY+JywKICAgICAgICBvPSQoJzxkaXYgY2xhc3M9ImItcGFuZWwgZG93bmxvYWQtbWdyLWRpYWxvZyBoZWxwZXJkaWFsb2ciIHN0eWxlPSJ3aWR0aDo1NTBweDsiPicpLmh0bWwoaHRtbCkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7CiAgICAgICAgb1swXS5wYW5lID0gb1swXTsKICAgICAgICB2YXIgXyA9IFBhbmNlbCA/IG5ldyBQYW5jZWwob1swXSkgOiBuZXcgZGlzay51aS5QYW5lbChvWzBdKSx2Y29kZWltZyA9IG8uZmluZCgnaW1nJylbMF0sdmNvZGVpbnB1dCA9IG8uZmluZCgnLnZjb2RlJylbMF0sCiAgICAgICAgc2hhcmVkbGluayA9IG8uZmluZCgnI3NoYXJlZGxpbmsnKVswXSx2Y29kZXRpcCA9IG8uZmluZCgnLnZlcmlmeS1lcnJvcicpWzBdLAogICAgICAgIGNvcHl0ZXh0PSBvLmZpbmQoJyNjb3B5dGV4dCcpWzBdLHBvc3Rkb3dubG9hZEJ0bj1vLmZpbmQoJy5wb3N0ZG93bmxvYWQnKVswXSwKICAgICAgICBkaWFsb2dDbG9zZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2Y29kZWlucHV0LnZhbHVlID0gJyc7CiAgICAgICAgICAgIHZjb2RldGlwLmlubmVySFRNTCA9ICcnOwogICAgICAgICAgICB2Y29kZWltZy5zcmMgPSAnJzsKICAgICAgICAgICAgXy5jYW52YXMuc2V0VmlzaWJsZShmYWxzZSk7CiAgICAgICAgICAgIF8uc2V0VmlzaWJsZShmYWxzZSk7CiAgICAgICAgICAgIGlmIChodHRwSHduZCkge2h0dHBId25kLmFib3J0KCk7fQogICAgICAgIH0sCiAgICAgICAgcG9zdHZjb2RlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmIChodHRwSHduZCkge2h0dHBId25kLmFib3J0KCk7fQogICAgICAgICAgICB2YXIgdiA9IHZjb2RlaW5wdXQudmFsdWUsbGVuID0gdi5sZW5ndGgsbWF4ID0gbXNnLmxlbmd0aCAtIDEsaSA9IG1heCwKICAgICAgICAgICAgdmNvZGUgPSBnZXRWQ29kZSh2LF8udmNvZGV2YWx1ZSk7CiAgICAgICAgICAgIGkgPSAwID09IGxlbiA/IDggOiAobGVuIDwgNCA/IDkgOiBpKTsKICAgICAgICAgICAgdmNvZGV0aXAuaW5uZXJIVE1MID0gbXNnW2ldOwogICAgICAgICAgICBpZiAoaSAhPSBtYXgpIHtyZXR1cm4gdmNvZGVpbnB1dC5mb2N1cygpO30KICAgICAgICAgICAgZ2V0RG93bmxvYWRJbmZvKF8udHlwZSwgXy5pdGVtcywgdmNvZGUpOwogICAgICAgIH0sCiAgICAgICAgcG9zdGRvd25sb2FkID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICAvL2lmKCFlKXtpZnJhbWUuc3JjID0gXy5kbGluazt9CiAgICAgICAgICAgIGlmcmFtZS5zcmMgPSBfLmRsaW5rOwogICAgICAgICAgICBkaWFsb2dDbG9zZSgpOwogICAgICAgICAgICBteVRvYXN0KG1zZ1szXSwxKTsKICAgICAgICB9OwogICAgICAgIF8uX21VSS5wYW5lID0gb1swXTsKICAgICAgICBfLmxvYWRpbmcgPSBvLmZpbmQoJyNoZWxwZXJsb2FkaW5nJylbMF07CiAgICAgICAgXy5zaG93dmNvZGUgPSBvLmZpbmQoJyNzaG93dmNvZGUnKVswXTsKICAgICAgICBfLnNob3dkbGluayA9IG8uZmluZCgnI3Nob3dkbGluaycpWzBdOwogICAgICAgIF8uY29weXRleHQ9IGNvcHl0ZXh0OwogICAgICAgIF8uZG93bmxvYWRidG49cG9zdGRvd25sb2FkQnRuOwogICAgICAgIF8udmNvZGVpbnB1dCA9IHZjb2RlaW5wdXQ7CiAgICAgICAgXy5zaGFyZWRsaW5rID0gc2hhcmVkbGluazsKICAgICAgICBfLnNoYXJlZmlsZW5hbWUgPSBvLmZpbmQoJyNzaGFyZWZpbGVuYW1lJylbMF07CiAgICAgICAgXy52Y29kZWltZyA9IHZjb2RlaW1nOwogICAgICAgIF8udmNvZGV0aXAgPSB2Y29kZXRpcDsKICAgICAgICBfLnZjb2RlaW1nc3JjID0gJyc7CiAgICAgICAgXy52Y29kZXZhbHVlID0gJyc7CiAgICAgICAgXy5mb2N1c29iaiA9IHNoYXJlZGxpbms7CiAgICAgICAgJChjb3B5dGV4dCkuY2xpY2soZnVuY3Rpb24oKXsKICAgICAgICAgICAgY29weVRleHQoXy5kbGluayk7CiAgICAgICAgICAgIHRoaXMuYmx1cigpOwogICAgICAgIH0pOwogICAgICAgICQodmNvZGVpbWcpLnNpYmxpbmdzKCdhJykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZjb2RlaW1nLnNyYyA9IF8udmNvZGVpbWdzcmMgKyAnJicgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgdmNvZGVpbnB1dC5mb2N1cygpOwogICAgICAgIH0pOwogICAgICAgIHZjb2RlaW5wdXQub25rZXlkb3duID0gZnVuY3Rpb24oZSkgewogICAgICAgICAgICBpZiAoMTMgPT0gZS5rZXlDb2RlKSB7cG9zdHZjb2RlKCk7fQogICAgICAgIH07CiAgICAgICAgby5maW5kKCcucG9zdHZjb2RlJykuY2xpY2socG9zdHZjb2RlKTsKICAgICAgICAkKHBvc3Rkb3dubG9hZEJ0bikuY2xpY2socG9zdGRvd25sb2FkKTsKICAgICAgICAkKCcjc2hhcmVkbGluaycpLmZvY3VzaW4oZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMuc3R5bGUuYm94U2hhZG93ID0gJzAgMCAzcHggIzdGQUREQyc7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0KCk7CiAgICAgICAgfSkuZm9jdXNvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHRoaXMuc3R5bGUuYm94U2hhZG93ID0gJyc7CiAgICAgICAgfSkubW91c2VvdmVyKGZ1bmN0aW9uKCkgewogICAgICAgICAgICB0aGlzLnNlbGVjdCgpOwogICAgICAgICAgICB0aGlzLmZvY3VzKCk7CiAgICAgICAgfSkua2V5ZG93bihmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIGlmICgxMyA9PSBlLmtleUNvZGUpIHtwb3N0ZG93bmxvYWQoKTt9CiAgICAgICAgfSk7CiAgICAgICAgJCh3aW5kb3cpLmJpbmQoInJlc2l6ZSIsZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIF8uc2V0R3Jhdml0eShQYW5jZWwgPyBQYW5jZWwuQ0VOVEVSIDogZGlzay51aS5QYW5lbC5DRU5URVIpOwogICAgICAgIH0pOwogICAgICAgIG8uZmluZCgnI2hlbHBlcmRpYWxvZ2Nsb3NlJykuY2xpY2soZGlhbG9nQ2xvc2UpOwogICAgICAgIG8uZmluZCgnLmRidG4nKS5jbGljayhkaWFsb2dDbG9zZSk7CiAgICAgICAgXy5zZXRWaXNpYmxlKGZhbHNlKTsKICAgICAgICBkb2N1bWVudC5oZWxwZXJkaWFsb2cgPSBfOwogICAgICAgIHJldHVybiBfOwogICAgfQogICAgZnVuY3Rpb24gZ2V0VkNvZGUodixrKXsKICAgICAgICByZXR1cm4gRmlsZVV0aWxzID8ge2lucHV0OnYsdmNvZGU6Xy5rfSA6IHt2Y29kZV9pbnB1dDp2LHZjb2RlX3N0cjprfTsKICAgIH0KICAgIGZ1bmN0aW9uIG15VG9hc3QobXNnLCB0eXBlKSB7CiAgICAgICAgdHJ5ewogICAgICAgICAgICB1bnNhZmVXaW5kb3cubXlUb2FzdEluamVjdGlvbihtc2csdHlwZSxpc090aGVyKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH1jYXRjaChlKXt9CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIFRvYXN0ID0ge30sIG9idGFpbixQYW5jZWwgPSBudWxsOwogICAgICAgICAgICBpZiAoaXNPdGhlciAmJiBkaXNrLnVpKSB7CiAgICAgICAgICAgICAgICBvYnRhaW4gPSBkaXNrLnVpLlRvYXN0OwogICAgICAgICAgICAgICAgVG9hc3Qub2J0YWluID0ge307CiAgICAgICAgICAgICAgICBUb2FzdC5vYnRhaW4udXNlVG9hc3QgPSBVdGlsaXRpZXMudXNlVG9hc3Q7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBUb2FzdCA9IHJlcXVpcmUoImNvbW1vbjp3aWRnZXQvdG9hc3QvdG9hc3QuanMiKTsKICAgICAgICAgICAgICAgIFBhbmNlbD1yZXF1aXJlKCJjb21tb246d2lkZ2V0L3BhbmVsL3BhbmVsLmpzIik7CiAgICAgICAgICAgICAgICBvYnRhaW4gPSBUb2FzdC5vYnRhaW47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdmFyIG8gPSBUb2FzdC5vYnRhaW4udXNlVG9hc3QoewogICAgICAgICAgICAgICAgdG9hc3RNb2RlOnR5cGUgPyBvYnRhaW4uTU9ERV9TVUNDRVNTIDpvYnRhaW4uTU9ERV9GQUlMVVJFLAogICAgICAgICAgICAgICAgbXNnOm1zZywKICAgICAgICAgICAgICAgIHN0aWNreTpmYWxzZSwKICAgICAgICAgICAgICAgIHBvc2l0aW9uOlBhbmNlbCA/IFBhbmNlbC5UT1AgOiAoZGlzay51aSA/IGRpc2sudWkuUGFuZWwuVE9QIDogdW5kZWZpbmVkKQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICQoby5fbVVJLnBhbmUpLmNzcyh7CiAgICAgICAgICAgICAgICAgICAgInotaW5kZXgiOjk5OTk5OQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIGlmICghdHlwZSkgewogICAgICAgICAgICAgICAgYWxlcnQobXNnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGNvcHlUZXh0KHRleHQpewogICAgICAgIEdNX3NldENsaXBib2FyZCh0ZXh0KTsKICAgICAgICBteVRvYXN0KG1zZ1sxMF0sMSk7CiAgICB9CiAgICBmdW5jdGlvbiBjcmVhdGVEb3dubG9hZElmcmFtZSgpewogICAgICAgIGlmKGlmcmFtZSl7cmV0dXJuIGlmcmFtZTt9CiAgICAgICAgdmFyIG8gPSAkKCcjaGVscGVyZG93bmxvYWRpZnJhbWUnKTsKICAgICAgICBpZnJhbWU9by5sZW5ndGggPyBvWzBdIDogJyc7CiAgICAgICAgaWYoIWlmcmFtZSkgewogICAgICAgICAgICBpZnJhbWUgPSAkKCc8ZGl2IHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij4nKS5odG1sKCc8aWZyYW1lIHNyYz0iIiBpZD0iaGVscGVyZG93bmxvYWRpZnJhbWUiIG5hbWU9ImhlbHBlcmRvd25sb2FkaWZyYW1lIj48L2lmcmFtZT4nKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KS5maW5kKCcjaGVscGVyZG93bmxvYWRpZnJhbWUnKVswXTsKICAgICAgICB9CiAgICAgICAgJChpZnJhbWUpLmxvYWQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYodGhpcy5zcmM9PSdqYXZhc2NyaXB0OjsnKXtyZXR1cm47fQogICAgICAgICAgICBteVRvYXN0KG1zZ1sxMl0sMCk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGlmcmFtZTsKICAgIH0KICAgIGZ1bmN0aW9uIGdldExpc3RWaWV3Q2hlY2tlZEl0ZW1zKCl7CiAgICAgICAgdmFyIGl0ZW1zPVtdOwogICAgICAgIGlmKHNoYXJlRGF0YSl7CiAgICAgICAgICAgIGl0ZW1zLnB1c2goSlNPTi5wYXJzZShzaGFyZURhdGEudmlld1NoYXJlRGF0YSkpOwogICAgICAgIH1lbHNlIGlmKGlzT3RoZXIpIHsKICAgICAgICAgICAgaWYoRmlsZVV0aWxzKXsKICAgICAgICAgICAgICAgIGl0ZW1zID0gRmlsZVV0aWxzLmdldExpc3RWaWV3Q2hlY2tlZEl0ZW1zKCk7CiAgICAgICAgICAgIH1lbHNlIGlmKHl1bkRhdGEpewogICAgICAgICAgICAgICAgaWYoeXVuRGF0YS5TSEFSRVBBR0VUWVBFID09ICJtdWx0aV9maWxlIil7CiAgICAgICAgICAgICAgICAgICAgaXRlbXM9Z2V0Q2hlY2tJdGVtcygpOwogICAgICAgICAgICAgICAgfWVsc2UgaWYoeXVuRGF0YS5TSEFSRVBBR0VUWVBFID09ICJzaW5nbGVfZmlsZV9wYWdlIil7CiAgICAgICAgICAgICAgICAgICAgaXRlbXM9eXVuRGF0YS5GSUxFSU5GTzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH1lbHNlewogICAgICAgICAgICBpdGVtcz1nZXRDaGVja0l0ZW1zKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBpdGVtczsKICAgIH0KICAgIGZ1bmN0aW9uIGdldENoZWNrSXRlbXMoKXsKICAgICAgICB2YXIgaXRlbXM9W10sYm94Q3NzPSQoJy5saXN0LXNlbGVjdGVkJykubGVuZ3RoID8gJ21vZHVsZS1saXN0LXZpZXcnIDogJ21vZHVsZS1ncmlkLXZpZXcnOwogICAgICAgICQoJ2Rpdi4nICsgYm94Q3NzKS5maW5kKCcuaXRlbS1hY3RpdmUnKS5lYWNoKGZ1bmN0aW9uKGksbyl7CiAgICAgICAgICAgIGl0ZW1zLnB1c2goZ2V0TGlzdFZpZXdDaGVja2VkSXRlbUluZm8obykpOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBpdGVtczsKICAgIH0KICAgIGZ1bmN0aW9uIGdldExpc3RWaWV3Q2hlY2tlZEl0ZW1JbmZvKG9iail7CiAgICAgICAgdmFyIG89JChvYmopLGZzX2lkPW8uYXR0cignZGF0YS1pZCcpLGNhdGVnb3J5PW8uYXR0cignZGF0YS1jYXRlZ29yeScpLAogICAgICAgICAgICBpc2Rpcj1vLmF0dHIoJ2RhdGEtZXh0bmFtZScpPT0nZGlyJyA/IDEgOiAwLAogICAgICAgICAgICBzZXJ2ZXJfZmlsZW5hbWU9by5maW5kKCdbbm9kZS10eXBlPSJuYW1lIl0nKS5hdHRyKCd0aXRsZScpLAogICAgICAgICAgICBkbGluaz1vLmF0dHIoJ2RsaW5rJykgfHwgJyc7CiAgICAgICAgcmV0dXJuIHsnZnNfaWQnOmZzX2lkLCdjYXRlZ29yeSc6Y2F0ZWdvcnksJ2lzZGlyJzppc2Rpciwnc2VydmVyX2ZpbGVuYW1lJzpzZXJ2ZXJfZmlsZW5hbWUsJ2RsaW5rJzpkbGluaywnaXRlbSc6b2JqfTsKICAgIH0KICAgIGZ1bmN0aW9uIGdldERvd25sb2FkTmFtZShpdGVtcykgewogICAgICAgIHZhciBwYWNrTmFtZT1pdGVtc1swXVsnc2VydmVyX2ZpbGVuYW1lJ107CiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDEgfHwgMSA9PSBpdGVtc1swXVsnaXNkaXInXSkgewogICAgICAgICAgICB0cnl7CiAgICAgICAgICAgICAgICBkb3duUHJveHkucHJvdG90eXBlLnNldFBhY2tOYW1lKEZpbGVVdGlscy5wYXJzZURpckZyb21QYXRoKGl0ZW1zWzBdWydwYXRoJ10pLCAhaXRlbXNbMF1bJ2lzZGlyJ10pOwogICAgICAgICAgICAgICAgcGFja05hbWU9IGRvd25Qcm94eS5wcm90b3R5cGUuX21QYWNrTmFtZTsKICAgICAgICAgICAgfWNhdGNoKGUpewogICAgICAgICAgICAgICAgcGFja05hbWU9J1x1MzAxMFx1NjI3OVx1OTFjZlx1NGUwYlx1OGY3ZFx1MzAxMScrcGFja05hbWUrJ1x1N2I0OS56aXAnOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYWNrTmFtZTsKICAgIH0KICAgIGZ1bmN0aW9uIGRvd25sb2FkQ291bnRlcihDKSB7IC8vQzppdGVtcyxCOmlzT25lRmlsZQogICAgICAgIGlmICghaXNPdGhlcikge3JldHVybjt9CiAgICAgICAgdmFyIEYgPSBGaWxlVXRpbHMgPyBGaWxlVXRpbHMuc2hhcmVfdWsgfHwgZGlzay51dGlsLlZpZXdTaGFyZVV0aWxzLnVrIDogeXVuRGF0YS5TSEFSRV9VSywKICAgICAgICBEID0gRmlsZVV0aWxzID8gRmlsZVV0aWxzLnNoYXJlX2lkIDogeXVuRGF0YS5TSEFSRV9JRCwKICAgICAgICBBID0gW10sQiA9ICgxID09IEMubGVuZ3RoICYmIDAgPT0gQ1swXS5pc2RpciksCiAgICAgICAgRyA9IHNoYXJlRGF0YSA/IGRpc2sudXRpbC5WaWV3U2hhcmVVdGlscy5hbGJ1bUlkOiAnJzsKICAgICAgICBmb3IgKHZhciBfIGluIEMpIHsKICAgICAgICAgICAgaWYgKEMuaGFzT3duUHJvcGVydHkoXykpIHsKICAgICAgICAgICAgICAgIHZhciBFID0gewogICAgICAgICAgICAgICAgICAgIGZpZDogQ1tfXS5mc19pZCwKICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogQ1tfXS5jYXRlZ29yeQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIEEucHVzaChFKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBHICYmIEIgJiYgJC5wb3N0KGRpc2suYXBpLlJlc3RBUEkuUENMT1VEX0FMQlVNX0RPV05MT0FEX0NPVU5URVIsIHsKICAgICAgICAgICAgdWs6IEYsCiAgICAgICAgICAgIGFsYnVtX2lkOiBHLAogICAgICAgICAgICBmc19pZDogQ1tfXS5mc19pZAogICAgICAgIH0pOwogICAgICAgICFHICYmICQucG9zdChGaWxlVXRpbHMgPyBkaXNrLmFwaS5SZXN0QVBJLk1JU19DT1VOVEVSIDogUmVzdEFQSS5NSVNfQ09VTlRFUiwgewogICAgICAgICAgICB1azogRiwKICAgICAgICAgICAgZmlsZWxpc3Q6IEpTT04uc3RyaW5naWZ5KEEpLAogICAgICAgICAgICBzaWQ6IEQsCiAgICAgICAgICAgIGN0aW1lOiBGaWxlVXRpbHMgPyBGaWxlVXRpbHMuc2hhcmVfY3RpbWUgOiB5dW5EYXRhLlNIQVJFX1RJTUUsCiAgICAgICAgICAgICJwdWJsaWMiOiBGaWxlVXRpbHMgPyBGaWxlVXRpbHMuc2hhcmVfcHVibGljX3R5cGUgOiB5dW5EYXRhLlNIQVJFUEFHRVRZUEUsCiAgICAgICAgICAgIHQ6IChuZXcgRGF0ZSkuZ2V0VGltZSgpLAogICAgICAgICAgICBfOiBNYXRoLnJhbmRvbSgpCiAgICAgICAgfSk7CiAgICAgICAgIUcgJiYgQiAmJiAkLmdldChGaWxlVXRpbHMgPyBkaXNrLmFwaS5SZXN0QVBJLlNIQVJFX0NPVU5URVIgOiBSZXN0QVBJLlNIQVJFX0NPVU5URVIsIHsKICAgICAgICAgICAgdHlwZTogMSwKICAgICAgICAgICAgc2hhcmVpZDogRCwKICAgICAgICAgICAgdWs6IEYsCiAgICAgICAgICAgIHNpZ246IEZpbGVVdGlscyA/IEZpbGVVdGlscy5zaGFyZV9zaWduIDogeXVuRGF0YS5TSUdOLAogICAgICAgICAgICB0aW1lc3RhbXA6IEZpbGVVdGlscyA/IEZpbGVVdGlscy5zaGFyZV90aW1lc3RhbXAgOiB5dW5EYXRhLlRJTUVTVEFNUCwgICAgICAgICAgICAKICAgICAgICAgICAgdDogbmV3IERhdGUoKS5nZXRUaW1lKCksCiAgICAgICAgICAgIF86IE1hdGgucmFuZG9tKCkKICAgICAgICB9KTsKICAgIH0KfSkoKTsKbG9hZEpzKCdmdW5jdGlvbiBteVRvYXN0SW5qZWN0aW9uKG1zZyx0eXBlLGlzT3RoZXIpe3RyeXt2YXIgVG9hc3Q9e30sb2J0YWluLFBhbmNlbD1udWxsO2lmKGlzT3RoZXImJmRpc2sudWkpe29idGFpbj1kaXNrLnVpLlRvYXN0O1RvYXN0Lm9idGFpbj17fTtUb2FzdC5vYnRhaW4udXNlVG9hc3Q9VXRpbGl0aWVzLnVzZVRvYXN0fWVsc2V7VG9hc3Q9cmVxdWlyZSgiY29tbW9uOndpZGdldC90b2FzdC90b2FzdC5qcyIpO1BhbmNlbD1yZXF1aXJlKCJjb21tb246d2lkZ2V0L3BhbmVsL3BhbmVsLmpzIik7b2J0YWluPVRvYXN0Lm9idGFpbn12YXIgbz1Ub2FzdC5vYnRhaW4udXNlVG9hc3Qoe3RvYXN0TW9kZTp0eXBlP29idGFpbi5NT0RFX1NVQ0NFU1M6b2J0YWluLk1PREVfRkFJTFVSRSxtc2c6bXNnLHN0aWNreTpmYWxzZSxwb3NpdGlvbjpQYW5jZWw/UGFuY2VsLlRPUDooZGlzay51aT9kaXNrLnVpLlBhbmVsLlRPUDp1bmRlZmluZWQpfSk7dHJ5eyQoby5fbVVJLnBhbmUpLmNzcyh7InotaW5kZXgiOjk5OTk5OX0pfWNhdGNoKGUpe319Y2F0Y2goZXJyKXtpZighdHlwZSl7YWxlcnQobXNnKX19fScpOwpmdW5jdGlvbiBiYXNlNjRFbmNvZGUoYSl7dmFyIGIsYyxkLGUsZixnLGg9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8iO2ZvcihkPWEubGVuZ3RoLGM9MCxiPSIiO2Q+Yzspe2lmKGU9MjU1JmEuY2hhckNvZGVBdChjKyspLGM9PWQpe2IrPWguY2hhckF0KGU+PjIpLGIrPWguY2hhckF0KCgzJmUpPDw0KSxiKz0iPT0iO2JyZWFrfWlmKGY9YS5jaGFyQ29kZUF0KGMrKyksYz09ZCl7Yis9aC5jaGFyQXQoZT4+MiksYis9aC5jaGFyQXQoKDMmZSk8PDR8KDI0MCZmKT4+NCksYis9aC5jaGFyQXQoKDE1JmYpPDwyKSxiKz0iPSI7YnJlYWt9Zz1hLmNoYXJDb2RlQXQoYysrKSxiKz1oLmNoYXJBdChlPj4yKSxiKz1oLmNoYXJBdCgoMyZlKTw8NHwoMjQwJmYpPj40KSxiKz1oLmNoYXJBdCgoMTUmZik8PDJ8KDE5MiZnKT4+NiksYis9aC5jaGFyQXQoNjMmZyl9cmV0dXJuIGI7fQpmdW5jdGlvbiBpc1VybCh1cmwpIHsKICAgIHJldHVybiAvXihodHRwfGh0dHBzKTpcL1wvKFtcdy1dKyg6W1x3LV0rKT9AKT9bXHctXSsoXC5bXHctXSspKyg6W1xkXSspPyhbI1wvXD9dW15cczw+OyJcJ10qKT8kLy50ZXN0KHVybCk7Cn0KZnVuY3Rpb24gY2hlY2tVcGRhdGUoKSB7CiAgICB2YXIganMgPSAndmFyIHVwaW5mbz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidXBkYXRlaW1nIik7JzsKICAgIGpzICs9ICd1cGluZm8uc3JjPSInICsgZ2V0QXBpVXJsKCdjaGVja3VwZGF0ZScsIDEpICsgJyI7JzsKICAgIGpzICs9ICd1cGluZm8ub25sb2FkPWZ1bmN0aW9uKCl7JzsKICAgIGpzICs9ICd1cGluZm8ucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmRpc3BsYXk9IiI7JzsKICAgIGpzICs9ICd9JzsKICAgIGxvYWRKcyhqcyk7Cn0KZnVuY3Rpb24gZ2V0QXBpVXJsKGFjdGlvbiwgdHlwZSkgewogICAgcmV0dXJuICdodHRwOi8vYXBwLmR1b2x1b2h1YS5jb20vdXBkYXRlP2FjdGlvbj0nICsgYWN0aW9uICsgJyZzeXN0ZW09c2NyaXB0JmFwcG5hbWU9ZHVwYW5saW5rJmFwcHBvdD1zY3JpcHRqcyZmcm9tcG90PWR1cGFuJnR5cGU9JyArIHR5cGUgKyAnJnZlcnNpb249JyArIFZFUlNJT04gKyAnJnQ9JyArIHQ7Cn0KZnVuY3Rpb24gbG9hZEpzKGpzKSB7CiAgICB2YXIgb0hlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnSEVBRCcpWzBdLAogICAgb1NjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgb1NjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7CiAgICBvU2NyaXB0LnRleHQgPSBqczsKICAgIG9IZWFkLmFwcGVuZENoaWxkKG9TY3JpcHQpOwp9CmZ1bmN0aW9uIGdvb2dsZUFuYWx5dGljcygpIHsKICAgIHZhciBqcyA9ICJ2YXIgX2dhcSA9IF9nYXEgfHwgW107IjsKICAgIGpzICs9ICJfZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS00Mzg1OTc2NC0xJ10pOyI7CiAgICBqcyArPSAiX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7IjsKICAgIGpzICs9ICJmdW5jdGlvbiBnb29nbGVBbmFseXRpY3MoKXsiOwogICAganMgKz0gIgl2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtnYS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IjsKICAgIGpzICs9ICIJZ2EuYXN5bmMgPSB0cnVlO2dhLnNyYyA9ICdodHRwczovL3NzbC5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7IjsKICAgIGpzICs9ICIJdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07IjsKICAgIGpzICs9ICIJcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcykiOwogICAganMgKz0gIn0iOwogICAganMgKz0gImdvb2dsZUFuYWx5dGljcygpOyI7CiAgICBqcyArPSAiX2dhcS5wdXNoKFsnX3RyYWNrRXZlbnQnLCdkdXBhbmxpbmtfc2NyaXB0JyxTdHJpbmcoJyIgKyBWRVJTSU9OICsgIicpXSk7IjsKICAgIGxvYWRKcyhqcyk7Cn0KZ29vZ2xlQW5hbHl0aWNzKCk7CgoKCgo="},{"name":"百度云下载不受限制","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"excludes":false,"includes":false,"matches":false,"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http://pan.baidu.com/share/link?shareid*","http://pan.baidu.com/share/link?uk*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"ts":1439258126351,"data":{}},"enabled":false,"position":5,"file_url":"https://greasyfork.org/scripts/10895-%E7%99%BE%E5%BA%A6%E4%BA%91%E4%B8%8B%E8%BD%BD%E4%B8%8D%E5%8F%97%E9%99%90%E5%88%B6/code/%E7%99%BE%E5%BA%A6%E4%BA%91%E4%B8%8B%E8%BD%BD%E4%B8%8D%E5%8F%97%E9%99%90%E5%88%B6.user.js","uuid":"ae158b33-f6c5-4422-8032-107c3c15ba54","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIOeZvuW6puS6keS4i+i9veS4jeWPl+mZkOWItgovLyBAbmFtZXNwYWNlICAgICAg55m+5bqm5LqR5LiL6L295LiN5Y+X6ZmQ5Yi2Ci8vIEBkZXNjcmlwdGlvbiAgICDmiooic2hhcmUi5pS55Li6IndhcCLnmb7luqbnvZHnm5jkuIvovb3lpKfkuo4yR+eahOaWh+S7tuS4jeeUqOWuieijheS6keeuoeWutgovLyBAdmVyc2lvbiAgICAgICAgMS4wCi8vIEBpbmNsdWRlICAgICAgICBodHRwOi8vcGFuLmJhaWR1LmNvbS9zaGFyZS9saW5rP3NoYXJlaWQqCi8vIEBpbmNsdWRlICAgICAgICBodHRwOi8vcGFuLmJhaWR1LmNvbS9zaGFyZS9saW5rP3VrKgovLyBAcnVuLWF0ICAgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CiAgICAgICAgICAgCihmdW5jdGlvbigpewogIGxvY2F0aW9uLmhyZWYgPSBkb2N1bWVudC5VUkwucmVwbGFjZSgic2hhcmUiLCJ3YXAiKTsKfSkoKTs="},{"name":"百度网页搜索 推广过滤","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["/www\\.baidu\\.com\\/((s|baidu)\\?|#wd|(index.*)?$)/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"ts":1453714707133,"data":{}},"enabled":true,"position":6,"file_url":"https://openuserjs.org/install/HKMHD/%E7%99%BE%E5%BA%A6%E7%BD%91%E9%A1%B5%E6%90%9C%E7%B4%A2_%E6%8E%A8%E5%B9%BF%E8%BF%87%E6%BB%A4.user.js","uuid":"931e9dc8-4cce-4f09-bfd0-5bc210fae71e","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgCQkJ55m+5bqm572R6aG15pCc57SiIOaOqOW5v+i/h+a7pAovLyBAYXV0aG9yCQkJ5p6B5ZOBzqbPic6m5bCP54yrCi8vIEB2ZXJzaW9uCQkJMC4wLjMKLy8gQGRlc2NyaXB0aW9uCQnnmb7luqbnvZHpobXmkJzntKIg5o6o5bm/6L+H5rukCi8vIEBpbmNsdWRlCQkJL3d3d1wuYmFpZHVcLmNvbVwvKChzfGJhaWR1KVw/fCN3ZHwoaW5kZXguKik/JCkvCi8vIEBuYW1lc3BhY2UJCWh0dHA6Ly9iYnMubWF4dGhvbi5jbi90aHJlYWQtODM5ODc3LTEtMi5odG1sCi8vIEBob21lcGFnZQkJaHR0cDovL2Jicy5tYXh0aG9uLmNuL3RocmVhZC04Mzk4NzctMS0yLmh0bWwKLy8gQERvd25sb2FkVVJMCQlodHRwczovL29wZW51c2VyanMub3JnL2luc3RhbGwvSEtNSEQvJUU3JTk5JUJFJUU1JUJBJUE2JUU3JUJEJTkxJUU5JUExJUI1JUU2JTkwJTlDJUU3JUI0JUEyXyVFNiU4RSVBOCVFNSVCOSVCRiVFOCVCRiU4NyVFNiVCQiVBNC51c2VyLmpzCi8vIEB1cGRhdGVVUkwJCWh0dHBzOi8vb3BlbnVzZXJqcy5vcmcvaW5zdGFsbC9IS01IRC8lRTclOTklQkUlRTUlQkElQTYlRTclQkQlOTElRTklQTElQjUlRTYlOTAlOUMlRTclQjQlQTJfJUU2JThFJUE4JUU1JUI5JUJGJUU4JUJGJTg3JUU2JUJCJUE0LnVzZXIuanMKLy8gQGljb24JCQlodHRwOi8vd3d3LmJhaWR1LmNvbS9mYXZpY29uLmljbwovLyBAcnVuLWF0CQkJZG9jdW1lbnQtaWRsZQovLyA9PS9Vc2VyU2NyaXB0PT0KCihmdW5jdGlvbigpewogICAgdmFyIG9Db250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnRfbGVmdCcpOwogICAgdmFyIG9Db250ZW50TGVuID0gb0NvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoOwogICAgdmFyIG9Db250ZW50UGFyZW50ID0gb0NvbnRlbnQucGFyZW50Tm9kZTsKICAgIGlmIChvQ29udGVudExlbiAhPSAxMCAmJiBvQ29udGVudExlbiAhPSAyMCAmJiBvQ29udGVudExlbiAhPSA1MCAmJiBvQ29udGVudExlbiAhPSAxMDApIHsKICAgICAgICB2YXIgYWRsZW4gPSBvQ29udGVudC5jaGlsZHJlblswXS5jbGFzc05hbWUucmVwbGFjZSgvXiB8ICQvLCAnJykuc3BsaXQoJyAnKTsKICAgICAgICBmb3IgKGkgPSBvQ29udGVudExlbiAtIDE7IGkgPD0gb0NvbnRlbnRMZW4gLSAxICYmIGkgIT0gLTE7IGktLSkgewoJCQlhZENsYXNzTGVuID0gb0NvbnRlbnQuY2hpbGRyZW5baV0uY2xhc3NOYW1lLnJlcGxhY2UoL14gfCAkLywgJycpLnNwbGl0KCcgJykubGVuZ3RoOwogICAgICAgICAgICBpZiAoYWRDbGFzc0xlbiA9PSA0IHx8IGFkQ2xhc3NMZW4gPT0gNSB8fCAoYWRDbGFzc0xlbiA9PSAzICYmIG9Db250ZW50LmNoaWxkcmVuW2ldLmNsYXNzTmFtZS5zZWFyY2goJ3Jlc3VsdCcsJ2knKT09LTEpKSB7CiAgICAgICAgICAgICAgICBvQ29udGVudC5yZW1vdmVDaGlsZChvQ29udGVudC5jaGlsZHJlbltpXSk7CgkJCX0gZWxzZSBpZihvQ29udGVudC5jaGlsZHJlbltpXS50YWdOYW1lPT0nQlInKXsKICAgICAgICAgICAgICAgIG9Db250ZW50LnJlbW92ZUNoaWxkKG9Db250ZW50LmNoaWxkcmVuW2ldKTsKCQkJfQogICAgICAgIH0KCQkKICAgICAgICAvL29Db250ZW50LnJlbW92ZUNoaWxkKG9Db250ZW50LmZpcnN0RWxlbWVudENoaWxkKTsKICAgICAgICAvL29Db250ZW50LnJlbW92ZUNoaWxkKG9Db250ZW50Lmxhc3RFbGVtZW50Q2hpbGQpCiAgICB9Cn0pKCk7"},{"name":"百度盘直接下载","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://pan.baidu.com/*","*://yun.baidu.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"ts":1453714997499,"data":{}},"enabled":true,"position":7,"file_url":"https://greasyfork.org/scripts/13638-%E7%99%BE%E5%BA%A6%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD/code/%E7%99%BE%E5%BA%A6%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD.user.js","uuid":"526297f9-aafd-46dc-b892-b53d2588f2f2","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUg55m+5bqm55uY55u05o6l5LiL6L29Ci8vIEBuYW1lc3BhY2UgICAgcGFuLmJhaWR1LmNvbQovLyBAZGVzY3JpcHRpb24gIOWwseS7luWmiOS4jeijheeZvuW6puS6keeuoeWutgovLyBAdmVyc2lvbiAgICAgIDAuMC4xCi8vIEBtYXRjaCAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tLyoKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKbmF2aWdhdG9yLl9fZGVmaW5lR2V0dGVyX18oInBsYXRmb3JtIiwgZnVuY3Rpb24oKXtyZXR1cm4gIkxpbnV4Ijt9KTs="},{"name":"锐捷文档库在全局雅黑下显示不正常修订","options":{"awareOfChrome":false,"comment":"","compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":true,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://doc.ruijie.com.cn/*"],"orig_noframes":null,"orig_run_at":"document-body","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":"document-body"},"storage":{"ts":1453769984681,"data":{}},"enabled":true,"position":8,"file_url":"doc.ruijie.com.cn","uuid":"72e36308-0e27-4c33-9a42-265f7c3e6963","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICDplJDmjbfmlofmoaPlupPlnKjlhajlsYDpm4Xpu5HkuIvmmL7npLrkuI3mraPluLjkv67orqIKLy8gQG5hbWVzcGFjZSAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3VzZXJzLzQKLy8gQGRlc2NyaXB0aW9uICAgICBSZXN0b3JlIFN0eWxpc2ggc3R5bGVzIGZyb20gZGVsZXRpb24gb24gYmFpZHUuY29tCi8vIEB2ZXJzaW9uICAgICAgICAgMS4wCi8vIEBhdXRob3IgICAgICAgICAgbHVhbnR1QHZpcC5xcS5jb20KLy8gQG1hdGNoICAgICAgICAgICAqOi8vZG9jLnJ1aWppZS5jb20uY24vKgovLyBAcnVuLWF0ICAgICAgICAgIGRvY3VtZW50LWJvZHkKLy8gPT0vVXNlclNjcmlwdD09CgpmdW5jdGlvbiBmaXhTdHlsZSgpewogICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJoaWRkZW4tcGhvbmUiKTsKICAgIC8vYWxlcnQoZWxlbWVudFsxXS5pbm5lckhUTUwpOwogICAgZWxlbWVudFsxXS5pbm5lckhUTUw9IueCueWHu+aIkei3s+i9rOWIsOiuuuWdm+WQkOanve+8gSI7Cn0KZml4U3R5bGUoKTs="},{"name":"贴吧回复提醒","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http://*","https://*","ftp://*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":["tieba.baidu.com"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1453874100078,"data":{}},"enabled":false,"position":9,"file_url":"https://greasyfork.org/scripts/5009-%E8%B4%B4%E5%90%A7%E5%9B%9E%E5%A4%8D%E6%8F%90%E9%86%92/code/%E8%B4%B4%E5%90%A7%E5%9B%9E%E5%A4%8D%E6%8F%90%E9%86%92.user.js","uuid":"73ce230c-fbf1-4975-b06a-816827bc01c0","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUJCQnotLTlkKflm57lpI3mj5DphpIKLy8gQGRlc2NyaXB0aW9uCQnmj5DkvpvotLTlkKfmlrDmtojmga/mj5DphpIKLy8gQG5hbWVzcGFjZQkJbm9lMTMyCi8vIEB2ZXJzaW9uCQkJMi4yLjEKLy8gQGluY2x1ZGUJCQlodHRwOi8vKgovLyBAaW5jbHVkZQkJCWh0dHBzOi8vKgovLyBAaW5jbHVkZQkJCWZ0cDovLyoKLy8gQGljb24JCQlodHRwOi8vdGIuaGltZy5iYWlkdS5jb20vc3lzL3BvcnRyYWl0L2l0ZW0vZDQzNDZlNmY2NTMxMzMzMmFjMDYKLy8gQGdyYW50CQkJR01fZ2V0VmFsdWUKLy8gQGdyYW50CQkJR01fc2V0VmFsdWUKLy8gQGdyYW50CQkJR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50CQkJR01fYWRkU3R5bGUKLy8gQHN1cHBvcnRVUkwJCWh0dHA6Ly90aWViYS5iYWlkdS5jb20vZj9rdz1maXJlZm94Ci8vIEBjb250cmlidXRpb25VUkwJbm5ubm9lMTMyQGdtYWlsLmNvbXxhbGlwYXkuY29tCi8vID09L1VzZXJTY3JpcHQ9PQovKgogKiDluqblqJjohJrmnKwg5aSE55CG5Zyw5Z2AIGh0dHA6Ly90aWViYS5iYWlkdS5jb20vdGIvc3RhdGljLWNvbW1vbi9jb21wb25lbnQvY29tbW9uTG9naWMvY29tbW9uL3VzZXJfbWVzc2FnZS9Vc2VyTWVzc2FnZS5qcz92PTE4LjQ2CiAqIDIwMTQvOS8xMCB2ZXJzaW9uIGdldCBmcm9tIGZpcmVidWcKICovCi8vIGh0dHA6Ly9tZXNzYWdlLnRpZWJhLmJhaWR1LmNvbS9pL21zZy9nZXRfZGF0YT91c2VyPXt1aWR9CgovKgp1cGRhdGUgSU5GTzoKdXBkYXRlIDIwMTYvMDQvMTIgOiDmoLflvI/lsI/mlLkKdXBkYXRlIDIwMTYvMDMvMjggOiDnlKhQcm9taXNl6YeN5YaZY2FsbGJhY2sKKi8KdmFyIFRpZWJhbWVzc2FnZSA9IGZ1bmN0aW9uKCl7Cgl0aGlzLmluaXQoKTsKfTsKClRpZWJhbWVzc2FnZS5wcm90b3R5cGUudGltZSA9IDMwMDAwOyAvLyDliLfmlrDml7bpl7QKVGllYmFtZXNzYWdlLnByb3RvdHlwZS51c2VyaW5mbyA9IG51bGw7CS8vIHVzZXJpbmZvClRpZWJhbWVzc2FnZS5wcm90b3R5cGUuaW5mb0FyciA9IG51bGw7CS8vIOa2iOaBr+aVsOaVsOe7hApUaWViYW1lc3NhZ2UucHJvdG90eXBlLnJlbV9saW5rID0gbnVsbDsKVGllYmFtZXNzYWdlLnByb3RvdHlwZS5kaXYgPSBudWxsOyAvLyDmmL7npLpkaXYKVGllYmFtZXNzYWdlLnByb3RvdHlwZS5maXJzdFJ1biA9IHRydWU7ClRpZWJhbWVzc2FnZS5wcm90b3R5cGUucmVtX251bSA9IFsxLDQsNSw5LDEwXTsKVGllYmFtZXNzYWdlLnByb3RvdHlwZS5yZW1fdGV4dCA9IFsi5Liq5paw57KJ5LidIiwi5Liq5paw5Zue5aSNIiwi5Liq5paw57K+5ZOBIiwi5LiqQOaPkOWIsOaIkSIsIuS4quWbnuaUtuermeaPkOmGkiJdOwoKCi8qIC0tLS0tLS0tLS0tLS0tLS1mdW5jdGlvbiBpbmZvLS0tLS0tLS0tLS0tLS0tLS0KICogbmFtZTogaW5pdAogKiBwYXJhbWV0ZXJzOiBlbXB0eQogKiByZXR1cm46IHZvaWQKICog5Yid5aeL5YyW5a+56LGhCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KVGllYmFtZXNzYWdlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKXsKCUdNX2FkZFN0eWxlKCcjcmVtX21haW5fZGl2e3RyYW5zaXRpb246MC4yNXMgZWFzZSBib3gtc2hhZG93LDAuNHMgZWFzZSByaWdodCAwLjRzLDAuNHMgZWFzZSBvcGFjaXR5IDAuNHMgIWltcG9ydGFudDtiYWNrZ3JvdW5kOnJnYmEoMjM1LDIzNSwyMzUsMC44KSAhaW1wb3J0YW50O2JvcmRlcjoxcHggc29saWQgZ3JheSAhaW1wb3J0YW50O2JvdHRvbTo0MHB4ICFpbXBvcnRhbnQ7Ym94LXNoYWRvdzowIDAgM3B4ICM5OTkgIWltcG9ydGFudDtmb250LXNpemU6MCAhaW1wb3J0YW50O21pbi13aWR0aDoxNjBweCAhaW1wb3J0YW50O29wYWNpdHk6MC41ICFpbXBvcnRhbnQ7b3ZlcmZsb3c6aGlkZGVuICFpbXBvcnRhbnQ7cGFkZGluZzowICFpbXBvcnRhbnQ7cG9zaXRpb246Zml4ZWQgIWltcG9ydGFudDtyaWdodDotMTM1cHggIWltcG9ydGFudDt3aWR0aDphdXRvICFpbXBvcnRhbnQ7ei1pbmRleDoxMDAwMCAhaW1wb3J0YW50O30jcmVtX21haW5fZGl2OmhvdmVye3RyYW5zaXRpb246MC4yNXMgZWFzZSBib3gtc2hhZG93LGVhc2UgcmlnaHQgMC40cywwLjNzIGVhc2Ugb3BhY2l0eSAwLjFzICFpbXBvcnRhbnQ7YmFja2dyb3VuZDpyZ2JhKDIzNSwyMzUsMjM1LDAuOCkgIWltcG9ydGFudDtib3JkZXI6MXB4IHNvbGlkIGdyYXkgIWltcG9ydGFudDtib3R0b206NDBweCAhaW1wb3J0YW50O2JveC1zaGFkb3c6MCAwIDNweCAwcHggIzMzMyAhaW1wb3J0YW50O2ZvbnQtc2l6ZTowICFpbXBvcnRhbnQ7bWluLXdpZHRoOjE2MHB4ICFpbXBvcnRhbnQ7b3BhY2l0eToxICFpbXBvcnRhbnQ7b3ZlcmZsb3c6aGlkZGVuICFpbXBvcnRhbnQ7cGFkZGluZzowICFpbXBvcnRhbnQ7cG9zaXRpb246Zml4ZWQgIWltcG9ydGFudDtyaWdodDowICFpbXBvcnRhbnQ7d2lkdGg6YXV0byAhaW1wb3J0YW50O3otaW5kZXg6MTAwMDAgIWltcG9ydGFudDt9LnJlbV9pdGVte2ZvbnQtc2l6ZToxNnB4ICFpbXBvcnRhbnQ7aGVpZ2h0OjMycHggIWltcG9ydGFudDtsaW5lLWhlaWdodDozMnB4ICFpbXBvcnRhbnQ7dGV4dC1hbGlnbjpsZWZ0ICFpbXBvcnRhbnQ7fSNyZW1fbWFpbl9kaXYgPiAucmVtX2l0ZW0gPiBhe2JhY2tncm91bmQ6bm9uZSAhaW1wb3J0YW50O2NvbG9yOiMxMTEgIWltcG9ydGFudDtkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnQ7Zm9udC1mYW1pbHk6Ik1pY3Jvc29mdCBZYWhlaSIgIWltcG9ydGFudDtmb250LXdlaWdodDpub3JtYWwgIWltcG9ydGFudDtoZWlnaHQ6MzJweCAhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjMycHggIWltcG9ydGFudDtwYWRkaW5nOjAgNnB4ICFpbXBvcnRhbnQ7bWFyZ2luOiAwICFpbXBvcnRhbnQ7fS5yZW1faXRlbTpub3QoOmxhc3QtY2hpbGQpe2JvcmRlci1ib3R0b206MXB4IHNvbGlkICM2NjYgIWltcG9ydGFudDt9Jyk7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS1mdW5jdGlvbiBpbmZvLS0tLS0tLS0tLS0tLS0tLS0KICogbmFtZTogY3JlYXRlRGl2CiAqIHBhcmFtZXRlcnM6IGVtcHR5CiAqIHJldHVybjogdm9pZAogKiDliJvlu7rmtojmga9kaXYKICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwpUaWViYW1lc3NhZ2UucHJvdG90eXBlLmNyZWF0ZURpdiA9IGZ1bmN0aW9uKCl7Cgl2YXIgX3RoaXMgPSB0aGlzOwoJaWYoX3RoaXMuaXNFeGlzdERpdil7CgkJX3RoaXMucmVtb3ZlRGl2KCk7Cgl9CglfdGhpcy5kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCV90aGlzLmRpdi5pZCA9ICJyZW1fbWFpbl9kaXYiOwoJX3RoaXMuZGl2LnAgPSBfdGhpczsKCWRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoX3RoaXMuZGl2KTsKfQoKLyogLS0tLS0tLS0tLS0tLS0tLWZ1bmN0aW9uIGluZm8tLS0tLS0tLS0tLS0tLS0tLQogKiBuYW1lOiBpc0V4aXN0RGl2CiAqIHBhcmFtZXRlcnM6IGVtcHR5CiAqIHJldHVybjogQm9vbGVhbgogKiDmtojmga9kaXbmmK/lkKblrZjlnKgKICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwpUaWViYW1lc3NhZ2UucHJvdG90eXBlLmlzRXhpc3REaXYgPSBmdW5jdGlvbigpewoJdmFyIHIgPSBCb29sZWFuKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZW1fbWFpbl9kaXYiKSk7CglyZXR1cm4gcjsKfQoKLyogLS0tLS0tLS0tLS0tLS0tLWZ1bmN0aW9uIGluZm8tLS0tLS0tLS0tLS0tLS0tLQogKiBuYW1lOiByZW1vdmVEaXYKICogcGFyYW1ldGVyczogZW1wdHkKICogcmV0dXJuOiB2b2lkCiAqIOWIoOmZpOa2iOaBr2RpdgogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovClRpZWJhbWVzc2FnZS5wcm90b3R5cGUucmVtb3ZlRGl2ID0gZnVuY3Rpb24oKXsKCXZhciBfdGhpcyA9IHRoaXM7Cgl2YXIgZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJlbV9tYWluX2RpdiIpOwoJaWYoQm9vbGVhbihkaXYpKXsKCQlkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpOwoJfTsKCV90aGlzLmRpdiA9IG51bGw7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS1mdW5jdGlvbiBpbmZvLS0tLS0tLS0tLS0tLS0tLS0KICogbmFtZTogY2xlYXJEaXYKICogcGFyYW1ldGVyczogZW1wdHkKICogcmV0dXJuOiB2b2lkCiAqIOa4heepuua2iOaBr2RpdgogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovClRpZWJhbWVzc2FnZS5wcm90b3R5cGUuY2xlYXJEaXYgPSBmdW5jdGlvbigpewoJdmFyIF90aGlzID0gdGhpczsKCXZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVtX21haW5fZGl2Iik7CglpZihCb29sZWFuKGRpdikpewoJCWRpdi5pbm5lckhUTUwgPSAnJzsKCX07Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS1mdW5jdGlvbiBpbmZvLS0tLS0tLS0tLS0tLS0tLS0KICogbmFtZTogYWRkTm9kZQogKiBwYXJhbWV0ZXJzOiBBcnJheQogKiByZXR1cm46ICgwfOaIkOWKnykgKOWFtuS7luWAvHzplJnor6/kv6Hmga8pCiAqIOeUqOWPguaVsOS8oOi/m+eahOaVsOe7hOW+gGRpduWGhea3u+WKoOWtkOiKgueCuQogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAqLwpUaWViYW1lc3NhZ2UucHJvdG90eXBlLmFkZE5vZGUgPSBmdW5jdGlvbigpewoJdmFyIF90aGlzID0gdGhpczsKCXZhciBpdGVtX2RpdixpdGVtX2xpbms7CglpZighX3RoaXMuZGl2KXsKCQlyZXR1cm4gJ2RpduS4jeWtmOWcqO+8gSc7Cgl9CgoJZm9yKHZhciBpID0gMDtpIDwgX3RoaXMuaW5mb0Fyci5sZW5ndGg7aSsrKXsKCQlpZihfdGhpcy5pbmZvQXJyW2ldID09IDApewoJCQljb250aW51ZTsKCQl9CgkJaXRlbV9kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKCQlpdGVtX2xpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7CgoJCWl0ZW1fZGl2LmNsYXNzTmFtZSA9ICJyZW1faXRlbSI7CgkJaXRlbV9saW5rLnRleHRDb250ZW50ID0gX3RoaXMuaW5mb0FycltpXSArIF90aGlzLnJlbV90ZXh0W2ldOwoJCWl0ZW1fbGluay5zZXRBdHRyaWJ1dGUoInR5cGUiLGkpOwoJCWl0ZW1fbGluay50YXJnZXQgPSAiX2JsYW5rIjsKCQlpdGVtX2xpbmsuaHJlZiA9IF90aGlzLnJlbV9saW5rW2ldOwoKCQlpdGVtX2xpbmsuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsX3RoaXMub3BlbkxpbmssZmFsc2UpOwoJCWl0ZW1fZGl2LmFwcGVuZENoaWxkKGl0ZW1fbGluayk7CgkJX3RoaXMuZGl2LmFwcGVuZENoaWxkKGl0ZW1fZGl2KTsKCX0KCXJldHVybiAwOwp9CgovKiAtLS0tLS0tLS0tLS0tLS0tZnVuY3Rpb24gaW5mby0tLS0tLS0tLS0tLS0tLS0tCiAqIG5hbWU6IGdldFVzZXJpbmZvCiAqIHBhcmFtZXRlcnM6IHJzLHJqCiAqIHJldHVybjogdm9pZAogKiDojrflj5bnlKjmiLfkv6Hmga/kv53lrZjliLB0aGlzLnVzZXJpbmZvCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KVGllYmFtZXNzYWdlLnByb3RvdHlwZS5nZXRVc2VyaW5mbyA9IGZ1bmN0aW9uKHJzLHJqKXsKCXZhciBfdGhpcyA9IHRoaXM7Cgl2YXIgeGhyID0gR01feG1saHR0cFJlcXVlc3QoewoJCW1ldGhvZDogIkdFVCIsCgkJdXJsOiAiaHR0cDovL3RpZWJhLmJhaWR1LmNvbS9mL3VzZXIvanNvbl91c2VyaW5mbyIsCgkJc3luY2hyb25vdXM6ZmFsc2UsCgkJaGVhZGVyczogewoJCQkiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCIsCS8vIElmIG5vdCBzcGVjaWZpZWQsIG5hdmlnYXRvci51c2VyQWdlbnQgd2lsbCBiZSB1c2VkLgoJCQkiQWNjZXB0IjogInRleHQveG1sIgkJCS8vIElmIG5vdCBzcGVjaWZpZWQsIGJyb3dzZXIgZGVmYXVsdHMgd2lsbCBiZSB1c2VkLgoJCX0sCgkJdGltZW91dDozMDAwMCwKCQlvbmVycm9yOmZ1bmN0aW9uKHIpewoJCQlyaihyLnN0YXR1c1RleHQpOwoJCX0sCgkJb25sb2FkOmZ1bmN0aW9uKHIpewoJCQlpZihyLnN0YXR1cyAhPT0gMjAwKXsKCQkJCXJqKHIuc3RhdHVzKTsKCQkJfQoJCQl0cnl7CgkJCQlfdGhpcy51c2VyaW5mbyA9IEpTT04ucGFyc2Uoci5yZXNwb25zZVRleHQpOwoJCQkJX3RoaXMucmVtX2xpbmsgPSBbCgkJCQkiaHR0cDovL3RpZWJhLmJhaWR1LmNvbS9pL3N5cy9qdW1wP3U9IiArIF90aGlzLnVzZXJpbmZvLmRhdGEudXNlcl9wb3J0cmFpdCArICImdHlwZT1mYW5zIiwKCQkJCSJodHRwOi8vdGllYmEuYmFpZHUuY29tL2kvc3lzL2p1bXA/dT0iICsgX3RoaXMudXNlcmluZm8uZGF0YS51c2VyX3BvcnRyYWl0ICsgIiZ0eXBlPXJlcGx5bWUiLAoJCQkJImh0dHA6Ly90aWViYS5iYWlkdS5jb20vaS9zeXMvanVtcD91PSIgKyBfdGhpcy51c2VyaW5mby5kYXRhLnVzZXJfcG9ydHJhaXQgKyAiJnR5cGU9ZmVhdHVyZSIsCgkJCQkiaHR0cDovL3RpZWJhLmJhaWR1LmNvbS9pL3N5cy9qdW1wP3U9IiArIF90aGlzLnVzZXJpbmZvLmRhdGEudXNlcl9wb3J0cmFpdCArICImdHlwZT1hdG1lIiwKCQkJCSJodHRwOi8vdGllYmEuYmFpZHUuY29tL3BtYy9yZWN5Y2xlIgoJCQkJXTsKCQkJCXJzKCdzdWNjZXNzJyk7CgkJCX1jYXRjaChlKXsKCQkJCXJqKGUpOwoJCQl9CgkJfQoJfSk7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS1mdW5jdGlvbiBpbmZvLS0tLS0tLS0tLS0tLS0tLS0KICogbmFtZTogZ2V0TWVzc2FnZURhdGEKICogcGFyYW1ldGVyczogcnMscmoKICogcmV0dXJuOiB2b2lkCiAqIOiOt+WPlui0tOWQp+acquivu+a2iOaBr+aVsOebruaVsOaNruS/neWtmOWIsHRoaXMuaW5mb0FycgogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovClRpZWJhbWVzc2FnZS5wcm90b3R5cGUuZ2V0TWVzc2FnZURhdGEgPSBmdW5jdGlvbihycyxyail7Cgl2YXIgX3RoaXMgPSB0aGlzOwoJdmFyIHhocixyZXNwb25zZSxyZXNwb25zZV9hcnIsaW5mb19hcnIgPSBbXTsKCXhociA9IEdNX3htbGh0dHBSZXF1ZXN0KHsKCQltZXRob2Q6ICJHRVQiLAoJCXVybDogImh0dHA6Ly9tZXNzYWdlLnRpZWJhLmJhaWR1LmNvbS9pL21zZy9nZXRfZGF0YT91c2VyPSIgKyBfdGhpcy51c2VyaW5mby5kYXRhLnVzZXJfcG9ydHJhaXQsCgkJc3luY2hyb25vdXM6dHJ1ZSwKCQloZWFkZXJzOiB7CgkJCSJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIiwJLy8gSWYgbm90IHNwZWNpZmllZCwgbmF2aWdhdG9yLnVzZXJBZ2VudCB3aWxsIGJlIHVzZWQuCgkJCSJBY2NlcHQiOiAidGV4dC94bWwiCQkJLy8gSWYgbm90IHNwZWNpZmllZCwgYnJvd3NlciBkZWZhdWx0cyB3aWxsIGJlIHVzZWQuCgkJfSwKCQl0aW1lb3V0OjMwMDAwLAoJCW9uZXJyb3I6ZnVuY3Rpb24ocil7CgkJCXJqKHIuc3RhdHVzVGV4dCk7CgkJfSwKCQlvbmxvYWQ6ZnVuY3Rpb24ocil7CgkJCWlmKHIuc3RhdHVzICE9PSAyMDApewoJCQkJcmooci5zdGF0dXMpOwoJCQl9CgkJCXJlc3BvbnNlID0gci5yZXNwb25zZVRleHQ7CgoJCQlpZihyZXNwb25zZS5pbmRleE9mKCJpbml0SXRpZWJhTWVzc2FnZSIpICE9IDAgfHwgcmVzcG9uc2UubGVuZ3RoID4gMTUwKXsKCQkJCWNvbnNvbGUubG9nKCfmjqXmlLbmlbDmja7moLzlvI/plJnor6/vvIHvvIjotLTlkKflm57lpI3mj5DphpLohJrmnKzvvIknKTsKCQkJCXJldHVybjsKCQkJfQoKCQkJcmVzcG9uc2VfYXJyID0gcmVzcG9uc2UucmVwbGFjZSgvaW5pdEl0aWViYU1lc3NhZ2VcKFxbLywiIikucmVwbGFjZSgvXF1cKTsvZywiIikuc3BsaXQoIiwiKTsKCQkJaW5mb19hcnIucHVzaChyZXNwb25zZV9hcnJbMF0pOwoJCQlpbmZvX2Fyci5wdXNoKHJlc3BvbnNlX2FyclszXSk7CgkJCWluZm9fYXJyLnB1c2gocmVzcG9uc2VfYXJyWzRdKTsKCQkJaW5mb19hcnIucHVzaChyZXNwb25zZV9hcnJbOF0pOwoJCQlpbmZvX2Fyci5wdXNoKHJlc3BvbnNlX2Fycls5XSk7CgkJCWlmKCEoaW5mb19hcnJbMF0gfHwgaW5mb19hcnJbMV0gfHwgaW5mb19hcnJbMl0gfHwgaW5mb19hcnJbM10gfHwgaW5mb19hcnJbNF0pKXsKCQkJCWNvbnNvbGUubG9nKCfml6Dlj6/nlKjmlbDmja7vvIEnKTsKCQkJfQoJCQlfdGhpcy5pbmZvQXJyID0gaW5mb19hcnI7CgkJCS8vIF90aGlzLmluZm9BcnIgPSBbMSwyLDMsNCw1XTsgLy8gdGVzdAoJCQlycygnc3VjY2VzcycpOwoJCX0KCX0pOwp9CgovKiAtLS0tLS0tLS0tLS0tLS0tZnVuY3Rpb24gaW5mby0tLS0tLS0tLS0tLS0tLS0tCiAqIG5hbWU6IGdldE1lc3NhZ2VEYXRhCiAqIHBhcmFtZXRlcnM6IGVtcHR5CiAqIHJldHVybjogKDB85oiQ5YqfKSAo5YW25LuW5YC8fOmUmeivr+S/oeaBrykKICog6I635Y+W6LS05ZCn5pyq6K+75raI5oGv5pWw55uu5pWw5o2uCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KVGllYmFtZXNzYWdlLnByb3RvdHlwZS5tYWluRnVuY3Rpb24gPSBmdW5jdGlvbigpewoJdmFyIF90aGlzID0gdGhpczsKCglpZihfdGhpcy5pbmZvQXJyLnRvU3RyaW5nKCkgIT0gIjAsMCwwLDAsMCIpewoJCWlmKF90aGlzLmlzRXhpc3REaXYoKSl7CgkJCV90aGlzLmNsZWFyRGl2KCk7CgkJfWVsc2V7CgkJCV90aGlzLmNyZWF0ZURpdigpOwoJCX0KCQlfdGhpcy5hZGROb2RlKCk7Cgl9ZWxzZXsKCQlfdGhpcy5yZW1vdmVEaXYoKTsKCQlyZXR1cm4gJ+aXoOa2iOaBryc7Cgl9CglyZXR1cm4gMDsKfQoKLyogLS0tLS0tLS0tLS0tLS0tLWZ1bmN0aW9uIGluZm8tLS0tLS0tLS0tLS0tLS0tLQogKiBuYW1lOiBvcGVuTGluawogKiBwYXJhbWV0ZXJzOiBlbXB0eQogKiByZXR1cm46ICgwfOaIkOWKnykgKOWFtuS7luWAvHzplJnor6/kv6Hmga8pCiAqIOi/nuaOpee7keWumuWHveaVsAogKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovClRpZWJhbWVzc2FnZS5wcm90b3R5cGUub3BlbkxpbmsgPSBmdW5jdGlvbihlKXsKCXZhciBfdGhpcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZW1fbWFpbl9kaXYnKS5wOwoJdmFyIG51bSA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgidHlwZSIpOwoKCS8vIFRPRE8gQU5EIFJFTU9WRQoJdmFyIHVybCA9ICJodHRwOi8vbWVzc2FnZS50aWViYS5iYWlkdS5jb20vaS9tc2cvY2xlYXJfZGF0YT90eXBlPSIgKyBfdGhpcy5yZW1fbnVtW251bV0gKyAiJnVzZXI9IiArIF90aGlzLnVzZXJpbmZvLmRhdGEudXNlcl9wb3J0cmFpdCArICImc3RhbXA9IiArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7CglHTV94bWxodHRwUmVxdWVzdCh7CgkJbWV0aG9kOiAiR0VUIiwKCQl1cmw6IHVybCwKCX0pOwoKCXNldFRpbWVvdXQoZnVuY3Rpb24oKXsKCQl2YXIgaXRlbSA9IGUudGFyZ2V0LnBhcmVudE5vZGU7CgkJdmFyIG1haW5fZGl2ID0gaXRlbS5wYXJlbnROb2RlOwoJCW1haW5fZGl2LnJlbW92ZUNoaWxkKGl0ZW0pOwoJCWlmKG1haW5fZGl2LmZpcnN0RWxlbWVudENoaWxkID09IG51bGwpewoJCQltYWluX2Rpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1haW5fZGl2KTsKCQl9Cgl9LDQwMCk7Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS1mdW5jdGlvbiBpbmZvLS0tLS0tLS0tLS0tLS0tLS0KICogbmFtZTogcHJvY2VzcwogKiBwYXJhbWV0ZXJzOiBlbXB0eQogKiByZXR1cm46IHZvaWQKICog5rWB56iL5aSE55CG5Ye95pWwCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KVGllYmFtZXNzYWdlLnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24oKXsKCXZhciBfdGhpcyA9IHRoaXM7Cgl2YXIgc2VxdWVuY2UgPSBQcm9taXNlLnJlc29sdmUoKTsKCWlmKF90aGlzLmZpcnN0UnVuKXsKCQlzZXF1ZW5jZSA9IHNlcXVlbmNlLnRoZW4oZnVuY3Rpb24oKXsKCQkJcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJzLHJqKXsKCQkJCS8vIGdldFVzZXJpbmZvCgkJCQlfdGhpcy5nZXRVc2VyaW5mbyhycyxyaik7CgkJCX0pCgkJfSkudGhlbihmdW5jdGlvbih2YWwpewoJCQlfdGhpcy5maXJzdFJ1biA9IGZhbHNlOwoJCQlyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocnMscmopewoJCQkJLy8gZ2V0TWVzc2FnZURhdGEKCQkJCV90aGlzLmdldE1lc3NhZ2VEYXRhKHJzLHJqKTsKCQkJfSkKCQl9KS50aGVuKGZ1bmN0aW9uKHZhbCl7CgkJCS8vIGFmdGVyIFVzZXJpbmZvIGFuZCBNZXNzYWdlRGF0YSBsb2FkZWQKCQkJX3RoaXMubWFpbkZ1bmN0aW9uKCk7CgkJfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXsKCQkJLy8gaGFuZGxlIHRoZSBleGNlcHRpb25zCgkJCWNvbnNvbGUubG9nKHJlYXNvbik7CgkJfSk7Cgl9ZWxzZXsKCQlzZXF1ZW5jZSA9IHNlcXVlbmNlLnRoZW4oZnVuY3Rpb24odmFsKXsKCQkJcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJzLHJqKXsKCQkJCS8vIGdldE1lc3NhZ2VEYXRhCgkJCQlfdGhpcy5nZXRNZXNzYWdlRGF0YShycyxyaik7CgkJCX0pCgkJfSkudGhlbihmdW5jdGlvbih2YWwpewoJCQkvLyBhZnRlciBNZXNzYWdlRGF0YSBsb2FkZWQKCQkJX3RoaXMubWFpbkZ1bmN0aW9uKCk7CgkJfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXsKCQkJLy8gaGFuZGxlIHRoZSBleGNlcHRpb25zCgkJCWNvbnNvbGUubG9nKHJlYXNvbik7CgkJfSk7Cgl9Cn0KCi8qIC0tLS0tLS0tLS0tLS0tLS1mdW5jdGlvbiBpbmZvLS0tLS0tLS0tLS0tLS0tLS0KICogbmFtZTogcHJvY2VzcwogKiBwYXJhbWV0ZXJzOiBlbXB0eQogKiByZXR1cm46IHZvaWQKICog6L+Q6KGM5Ye95pWwCiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi8KVGllYmFtZXNzYWdlLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbihlKXsKCXZhciBfdGhpcyA9IHRoaXM7CglfdGhpcy5wcm9jZXNzKCk7Cgl0aWViYS5pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7CgkJX3RoaXMucHJvY2VzcygpOwoJfSxfdGhpcy50aW1lKTsKfQoKaWYod2luZG93LnRvcCA9PSB3aW5kb3cuc2VsZil7Cgl2YXIgdGllYmEsZXJyOwoJdGllYmEgPSBuZXcgVGllYmFtZXNzYWdlKCk7IC8vIGluaXQgdGhlIE9iamVjdAoJdGllYmEucnVuKCk7IC8vIGdldCBpdCBzdGFydGVkCn0="},{"name":"研究院主页修正","options":{"awareOfChrome":false,"comment":"","compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://www.ruijie.net"],"orig_noframes":null,"orig_run_at":"document-body","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":"document-end","user_agent":""},"storage":{"ts":1455866019136,"data":{}},"enabled":true,"position":10,"file_url":"www.ruijie.net","uuid":"621ebc44-16d7-4a1a-995e-d6987ac3d2eb","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICDnoJTnqbbpmaLkuLvpobXkv67mraMKLy8gQG5hbWVzcGFjZSAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3VzZXJzLzQKLy8gQGRlc2NyaXB0aW9uICAgICBSZXN0b3JlIFN0eWxpc2ggc3R5bGVzIGZyb20gZGVsZXRpb24gb24gYmFpZHUuY29tCi8vIEB2ZXJzaW9uICAgICAgICAgMS4wCi8vIEBhdXRob3IgICAgICAgICAgbHVhbnR1QHZpcC5xcS5jb20KLy8gQG1hdGNoICAgICAgICAgICAqOi8vd3d3LnJ1aWppZS5uZXQKLy8gQHJ1bi1hdCAgICAgICAgICBkb2N1bWVudC1ib2R5Ci8vID09L1VzZXJTY3JpcHQ9PQoKZnVuY3Rpb24gZml4U3R5bGUoKXsKICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiTXNvTm9ybWFsVGFibGUiKTsKICAgIC8vYWxlcnQoZWxlbWVudFsxXS5pbm5lckhUTUwpOwogICAgLy9lbGVtZW50WzFdLmlubmVySFRNTD0i54K55Ye75oiR6Lez6L2s5Yiw6K665Z2b5ZCQ5qe977yBIjsKICAgIGVsZW1lbnRbMF0uc3R5bGUubWFyZ2luPScwIGF1dG8nOwogICAgZWxlbWVudFsxXS5zdHlsZS53aWR0aD0nMTAwJSc7Cn0KZml4U3R5bGUoKTs="},{"name":"资源统计系统","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://192.168.5.161:8080/resManage/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":"document-end"},"storage":{"ts":1460942055220,"data":{}},"enabled":true,"position":11,"file_url":"http://192.168.5.161:8080/resManage/","uuid":"efd4b186-a45a-4ecd-9912-067fb295b80b","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDotYTmupDnu5/orqHns7vnu58KLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8KLy8gQHZlcnNpb24gICAgICAwLjEKLy8gQGRlc2NyaXB0aW9uICB0cnkgdG8gdGFrZSBvdmVyIHRoZSB3b3JsZCEKLy8gQGF1dGhvciAgICAgICBZb3UKLy8gQG1hdGNoICAgICAgICAqOi8vMTkyLjE2OC41LjE2MTo4MDgwL3Jlc01hbmFnZS8qCi8vIEBncmFudCAgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KCmZ1bmN0aW9uIGZpeFN0eWxlKCl7CiAgICB2YXIgc3RyPWRvY3VtZW50LmJvZHkuaW5uZXJIVE1MOwogICAgc3RyPXN0ci5yZXBsYWNlKCLmgLvnu5Pmn6Xor6Io5bel5L2c6aG5KSIsIuaAu+e7k+afpeivoiIpOwp9CmZpeFN0eWxlKCk7"},{"name":"医护网修正","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://www.yihu.com/hospital/guahao/*"],"orig_noframes":null,"orig_run_at":"document-end","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":"document-end"},"storage":{"ts":1465809046711,"data":{}},"enabled":false,"position":12,"uuid":"23521ea0-acd0-4770-b0de-84ef8346ff79","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICDljLvmiqTnvZHkv67mraMKLy8gQG5hbWVzcGFjZSAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3VzZXJzLzQKLy8gQGRlc2NyaXB0aW9uICAgICBSZXN0b3JlIFN0eWxpc2ggc3R5bGVzIGZyb20gZGVsZXRpb24gb24gYmFpZHUuY29tCi8vIEB2ZXJzaW9uICAgICAgICAgMS4wCi8vIEBhdXRob3IgICAgICAgICAgbHVhbnR1QHZpcC5xcS5jb20KLy8gQG1hdGNoICAgICAgICAgICAqOi8vd3d3LnlpaHUuY29tL2hvc3BpdGFsL2d1YWhhby8qCi8vIEBydW4tYXQgICAgICAgICAgZG9jdW1lbnQtZW5kCi8vID09L1VzZXJTY3JpcHQ9PQoKZnVuY3Rpb24gZml4U3R5bGUoKSB7Ci8vc2xlZXAoMTApOwphbGVydCgiZml4U3R5bGUiKTsKdmFyIGksYSxzPSIiOwp2YXIgZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiZGl2Iik7CgogICAgZm9yKGk9MDtpPGQubGVuZ3RoO2krKykgewoKICAgICAgICBpZihkW2ldLmNsYXNzTmFtZT09ImNhcm91c2VsLWNsaXAtcmVnaW9uIikgewogICAgICAgICAgICBhbGVydChkW2ldLmNsYXNzTmFtZSk7CiAgICAgICAgfQogICAgfQp9CmZpeFN0eWxlKCk7"},{"name":"解决百度云大文件下载限制","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["http://pan.baidu.com/*","https://pan.baidu.com/*","http://yun.baidu.com/*","https://yun.baidu.com/*","https://eyun.baidu.com/*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1478144984938,"data":{}},"enabled":true,"position":13,"file_url":"https://greasyfork.org/scripts/17800-%E8%A7%A3%E5%86%B3%E7%99%BE%E5%BA%A6%E4%BA%91%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E9%99%90%E5%88%B6/code/%E8%A7%A3%E5%86%B3%E7%99%BE%E5%BA%A6%E4%BA%91%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E9%99%90%E5%88%B6.user.js","uuid":"184b78f0-170d-495c-bc84-585b6169d465","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICDop6PlhrPnmb7luqbkupHlpKfmlofku7bkuIvovb3pmZDliLYKLy8gQG5hbWVzcGFjZSAgICB1bmRlZmluZWQKLy8gQHZlcnNpb24gICAgICAwLjAuNgovLyBAZGVzY3JpcHRpb24gIOS4gOihjOS7o+egge+8jOino+WGs+eZvuW6puS6keWkp+aWh+S7tuS4i+i9vemZkOWItgovLyBAYXV0aG9yICAgICAgIGZ1bmlhbnd1eGluCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL3Bhbi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8vcGFuLmJhaWR1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL3l1bi5iYWlkdS5jb20vKgovLyBAbWF0Y2ggICAgICAgIGh0dHBzOi8veXVuLmJhaWR1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgaHR0cHM6Ly9leXVuLmJhaWR1LmNvbS8qCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQovKiBqc2hpbnQgLVcwOTcgKi8KJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KE9iamVjdC5nZXRQcm90b3R5cGVPZihuYXZpZ2F0b3IpLCdwbGF0Zm9ybScse2dldDpmdW5jdGlvbigpe3JldHVybiAnc2JfYmFpZHUnO319KQoKCihmdW5jdGlvbigpewp2YXIgaHJlZj1sb2NhdGlvbi5ocmVmOwovaHR0cDovLnRlc3QoaHJlZik/bG9jYXRpb24uaHJlZj0naHR0cHMnK2hyZWYuc2xpY2UoNCk6MDsKfSgpKTsKCgogICAg"},{"name":"百度网盘直接下载（请看脚本说明）","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["*://pan.baidu.com/disk/home*","*://yun.baidu.com/disk/home*","*://pan.baidu.com/s/*","*://yun.baidu.com/s/*","*://pan.baidu.com/share/link*","*://yun.baidu.com/share/link*"],"orig_matches":["*://pan.baidu.com/disk/home*","*://yun.baidu.com/disk/home*","*://pan.baidu.com/s/*","*://yun.baidu.com/s/*","*://pan.baidu.com/share/link*","*://yun.baidu.com/share/link*"],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1478145003800,"data":{}},"enabled":true,"position":14,"file_url":"https://greasyfork.org/scripts/24103-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD-%E6%94%B9/code/%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%EF%BC%88%E6%94%B9%EF%BC%89.user.js","uuid":"1951a9a6-01a7-4fe8-b729-1f55c1eca3e0","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUg55m+5bqm572R55uY55u05o6l5LiL6L2977yI6K+355yL6ISa5pys6K+05piO77yJCi8vIEB2ZXJzaW9uICAgICAgMS4yCi8vIEBkZXNjcmlwdGlvbiDmnKzniYjpgILnlKjkuo7mnIDmlrDnmb7luqbnvZHnm5jvvIHliIbkuqvpobXpnaLkuZ/lj6/ku6XkuIvovb3lk6bvvIzlj43mraPmiJHlsLHmmK/kuI3nlKjluqblqJjkupHnrqHlrrbvvIEKLy8gQG1hdGNoICAgICAgICAqOi8vcGFuLmJhaWR1LmNvbS9kaXNrL2hvbWUqCi8vIEBtYXRjaCAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vZGlzay9ob21lKgovLyBAbWF0Y2ggICAgICAgICo6Ly9wYW4uYmFpZHUuY29tL3MvKgovLyBAbWF0Y2ggICAgICAgICo6Ly95dW4uYmFpZHUuY29tL3MvKgovLyBAbWF0Y2ggICAgICAgICo6Ly9wYW4uYmFpZHUuY29tL3NoYXJlL2xpbmsqCi8vIEBtYXRjaCAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vc2hhcmUvbGluayoKLy8gQHJ1bi1hdCAgICAgICBkb2N1bWVudC1zdGFydAovLyBAaW5jbHVkZSAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vZGlzay9ob21lKgovLyBAaW5jbHVkZSAgICAgICAgKjovL3l1bi5iYWlkdS5jb20vZGlzay9ob21lKgovLyBAaW5jbHVkZSAgICAgICAgKjovL3Bhbi5iYWlkdS5jb20vcy8qCi8vIEBpbmNsdWRlICAgICAgICAqOi8veXVuLmJhaWR1LmNvbS9zLyoKLy8gQGluY2x1ZGUgICAgICAgICo6Ly9wYW4uYmFpZHUuY29tL3NoYXJlL2xpbmsqCi8vIEBpbmNsdWRlICAgICAgICAqOi8veXVuLmJhaWR1LmNvbS9zaGFyZS9saW5rKgovLyBAcnVuLWF0ICAgICAgIGRvY3VtZW50LXN0YXJ0Ci8vIEBuYW1lc3BhY2UgaHR0cDovL2ppeHVuLm9yZy8KLy8gPT0vVXNlclNjcmlwdD09CgoKdHJ5IHsgdmFyIHc9dW5zYWZlV2luZG93OyB9IGNhdGNoIChlKSB7IHZhciB3PXdpbmRvdzsgfQp3Lm5hdmlnYXRvci5fX2RlZmluZUdldHRlcl9fICgncGxhdGZvcm0nLCBmdW5jdGlvbiAoKSB7cmV0dXJuICdDcmFja2VkIGJ5IEppeHVuIF5eJzt9KTsK"},{"name":"AntiAdware","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http*://*180upload.com/*","http*://*4upfiles.com/*","http*://*get*.adobe.com/*flashplayer/*","http*://*get*.adobe.com/*reader/*","http*://*afterdawn.com/software/*","http*://*akafile.com/akago.php","http*://*chip.de/downloads/*","http*://*clicknupload.com/*","http*://*cloudyvideos.com/*","http*://*coolrom.com/*/*","http*://*clipconverter.cc/download/*","http*://*dailyuploads.net/*","http*://*datafilehost.com/d/*","http*://*davvas.com/*","http*://*d-h.st/*","http*://*download.cnet.com/*","http*://*telecharger.cnet.com/*","http*://*descargar.cnet.com/*","http*://*de.download.cnet.com/*","http*://*filefactory.com/file/*","http*://*filescdn.com/*","http*://*filehippo.com/*download*","http*://*freewarefiles.com/downloads_counter.php*","http*://*google.*/earth/download/ge/agree.html","http*://*hugefiles.net/*","http*://*hulkload.com/*","http*://*kingfiles.net/*","http*://*letitbit.net/download/*","http*://*loveroms.com/*","http*://*up.media1fire.com/*","http*://*mightyupload.com/*","http*://*mp3fil.*/get/*","http*://*mp3juices.to/*","http*://*mp3olimp.net/*","http*://*mp3olimpz.com/*","http*://*opensubtitles.org/*/subtitles/*","http*://*revclouds.com/*","http*://*romhustler.net/download/*","http*://*romhustler.net/rom/*","http*://*secureupload.eu/*","http*://*sendspace.com/file/*","http*://*sharebeast.com/*","http*://*shared.com/*","http*://*softm8.com*","http*://*.softonic.*","http*://*sourceforge.net/*","http*://*tusfiles.net/*","http*://*unlimitzone.com/*","http*://*uploading.com/*","http*://*uplod.ws/*","http*://*uploads.to/*","http*://*uptobox.com/*","http*://*userscdn.com/*","http*://*ziddu.com/downloadfile/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1478252146788,"data":{}},"enabled":true,"position":15,"file_url":"https://greasyfork.org/scripts/4294-antiadware/code/AntiAdware.user.js","uuid":"036f94dd-5de8-4700-b438-067ecb7d531e","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgQW50aUFkd2FyZQovLyBAbmFtZTpmciBBbnRpQWR3YXJlCi8vIEBuYW1lOmRlIEFudGlBZHdhcmUKLy8gQG5hbWU6emgtVFcgQW50aUFkd2FyZQovLyBAbmFtZTp6aC1DTiBBbnRpQWR3YXJlCi8vIEBhdXRob3Igbm9uYW1lMTIwCi8vIEBuYW1lc3BhY2UgSGFuZHlVc2Vyc2NyaXB0cwovLyBAaWNvbiBodHRwczovL2kuaW1ndXIuY29tL3RxN1BKcjAucG5nCi8vIEBkZXNjcmlwdGlvbiBSZW1vdmUgZm9yY2VkIGRvd25sb2FkIGFjY2VsZXJhdG9ycywgbWFuYWdlcnMsIGFuZCBhZHdhcmUgb24gc3VwcG9ydGVkIHdlYnNpdGVzCi8vIEBkZXNjcmlwdGlvbjpmciDDiXZpdGV6IGxlcyBhcHBsaWNhdGlvbnMgaW5kw6lzaXJhYmxlcyBsb3JzIGRlcyB0w6lsw6ljaGFyZ2VtZW50cyBzdXIgZGUgbm9tYnJldXggc2l0ZXMgYXZlYyBBbnRpQWR3YXJlICEgCi8vIEBkZXNjcmlwdGlvbjpkZSBNaXQgQW50aUFkd2FyZSB2ZXJtZWlkZXN0IGR1IGF1ZiB6YWhscmVpY2hlbiBXZWJzZWl0ZW4gZGVuIHZlcnNlaGVudGxpY2hlbiBEb3dubG9hZCB2b24gdW5lcnfDvG5zY2h0ZW4gUHJvZ3JhbW1lbgovLyBAZGVzY3JpcHRpb246emgtVFcgQW50aUFkd2FyZSwg6K6T5L2g6YG/5YWN5Zyo6Kix5aSa57ay56uZ5LiK5oSP5aSW5LiL6LyJ5Yiw5buj5ZGK6Luf6auULgovLyBAZGVzY3JpcHRpb246emgtQ04gQW50aUFkd2FyZSwg6K6p5L2g6YG/5YWN5Zyo6K645aSa572R56uZ5LiK5oSP5aSW5LiL6L295Yiw5bm/5ZGK6L2v5L2TLgovLyBAdmVyc2lvbiAxLjQxLjMKLy8gQGxpY2Vuc2UgQ3JlYXRpdmUgQ29tbW9ucyBCWS1OQy1TQQoKLy8galF1ZXJ5IGRlcGVuZGVuY3k7IGFuIG9mZmxpbmUgdmVyc2lvbiBvZiB0aGlzIGlzIGluY2x1ZGVkIGluIHRoZSBzY3JpcHQgaW4gY2FzZSBpdCBnb2VzIGRvd24KLy8gQHJlcXVpcmUgaHR0cDovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMi4wLjMubWluLmpzCgovLyBAaW5jbHVkZSBodHRwKjovLyoxODB1cGxvYWQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qNHVwZmlsZXMuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZ2V0Ki5hZG9iZS5jb20vKmZsYXNocGxheWVyLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZ2V0Ki5hZG9iZS5jb20vKnJlYWRlci8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmFmdGVyZGF3bi5jb20vc29mdHdhcmUvKgovLyBAaW5jbHVkZSBodHRwKjovLypha2FmaWxlLmNvbS9ha2Fnby5waHAKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qY2hpcC5kZS9kb3dubG9hZHMvKgovLyBAaW5jbHVkZSBodHRwKjovLypjbGlja251cGxvYWQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qY2xvdWR5dmlkZW9zLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmNvb2xyb20uY29tLyovKgovLyBAaW5jbHVkZSBodHRwKjovLypjbGlwY29udmVydGVyLmNjL2Rvd25sb2FkLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZGFpbHl1cGxvYWRzLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmRhdGFmaWxlaG9zdC5jb20vZC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmRhdnZhcy5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypkLWguc3QvKgovLyBAaW5jbHVkZSBodHRwKjovLypkb3dubG9hZC5jbmV0LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnRlbGVjaGFyZ2VyLmNuZXQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZGVzY2FyZ2FyLmNuZXQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qZGUuZG93bmxvYWQuY25ldC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypmaWxlZmFjdG9yeS5jb20vZmlsZS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmZpbGVzY2RuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmZpbGVoaXBwby5jb20vKmRvd25sb2FkKgovLyBAaW5jbHVkZSBodHRwKjovLypmcmVld2FyZWZpbGVzLmNvbS9kb3dubG9hZHNfY291bnRlci5waHAqCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmdvb2dsZS4qL2VhcnRoL2Rvd25sb2FkL2dlL2FncmVlLmh0bWwKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qaHVnZWZpbGVzLm5ldC8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmh1bGtsb2FkLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKmtpbmdmaWxlcy5uZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLypsZXRpdGJpdC5uZXQvZG93bmxvYWQvKgovLyBAaW5jbHVkZSBodHRwKjovLypsb3Zlcm9tcy5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cC5tZWRpYTFmaXJlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKm1pZ2h0eXVwbG9hZC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyptcDNmaWwuKi9nZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLyptcDNqdWljZXMudG8vKgovLyBAaW5jbHVkZSBodHRwKjovLyptcDNvbGltcC5uZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLyptcDNvbGltcHouY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qb3BlbnN1YnRpdGxlcy5vcmcvKi9zdWJ0aXRsZXMvKgovLyBAaW5jbHVkZSBodHRwKjovLypyZXZjbG91ZHMuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qcm9taHVzdGxlci5uZXQvZG93bmxvYWQvKgovLyBAaW5jbHVkZSBodHRwKjovLypyb21odXN0bGVyLm5ldC9yb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypzZWN1cmV1cGxvYWQuZXUvKgovLyBAaW5jbHVkZSBodHRwKjovLypzZW5kc3BhY2UuY29tL2ZpbGUvKgovLyBAaW5jbHVkZSBodHRwKjovLypzaGFyZWJlYXN0LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHAqOi8vKnNoYXJlZC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLypzb2Z0bTguY29tKgovLyBAaW5jbHVkZSBodHRwKjovLyouc29mdG9uaWMuKgovLyBAaW5jbHVkZSBodHRwKjovLypzb3VyY2Vmb3JnZS5uZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLyp0dXNmaWxlcy5uZXQvKgovLyBAaW5jbHVkZSBodHRwKjovLyp1bmxpbWl0em9uZS5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cGxvYWRpbmcuY29tLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qdXBsb2Qud3MvKgovLyBAaW5jbHVkZSBodHRwKjovLyp1cGxvYWRzLnRvLyoKLy8gQGluY2x1ZGUgaHR0cCo6Ly8qdXB0b2JveC5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp1c2Vyc2Nkbi5jb20vKgovLyBAaW5jbHVkZSBodHRwKjovLyp6aWRkdS5jb20vZG93bmxvYWRmaWxlLyoKCi8vIFdlIGRvbid0IHVzZSB0aGlzIG1ldGhvZCwgaG93ZXZlciBhIHNpZGUgZWZmZWN0IG9mIGl0IGlzIHRoYXQgaXQgcmVzdG9yZXMgdGhlIEdyZWFzZW1vbmtleSBzYW5kYm94LCBhdm9pZGluZyBqUXVlcnkgY29uZmxpY3RzCi8vIEBncmFudCBHTV9hZGRTdHlsZQoKLy8gQGdyYW50IHVuc2FmZVdpbmRvdwoKLy8gQGhvbWVwYWdlVVJMIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5keVVzZXJzY3JpcHRzL0FudGlBZHdhcmUjcmVhZG1lCi8vIEBzdXBwb3J0VVJMIGh0dHBzOi8vZ2l0aHViLmNvbS9IYW5keVVzZXJzY3JpcHRzL0FudGlBZHdhcmUvaXNzdWVzCgoKLy8gQHJ1bi1hdCBkb2N1bWVudC1zdGFydAovLyA9PS9Vc2VyU2NyaXB0PT0KCnZvaWQKZnVuY3Rpb24gKCkgewogICAgLy8gSWYgdHJ1ZSwgZGlzcGxheXMgbG9nIGluIHRoZSBjb25zb2xlCiAgICB2YXIgb19kZWJ1ZyA9IGZhbHNlCgogICAgLy8gUnVsZXMgaW5mb3JtaW5nIHdoYXQgdG8gZG8gb24gZWFjaCBzdXBwb3J0ZWQgd2Vic2l0ZQogICAgdmFyIGFkd2FyZVJ1bGVzID0gewogICAgICAgIGExODB1cGxvYWQ6IHsKICAgICAgICAgICAgaG9zdDogWycxODB1cGxvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9pbnN0YWxsZXInXSwKICAgICAgICAgICAgaGlkZTogWycjdXNlX2luc3RhbGxlcicsICdsYWJlbFtmb3I9dXNlX2luc3RhbGxlcl0nXQogICAgICAgIH0sCiAgICAgICAgYTR1cGZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnNHVwZmlsZXMuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9kb3dubG9hZGVyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnbGFiZWxbZm9yPXVzZV9kb3dubG9hZGVyXSddCiAgICAgICAgfSwKICAgICAgICBBZG9iZTogewogICAgICAgICAgICBob3N0OiBbJ2dldFxcZD8uYWRvYmUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI29mZmVyQ2hlY2tib3gnLCcjb2ZmZXJDaGVja2JveDEnLCcjb2ZmZXJDaGVja2JveDInLCcjb2ZmZXJDaGVja2JveDMnLCcjb2ZmZXJDaGVja2JveDQnXSwKICAgICAgICAgICAgaGlkZTogWycuQ29udGVudENvbHVtbi5Db250ZW50Q29sdW1uLTInXQogICAgICAgIH0sCiAgICAgICAgQWZ0ZXJkYXduOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnYWZ0ZXJkYXduLmNvbSddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vIERvd25sb2FkIHBhZ2UgZGlyZWN0bHkgYWNjZXNzZWQgZnJvbSBhbm90aGVyIHdlYnNpdGUKICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5sb2NhdGlvbi5ocmVmLmNvbnRhaW5zKCdpbnN0YWxsZXI9MScpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gdGhlIHBhZ2Ugd2l0aG91dCB0aGUgZG93bmxvYWQgbWFuYWdlcgogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlcGxhY2UoZG9jdW1lbnQubG9jYXRpb24uaHJlZi5yZXBsYWNlKCdpbnN0YWxsZXI9MScsICdpbnN0YWxsZXI9MCcpKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIFNvZnR3YXJlIHBhZ2UKICAgICAgICAgICAgICAgICQoJ2lucHV0W25hbWU9aW5zdGFsbGVyXScpLnByb3AoJ3ZhbHVlJywgJzAnKQogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkQnV0dG9uID0gJCgnI2Rvd25sb2FkLW1haW4tYnV0dG9uJykKICAgICAgICAgICAgICAgIHZhciBhZHdhcmVMaW5rID0gZG93bmxvYWRCdXR0b24ucHJvcCgnaHJlZicpCiAgICAgICAgICAgICAgICBhZHdhcmVMaW5rID0gYWR3YXJlTGluay5yZXBsYWNlKCdpbnN0YWxsZXI9MScsICdpbnN0YWxsZXI9MCcpCiAgICAgICAgICAgICAgICBkb3dubG9hZEJ1dHRvbi5wcm9wKCdocmVmJywgYWR3YXJlTGluaykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgQWthZmlsZTogewogICAgICAgICAgICBob3N0OiBbJ2FrYWZpbGUuY29tJ10sCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHJlYWwgZG93bmxvYWQgbGluayBpbiB0aGUgY29tbWVudHMgc2VjdGlvbiBhbmQgcmVwbGFjZSB0aGUgZmFrZSBvbmUgd2l0aCB0aGlzIChpZiB0aGUgZmFrZSBpcyBub3QgYSB2YWxpZCBsaW5rKQogICAgICAgICAgICBleGVjOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgbGluayBpcyBhbHJlYWR5IGEgdmFsaWQgb25lIHdlIGRvbid0IHJlcGxhY2UgaXQKICAgICAgICAgICAgICAgIHZhciB0ZXN0SG9zdCA9IG5ldyBSZWdFeHAoImFpay53b2xmdXAubmV0IiwgJ2knKQogICAgICAgICAgICAgICAgaWYgKHRlc3RIb3N0LnRlc3QoJCgiI2Rvd25sb2FkMSIpLmF0dHIoImhyZWYiKSkpIHJldHVybgogICAgICAgICAgICAgICAgLy8gR2V0IGNvbW1lbnQgc2VjdGlvbiBhbmQgZW51bWVyYXRlIGVhY2ggZWxlbWVudCBoYXZpbmcgdGhlIHJpZ2h0IGlkLCBjaGVjayBpZiBpdCdzIGEgcHJvcGVyIGRvd25sb2FkIGxpbmsKICAgICAgICAgICAgICAgIHZhciBjb21tZW50cyA9ICQoJyNjb250aW51ZScpLmNvbW1lbnRzKCkuY2hpbGRyZW4oJyNkb3dubG9hZDEnKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodGVzdEhvc3QudGVzdCgkKHRoaXMpLmF0dHIoImhyZWYiKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgJCgiI2Rvd25sb2FkMSIpLmF0dHIoImhyZWYiLCAkKHRoaXMpLmF0dHIoImhyZWYiKSkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIENoaXA6IHsKICAgICAgICAgICAgaG9zdDogWydjaGlwLmRlJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLkRvd25sb2FkLUJ1dHRvbi1VbmRlclRleHQtLUluc3RhbGxlciddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBkbCA9ICQoJy5NYW51YWxJbnN0YWxsTGluaycpLnByb3AoJ2hyZWYnKQogICAgICAgICAgICAgICAgdmFyIGJ0biA9ICQoJy5kbC1idG4tZGVmYXVsdCAuRG93bmxvYWQtQnV0dG9uJykKCiAgICAgICAgICAgICAgICBidG4ucHJvcCgnaHJlZicsIGRsKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBDbGlja251cGxvYWQ6IHsKICAgICAgICAgICAgaG9zdDogWydjbGlja251cGxvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2RfYWNjX2NoZWNrYm94J10sCiAgICAgICAgICAgIGhpZGU6IFsnI3dfZG93bmxvYWQnLCAnI2RfYWNjJ10KICAgICAgICB9LAogICAgICAgIENsaXBDb252ZXJ0ZXI6IHsKICAgICAgICAJaG9zdDogWydjbGlwY29udmVydGVyLmNjJ10sCiAgICAgICAgCXVuY2hlY2s6IFsnI2RsY3AnXSwKICAgICAgICAJaGlkZTogWydkaXZbc3R5bGU9IndpZHRoOiAzNDBweDttYXJnaW4tbGVmdDogMjVweDttYXJnaW4tdG9wOiA3cHg7Il0nXQogICAgICAgIH0sCiAgICAgICAgQ2xvdWR5VmlkZW9zOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnY2xvdWR5dmlkZW9zLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyN1c2UtbWFuYWdlciddLAogICAgICAgICAgICBoaWRlOiBbJyNkb3dubG9hZC1ib3ggPiBsYWJlbCddCiAgICAgICAgfSwKICAgICAgICBDb29scm9tOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnY29vbHJvbS5jb20nXSwKICAgICAgICAgICAgaGlkZTogWyd0YWJsZVthbGlnbj0iY2VudGVyIl1bd2lkdGg9IjMwMCJdJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkQnV0dG9uID0gJCgnLmRvd25sb2FkX2xpbmsnKQogICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkSWQgPSBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpWzNdCgogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkb3dubG9hZEJ1dHRvbiAhPSAndW5kZWZpbmVkJyAmJiBkb3dubG9hZElkLm1hdGNoKC9eXGQrJC8pKSB7CiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWRCdXR0b24ucHJvcCgnaHJlZicsICdodHRwOi8vY29vbHJvbS5jb20vZGxwb3AucGhwP2lkPScgKyBkb3dubG9hZElkKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEF2b2lkIHRoZSBIVE1MIHBhZ2UgdG8gYmUgdHJpZ2dlcmVkIGFzIGEgZG93bmxvYWQKICAgICAgICAgICAgICAgIGRvd25sb2FkQnV0dG9uLnJlbW92ZUF0dHIoJ2Rvd25sb2FkJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgRGFpbHlVcGxvYWRzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZGFpbHl1cGxvYWRzLm5ldCddLAogICAgICAgICAgICBoaWRlOiBbJ2xhYmVsW3N0eWxlPSJmb250LXNpemU6eC1zbWFsbCJdJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Noa0lzQWRkJ10KICAgICAgICB9LAogICAgICAgIERhdGFmaWxlaG9zdDogewogICAgICAgICAgICBob3N0OiBbJ2RhdGFmaWxlaG9zdC5jb20nXSwKICAgICAgICAgICAgaGlkZTogWydmb3JtW25hbWU9Y2JmXSddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBpZCA9IGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9eXC9kXC8oXHcrKSQvKVsxXQogICAgICAgICAgICAgICAgLy8gRGF0YUZpbGVIb3N0IGRvZXNuJ3QgYWxsb3cgdG8gZG93bmxvYWQgdXNpbmcgSFRUUFMKICAgICAgICAgICAgICAgIHZhciBhZHdhcmVsZXNzTGluayA9ICdodHRwOicgKyAnLy8nICsgZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWUgKyAnL2dldC5waHA/ZmlsZT0nICsgaWQKCiAgICAgICAgICAgICAgICB2YXIgbiA9ICQoJyNkbCA+IGEnKS5jbG9uZSgpCgogICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgYWR3YXJlIGxpbmsKICAgICAgICAgICAgICAgIG4ucHJvcCgnaHJlZicsIGFkd2FyZWxlc3NMaW5rKQoKICAgICAgICAgICAgICAgIC8vIEF2b2lkIHJlZGlyZWN0aW9uIHRvIGFkd2FyZQogICAgICAgICAgICAgICAgJCgnI2RsJykucmVwbGFjZVdpdGgobik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIERhdnZhczogewogICAgICAgICAgICBob3N0OiBbJ2RhdnZhcy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjY2hsaW5rJ10sCiAgICAgICAgICAgIGhpZGU6IFsnbGFiZWxbZm9yPWNobGlua10nLCAnI2NobGluayddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBidG4gPSAkKCcjYnRuX2Rvd25sb2FkJykKICAgICAgICAgICAgICAgIGlmICghZXhpc3RzKGJ0bikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGJ0bi5yZW1vdmVBdHRyKCdvbmNsaWNrJykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgRGV2SG9zdDogewogICAgICAgICAgICBob3N0OiBbJ2QtaC5zdCddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNkbS1jaGVjayddLAogICAgICAgICAgICBoaWRlOiBbJyNkb3dubG9hZG1hbmFnZXInLCdhOmhhcyg+aW1nW3NyYyo9Ii9hc3NldHMvaW1nL2Rvd25sb2FkMS5wbmciXSknLCAnI2Rvd25sb2FkZmlsZTInXSwKICAgICAgICB9LAogICAgICAgIERvd25sb2FkOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZG93bmxvYWQuY25ldC5jb20nLCd0ZWxlY2hhcmdlci5jbmV0LmNvbScsJ2Rlc2Nhcmdhci5jbmV0LmNvbSddLAogICAgICAgICAgICBoaWRlOiBbJy5kbG4tc3ViLW1lc3NhZ2UnLCcjdGl0bGUtZGV0YWlsLWRvd25sb2FkLW5vdy1idXR0b24tZGxtLW5vdGljZS1pY29uJywnLmRvd25sb2FkLW5vdy5kaXJlY3QtZG93bmxvYWQtYnV0dG9uLWRsbiddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIC8vIC0tPiBUaGlzIGlzIGZvciBwcm9ncmFtIHBhZ2VzCiAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSByZWFsIGRvd25sb2FkIGxpbmsKICAgICAgICAgICAgICAgIHZhciBhZHdhcmVsZXNzTGluayA9ICQoJy5kb3dubG9hZC1ub3cnKS5hdHRyKCdkYXRhLW5vZGxtLXVybCcpCiAgICAgICAgICAgICAgICAvLyBJZiB3ZSBzdWNjZXNzZnVsbHkgZm91bmQgaXQKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWR3YXJlbGVzc0xpbmsgIT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgICAgICAgICAgICAvLyBXZSByZXBsYWNlIHRoZSBhZHdhcmUtZW5hYmxlZCBsaW5rIHdpdGggdGhlIGFkd2FyZWxlc3MgbGluawogICAgICAgICAgICAgICAgICAgIHZhciBidG4gPSAkKCJhLmRsbi1hOmhhcygnLmRsbi1jdGEnKSIpCiAgICAgICAgICAgICAgICAgICAgYnRuLnByb3AoJ2hyZWYnLCBhZHdhcmVsZXNzTGluaykKICAgICAgICAgICAgICAgICAgICBidG4uYXR0cignZGF0YS1ocmVmJywgYWR3YXJlbGVzc0xpbmspCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gLS0+IFRoaXMgaXMgZm9yIHNlYXJjaCBsaXN0cwogICAgICAgICAgICAgICAgLy8gQ2hlY2sgZWFjaCBkb3dubG9hZCBidXR0b24gZnJvbSB0aGUgbGlzdAogICAgICAgICAgICAgICAgJCgnLmRvd25sb2FkLW5vdy5saXN0aW5nLWJ1dHRvbi1kbG4nKS5lYWNoKAogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGN1cnJJbmRleCwgY3VyckRPTUVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJFbGVtZW50ID0gJChjdXJyRE9NRWxlbWVudCkKCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgZGlyZWN0IGRvd25sb2FkIGxpbmsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJEaXJlY3REbExpbmsgPSBjdXJyRWxlbWVudC5hdHRyKCdkYXRhLW5vZGxtLXVybCcpCgogICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSBjb3VsZG4ndCBmaW5kIHRoZSBkaXJlY3QgZG93bmxvYWQgbGluaywgd2UgYWJhbmRvbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGN1cnJEaXJlY3REbExpbmsgPT0gJ3VuZGVmaW5lZCcpIHtyZXR1cm59CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBkb3dubG9hZCBsaW5rIHdpdGggdGhlIGRpcmVjdCwgZG93bmxvYWQgbWFuYWdlci1sZXNzIGxpbmsKICAgICAgICAgICAgICAgICAgICAgICAgY3VyckVsZW1lbnQuY2hpbGRyZW4oJy5kbG4tYScpLnByb3AoJ2hyZWYnLCBjdXJyRGlyZWN0RGxMaW5rKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29tZWhvdyB0aGlzIGNsYXNzIHByZXZlbnRzIHRoZSBkb3dubG9hZCBmcm9tIGxhdW5jaGluZyBwcm9wZXJseSAoYXQgbGVhc3Qgb24gRmlyZWZveCkKICAgICAgICAgICAgICAgICAgICAgICAgY3VyckVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2Rvd25sb2FkLW5vdycpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgRmlsZWZhY3Rvcnk6IHsKICAgICAgICAgICAgaG9zdDogWydmaWxlZmFjdG9yeS5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjZG93bmxvYWRfbWFuYWdlciA+IGlucHV0OmNoZWNrYm94J10sCiAgICAgICAgICAgIGhpZGU6IFsnI2Rvd25sb2FkX21hbmFnZXInXQogICAgICAgIH0sCiAgICAgICAgRmlsZXNDRE46IHsKICAgICAgICAgICAgaG9zdDogWydmaWxlc2Nkbi5jb20nXSwKICAgICAgICAgICAgaGlkZTogWycuYnRuLmJnLWdyZWVuLTQwMCddCiAgICAgICAgfSwKICAgICAgICBGcmVld2FyZWZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnZnJlZXdhcmVmaWxlcy5jb20nXSwKICAgICAgICAgICAgaGlkZTogWydzcGFuLnNtYWxsbGlua3M6Y29udGFpbnMoImRvd25sb2FkIG1hbmFnZXIiKSddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RMaW5rID0gJCgnYS5kd25sb2NhdGlvbnMnKS5wcm9wKCdocmVmJykKICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGlyZWN0TGluayA9PSAndW5kZWZpbmVkJykge3JldHVybn0KCiAgICAgICAgICAgICAgICAkKCd0ZFt3aWR0aD0zMzBdW2FsaWduPWxlZnRdID4gYScpLnByb3AoJ2hyZWYnLCBkaXJlY3RMaW5rKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBHb29nbGVFYXJ0aDogewogICAgICAgIAlob3N0OiBbJ2dvb2dsZS4nXSwKICAgICAgICAJdW5jaGVjazogWycjZGwtYWdyZWUtY2hyb21lJywnI2RsLWFncmVlLWNocm9tZS1kZWZhdWx0J10sCiAgICAgICAgCWhpZGU6IFsnI2RsLWNocm9tZS1wcm9tbyddCiAgICAgICAgfSwKICAgICAgICBIdWdlZmlsZXM6IHsKICAgICAgICAgICAgaG9zdDogWydodWdlZmlsZXMubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2RhcCcsJyN1c2VfZG93bmxvYWRlciddLAogICAgICAgICAgICBoaWRlOiBbInNwYW46Y29udGFpbnMoJ3VzaW5nIGRvd25sb2FkIGFjY2VsZXJhdG9yJykiLCAnI2RhcCcsICcjdXNlX2Rvd25sb2FkZXInLCAnaW1nW3NyYz0iaHR0cDovL2h1Z2VmaWxlcy5uZXQvYnV0dG9uLnBuZyJdJ10KICAgICAgICB9LAogICAgICAgIEh1bGtsb2FkOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnaHVsa2xvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3NwbnNyZGxkJywgJyN1c2UtbWFuYWdlciddLAogICAgICAgICAgICBoaWRlOiBbCiAgICAgICAgICAgIAkiZm9ybTpjb250YWlucygnZG93bmxvYWQgVGhlIEZSRUUgZG93bmxvYWQgYWNjZWxlcmF0b3InKSIsJyNzcG5zcmRsZCcsJyNkb3dubG9hZC10aWNrJywKICAgICAgICAgICAgCSdpbWdbc3JjXj0iaHR0cDovL2h1bGtsb2FkLmNvbS9pbWFnZXMvZGxkIl0nLCAvLyBGYWtlIGRvd25sb2FkIGJ1dHRvbgogICAgICAgICAgICAJJ2Rpdi5hbGVydFtvbmNsaWNrPSJnb3RvKCkiXScsIC8vIEZha2Ugc3BvbnNvcmVkIGxpbmtzCiAgICAgICAgICAgIAknZGl2W3N0eWxlKj0iaGVpZ2h0OiA5MHB4OyBib3JkZXI6IDNweCBzb2xpZCByZ2IoMjA1LCAyNDAsIDI0NikiXScgLy8gRmFrZSBkb3dubG9hZCBiYW5uZXIgKGxpdmVyc2VseSkKICAgICAgICAgICAgXQogICAgICAgIH0sCiAgICAgICAgS2luZ2ZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsna2luZ2ZpbGVzLm5ldCddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNjbWxpX2Rvd25sb2FkZXInXSwKICAgICAgICAgICAgaGlkZTogWycjdGVzdDEnXSwKICAgICAgICAgICAgLy8gQXZvaWRzIGEgcG9wdXAgd2hlbiB1bmNoZWNraW5nIHRoZSBjaGVja2JveAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICQoJyNjbWxpX2Rvd25sb2FkZXInKS5wcm9wKCdvbmNsaWNrJywgbnVsbCkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgTGV0aXRiaXQ6IHsKICAgICAgICAgICAgaG9zdDogWydsZXRpdGJpdC5uZXQnXSwKICAgICAgICAgICAgdW5jaGVjazogWycjc2t5bW9ua19jaGVja2JveCddLAogICAgICAgICAgICBoaWRlOiBbJyNza3ltb25rX2NoZWNrYm94JywgJ2xhYmVsW2Zvcj1za3ltb25rX2NoZWNrYm94XSddCiAgICAgICAgfSwKICAgICAgICBMb3ZlUm9tczogewogICAgICAgICAgICBob3N0OiBbJ2xvdmVyb21zLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNkb3dubG9hZFdpdGhNYW5hZ2VyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLmRvd25sb2FkLWxhYmVsJ10KICAgICAgICB9LAogICAgICAgIFVwTWVkaWExZmlyZTogewogICAgICAgICAgICBob3N0OiBbJ3VwLm1lZGlhMWZpcmUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZS1tYW5hZ2VyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnI2Rvd25sb2FkLWJveCcsICcjc3BvbnNvcjInLCAnZGl2LmNvbnRlbnRvciA+IGNlbnRlcicsICcuYWxlcnQyJywgJ2ltZ1tzcmNePSJodHRwOi8vdXAubWVkaWExZmlyZS5jb20vbmIvUmVjX2IiXSddCiAgICAgICAgfSwKICAgICAgICBNaWdodHl1cGxvYWQ6IHsKICAgICAgICAgICAgaG9zdDogWydtaWdodHl1cGxvYWQuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9pbnN0YWxsZXInXSwKICAgICAgICAgICAgaGlkZTogWycjdXNlX2luc3RhbGxlcicsICdsYWJlbFtmb3I9dXNlX2luc3RhbGxlcl0nLCcjbG5rX2Rvd25sb2FkIH4gYnInXQogICAgICAgIH0sCiAgICAgICAgTXAzZmlsOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnbXAzZmlsXC4nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjY2hlY2sgPiBpbnB1dDpjaGVja2JveFtuYW1lPWNoZWNrXSddLAogICAgICAgICAgICBoaWRlOiBbJyNjaGVjayddCiAgICAgICAgfSwKICAgICAgICBNcDNqdWljZXM6IHsKICAgICAgICAgICAgaG9zdDogWydtcDNqdWljZXMudG8nXSwKICAgICAgICAgICAgdW5jaGVjazogWydpbnB1dDpjaGVja2JveFtuYW1lPWRsX21hbmFnZXJdJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLmRsX21hbmFnZXIsLmNbc3R5bGU9ImhlaWdodDo4MHB4Il0nXQogICAgICAgIH0sCiAgICAgICAgTXAzb2xpbXA6IHsKICAgICAgICAJaG9zdDogWydtcDNvbGltcC5uZXR8bXAzb2xpbXB6LmNvbSddLAogICAgICAgIAl1bmNoZWNrOiBbJyNkb3dubG9hZC1tYW5hZ2VyLWNoZWNrYm94J10sCiAgICAgICAgCWhpZGU6IFsnI2Rvd25sb2FkLW1hbmFnZXInXQogICAgICAgIH0sCiAgICAgICAgT3BlbnN1YnRpdGxlczogewogICAgICAgICAgICBob3N0OiBbJ29wZW5zdWJ0aXRsZXMub3JnJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2NiRG93bmxvYWRlciddLAogICAgICAgICAgICBvcHR1bmNoZWNrOiB7CiAgICAgICAgICAgICAgICAvLyBOZXZlciBzdG9wIHRvIHRyeSB1bmNoZWNraW5nIHRoZSBjaGVja2JveAogICAgICAgICAgICAgICAgY29uc3RhbnRjaGVjazogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBoaWRlOiBbJyNjYkRvd25sb2FkZXInLCcjbGItZHdsJ10sCiAgICAgICAgICAgIG9wdGhpZGU6IHsKICAgICAgICAgICAgICAgIC8vIE5ldmVyIHN0b3AgdG8gdHJ5IGhpZGluZyB0aGUgb2JqZWN0CiAgICAgICAgICAgICAgICBjb25zdGFudGNoZWNrOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIEZpbGVoaXBwbzogewogICAgICAgICAgICBob3N0OiBbJ2ZpbGVoaXBwby5jb20nXSwKICAgICAgICAgICAgLy8gV2lsbCBkbyBub3RoaW5nIG9uIHBhZ2VzIHdpdGhvdXQgYSBkb3dubG9hZCBtYW5hZ2VyCiAgICAgICAgICAgIGhpZGU6IFsnI3Byb2dyYW0taGVhZGVyLWRvd25sb2FkLWxpbmstZG0tdGV4dCcsICcjZGlyZWN0LWRvd25sb2FkLWxpbmstY29udGFpbmVyJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGFkd09iaiA9ICQoJy5wcm9ncmFtLWhlYWRlci1kb3dubG9hZC1saW5rLmRvd25sb2FkLW1hbmFnZXItZW5hYmxlZCcpCiAgICAgICAgICAgICAgICAvLyBBcHBlbmQgP2RpcmVjdCBhdCB0aGUgZW5kIG9mIHRoZSBVUkwgc28gdGhhdCBpdCBkb2Vzbid0IHByb3ZpZGUgdGhlIGRvd25sb2FkIG1hbmFnZXIKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RVcmwgPSBhZHdPYmouYXR0cignaHJlZicpICsgJz9kaXJlY3QnCgogICAgICAgICAgICAgICAgYWR3T2JqLmF0dHIoJ2hyZWYnLCBkaXJlY3RVcmwpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFJldkNsb3VkczogewogICAgICAgICAgICBob3N0OiBbJ3JldmNsb3Vkcy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjdGljay1kd24nXSwKICAgICAgICAgICAgaGlkZTogWycudGljay1ib3gnXQogICAgICAgIH0sCiAgICAgICAgUm9taHVzdGxlcjogewogICAgICAgICAgICBob3N0OiBbJ3JvbWh1c3RsZXIubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3VzZV9hY2NlbGVyYXRvciddLAogICAgICAgICAgICBoaWRlOiBbJy5hY2NlbGVyYXRvciddCiAgICAgICAgfSwKICAgICAgICBTZWN1cmV1cGxvYWQ6IHsKICAgICAgICAJaG9zdDogWydzZWN1cmV1cGxvYWQuZXUnXSwKICAgICAgICAJdW5jaGVjazogWydmb3JtW25hbWU9ZGxtYW5hZ2VyXSA+IGlucHV0OmNoZWNrYm94J10sCiAgICAgICAgCW9wdHVuY2hlY2s6IHsKICAgICAgICAgICAgICAgIC8vIE5ldmVyIHN0b3AgdG8gdHJ5IHVuY2hlY2tpbmcgdGhlIGNoZWNrYm94CiAgICAgICAgICAgICAgICBjb25zdGFudGNoZWNrOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgCWhpZGU6IFsnZm9ybVtuYW1lPWRsbWFuYWdlcl0nLCAnaW1nW3NyYz0iaHR0cHM6Ly93d3cuc2VjdXJldXBsb2FkLmV1L2dmeC9kbGJ0bi5wbmciXScsICdpbWdbc3JjPSJodHRwczovL3d3dy5zZWN1cmV1cGxvYWQuZXUvZ2Z4L2ZyZWVkbC5wbmciXSddLAogICAgICAgIAlvcHRoaWRlOiB7CiAgICAgICAgICAgICAgICAvLyBOZXZlciBzdG9wIHRvIHRyeSBoaWRpbmcgdGhlIG9iamVjdAogICAgICAgICAgICAgICAgY29uc3RhbnRjaGVjazogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBTZW5kc3BhY2U6IHsKICAgICAgICAgICAgaG9zdDogWydzZW5kc3BhY2UuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI3F1aWNrY2hrJ10sCiAgICAgICAgICAgIGhpZGU6IFsiZm9ybSA+IGRpdjpjb250YWlucygnd2l0aCBzZW5kc3BhY2UgYWNjZWxlcmF0b3InKSIsJyNxdWlja2NoayddCiAgICAgICAgfSwKICAgICAgICBTaGFyZWJlYXN0OiB7CiAgICAgICAgICAgIGhvc3Q6IFsnc2hhcmViZWFzdC5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjc2hhcmViZWFzdF9kb3dubG9hZGVyJ10sCiAgICAgICAgICAgIGhpZGU6IFsnI3NoYXJlYmVhc3RfZG93bmxvYWRlcl9jb250YWluZXInXQogICAgICAgIH0sCiAgICAgICAgU2hhcmVkOiB7CiAgICAgICAgICAgIGhvc3Q6IFsnc2hhcmVkLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyN1c2UtbWFuYWdlciddLAogICAgICAgICAgICBoaWRlOiBbJyN3ZWJwaWNrLW9wdGlvbiddCiAgICAgICAgfSwKICAgICAgICBTb2Z0TTg6IHsKICAgICAgICAgICAgaG9zdDogWycuc29mdG04LmNvbSddLAogICAgICAgICAgICBoaWRlOiBbJyNkaW5mbzJbc3R5bGU9ImNsZWFyOmJvdGg7Il0nXSwgLy8gQmxhaCBibGFoIGFib3V0IEFkd2FyZQogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBidXRNYXRjaCA9ICcuYnV0dG9uRG93bmxvYWQuZGJ0bmRsJwogICAgICAgICAgICAgICAgdmFyIGRsQnV0ID0gJChidXRNYXRjaCkKCiAgICAgICAgICAgICAgICAvLyBUYWtlIHRoZSBsYXN0IHBhcnQgb2YgdGhlIHBhdGggb2YgdGhlIFVSTAogICAgICAgICAgICAgICAgdmFyIGV4ZU5hbWUgPSBkbEJ1dC5wcm9wKCdocmVmJykuc3BsaXQoJy8nKS5wb3AoKQoKICAgICAgICAgICAgICAgIC8vIEZvdW5kIGluIHRoZSBhZHdhcmUgaW5zdGFsbGF0aW9uIGV4ZWN1dGFibGUKICAgICAgICAgICAgICAgIHZhciBub0FkTG5rID0gJ2h0dHA6Ly9oLnNvZnRtOC5jb20vJyArIGV4ZU5hbWUKCiAgICAgICAgICAgICAgICAvLyBDYW4gYmUgbXVsdGlwbGUgYnV0dG9ucwogICAgICAgICAgICAgICAgZGxCdXQucHJvcCgnaHJlZicsIG5vQWRMbmspCiAgICAgICAgICAgICAgICB1bnNhZmVXaW5kb3cuJChidXRNYXRjaCkub2ZmKCdjbGljaycpIC8vIFByZXZlbnRzIHRoZSBkb3dubG9hZCBmcm9tIGxhdW5jaGluZyBwcm9wZXJseQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBTb2Z0b25pYzogewogICAgICAgICAgICBob3N0OiBbJy5zb2Z0b25pYy4nXSwKICAgICAgICAgICAgaGlkZTogWydoMjpjb250YWlucygiU29mdG9uaWMgRG93bmxvYWRlciIpIH4gdWwnLCdoMjpjb250YWlucygiU29mdG9uaWMgRG93bmxvYWRlciIpLCAuYm94LWRvd25sb2FkLWZvb3RlciddLAogICAgICAgICAgICBleGVjOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgIHZhciBsaW5rRm9sbG93ID0gJCgnI2Rvd25sb2FkX2FsdGVybmF0aXZlID4gcCA+IGFbcmVsPW5vZm9sbG93XScpCiAgICAgICAgICAgICAgICBpZiAoZXhpc3RzKGxpbmtGb2xsb3cpKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQubG9jYXRpb24ucmVwbGFjZShsaW5rRm9sbG93LnByb3AoJ2hyZWYnKSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgbWFuYWdlckJ1dHRvbiA9ICQoJyNkb3dubG9hZC1idXR0b24tc2QsICNkb3dubG9hZC1idXR0b24nKQogICAgICAgICAgICAgICAgdmFyIGRpcmVjdEJ1dHRvbiA9ICQoJyNkb3dubG9hZC1idXR0b24tYWx0ZXJuYXRpdmUnKQogICAgICAgICAgICAgICAgaWYgKCFleGlzdHMobWFuYWdlckJ1dHRvbikgfHwgIWV4aXN0cyhkaXJlY3RCdXR0b24pKSB7cmV0dXJufQoKICAgICAgICAgICAgICAgIHZhciBkaXJlY3RMaW5rID0gZGlyZWN0QnV0dG9uLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgICAgIC8vIEF2b2lkIGpRdWVyeSBjbGljayByZWRpcmVjdGlvbiBzZXQgb24gdGhlIGRvd25sb2FkIGJ1dHRvbgogICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7dW5zYWZlV2luZG93LiQoJyNkb3dubG9hZC1idXR0b24tc2QsICNkb3dubG9hZC1idXR0b24nKS5vZmYoJ2NsaWNrJyl9LCAxMDApCgogICAgICAgICAgICAgICAgbWFuYWdlckJ1dHRvbi5wcm9wKCdocmVmJywgZGlyZWN0TGluaykKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgU291cmNlZm9yZ2U6IHsKICAgICAgICAgICAgaG9zdDogWydzb3VyY2Vmb3JnZS5uZXQnXSwKICAgICAgICAgICAgaGlkZTogWycuZGlyZWN0LWRsJywgJy5pbmZvLWNpcmNsZScsICcuYnRuLWRkbC10b2dnbGUnXSwKICAgICAgICAgICAgZXhlYzogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIAkvLyBIb3RmaXg6IGlmIHRoZSB1c2VyIGlzIG9uIGFuIGFkd2FyZS1idW5kbGVkIGRvd25sb2FkIHBhZ2UKICAgICAgICAgICAgCWlmIChkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZS5jb250YWlucygnL2Rvd25sb2FkJykgJiYgIWRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5jb250YWlucygnbm93cmFwJykpIHsKICAgICAgICAgICAgCQkvLyBBZGQgdGhlIGFyZ3VtZW50IGFzIGZpcnN0IGFyZ3VtZW50ICg/KSBvciBzZWNvbmRhcnkgYXJndW1lbnQgKCYpCiAgICAgICAgICAgIAkJdmFyIHByZWZpeCA9IGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5jb250YWlucygnPycpPyAnJicgOiAnPyc7CiAgICAgICAgICAgIAkJZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoID0gZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoICsgcHJlZml4ICsgJ25vd3JhcCc7CiAgICAgICAgICAgIAl9CgogICAgICAgICAgICAJdHJ5IHsKCSAgICAgICAgICAgIAkvLyBTZWVuIGluIGJyb3dzaW5nIGZpbGVzIHBhZ2VzCgkgICAgICAgICAgICAJdmFyIHRvZ2dsZUJ0biA9ICQoJ2EuYnRuLWRkbC10b2dnbGUnKTsKCSAgICAgICAgICAgIAkvLyBJbiBjYXNlIHRoZSB0ZXh0IGNvbnRhaW5zIHRoZSBwYXR0ZXJuIHRlbGxpbmcgdG8gdGhlIHVzZXIgdGhhdCBhZHdhcmUgaXMgZW5hYmxlZAoJICAgICAgICAgICAgCWlmIChleGlzdHModG9nZ2xlQnRuKSAmJiB0b2dnbGVCdG4uaHRtbCgpLmNvbnRhaW5zKHRvZ2dsZUJ0bi5hdHRyKCdkYXRhLWNvbnRlbnQtbm93cmFwJykpKSB7CgkgICAgICAgICAgICAJCS8vIFdlIGRpc2FibGUgaXQKCSAgICAgICAgICAgIAkJdW5zYWZlV2luZG93LiQoJ2EuYnRuLWRkbC10b2dnbGUnKS5jbGljaygpOwoJICAgICAgICAgICAgCX0KCSAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CgogICAgICAgICAgICAJLy8gLS0+IFRoaXMgaXMgZm9yIHByb2dyYW0gcGFnZXMKICAgICAgICAgICAgCS8vIFRyeSB0byBnZXQgdGhlIHJlYWwgbGluawogICAgICAgICAgICAJdmFyIHJlYWxMaW5rID0gJCgnLmRpcmVjdC1kbCcpLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgCS8vIElmIHdlIGZvdW5kIHRoZSBkaXJlY3QgZG93bmxvYWQgbGluaywgdGhlbiBpdCBtZWFucyB0aGlzIGRvd25sb2FkIGlzIGJ1bmRsZWQgd2l0aCBhIHBpZWNlIG9mIGFkd2FyZQogICAgICAgICAgICAJaWYgKHR5cGVvZiByZWFsTGluayAhPSAndW5kZWZpbmVkJykgewoJICAgICAgICAgICAgCS8vIFJlcGxhY2UgdGhlIGRvd25sb2FkIGxpbmsgd2l0aCB0aGUgcmVhbCBvbmUKCSAgICAgICAgICAgIAkkKCcjZG93bmxvYWRfYnV0dG9uID4gLnNmZGwnKS5wcm9wKCdocmVmJywgcmVhbExpbmspCgoJICAgICAgICAgICAgCS8vIE5vdyB3ZSdyZSB0cnlpbmcgdG8gY2hhbmdlIHRoZSAiSW5zdGFsbGVyIEVuYWJsZWQiIHRleHQgd2l0aCB0aGUgbmFtZSBvZiB0aGUgZmlsZQoJICAgICAgICAgICAgCXZhciBjb250YWluc0ZpbGVOYW1lID0gJCgnLnNmZGwnKS5hdHRyKCdvbGR0aXRsZScpCgkgICAgICAgICAgICAJdmFyIGV4dHJhY3RGaWxlTmFtZSA9IC9cLyg/IS4qXC8pKFteIF0rKS8KCgkgICAgICAgICAgICAJdmFyIGZpbGVOYW1lID0gZXh0cmFjdEZpbGVOYW1lLmV4ZWMoY29udGFpbnNGaWxlTmFtZSkKCgkgICAgICAgICAgICAJJCgic21hbGw6Y29udGFpbnMoJ0luc3RhbGxlciBFbmFibGVkJykiKS5odG1sKGZpbGVOYW1lWzFdKQoJICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIC0tPiBUaGlzIGlzIGZvciB0aGUgbWFpbiBwYWdlIGFuZCBzZWFyY2hlcwogICAgICAgICAgICAgICAgLy8gVE9ETzogdXNlIGEgbXV0YXRpb24gb2JzZXJ2ZXIgZm9yIHNlYXJjaCBwYWdlcyAobm90IG5lZWRlZCBmb3IgbWFpbiBwYWdlKQogICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgJCgiLnNmZGwuc2ZkbC1saXRlIikuZWFjaChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yY2UgZG93bmxvYWRpbmcgdGhlIGFkd2FyZS1mcmVlIHByb2dyYW0KICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZEhyZWYgPSAkKHRoaXMpLnByb3AoJ2hyZWYnKQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBhcHBlbmRlZCBvdXIgbm8tYWR3YXJlIGFyZ3VtZW50LCBsZWF2ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAob2xkSHJlZi5zdWJzdHJpbmcob2xkSHJlZi5sZW5ndGgtNykgPT0gJyZub3dyYXAnKSB7cmV0dXJufQoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGFwcGVuZCBpdAogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnByb3AoJ2hyZWYnLCAkKHRoaXMpLnByb3AoJ2hyZWYnKSArICcmbm93cmFwJykKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSwgNTApCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFR1c2ZpbGVzOiB7CiAgICAgICAgICAgIGhvc3Q6IFsndHVzZmlsZXMubmV0J10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnaW5wdXQ6Y2hlY2tib3hbbmFtZT1xdWlja10nXSwKICAgICAgICAgICAgaGlkZTogWydpbnB1dDpjaGVja2JveFtuYW1lPXF1aWNrXSB+IGxhYmVsJywgJ2lucHV0OmNoZWNrYm94W25hbWU9cXVpY2tdJywnYVt0YXJnZXQ9X2JsYW5rXVtocmVmKj0iaHR0cDovL3NoYXJlc3VwZXIuaW5mby8iXSxpbWdbc3JjPSJodHRwczovL3oudHVzZmlsZXMubmV0L2kvZGxsLnBuZyJdJ10KICAgICAgICB9LAogICAgICAgIFVwbG9hZGluZzogewogICAgICAgICAgICBob3N0OiBbJ3VwbG9hZGluZy5jb20nXSwKICAgICAgICAgICAgdW5jaGVjazogWycjZm9yY2VfZXhlJ10sCiAgICAgICAgICAgIGhpZGU6IFsnLnVzZV9kb3dubG9hZF9tYW5hZ2VyJ10KICAgICAgICB9LAogICAgICAgIFVwbG9kd3M6ewogICAgICAgICAgICBob3N0OiBbJ3VwbG9kLndzJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Noa0lzQWRkJ10sCiAgICAgICAgICAgIGhpZGU6IFsnbGFiZWw6Y29udGFpbnMoIm9mZmVyIiknLCdpbWdbc3JjPSJodHRwOi8vZ29vLmdsL0NHSFZWbyJdJ10KICAgICAgICB9LAogICAgICAgIFVwbG9hZHM6IHsKICAgICAgICAgICAgaG9zdDogWyd1cGxvYWRzLnRvJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2Noa0lzQWRkJ10sCiAgICAgICAgICAgIGhpZGU6IFsnYTpjb250YWlucygiTUFOQUdFUiIpJywnY2VudGVyOmNvbnRhaW5zKCJPZmZlciIpJ10sCiAgICAgICAgfSwKICAgICAgICBVcHRvYm94OiB7CiAgICAgICAgICAgIGhvc3Q6IFsndXB0b2JveC5jb20nXSwKICAgICAgICAgICAgaGlkZTogWydkaXYucmVzZWxsZXIgPiB0YWJsZVthbGlnbj1jZW50ZXJdJ10sCiAgICAgICAgICAgIGV4ZWM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQoJ2Rpdi5yZXNlbGxlciA+IHRhYmxlW2FsaWduPWNlbnRlcl0gZGl2W2FsaWduPWNlbnRlcl0gPiBhJykKICAgICAgICAgICAgICAgIHZhciBhZHdhcmUgPSBidXR0b24ucHJvcCgnaHJlZicpCgogICAgICAgICAgICAgICAgLy8gUmV0cmlldmUgdGhlIHJlYWwgZG93bmxvYWQgbGluayBhbmQgY2hhbmdlIHRoZSBidXR0b24gd2l0aCB0aGlzIGxpbmsKICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZCA9IGFkd2FyZS5tYXRjaCgvJnByb2R1Y3RfZG93bmxvYWRfdXJsPShbXiQmXSspJC8pWzFdCiAgICAgICAgICAgICAgICBidXR0b24ucHJvcCgnaHJlZicsIGRvd25sb2FkKQoKICAgICAgICAgICAgICAgIC8vIFB1dCB0aGUgYnV0dG9uIGluIGEgdmlzaWJsZSBsb2NhdGlvbgogICAgICAgICAgICAgICAgJCgnZGl2LnJlc2VsbGVyID4gdGFibGVbYWxpZ249Y2VudGVyXScpLmJlZm9yZShidXR0b24pCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIFVubGltaXR6b25lOiB7CiAgICAgICAgICAgIGhvc3Q6IFsndW5saW1pdHpvbmUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2RsbSddLAogICAgICAgICAgICBoaWRlOiBbJyNkbG0gfiBiJywnI2RsbSddCiAgICAgICAgfSwKICAgICAgICBVc2Vyc0NETjogewogICAgICAgICAgICBob3N0OiBbJ3VzZXJzY2RuLmNvbSddLAogICAgICAgICAgICB1bmNoZWNrOiBbJyNjaGtJc0FkZCddLAogICAgICAgICAgICBoaWRlOiBbJ2xhYmVsOmNvbnRhaW5zKCJEb3dubG9hZCBtYW5hZ2VyIiknXQogICAgICAgIH0sCiAgICAgICAgWmlkZHU6IHsKICAgICAgICAgICAgaG9zdDogWydkb3dubG9hZHMuemlkZHUuY29tJ10sCiAgICAgICAgICAgIHVuY2hlY2s6IFsnI2FjY2VsZXJhdG9yJ10sCiAgICAgICAgICAgIGhpZGU6IFsndGQudGV4dDEyOmNvbnRhaW5zKCJ6aWRkdSBhY2NlbGVyYXRvciIpJ10KICAgICAgICB9CiAgICB9CgogICAgLy8gSWYgdGhlIHJlcXVpcmUgd2Fzbid0IGV4ZWN1dGVkIChHb29nbGUgQ2hyb21lIGluc3RhbGxhdGlvbiB3aXRob3V0IFRhbXBlcm1vbmtleSksIGpRdWVyeSAyLjAzbWluCiAgICBpZiAodHlwZW9mICQgPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAoZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scj10eXBlb2YgdW5kZWZpbmVkLGk9ZS5sb2NhdGlvbixvPWUuZG9jdW1lbnQscz1vLmRvY3VtZW50RWxlbWVudCxhPWUualF1ZXJ5LHU9ZS4kLGw9e30sYz1bXSxwPSIyLjAuMyIsZj1jLmNvbmNhdCxoPWMucHVzaCxkPWMuc2xpY2UsZz1jLmluZGV4T2YsbT1sLnRvU3RyaW5nLHk9bC5oYXNPd25Qcm9wZXJ0eSx2PXAudHJpbSx4PWZ1bmN0aW9uKGUsbil7cmV0dXJuIG5ldyB4LmZuLmluaXQoZSxuLHQpfSxiPS9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8uc291cmNlLHc9L1xTKy9nLFQ9L14oPzpccyooPFtcd1xXXSs+KVtePl0qfCMoW1x3LV0qKSkkLyxDPS9ePChcdyspXHMqXC8/Pig/OjxcL1wxPnwpJC8saz0vXi1tcy0vLE49Ly0oW1xkYS16XSkvZ2ksRT1mdW5jdGlvbihlLHQpe3JldHVybiB0LnRvVXBwZXJDYXNlKCl9LFM9ZnVuY3Rpb24oKXtvLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkseC5yZWFkeSgpfTt4LmZuPXgucHJvdG90eXBlPXtqcXVlcnk6cCxjb25zdHJ1Y3Rvcjp4LGluaXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoIWUpcmV0dXJuIHRoaXM7aWYoInN0cmluZyI9PXR5cGVvZiBlKXtpZihyPSI8Ij09PWUuY2hhckF0KDApJiYiPiI9PT1lLmNoYXJBdChlLmxlbmd0aC0xKSYmZS5sZW5ndGg+PTM/W251bGwsZSxudWxsXTpULmV4ZWMoZSksIXJ8fCFyWzFdJiZ0KXJldHVybiF0fHx0LmpxdWVyeT8odHx8bikuZmluZChlKTp0aGlzLmNvbnN0cnVjdG9yKHQpLmZpbmQoZSk7aWYoclsxXSl7aWYodD10IGluc3RhbmNlb2YgeD90WzBdOnQseC5tZXJnZSh0aGlzLHgucGFyc2VIVE1MKHJbMV0sdCYmdC5ub2RlVHlwZT90Lm93bmVyRG9jdW1lbnR8fHQ6bywhMCkpLEMudGVzdChyWzFdKSYmeC5pc1BsYWluT2JqZWN0KHQpKWZvcihyIGluIHQpeC5pc0Z1bmN0aW9uKHRoaXNbcl0pP3RoaXNbcl0odFtyXSk6dGhpcy5hdHRyKHIsdFtyXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGk9by5nZXRFbGVtZW50QnlJZChyWzJdKSxpJiZpLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09aSksdGhpcy5jb250ZXh0PW8sdGhpcy5zZWxlY3Rvcj1lLHRoaXN9cmV0dXJuIGUubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTp4LmlzRnVuY3Rpb24oZSk/bi5yZWFkeShlKTooZS5zZWxlY3RvciE9PXVuZGVmaW5lZCYmKHRoaXMuc2VsZWN0b3I9ZS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9ZS5jb250ZXh0KSx4Lm1ha2VBcnJheShlLHRoaXMpKX0sc2VsZWN0b3I6IiIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLnRvQXJyYXkoKTowPmU/dGhpc1t0aGlzLmxlbmd0aCtlXTp0aGlzW2VdfSxwdXNoU3RhY2s6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZSk7cmV0dXJuIHQucHJldk9iamVjdD10aGlzLHQuY29udGV4dD10aGlzLmNvbnRleHQsdH0sZWFjaDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmVhY2godGhpcyxlLHQpfSxyZWFkeTpmdW5jdGlvbihlKXtyZXR1cm4geC5yZWFkeS5wcm9taXNlKCkuZG9uZShlKSx0aGlzfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubGVuZ3RoLG49K2UrKDA+ZT90OjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhuPj0wJiZ0Pm4/W3RoaXNbbl1dOltdKX0sbWFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4Lm1hcCh0aGlzLGZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0LG4sdCl9KSl9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IobnVsbCl9LHB1c2g6aCxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0seC5mbi5pbml0LnByb3RvdHlwZT14LmZuLHguZXh0ZW5kPXguZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLHM9YXJndW1lbnRzWzBdfHx7fSxhPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIHMmJihsPXMscz1hcmd1bWVudHNbMV18fHt9LGE9MiksIm9iamVjdCI9PXR5cGVvZiBzfHx4LmlzRnVuY3Rpb24ocyl8fChzPXt9KSx1PT09YSYmKHM9dGhpcywtLWEpO3U+YTthKyspaWYobnVsbCE9KGU9YXJndW1lbnRzW2FdKSlmb3IodCBpbiBlKW49c1t0XSxyPWVbdF0scyE9PXImJihsJiZyJiYoeC5pc1BsYWluT2JqZWN0KHIpfHwoaT14LmlzQXJyYXkocikpKT8oaT8oaT0hMSxvPW4mJnguaXNBcnJheShuKT9uOltdKTpvPW4mJnguaXNQbGFpbk9iamVjdChuKT9uOnt9LHNbdF09eC5leHRlbmQobCxvLHIpKTpyIT09dW5kZWZpbmVkJiYoc1t0XT1yKSk7cmV0dXJuIHN9LHguZXh0ZW5kKHtleHBhbmRvOiJqUXVlcnkiKyhwK01hdGgucmFuZG9tKCkpLnJlcGxhY2UoL1xEL2csIiIpLG5vQ29uZmxpY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuJD09PXgmJihlLiQ9dSksdCYmZS5qUXVlcnk9PT14JiYoZS5qUXVlcnk9YSkseH0saXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oZSl7ZT94LnJlYWR5V2FpdCsrOngucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihlKXsoZT09PSEwPy0teC5yZWFkeVdhaXQ6eC5pc1JlYWR5KXx8KHguaXNSZWFkeT0hMCxlIT09ITAmJi0teC5yZWFkeVdhaXQ+MHx8KG4ucmVzb2x2ZVdpdGgobyxbeF0pLHguZm4udHJpZ2dlciYmeChvKS50cmlnZ2VyKCJyZWFkeSIpLm9mZigicmVhZHkiKSkpfSxpc0Z1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PT14LnR5cGUoZSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZSYmZT09PWUud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKHBhcnNlRmxvYXQoZSkpJiZpc0Zpbml0ZShlKX0sdHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/bFttLmNhbGwoZSldfHwib2JqZWN0Ijp0eXBlb2YgZX0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXtpZigib2JqZWN0IiE9PXgudHlwZShlKXx8ZS5ub2RlVHlwZXx8eC5pc1dpbmRvdyhlKSlyZXR1cm4hMTt0cnl7aWYoZS5jb25zdHJ1Y3RvciYmIXkuY2FsbChlLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwiaXNQcm90b3R5cGVPZiIpKXJldHVybiExfWNhdGNoKHQpe3JldHVybiExfXJldHVybiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIGUpcmV0dXJuITE7cmV0dXJuITB9LGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IEVycm9yKGUpfSxwYXJzZUhUTUw6ZnVuY3Rpb24oZSx0LG4pe2lmKCFlfHwic3RyaW5nIiE9dHlwZW9mIGUpcmV0dXJuIG51bGw7ImJvb2xlYW4iPT10eXBlb2YgdCYmKG49dCx0PSExKSx0PXR8fG87dmFyIHI9Qy5leGVjKGUpLGk9IW4mJltdO3JldHVybiByP1t0LmNyZWF0ZUVsZW1lbnQoclsxXSldOihyPXguYnVpbGRGcmFnbWVudChbZV0sdCxpKSxpJiZ4KGkpLnJlbW92ZSgpLHgubWVyZ2UoW10sci5jaGlsZE5vZGVzKSl9LHBhcnNlSlNPTjpKU09OLnBhcnNlLHBhcnNlWE1MOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIWV8fCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gbnVsbDt0cnl7bj1uZXcgRE9NUGFyc2VyLHQ9bi5wYXJzZUZyb21TdHJpbmcoZSwidGV4dC94bWwiKX1jYXRjaChyKXt0PXVuZGVmaW5lZH1yZXR1cm4oIXR8fHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcnNlcmVycm9yIikubGVuZ3RoKSYmeC5lcnJvcigiSW52YWxpZCBYTUw6ICIrZSksdH0sbm9vcDpmdW5jdGlvbigpe30sZ2xvYmFsRXZhbDpmdW5jdGlvbihlKXt2YXIgdCxuPWV2YWw7ZT14LnRyaW0oZSksZSYmKDE9PT1lLmluZGV4T2YoInVzZSBzdHJpY3QiKT8odD1vLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpLHQudGV4dD1lLG8uaGVhZC5hcHBlbmRDaGlsZCh0KS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpKTpuKGUpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoaywibXMtIikucmVwbGFjZShOLEUpfSxub2RlTmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk9MCxvPWUubGVuZ3RoLHM9aihlKTtpZihuKXtpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmFwcGx5KGVbaV0sbikscj09PSExKWJyZWFrfWVsc2UgZm9yKGkgaW4gZSlpZihyPXQuYXBwbHkoZVtpXSxuKSxyPT09ITEpYnJlYWt9ZWxzZSBpZihzKXtmb3IoO28+aTtpKyspaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVha31lbHNlIGZvcihpIGluIGUpaWYocj10LmNhbGwoZVtpXSxpLGVbaV0pLHI9PT0hMSlicmVhaztyZXR1cm4gZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjp2LmNhbGwoZSl9LG1ha2VBcnJheTpmdW5jdGlvbihlLHQpe3ZhciBuPXR8fFtdO3JldHVybiBudWxsIT1lJiYoaihPYmplY3QoZSkpP3gubWVyZ2Uobiwic3RyaW5nIj09dHlwZW9mIGU/W2VdOmUpOmguY2FsbChuLGUpKSxufSxpbkFycmF5OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbnVsbD09dD8tMTpnLmNhbGwodCxlLG4pfSxtZXJnZTpmdW5jdGlvbihlLHQpe3ZhciBuPXQubGVuZ3RoLHI9ZS5sZW5ndGgsaT0wO2lmKCJudW1iZXIiPT10eXBlb2Ygbilmb3IoO24+aTtpKyspZVtyKytdPXRbaV07ZWxzZSB3aGlsZSh0W2ldIT09dW5kZWZpbmVkKWVbcisrXT10W2krK107cmV0dXJuIGUubGVuZ3RoPXIsZX0sZ3JlcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT1bXSxvPTAscz1lLmxlbmd0aDtmb3Iobj0hIW47cz5vO28rKylyPSEhdChlW29dLG8pLG4hPT1yJiZpLnB1c2goZVtvXSk7cmV0dXJuIGl9LG1hcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT0wLG89ZS5sZW5ndGgscz1qKGUpLGE9W107aWYocylmb3IoO28+aTtpKyspcj10KGVbaV0saSxuKSxudWxsIT1yJiYoYVthLmxlbmd0aF09cik7ZWxzZSBmb3IoaSBpbiBlKXI9dChlW2ldLGksbiksbnVsbCE9ciYmKGFbYS5sZW5ndGhdPXIpO3JldHVybiBmLmFwcGx5KFtdLGEpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGk7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiYobj1lW3RdLHQ9ZSxlPW4pLHguaXNGdW5jdGlvbihlKT8ocj1kLmNhbGwoYXJndW1lbnRzLDIpLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5hcHBseSh0fHx0aGlzLHIuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHx4Lmd1aWQrKyxpKTp1bmRlZmluZWR9LGFjY2VzczpmdW5jdGlvbihlLHQsbixyLGksbyxzKXt2YXIgYT0wLHU9ZS5sZW5ndGgsbD1udWxsPT1uO2lmKCJvYmplY3QiPT09eC50eXBlKG4pKXtpPSEwO2ZvcihhIGluIG4peC5hY2Nlc3MoZSx0LGEsblthXSwhMCxvLHMpfWVsc2UgaWYociE9PXVuZGVmaW5lZCYmKGk9ITAseC5pc0Z1bmN0aW9uKHIpfHwocz0hMCksbCYmKHM/KHQuY2FsbChlLHIpLHQ9bnVsbCk6KGw9dCx0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbC5jYWxsKHgoZSksbil9KSksdCkpZm9yKDt1PmE7YSsrKXQoZVthXSxuLHM/cjpyLmNhbGwoZVthXSxhLHQoZVthXSxuKSkpO3JldHVybiBpP2U6bD90LmNhbGwoZSk6dT90KGVbMF0sbik6b30sbm93OkRhdGUubm93LHN3YXA6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzPXt9O2ZvcihvIGluIHQpc1tvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtpPW4uYXBwbHkoZSxyfHxbXSk7Zm9yKG8gaW4gdCllLnN0eWxlW29dPXNbb107cmV0dXJuIGl9fSkseC5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKHQpe3JldHVybiBufHwobj14LkRlZmVycmVkKCksImNvbXBsZXRlIj09PW8ucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KHgucmVhZHkpOihvLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLFMsITEpLGUuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsUywhMSkpKSxuLnByb21pc2UodCl9LHguZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe2xbIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gaihlKXt2YXIgdD1lLmxlbmd0aCxuPXgudHlwZShlKTtyZXR1cm4geC5pc1dpbmRvdyhlKT8hMToxPT09ZS5ub2RlVHlwZSYmdD8hMDoiYXJyYXkiPT09bnx8ImZ1bmN0aW9uIiE9PW4mJigwPT09dHx8Im51bWJlciI9PXR5cGVvZiB0JiZ0PjAmJnQtMSBpbiBlKX10PXgobyksZnVuY3Rpb24oZSx1bmRlZmluZWQpe3ZhciB0LG4scixpLG8scyxhLHUsbCxjLHAsZixoLGQsZyxtLHksdj0ic2l6emxlIistbmV3IERhdGUsYj1lLmRvY3VtZW50LHc9MCxUPTAsQz1zdCgpLGs9c3QoKSxOPXN0KCksRT0hMSxTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10PyhFPSEwLDApOjB9LGo9dHlwZW9mIHVuZGVmaW5lZCxEPTE8PDMxLEE9e30uaGFzT3duUHJvcGVydHksTD1bXSxxPUwucG9wLEg9TC5wdXNoLE89TC5wdXNoLEY9TC5zbGljZSxQPUwuaW5kZXhPZnx8ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPXRoaXMubGVuZ3RoO2Zvcig7bj50O3QrKylpZih0aGlzW3RdPT09ZSlyZXR1cm4gdDtyZXR1cm4tMX0sUj0iY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWQiLE09IltcXHgyMFxcdFxcclxcblxcZl0iLFc9Iig/OlxcXFwufFtcXHctXXxbXlxceDAwLVxceGEwXSkrIiwkPVcucmVwbGFjZSgidyIsIncjIiksQj0iXFxbIitNKyIqKCIrVysiKSIrTSsiKig/OihbKl4kfCF+XT89KSIrTSsiKig/OihbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCIrJCsiKXwpfCkiK00rIipcXF0iLEk9IjooIitXKyIpKD86XFwoKChbJ1wiXSkoKD86XFxcXC58W15cXFxcXSkqPylcXDN8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitCLnJlcGxhY2UoMyw4KSsiKSopfC4qKVxcKXwpIix6PVJlZ0V4cCgiXiIrTSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNKyIrJCIsImciKSxfPVJlZ0V4cCgiXiIrTSsiKiwiK00rIioiKSxYPVJlZ0V4cCgiXiIrTSsiKihbPit+XXwiK00rIikiK00rIioiKSxVPVJlZ0V4cChNKyIqWyt+XSIpLFk9UmVnRXhwKCI9IitNKyIqKFteXFxdJ1wiXSopIitNKyIqXFxdIiwiZyIpLFY9UmVnRXhwKEkpLEc9UmVnRXhwKCJeIiskKyIkIiksSj17SUQ6UmVnRXhwKCJeIygiK1crIikiKSxDTEFTUzpSZWdFeHAoIl5cXC4oIitXKyIpIiksVEFHOlJlZ0V4cCgiXigiK1cucmVwbGFjZSgidyIsIncqIikrIikiKSxBVFRSOlJlZ0V4cCgiXiIrQiksUFNFVURPOlJlZ0V4cCgiXiIrSSksQ0hJTEQ6UmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK00rIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK00rIiooPzooWystXXwpIitNKyIqKFxcZCspfCkpIitNKyIqXFwpfCkiLCJpIiksYm9vbDpSZWdFeHAoIl4oPzoiK1IrIikkIiwiaSIpLG5lZWRzQ29udGV4dDpSZWdFeHAoIl4iK00rIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcKCIrTSsiKigoPzotXFxkKT9cXGQqKSIrTSsiKlxcKXwpKD89W14tXXwkKSIsImkiKX0sUT0vXltee10rXHtccypcW25hdGl2ZSBcdy8sSz0vXig/OiMoW1x3LV0rKXwoXHcrKXxcLihbXHctXSspKSQvLFo9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxldD0vXmhcZCQvaSx0dD0vJ3xcXC9nLG50PVJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitNKyI/fCgiK00rIil8LikiLCJpZyIpLHJ0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0iMHgiK3QtNjU1MzY7cmV0dXJuIHIhPT1yfHxuP3Q6MD5yP1N0cmluZy5mcm9tQ2hhckNvZGUocis2NTUzNik6U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxyPj4xMCw1NjMyMHwxMDIzJnIpfTt0cnl7Ty5hcHBseShMPUYuY2FsbChiLmNoaWxkTm9kZXMpLGIuY2hpbGROb2RlcyksTFtiLmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChpdCl7Tz17YXBwbHk6TC5sZW5ndGg/ZnVuY3Rpb24oZSx0KXtILmFwcGx5KGUsRi5jYWxsKHQpKX06ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmxlbmd0aCxyPTA7d2hpbGUoZVtuKytdPXRbcisrXSk7ZS5sZW5ndGg9bi0xfX19ZnVuY3Rpb24gb3QoZSx0LHIsaSl7dmFyIG8scyxhLHUsbCxmLGcsbSx4LHc7aWYoKHQ/dC5vd25lckRvY3VtZW50fHx0OmIpIT09cCYmYyh0KSx0PXR8fHAscj1yfHxbXSwhZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiByO2lmKDEhPT0odT10Lm5vZGVUeXBlKSYmOSE9PXUpcmV0dXJuW107aWYoaCYmIWkpe2lmKG89Sy5leGVjKGUpKWlmKGE9b1sxXSl7aWYoOT09PXUpe2lmKHM9dC5nZXRFbGVtZW50QnlJZChhKSwhc3x8IXMucGFyZW50Tm9kZSlyZXR1cm4gcjtpZihzLmlkPT09YSlyZXR1cm4gci5wdXNoKHMpLHJ9ZWxzZSBpZih0Lm93bmVyRG9jdW1lbnQmJihzPXQub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSkmJnkodCxzKSYmcy5pZD09PWEpcmV0dXJuIHIucHVzaChzKSxyfWVsc2V7aWYob1syXSlyZXR1cm4gTy5hcHBseShyLHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSkpLHI7aWYoKGE9b1szXSkmJm4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBPLmFwcGx5KHIsdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGEpKSxyfWlmKG4ucXNhJiYoIWR8fCFkLnRlc3QoZSkpKXtpZihtPWc9dix4PXQsdz05PT09dSYmZSwxPT09dSYmIm9iamVjdCIhPT10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Y9Z3QoZSksKGc9dC5nZXRBdHRyaWJ1dGUoImlkIikpP209Zy5yZXBsYWNlKHR0LCJcXCQmIik6dC5zZXRBdHRyaWJ1dGUoImlkIixtKSxtPSJbaWQ9JyIrbSsiJ10gIixsPWYubGVuZ3RoO3doaWxlKGwtLSlmW2xdPW0rbXQoZltsXSk7eD1VLnRlc3QoZSkmJnQucGFyZW50Tm9kZXx8dCx3PWYuam9pbigiLCIpfWlmKHcpdHJ5e3JldHVybiBPLmFwcGx5KHIseC5xdWVyeVNlbGVjdG9yQWxsKHcpKSxyfWNhdGNoKFQpe31maW5hbGx5e2d8fHQucmVtb3ZlQXR0cmlidXRlKCJpZCIpfX19cmV0dXJuIGt0KGUucmVwbGFjZSh6LCIkMSIpLHQscixpKX1mdW5jdGlvbiBzdCgpe3ZhciBlPVtdO2Z1bmN0aW9uIHQobixyKXtyZXR1cm4gZS5wdXNoKG4rPSIgIik+aS5jYWNoZUxlbmd0aCYmZGVsZXRlIHRbZS5zaGlmdCgpXSx0W25dPXJ9cmV0dXJuIHR9ZnVuY3Rpb24gYXQoZSl7cmV0dXJuIGVbdl09ITAsZX1mdW5jdGlvbiB1dChlKXt2YXIgdD1wLmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RyeXtyZXR1cm4hIWUodCl9Y2F0Y2gobil7cmV0dXJuITF9ZmluYWxseXt0LnBhcmVudE5vZGUmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSx0PW51bGx9fWZ1bmN0aW9uIGx0KGUsdCl7dmFyIG49ZS5zcGxpdCgifCIpLHI9ZS5sZW5ndGg7d2hpbGUoci0tKWkuYXR0ckhhbmRsZVtuW3JdXT10fWZ1bmN0aW9uIGN0KGUsdCl7dmFyIG49dCYmZSxyPW4mJjE9PT1lLm5vZGVUeXBlJiYxPT09dC5ub2RlVHlwZSYmKH50LnNvdXJjZUluZGV4fHxEKS0ofmUuc291cmNlSW5kZXh8fEQpO2lmKHIpcmV0dXJuIHI7aWYobil3aGlsZShuPW4ubmV4dFNpYmxpbmcpaWYobj09PXQpcmV0dXJuLTE7cmV0dXJuIGU/MTotMX1mdW5jdGlvbiBwdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT1uJiZ0LnR5cGU9PT1lfX1mdW5jdGlvbiBmdChlKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIG49dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09bnx8ImJ1dHRvbiI9PT1uKSYmdC50eXBlPT09ZX19ZnVuY3Rpb24gaHQoZSl7cmV0dXJuIGF0KGZ1bmN0aW9uKHQpe3JldHVybiB0PSt0LGF0KGZ1bmN0aW9uKG4scil7dmFyIGksbz1lKFtdLG4ubGVuZ3RoLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKW5baT1vW3NdXSYmKG5baV09IShyW2ldPW5baV0pKX0pfSl9cz1vdC5pc1hNTD1mdW5jdGlvbihlKXt2YXIgdD1lJiYoZS5vd25lckRvY3VtZW50fHxlKS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIHQ/IkhUTUwiIT09dC5ub2RlTmFtZTohMX0sbj1vdC5zdXBwb3J0PXt9LGM9b3Quc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZT9lLm93bmVyRG9jdW1lbnR8fGU6YixyPXQuZGVmYXVsdFZpZXc7cmV0dXJuIHQhPT1wJiY5PT09dC5ub2RlVHlwZSYmdC5kb2N1bWVudEVsZW1lbnQ/KHA9dCxmPXQuZG9jdW1lbnRFbGVtZW50LGg9IXModCksciYmci5hdHRhY2hFdmVudCYmciE9PXIudG9wJiZyLmF0dGFjaEV2ZW50KCJvbmJlZm9yZXVubG9hZCIsZnVuY3Rpb24oKXtjKCl9KSxuLmF0dHJpYnV0ZXM9dXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPSJpIiwhZS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksbi5nZXRFbGVtZW50c0J5VGFnTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZCh0LmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLG4uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT11dChmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+IixlLmZpcnN0Q2hpbGQuY2xhc3NOYW1lPSJpIiwyPT09ZS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJpIikubGVuZ3RofSksbi5nZXRCeUlkPXV0KGZ1bmN0aW9uKGUpe3JldHVybiBmLmFwcGVuZENoaWxkKGUpLmlkPXYsIXQuZ2V0RWxlbWVudHNCeU5hbWV8fCF0LmdldEVsZW1lbnRzQnlOYW1lKHYpLmxlbmd0aH0pLG4uZ2V0QnlJZD8oaS5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYodHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQhPT1qJiZoKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuJiZuLnBhcmVudE5vZGU/W25dOltdfX0saS5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5yZXBsYWNlKG50LHJ0KTtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGUuZ2V0QXR0cmlidXRlKCJpZCIpPT09dH19KTooZGVsZXRlIGkuZmluZC5JRCxpLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UobnQscnQpO3JldHVybiBmdW5jdGlvbihlKXt2YXIgbj10eXBlb2YgZS5nZXRBdHRyaWJ1dGVOb2RlIT09aiYmZS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBuJiZuLnZhbHVlPT09dH19KSxpLmZpbmQuVEFHPW4uZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdHlwZW9mIHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1qP3QuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZSk6dW5kZWZpbmVkfTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT0wLG89dC5nZXRFbGVtZW50c0J5VGFnTmFtZShlKTtpZigiKiI9PT1lKXt3aGlsZShuPW9baSsrXSkxPT09bi5ub2RlVHlwZSYmci5wdXNoKG4pO3JldHVybiByfXJldHVybiBvfSxpLmZpbmQuQ0xBU1M9bi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihlLHQpe3JldHVybiB0eXBlb2YgdC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09aiYmaD90LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoZSk6dW5kZWZpbmVkfSxnPVtdLGQ9W10sKG4ucXNhPVEudGVzdCh0LnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKHV0KGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8c2VsZWN0PjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+IixlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fGQucHVzaCgiXFxbIitNKyIqKD86dmFsdWV8IitSKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCI6Y2hlY2tlZCIpLmxlbmd0aHx8ZC5wdXNoKCI6Y2hlY2tlZCIpfSksdXQoZnVuY3Rpb24oZSl7dmFyIG49dC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO24uc2V0QXR0cmlidXRlKCJ0eXBlIiwiaGlkZGVuIiksZS5hcHBlbmRDaGlsZChuKS5zZXRBdHRyaWJ1dGUoInQiLCIiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIlt0Xj0nJ10iKS5sZW5ndGgmJmQucHVzaCgiWypeJF09IitNKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjplbmFibGVkIikubGVuZ3RofHxkLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4IiksZC5wdXNoKCIsLio6Iil9KSksKG4ubWF0Y2hlc1NlbGVjdG9yPVEudGVzdChtPWYud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxmLm1vek1hdGNoZXNTZWxlY3Rvcnx8Zi5vTWF0Y2hlc1NlbGVjdG9yfHxmLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJnV0KGZ1bmN0aW9uKGUpe24uZGlzY29ubmVjdGVkTWF0Y2g9bS5jYWxsKGUsImRpdiIpLG0uY2FsbChlLCJbcyE9JyddOngiKSxnLnB1c2goIiE9IixJKX0pLGQ9ZC5sZW5ndGgmJlJlZ0V4cChkLmpvaW4oInwiKSksZz1nLmxlbmd0aCYmUmVnRXhwKGcuam9pbigifCIpKSx5PVEudGVzdChmLmNvbnRhaW5zKXx8Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHQpe3ZhciBuPTk9PT1lLm5vZGVUeXBlP2UuZG9jdW1lbnRFbGVtZW50OmUscj10JiZ0LnBhcmVudE5vZGU7cmV0dXJuIGU9PT1yfHwhKCFyfHwxIT09ci5ub2RlVHlwZXx8IShuLmNvbnRhaW5zP24uY29udGFpbnMocik6ZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKSkpfTpmdW5jdGlvbihlLHQpe2lmKHQpd2hpbGUodD10LnBhcmVudE5vZGUpaWYodD09PWUpcmV0dXJuITA7cmV0dXJuITF9LFM9Zi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbj9mdW5jdGlvbihlLHIpe2lmKGU9PT1yKXJldHVybiBFPSEwLDA7dmFyIGk9ci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihyKTtyZXR1cm4gaT8xJml8fCFuLnNvcnREZXRhY2hlZCYmci5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKT09PWk/ZT09PXR8fHkoYixlKT8tMTpyPT09dHx8eShiLHIpPzE6bD9QLmNhbGwobCxlKS1QLmNhbGwobCxyKTowOjQmaT8tMToxOmUuY29tcGFyZURvY3VtZW50UG9zaXRpb24/LTE6MX06ZnVuY3Rpb24oZSxuKXt2YXIgcixpPTAsbz1lLnBhcmVudE5vZGUscz1uLnBhcmVudE5vZGUsYT1bZV0sdT1bbl07aWYoZT09PW4pcmV0dXJuIEU9ITAsMDtpZighb3x8IXMpcmV0dXJuIGU9PT10Py0xOm49PT10PzE6bz8tMTpzPzE6bD9QLmNhbGwobCxlKS1QLmNhbGwobCxuKTowO2lmKG89PT1zKXJldHVybiBjdChlLG4pO3I9ZTt3aGlsZShyPXIucGFyZW50Tm9kZSlhLnVuc2hpZnQocik7cj1uO3doaWxlKHI9ci5wYXJlbnROb2RlKXUudW5zaGlmdChyKTt3aGlsZShhW2ldPT09dVtpXSlpKys7cmV0dXJuIGk/Y3QoYVtpXSx1W2ldKTphW2ldPT09Yj8tMTp1W2ldPT09Yj8xOjB9LHQpOnB9LG90Lm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gb3QoZSxudWxsLG51bGwsdCl9LG90Lm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09cCYmYyhlKSx0PXQucmVwbGFjZShZLCI9JyQxJ10iKSwhKCFuLm1hdGNoZXNTZWxlY3Rvcnx8IWh8fGcmJmcudGVzdCh0KXx8ZCYmZC50ZXN0KHQpKSl0cnl7dmFyIHI9bS5jYWxsKGUsdCk7aWYocnx8bi5kaXNjb25uZWN0ZWRNYXRjaHx8ZS5kb2N1bWVudCYmMTEhPT1lLmRvY3VtZW50Lm5vZGVUeXBlKXJldHVybiByfWNhdGNoKGkpe31yZXR1cm4gb3QodCxwLG51bGwsW2VdKS5sZW5ndGg+MH0sb3QuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PXAmJmMoZSkseShlLHQpfSxvdC5hdHRyPWZ1bmN0aW9uKGUsdCl7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1wJiZjKGUpO3ZhciByPWkuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLG89ciYmQS5jYWxsKGkuYXR0ckhhbmRsZSx0LnRvTG93ZXJDYXNlKCkpP3IoZSx0LCFoKTp1bmRlZmluZWQ7cmV0dXJuIG89PT11bmRlZmluZWQ/bi5hdHRyaWJ1dGVzfHwhaD9lLmdldEF0dHJpYnV0ZSh0KToobz1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZvLnNwZWNpZmllZD9vLnZhbHVlOm51bGw6b30sb3QuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrZSl9LG90LnVuaXF1ZVNvcnQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1bXSxpPTAsbz0wO2lmKEU9IW4uZGV0ZWN0RHVwbGljYXRlcyxsPSFuLnNvcnRTdGFibGUmJmUuc2xpY2UoMCksZS5zb3J0KFMpLEUpe3doaWxlKHQ9ZVtvKytdKXQ9PT1lW29dJiYoaT1yLnB1c2gobykpO3doaWxlKGktLSllLnNwbGljZShyW2ldLDEpfXJldHVybiBlfSxvPW90LmdldFRleHQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj0iIixyPTAsaT1lLm5vZGVUeXBlO2lmKGkpe2lmKDE9PT1pfHw5PT09aXx8MTE9PT1pKXtpZigic3RyaW5nIj09dHlwZW9mIGUudGV4dENvbnRlbnQpcmV0dXJuIGUudGV4dENvbnRlbnQ7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKW4rPW8oZSl9ZWxzZSBpZigzPT09aXx8ND09PWkpcmV0dXJuIGUubm9kZVZhbHVlfWVsc2UgZm9yKDt0PWVbcl07cisrKW4rPW8odCk7cmV0dXJuIG59LGk9b3Quc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86YXQsbWF0Y2g6SixhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6eyI+Ijp7ZGlyOiJwYXJlbnROb2RlIixmaXJzdDohMH0sIiAiOntkaXI6InBhcmVudE5vZGUifSwiKyI6e2RpcjoicHJldmlvdXNTaWJsaW5nIixmaXJzdDohMH0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oZSl7cmV0dXJuIGVbMV09ZVsxXS5yZXBsYWNlKG50LHJ0KSxlWzNdPShlWzRdfHxlWzVdfHwiIikucmVwbGFjZShudCxydCksIn49Ij09PWVbMl0mJihlWzNdPSIgIitlWzNdKyIgIiksZS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnRvTG93ZXJDYXNlKCksIm50aCI9PT1lWzFdLnNsaWNlKDAsMyk/KGVbM118fG90LmVycm9yKGVbMF0pLGVbNF09KyhlWzRdP2VbNV0rKGVbNl18fDEpOjIqKCJldmVuIj09PWVbM118fCJvZGQiPT09ZVszXSkpLGVbNV09KyhlWzddK2VbOF18fCJvZGQiPT09ZVszXSkpOmVbM10mJm90LmVycm9yKGVbMF0pLGV9LFBTRVVETzpmdW5jdGlvbihlKXt2YXIgdCxuPSFlWzVdJiZlWzJdO3JldHVybiBKLkNISUxELnRlc3QoZVswXSk/bnVsbDooZVszXSYmZVs0XSE9PXVuZGVmaW5lZD9lWzJdPWVbNF06biYmVi50ZXN0KG4pJiYodD1ndChuLCEwKSkmJih0PW4uaW5kZXhPZigiKSIsbi5sZW5ndGgtdCktbi5sZW5ndGgpJiYoZVswXT1lWzBdLnNsaWNlKDAsdCksZVsyXT1uLnNsaWNlKDAsdCkpLGUuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UobnQscnQpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIioiPT09ZT9mdW5jdGlvbigpe3JldHVybiEwfTpmdW5jdGlvbihlKXtyZXR1cm4gZS5ub2RlTmFtZSYmZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09dH19LENMQVNTOmZ1bmN0aW9uKGUpe3ZhciB0PUNbZSsiICJdO3JldHVybiB0fHwodD1SZWdFeHAoIihefCIrTSsiKSIrZSsiKCIrTSsifCQpIikpJiZDKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdCgic3RyaW5nIj09dHlwZW9mIGUuY2xhc3NOYW1lJiZlLmNsYXNzTmFtZXx8dHlwZW9mIGUuZ2V0QXR0cmlidXRlIT09aiYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZnVuY3Rpb24ocil7dmFyIGk9b3QuYXR0cihyLGUpO3JldHVybiBudWxsPT1pPyIhPSI9PT10OnQ/KGkrPSIiLCI9Ij09PXQ/aT09PW46IiE9Ij09PXQ/aSE9PW46Il49Ij09PXQ/biYmMD09PWkuaW5kZXhPZihuKToiKj0iPT09dD9uJiZpLmluZGV4T2Yobik+LTE6IiQ9Ij09PXQ/biYmaS5zbGljZSgtbi5sZW5ndGgpPT09bjoifj0iPT09dD8oIiAiK2krIiAiKS5pbmRleE9mKG4pPi0xOiJ8PSI9PT10P2k9PT1ufHxpLnNsaWNlKDAsbi5sZW5ndGgrMSk9PT1uKyItIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihlLHQsbixyLGkpe3ZhciBvPSJudGgiIT09ZS5zbGljZSgwLDMpLHM9Imxhc3QiIT09ZS5zbGljZSgtNCksYT0ib2YtdHlwZSI9PT10O3JldHVybiAxPT09ciYmMD09PWk/ZnVuY3Rpb24oZSl7cmV0dXJuISFlLnBhcmVudE5vZGV9OmZ1bmN0aW9uKHQsbix1KXt2YXIgbCxjLHAsZixoLGQsZz1vIT09cz8ibmV4dFNpYmxpbmciOiJwcmV2aW91c1NpYmxpbmciLG09dC5wYXJlbnROb2RlLHk9YSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHg9IXUmJiFhO2lmKG0pe2lmKG8pe3doaWxlKGcpe3A9dDt3aGlsZShwPXBbZ10paWYoYT9wLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT15OjE9PT1wLm5vZGVUeXBlKXJldHVybiExO2Q9Zz0ib25seSI9PT1lJiYhZCYmIm5leHRTaWJsaW5nIn1yZXR1cm4hMH1pZihkPVtzP20uZmlyc3RDaGlsZDptLmxhc3RDaGlsZF0scyYmeCl7Yz1tW3ZdfHwobVt2XT17fSksbD1jW2VdfHxbXSxoPWxbMF09PT13JiZsWzFdLGY9bFswXT09PXcmJmxbMl0scD1oJiZtLmNoaWxkTm9kZXNbaF07d2hpbGUocD0rK2gmJnAmJnBbZ118fChmPWg9MCl8fGQucG9wKCkpaWYoMT09PXAubm9kZVR5cGUmJisrZiYmcD09PXQpe2NbZV09W3csaCxmXTticmVha319ZWxzZSBpZih4JiYobD0odFt2XXx8KHRbdl09e30pKVtlXSkmJmxbMF09PT13KWY9bFsxXTtlbHNlIHdoaWxlKHA9KytoJiZwJiZwW2ddfHwoZj1oPTApfHxkLnBvcCgpKWlmKChhP3Aubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXk6MT09PXAubm9kZVR5cGUpJiYrK2YmJih4JiYoKHBbdl18fChwW3ZdPXt9KSlbZV09W3csZl0pLHA9PT10KSlicmVhaztyZXR1cm4gZi09aSxmPT09cnx8MD09PWYlciYmZi9yPj0wfX19LFBTRVVETzpmdW5jdGlvbihlLHQpe3ZhciBuLHI9aS5wc2V1ZG9zW2VdfHxpLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8b3QuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gclt2XT9yKHQpOnIubGVuZ3RoPjE/KG49W2UsZSwiIix0XSxpLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9hdChmdW5jdGlvbihlLG4pe3ZhciBpLG89cihlLHQpLHM9by5sZW5ndGg7d2hpbGUocy0tKWk9UC5jYWxsKGUsb1tzXSksZVtpXT0hKG5baV09b1tzXSl9KTpmdW5jdGlvbihlKXtyZXR1cm4gcihlLDAsbil9KTpyfX0scHNldWRvczp7bm90OmF0KGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49W10scj1hKGUucmVwbGFjZSh6LCIkMSIpKTtyZXR1cm4gclt2XT9hdChmdW5jdGlvbihlLHQsbixpKXt2YXIgbyxzPXIoZSxudWxsLGksW10pLGE9ZS5sZW5ndGg7d2hpbGUoYS0tKShvPXNbYV0pJiYoZVthXT0hKHRbYV09bykpfSk6ZnVuY3Rpb24oZSxpLG8pe3JldHVybiB0WzBdPWUscih0LG51bGwsbyxuKSwhbi5wb3AoKX19KSxoYXM6YXQoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBvdChlLHQpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmF0KGZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4odC50ZXh0Q29udGVudHx8dC5pbm5lclRleHR8fG8odCkpLmluZGV4T2YoZSk+LTF9fSksbGFuZzphdChmdW5jdGlvbihlKXtyZXR1cm4gRy50ZXN0KGV8fCIiKXx8b3QuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrZSksZT1lLnJlcGxhY2UobnQscnQpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24odCl7dmFyIG47ZG8gaWYobj1oP3QubGFuZzp0LmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8dC5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4gbj1uLnRvTG93ZXJDYXNlKCksbj09PWV8fDA9PT1uLmluZGV4T2YoZSsiLSIpO3doaWxlKCh0PXQucGFyZW50Tm9kZSkmJjE9PT10Lm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24odCl7dmFyIG49ZS5sb2NhdGlvbiYmZS5sb2NhdGlvbi5oYXNoO3JldHVybiBuJiZuLnNsaWNlKDEpPT09dC5pZH0scm9vdDpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWZ9LGZvY3VzOmZ1bmN0aW9uKGUpe3JldHVybiBlPT09cC5hY3RpdmVFbGVtZW50JiYoIXAuaGFzRm9jdXN8fHAuaGFzRm9jdXMoKSkmJiEhKGUudHlwZXx8ZS5ocmVmfHx+ZS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihlKXt2YXIgdD1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuImlucHV0Ij09PXQmJiEhZS5jaGVja2VkfHwib3B0aW9uIj09PXQmJiEhZS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsZS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihlKXtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpaWYoZS5ub2RlTmFtZT4iQCJ8fDM9PT1lLm5vZGVUeXBlfHw0PT09ZS5ub2RlVHlwZSlyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFpLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZXQudGVzdChlLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFoudGVzdChlLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGUpe3ZhciB0PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4iaW5wdXQiPT09dCYmImJ1dHRvbiI9PT1lLnR5cGV8fCJidXR0b24iPT09dH0sdGV4dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiYidGV4dCI9PT1lLnR5cGUmJihudWxsPT0odD1lLmdldEF0dHJpYnV0ZSgidHlwZSIpKXx8dC50b0xvd2VyQ2FzZSgpPT09ZS50eXBlKX0sZmlyc3Q6aHQoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Omh0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuW3QtMV19KSxlcTpodChmdW5jdGlvbihlLHQsbil7cmV0dXJuWzA+bj9uK3Q6bl19KSxldmVuOmh0KGZ1bmN0aW9uKGUsdCl7dmFyIG49MDtmb3IoO3Q+bjtuKz0yKWUucHVzaChuKTtyZXR1cm4gZX0pLG9kZDpodChmdW5jdGlvbihlLHQpe3ZhciBuPTE7Zm9yKDt0Pm47bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7LS1yPj0wOyllLnB1c2gocik7cmV0dXJuIGV9KSxndDpodChmdW5jdGlvbihlLHQsbil7dmFyIHI9MD5uP24rdDpuO2Zvcig7dD4rK3I7KWUucHVzaChyKTtyZXR1cm4gZX0pfX0saS5wc2V1ZG9zLm50aD1pLnBzZXVkb3MuZXE7Zm9yKHQgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0paS5wc2V1ZG9zW3RdPXB0KHQpO2Zvcih0IGlue3N1Ym1pdDohMCxyZXNldDohMH0paS5wc2V1ZG9zW3RdPWZ0KHQpO2Z1bmN0aW9uIGR0KCl7fWR0LnByb3RvdHlwZT1pLmZpbHRlcnM9aS5wc2V1ZG9zLGkuc2V0RmlsdGVycz1uZXcgZHQ7ZnVuY3Rpb24gZ3QoZSx0KXt2YXIgbixyLG8scyxhLHUsbCxjPWtbZSsiICJdO2lmKGMpcmV0dXJuIHQ/MDpjLnNsaWNlKDApO2E9ZSx1PVtdLGw9aS5wcmVGaWx0ZXI7d2hpbGUoYSl7KCFufHwocj1fLmV4ZWMoYSkpKSYmKHImJihhPWEuc2xpY2UoclswXS5sZW5ndGgpfHxhKSx1LnB1c2gobz1bXSkpLG49ITEsKHI9WC5leGVjKGEpKSYmKG49ci5zaGlmdCgpLG8ucHVzaCh7dmFsdWU6bix0eXBlOnJbMF0ucmVwbGFjZSh6LCIgIil9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtmb3IocyBpbiBpLmZpbHRlcikhKHI9SltzXS5leGVjKGEpKXx8bFtzXSYmIShyPWxbc10ocikpfHwobj1yLnNoaWZ0KCksby5wdXNoKHt2YWx1ZTpuLHR5cGU6cyxtYXRjaGVzOnJ9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9hLmxlbmd0aDphP290LmVycm9yKGUpOmsoZSx1KS5zbGljZSgwKX1mdW5jdGlvbiBtdChlKXt2YXIgdD0wLG49ZS5sZW5ndGgscj0iIjtmb3IoO24+dDt0Kyspcis9ZVt0XS52YWx1ZTtyZXR1cm4gcn1mdW5jdGlvbiB5dChlLHQsbil7dmFyIGk9dC5kaXIsbz1uJiYicGFyZW50Tm9kZSI9PT1pLHM9VCsrO3JldHVybiB0LmZpcnN0P2Z1bmN0aW9uKHQsbixyKXt3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8pcmV0dXJuIGUodCxuLHIpfTpmdW5jdGlvbih0LG4sYSl7dmFyIHUsbCxjLHA9dysiICIrcztpZihhKXt3aGlsZSh0PXRbaV0paWYoKDE9PT10Lm5vZGVUeXBlfHxvKSYmZSh0LG4sYSkpcmV0dXJuITB9ZWxzZSB3aGlsZSh0PXRbaV0paWYoMT09PXQubm9kZVR5cGV8fG8paWYoYz10W3ZdfHwodFt2XT17fSksKGw9Y1tpXSkmJmxbMF09PT1wKXtpZigodT1sWzFdKT09PSEwfHx1PT09cilyZXR1cm4gdT09PSEwfWVsc2UgaWYobD1jW2ldPVtwXSxsWzFdPWUodCxuLGEpfHxyLGxbMV09PT0hMClyZXR1cm4hMH19ZnVuY3Rpb24gdnQoZSl7cmV0dXJuIGUubGVuZ3RoPjE/ZnVuY3Rpb24odCxuLHIpe3ZhciBpPWUubGVuZ3RoO3doaWxlKGktLSlpZighZVtpXSh0LG4scikpcmV0dXJuITE7cmV0dXJuITB9OmVbMF19ZnVuY3Rpb24geHQoZSx0LG4scixpKXt2YXIgbyxzPVtdLGE9MCx1PWUubGVuZ3RoLGw9bnVsbCE9dDtmb3IoO3U+YTthKyspKG89ZVthXSkmJighbnx8bihvLHIsaSkpJiYocy5wdXNoKG8pLGwmJnQucHVzaChhKSk7cmV0dXJuIHN9ZnVuY3Rpb24gYnQoZSx0LG4scixpLG8pe3JldHVybiByJiYhclt2XSYmKHI9YnQocikpLGkmJiFpW3ZdJiYoaT1idChpLG8pKSxhdChmdW5jdGlvbihvLHMsYSx1KXt2YXIgbCxjLHAsZj1bXSxoPVtdLGQ9cy5sZW5ndGgsZz1vfHxDdCh0fHwiKiIsYS5ub2RlVHlwZT9bYV06YSxbXSksbT0hZXx8IW8mJnQ/Zzp4dChnLGYsZSxhLHUpLHk9bj9pfHwobz9lOmR8fHIpP1tdOnM6bTtpZihuJiZuKG0seSxhLHUpLHIpe2w9eHQoeSxoKSxyKGwsW10sYSx1KSxjPWwubGVuZ3RoO3doaWxlKGMtLSkocD1sW2NdKSYmKHlbaFtjXV09IShtW2hbY11dPXApKX1pZihvKXtpZihpfHxlKXtpZihpKXtsPVtdLGM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiZsLnB1c2gobVtjXT1wKTtpKG51bGwseT1bXSxsLHUpfWM9eS5sZW5ndGg7d2hpbGUoYy0tKShwPXlbY10pJiYobD1pP1AuY2FsbChvLHApOmZbY10pPi0xJiYob1tsXT0hKHNbbF09cCkpfX1lbHNlIHk9eHQoeT09PXM/eS5zcGxpY2UoZCx5Lmxlbmd0aCk6eSksaT9pKG51bGwscyx5LHUpOk8uYXBwbHkocyx5KX0pfWZ1bmN0aW9uIHd0KGUpe3ZhciB0LG4scixvPWUubGVuZ3RoLHM9aS5yZWxhdGl2ZVtlWzBdLnR5cGVdLGE9c3x8aS5yZWxhdGl2ZVsiICJdLGw9cz8xOjAsYz15dChmdW5jdGlvbihlKXtyZXR1cm4gZT09PXR9LGEsITApLHA9eXQoZnVuY3Rpb24oZSl7cmV0dXJuIFAuY2FsbCh0LGUpPi0xfSxhLCEwKSxmPVtmdW5jdGlvbihlLG4scil7cmV0dXJuIXMmJihyfHxuIT09dSl8fCgodD1uKS5ub2RlVHlwZT9jKGUsbixyKTpwKGUsbixyKSl9XTtmb3IoO28+bDtsKyspaWYobj1pLnJlbGF0aXZlW2VbbF0udHlwZV0pZj1beXQodnQoZiksbildO2Vsc2V7aWYobj1pLmZpbHRlcltlW2xdLnR5cGVdLmFwcGx5KG51bGwsZVtsXS5tYXRjaGVzKSxuW3ZdKXtmb3Iocj0rK2w7bz5yO3IrKylpZihpLnJlbGF0aXZlW2Vbcl0udHlwZV0pYnJlYWs7cmV0dXJuIGJ0KGw+MSYmdnQoZiksbD4xJiZtdChlLnNsaWNlKDAsbC0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWVbbC0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKHosIiQxIiksbixyPmwmJnd0KGUuc2xpY2UobCxyKSksbz5yJiZ3dChlPWUuc2xpY2UocikpLG8+ciYmbXQoZSkpfWYucHVzaChuKX1yZXR1cm4gdnQoZil9ZnVuY3Rpb24gVHQoZSx0KXt2YXIgbj0wLG89dC5sZW5ndGg+MCxzPWUubGVuZ3RoPjAsYT1mdW5jdGlvbihhLGwsYyxmLGgpe3ZhciBkLGcsbSx5PVtdLHY9MCx4PSIwIixiPWEmJltdLFQ9bnVsbCE9aCxDPXUsaz1hfHxzJiZpLmZpbmQuVEFHKCIqIixoJiZsLnBhcmVudE5vZGV8fGwpLE49dys9bnVsbD09Qz8xOk1hdGgucmFuZG9tKCl8fC4xO2ZvcihUJiYodT1sIT09cCYmbCxyPW4pO251bGwhPShkPWtbeF0pO3grKyl7aWYocyYmZCl7Zz0wO3doaWxlKG09ZVtnKytdKWlmKG0oZCxsLGMpKXtmLnB1c2goZCk7YnJlYWt9VCYmKHc9TixyPSsrbil9byYmKChkPSFtJiZkKSYmdi0tLGEmJmIucHVzaChkKSl9aWYodis9eCxvJiZ4IT09dil7Zz0wO3doaWxlKG09dFtnKytdKW0oYix5LGwsYyk7aWYoYSl7aWYodj4wKXdoaWxlKHgtLSliW3hdfHx5W3hdfHwoeVt4XT1xLmNhbGwoZikpO3k9eHQoeSl9Ty5hcHBseShmLHkpLFQmJiFhJiZ5Lmxlbmd0aD4wJiZ2K3QubGVuZ3RoPjEmJm90LnVuaXF1ZVNvcnQoZil9cmV0dXJuIFQmJih3PU4sdT1DKSxifTtyZXR1cm4gbz9hdChhKTphfWE9b3QuY29tcGlsZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1bXSxvPU5bZSsiICJdO2lmKCFvKXt0fHwodD1ndChlKSksbj10Lmxlbmd0aDt3aGlsZShuLS0pbz13dCh0W25dKSxvW3ZdP3IucHVzaChvKTppLnB1c2gobyk7bz1OKGUsVHQoaSxyKSl9cmV0dXJuIG99O2Z1bmN0aW9uIEN0KGUsdCxuKXt2YXIgcj0wLGk9dC5sZW5ndGg7Zm9yKDtpPnI7cisrKW90KGUsdFtyXSxuKTtyZXR1cm4gbn1mdW5jdGlvbiBrdChlLHQscixvKXt2YXIgcyx1LGwsYyxwLGY9Z3QoZSk7aWYoIW8mJjE9PT1mLmxlbmd0aCl7aWYodT1mWzBdPWZbMF0uc2xpY2UoMCksdS5sZW5ndGg+MiYmIklEIj09PShsPXVbMF0pLnR5cGUmJm4uZ2V0QnlJZCYmOT09PXQubm9kZVR5cGUmJmgmJmkucmVsYXRpdmVbdVsxXS50eXBlXSl7aWYodD0oaS5maW5kLklEKGwubWF0Y2hlc1swXS5yZXBsYWNlKG50LHJ0KSx0KXx8W10pWzBdLCF0KXJldHVybiByO2U9ZS5zbGljZSh1LnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1zPUoubmVlZHNDb250ZXh0LnRlc3QoZSk/MDp1Lmxlbmd0aDt3aGlsZShzLS0pe2lmKGw9dVtzXSxpLnJlbGF0aXZlW2M9bC50eXBlXSlicmVhaztpZigocD1pLmZpbmRbY10pJiYobz1wKGwubWF0Y2hlc1swXS5yZXBsYWNlKG50LHJ0KSxVLnRlc3QodVswXS50eXBlKSYmdC5wYXJlbnROb2RlfHx0KSkpe2lmKHUuc3BsaWNlKHMsMSksZT1vLmxlbmd0aCYmbXQodSksIWUpcmV0dXJuIE8uYXBwbHkocixvKSxyO2JyZWFrfX19cmV0dXJuIGEoZSxmKShvLHQsIWgscixVLnRlc3QoZSkpLHJ9bi5zb3J0U3RhYmxlPXYuc3BsaXQoIiIpLnNvcnQoUykuam9pbigiIik9PT12LG4uZGV0ZWN0RHVwbGljYXRlcz1FLGMoKSxuLnNvcnREZXRhY2hlZD11dChmdW5jdGlvbihlKXtyZXR1cm4gMSZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHAuY3JlYXRlRWxlbWVudCgiZGl2IikpfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8YSBocmVmPScjJz48L2E+IiwiIyI9PT1lLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCJocmVmIil9KXx8bHQoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbj91bmRlZmluZWQ6ZS5nZXRBdHRyaWJ1dGUodCwidHlwZSI9PT10LnRvTG93ZXJDYXNlKCk/MToyKX0pLG4uYXR0cmlidXRlcyYmdXQoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaW5uZXJIVE1MPSI8aW5wdXQvPiIsZS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKSwiIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIil9KXx8bHQoInZhbHVlIixmdW5jdGlvbihlLHQsbil7cmV0dXJuIG58fCJpbnB1dCIhPT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dW5kZWZpbmVkOmUuZGVmYXVsdFZhbHVlfSksdXQoZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWUuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpfSl8fGx0KFIsZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiBuP3VuZGVmaW5lZDoocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOmVbdF09PT0hMD90LnRvTG93ZXJDYXNlKCk6bnVsbH0pLHguZmluZD1vdCx4LmV4cHI9b3Quc2VsZWN0b3JzLHguZXhwclsiOiJdPXguZXhwci5wc2V1ZG9zLHgudW5pcXVlPW90LnVuaXF1ZVNvcnQseC50ZXh0PW90LmdldFRleHQseC5pc1hNTERvYz1vdC5pc1hNTCx4LmNvbnRhaW5zPW90LmNvbnRhaW5zfShlKTt2YXIgRD17fTtmdW5jdGlvbiBBKGUpe3ZhciB0PURbZV09e307cmV0dXJuIHguZWFjaChlLm1hdGNoKHcpfHxbXSxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KSx0fXguQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe2U9InN0cmluZyI9PXR5cGVvZiBlP0RbZV18fEEoZSk6eC5leHRlbmQoe30sZSk7dmFyIHQsbixyLGksbyxzLGE9W10sdT0hZS5vbmNlJiZbXSxsPWZ1bmN0aW9uKHApe2Zvcih0PWUubWVtb3J5JiZwLG49ITAscz1pfHwwLGk9MCxvPWEubGVuZ3RoLHI9ITA7YSYmbz5zO3MrKylpZihhW3NdLmFwcGx5KHBbMF0scFsxXSk9PT0hMSYmZS5zdG9wT25GYWxzZSl7dD0hMTticmVha31yPSExLGEmJih1P3UubGVuZ3RoJiZsKHUuc2hpZnQoKSk6dD9hPVtdOmMuZGlzYWJsZSgpKX0sYz17YWRkOmZ1bmN0aW9uKCl7aWYoYSl7dmFyIG49YS5sZW5ndGg7KGZ1bmN0aW9uIHModCl7eC5lYWNoKHQsZnVuY3Rpb24odCxuKXt2YXIgcj14LnR5cGUobik7ImZ1bmN0aW9uIj09PXI/ZS51bmlxdWUmJmMuaGFzKG4pfHxhLnB1c2gobik6biYmbi5sZW5ndGgmJiJzdHJpbmciIT09ciYmcyhuKX0pfSkoYXJndW1lbnRzKSxyP289YS5sZW5ndGg6dCYmKGk9bixsKHQpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGEmJnguZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgbjt3aGlsZSgobj14LmluQXJyYXkodCxhLG4pKT4tMSlhLnNwbGljZShuLDEpLHImJihvPj1uJiZvLS0scz49biYmcy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT94LmluQXJyYXkoZSxhKT4tMTohKCFhfHwhYS5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBhPVtdLG89MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGE9dT10PXVuZGVmaW5lZCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFhfSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIHU9dW5kZWZpbmVkLHR8fGMuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiF1fSxmaXJlV2l0aDpmdW5jdGlvbihlLHQpe3JldHVybiFhfHxuJiYhdXx8KHQ9dHx8W10sdD1bZSx0LnNsaWNlP3Quc2xpY2UoKTp0XSxyP3UucHVzaCh0KTpsKHQpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGMuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFufX07cmV0dXJuIGN9LHguZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgdD1bWyJyZXNvbHZlIiwiZG9uZSIseC5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksInJlc29sdmVkIl0sWyJyZWplY3QiLCJmYWlsIix4LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwicmVqZWN0ZWQiXSxbIm5vdGlmeSIsInByb2dyZXNzIix4LkNhbGxiYWNrcygibWVtb3J5IildXSxuPSJwZW5kaW5nIixyPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBufSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gaS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuIHguRGVmZXJyZWQoZnVuY3Rpb24obil7eC5lYWNoKHQsZnVuY3Rpb24odCxvKXt2YXIgcz1vWzBdLGE9eC5pc0Z1bmN0aW9uKGVbdF0pJiZlW3RdO2lbb1sxXV0oZnVuY3Rpb24oKXt2YXIgZT1hJiZhLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtlJiZ4LmlzRnVuY3Rpb24oZS5wcm9taXNlKT9lLnByb21pc2UoKS5kb25lKG4ucmVzb2x2ZSkuZmFpbChuLnJlamVjdCkucHJvZ3Jlc3Mobi5ub3RpZnkpOm5bcysiV2l0aCJdKHRoaXM9PT1yP24ucHJvbWlzZSgpOnRoaXMsYT9bZV06YXJndW1lbnRzKX0pfSksZT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lP3guZXh0ZW5kKGUscik6cn19LGk9e307cmV0dXJuIHIucGlwZT1yLnRoZW4seC5lYWNoKHQsZnVuY3Rpb24oZSxvKXt2YXIgcz1vWzJdLGE9b1szXTtyW29bMV1dPXMuYWRkLGEmJnMuYWRkKGZ1bmN0aW9uKCl7bj1hfSx0WzFeZV1bMl0uZGlzYWJsZSx0WzJdWzJdLmxvY2spLGlbb1swXV09ZnVuY3Rpb24oKXtyZXR1cm4gaVtvWzBdKyJXaXRoIl0odGhpcz09PWk/cjp0aGlzLGFyZ3VtZW50cyksdGhpc30saVtvWzBdKyJXaXRoIl09cy5maXJlV2l0aH0pLHIucHJvbWlzZShpKSxlJiZlLmNhbGwoaSxpKSxpfSx3aGVuOmZ1bmN0aW9uKGUpe3ZhciB0PTAsbj1kLmNhbGwoYXJndW1lbnRzKSxyPW4ubGVuZ3RoLGk9MSE9PXJ8fGUmJnguaXNGdW5jdGlvbihlLnByb21pc2UpP3I6MCxvPTE9PT1pP2U6eC5EZWZlcnJlZCgpLHM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBmdW5jdGlvbihyKXt0W2VdPXRoaXMsbltlXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6cixuPT09YT9vLm5vdGlmeVdpdGgodCxuKTotLWl8fG8ucmVzb2x2ZVdpdGgodCxuKX19LGEsdSxsO2lmKHI+MSlmb3IoYT1BcnJheShyKSx1PUFycmF5KHIpLGw9QXJyYXkocik7cj50O3QrKyluW3RdJiZ4LmlzRnVuY3Rpb24oblt0XS5wcm9taXNlKT9uW3RdLnByb21pc2UoKS5kb25lKHModCxsLG4pKS5mYWlsKG8ucmVqZWN0KS5wcm9ncmVzcyhzKHQsdSxhKSk6LS1pO3JldHVybiBpfHxvLnJlc29sdmVXaXRoKGwsbiksby5wcm9taXNlKCl9fSkseC5zdXBwb3J0PWZ1bmN0aW9uKHQpe3ZhciBuPW8uY3JlYXRlRWxlbWVudCgiaW5wdXQiKSxyPW8uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGk9by5jcmVhdGVFbGVtZW50KCJkaXYiKSxzPW8uY3JlYXRlRWxlbWVudCgic2VsZWN0IiksYT1zLmFwcGVuZENoaWxkKG8uY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO3JldHVybiBuLnR5cGU/KG4udHlwZT0iY2hlY2tib3giLHQuY2hlY2tPbj0iIiE9PW4udmFsdWUsdC5vcHRTZWxlY3RlZD1hLnNlbGVjdGVkLHQucmVsaWFibGVNYXJnaW5SaWdodD0hMCx0LmJveFNpemluZ1JlbGlhYmxlPSEwLHQucGl4ZWxQb3NpdGlvbj0hMSxuLmNoZWNrZWQ9ITAsdC5ub0Nsb25lQ2hlY2tlZD1uLmNsb25lTm9kZSghMCkuY2hlY2tlZCxzLmRpc2FibGVkPSEwLHQub3B0RGlzYWJsZWQ9IWEuZGlzYWJsZWQsbj1vLmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksbi52YWx1ZT0idCIsbi50eXBlPSJyYWRpbyIsdC5yYWRpb1ZhbHVlPSJ0Ij09PW4udmFsdWUsbi5zZXRBdHRyaWJ1dGUoImNoZWNrZWQiLCJ0Iiksbi5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJ0Iiksci5hcHBlbmRDaGlsZChuKSx0LmNoZWNrQ2xvbmU9ci5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsdC5mb2N1c2luQnViYmxlcz0ib25mb2N1c2luImluIGUsaS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iY29udGVudC1ib3giLGkuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD0iIix0LmNsZWFyQ2xvbmVTdHlsZT0iY29udGVudC1ib3giPT09aS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCx4KGZ1bmN0aW9uKCl7dmFyIG4scixzPSJwYWRkaW5nOjA7bWFyZ2luOjA7Ym9yZGVyOjA7ZGlzcGxheTpibG9jazstd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3giLGE9by5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2EmJihuPW8uY3JlYXRlRWxlbWVudCgiZGl2Iiksbi5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweCIsYS5hcHBlbmRDaGlsZChuKS5hcHBlbmRDaGlsZChpKSxpLmlubmVySFRNTD0iIixpLnN0eWxlLmNzc1RleHQ9Ii13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nOjFweDtib3JkZXI6MXB4O2Rpc3BsYXk6YmxvY2s7d2lkdGg6NHB4O21hcmdpbi10b3A6MSU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjElIix4LnN3YXAoYSxudWxsIT1hLnN0eWxlLnpvb20/e3pvb206MX06e30sZnVuY3Rpb24oKXt0LmJveFNpemluZz00PT09aS5vZmZzZXRXaWR0aH0pLGUuZ2V0Q29tcHV0ZWRTdHlsZSYmKHQucGl4ZWxQb3NpdGlvbj0iMSUiIT09KGUuZ2V0Q29tcHV0ZWRTdHlsZShpLG51bGwpfHx7fSkudG9wLHQuYm94U2l6aW5nUmVsaWFibGU9IjRweCI9PT0oZS5nZXRDb21wdXRlZFN0eWxlKGksbnVsbCl8fHt3aWR0aDoiNHB4In0pLndpZHRoLHI9aS5hcHBlbmRDaGlsZChvLmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxyLnN0eWxlLmNzc1RleHQ9aS5zdHlsZS5jc3NUZXh0PXMsci5zdHlsZS5tYXJnaW5SaWdodD1yLnN0eWxlLndpZHRoPSIwIixpLnN0eWxlLndpZHRoPSIxcHgiLHQucmVsaWFibGVNYXJnaW5SaWdodD0hcGFyc2VGbG9hdCgoZS5nZXRDb21wdXRlZFN0eWxlKHIsbnVsbCl8fHt9KS5tYXJnaW5SaWdodCkpLGEucmVtb3ZlQ2hpbGQobikpfSksdCk6dH0oe30pO3ZhciBMLHEsSD0vKD86XHtbXHNcU10qXH18XFtbXHNcU10qXF0pJC8sTz0vKFtBLVpdKS9nO2Z1bmN0aW9uIEYoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jYWNoZT17fSwwLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19KSx0aGlzLmV4cGFuZG89eC5leHBhbmRvK01hdGgucmFuZG9tKCl9Ri51aWQ9MSxGLmFjY2VwdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubm9kZVR5cGU/MT09PWUubm9kZVR5cGV8fDk9PT1lLm5vZGVUeXBlOiEwfSxGLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGUpe2lmKCFGLmFjY2VwdHMoZSkpcmV0dXJuIDA7dmFyIHQ9e30sbj1lW3RoaXMuZXhwYW5kb107aWYoIW4pe249Ri51aWQrKzt0cnl7dFt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpufSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLHQpfWNhdGNoKHIpe3RbdGhpcy5leHBhbmRvXT1uLHguZXh0ZW5kKGUsdCl9fXJldHVybiB0aGlzLmNhY2hlW25dfHwodGhpcy5jYWNoZVtuXT17fSksbn0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPXRoaXMua2V5KGUpLG89dGhpcy5jYWNoZVtpXTtpZigic3RyaW5nIj09dHlwZW9mIHQpb1t0XT1uO2Vsc2UgaWYoeC5pc0VtcHR5T2JqZWN0KG8pKXguZXh0ZW5kKHRoaXMuY2FjaGVbaV0sdCk7ZWxzZSBmb3IociBpbiB0KW9bcl09dFtyXTtyZXR1cm4gb30sZ2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5jYWNoZVt0aGlzLmtleShlKV07cmV0dXJuIHQ9PT11bmRlZmluZWQ/bjpuW3RdfSxhY2Nlc3M6ZnVuY3Rpb24oZSx0LG4pe3ZhciByO3JldHVybiB0PT09dW5kZWZpbmVkfHx0JiYic3RyaW5nIj09dHlwZW9mIHQmJm49PT11bmRlZmluZWQ/KHI9dGhpcy5nZXQoZSx0KSxyIT09dW5kZWZpbmVkP3I6dGhpcy5nZXQoZSx4LmNhbWVsQ2FzZSh0KSkpOih0aGlzLnNldChlLHQsbiksbiE9PXVuZGVmaW5lZD9uOnQpfSxyZW1vdmU6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbz10aGlzLmtleShlKSxzPXRoaXMuY2FjaGVbb107aWYodD09PXVuZGVmaW5lZCl0aGlzLmNhY2hlW29dPXt9O2Vsc2V7eC5pc0FycmF5KHQpP3I9dC5jb25jYXQodC5tYXAoeC5jYW1lbENhc2UpKTooaT14LmNhbWVsQ2FzZSh0KSx0IGluIHM/cj1bdCxpXToocj1pLHI9ciBpbiBzP1tyXTpyLm1hdGNoKHcpfHxbXSkpLG49ci5sZW5ndGg7d2hpbGUobi0tKWRlbGV0ZSBzW3Jbbl1dfX0saGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4heC5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGUpe2VbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbZVt0aGlzLmV4cGFuZG9dXX19LEw9bmV3IEYscT1uZXcgRix4LmV4dGVuZCh7YWNjZXB0RGF0YTpGLmFjY2VwdHMsaGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gTC5oYXNEYXRhKGUpfHxxLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBMLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtMLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHEuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtxLnJlbW92ZShlLHQpfX0pLHguZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPXRoaXNbMF0sbz0wLHM9bnVsbDtpZihlPT09dW5kZWZpbmVkKXtpZih0aGlzLmxlbmd0aCYmKHM9TC5nZXQoaSksMT09PWkubm9kZVR5cGUmJiFxLmdldChpLCJoYXNEYXRhQXR0cnMiKSkpe2ZvcihuPWkuYXR0cmlidXRlcztuLmxlbmd0aD5vO28rKylyPW5bb10ubmFtZSwwPT09ci5pbmRleE9mKCJkYXRhLSIpJiYocj14LmNhbWVsQ2FzZShyLnNsaWNlKDUpKSxQKGkscixzW3JdKSk7cS5zZXQoaSwiaGFzRGF0YUF0dHJzIiwhMCl9cmV0dXJuIHN9cmV0dXJuIm9iamVjdCI9PXR5cGVvZiBlP3RoaXMuZWFjaChmdW5jdGlvbigpe0wuc2V0KHRoaXMsZSl9KTp4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQpe3ZhciBuLHI9eC5jYW1lbENhc2UoZSk7aWYoaSYmdD09PXVuZGVmaW5lZCl7aWYobj1MLmdldChpLGUpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1MLmdldChpLHIpLG4hPT11bmRlZmluZWQpcmV0dXJuIG47aWYobj1QKGkscix1bmRlZmluZWQpLG4hPT11bmRlZmluZWQpcmV0dXJuIG59ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1MLmdldCh0aGlzLHIpO0wuc2V0KHRoaXMscix0KSwtMSE9PWUuaW5kZXhPZigiLSIpJiZuIT09dW5kZWZpbmVkJiZMLnNldCh0aGlzLGUsdCl9KX0sbnVsbCx0LGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TC5yZW1vdmUodGhpcyxlKX0pfX0pO2Z1bmN0aW9uIFAoZSx0LG4pe3ZhciByO2lmKG49PT11bmRlZmluZWQmJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoTywiLSQxIikudG9Mb3dlckNhc2UoKSxuPWUuZ2V0QXR0cmlidXRlKHIpLCJzdHJpbmciPT10eXBlb2Ygbil7dHJ5e249InRydWUiPT09bj8hMDoiZmFsc2UiPT09bj8hMToibnVsbCI9PT1uP251bGw6K24rIiI9PT1uPytuOkgudGVzdChuKT9KU09OLnBhcnNlKG4pOm59Y2F0Y2goaSl7fUwuc2V0KGUsdCxuKX1lbHNlIG49dW5kZWZpbmVkO3JldHVybiBufXguZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIGU/KHQ9KHR8fCJmeCIpKyJxdWV1ZSIscj1xLmdldChlLHQpLG4mJighcnx8eC5pc0FycmF5KG4pP3I9cS5hY2Nlc3MoZSx0LHgubWFrZUFycmF5KG4pKTpyLnB1c2gobikpLHJ8fFtdKTp1bmRlZmluZWR9LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49eC5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCksbz14Ll9xdWV1ZUhvb2tzKGUsdCkscz1mdW5jdGlvbigpe3guZGVxdWV1ZShlLHQpfTsiaW5wcm9ncmVzcyI9PT1pJiYoaT1uLnNoaWZ0KCksci0tKSxpJiYoImZ4Ij09PXQmJm4udW5zaGlmdCgiaW5wcm9ncmVzcyIpLGRlbGV0ZSBvLnN0b3AsaS5jYWxsKGUscyxvKSksIXImJm8mJm8uZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihlLHQpe3ZhciBuPXQrInF1ZXVlSG9va3MiO3JldHVybiBxLmdldChlLG4pfHxxLmFjY2VzcyhlLG4se2VtcHR5OnguQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe3EucmVtb3ZlKGUsW3QrInF1ZXVlIixuXSl9KX0pfX0pLHguZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihlLHQpe3ZhciBuPTI7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYodD1lLGU9ImZ4IixuLS0pLG4+YXJndW1lbnRzLmxlbmd0aD94LnF1ZXVlKHRoaXNbMF0sZSk6dD09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBuPXgucXVldWUodGhpcyxlLHQpO3guX3F1ZXVlSG9va3ModGhpcyxlKSwiZngiPT09ZSYmImlucHJvZ3Jlc3MiIT09blswXSYmeC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVxdWV1ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7eC5kZXF1ZXVlKHRoaXMsZSl9KX0sZGVsYXk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT14LmZ4P3guZnguc3BlZWRzW2VdfHxlOmUsdD10fHwiZngiLHRoaXMucXVldWUodCxmdW5jdGlvbih0LG4pe3ZhciByPXNldFRpbWVvdXQodCxlKTtuLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocil9fSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucXVldWUoZXx8ImZ4IixbXSl9LHByb21pc2U6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTEsaT14LkRlZmVycmVkKCksbz10aGlzLHM9dGhpcy5sZW5ndGgsYT1mdW5jdGlvbigpey0tcnx8aS5yZXNvbHZlV2l0aChvLFtvXSl9OyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPXVuZGVmaW5lZCksZT1lfHwiZngiO3doaWxlKHMtLSluPXEuZ2V0KG9bc10sZSsicXVldWVIb29rcyIpLG4mJm4uZW1wdHkmJihyKyssbi5lbXB0eS5hZGQoYSkpO3JldHVybiBhKCksaS5wcm9taXNlKHQpfX0pO3ZhciBSLE0sVz0vW1x0XHJcblxmXS9nLCQ9L1xyL2csQj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO3guZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMseC5hdHRyLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt4LnJlbW92ZUF0dHIodGhpcyxlKX0pfSxwcm9wOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMseC5wcm9wLGUsdCxhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1t4LnByb3BGaXhbZV18fGVdfSl9LGFkZENsYXNzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8scz0wLGE9dGhpcy5sZW5ndGgsdT0ic3RyaW5nIj09dHlwZW9mIGUmJmU7aWYoeC5pc0Z1bmN0aW9uKGUpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24odCl7eCh0aGlzKS5hZGRDbGFzcyhlLmNhbGwodGhpcyx0LHRoaXMuY2xhc3NOYW1lKSl9KTtpZih1KWZvcih0PShlfHwiIikubWF0Y2godyl8fFtdO2E+cztzKyspaWYobj10aGlzW3NdLHI9MT09PW4ubm9kZVR5cGUmJihuLmNsYXNzTmFtZT8oIiAiK24uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIik6IiAiKSl7bz0wO3doaWxlKGk9dFtvKytdKTA+ci5pbmRleE9mKCIgIitpKyIgIikmJihyKz1pKyIgIik7bi5jbGFzc05hbWU9eC50cmltKHIpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaSxvLHM9MCxhPXRoaXMubGVuZ3RoLHU9MD09PWFyZ3VtZW50cy5sZW5ndGh8fCJzdHJpbmciPT10eXBlb2YgZSYmZTtpZih4LmlzRnVuY3Rpb24oZSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbih0KXt4KHRoaXMpLnJlbW92ZUNsYXNzKGUuY2FsbCh0aGlzLHQsdGhpcy5jbGFzc05hbWUpKX0pO2lmKHUpZm9yKHQ9KGV8fCIiKS5tYXRjaCh3KXx8W107YT5zO3MrKylpZihuPXRoaXNbc10scj0xPT09bi5ub2RlVHlwZSYmKG4uY2xhc3NOYW1lPygiICIrbi5jbGFzc05hbWUrIiAiKS5yZXBsYWNlKFcsIiAiKToiIikpe289MDt3aGlsZShpPXRbbysrXSl3aGlsZShyLmluZGV4T2YoIiAiK2krIiAiKT49MClyPXIucmVwbGFjZSgiICIraSsiICIsIiAiKTtuLmNsYXNzTmFtZT1lP3gudHJpbShyKToiIn1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbj10eXBlb2YgZTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiYic3RyaW5nIj09PW4/dD90aGlzLmFkZENsYXNzKGUpOnRoaXMucmVtb3ZlQ2xhc3MoZSk6eC5pc0Z1bmN0aW9uKGUpP3RoaXMuZWFjaChmdW5jdGlvbihuKXt4KHRoaXMpLnRvZ2dsZUNsYXNzKGUuY2FsbCh0aGlzLG4sdGhpcy5jbGFzc05hbWUsdCksdCl9KTp0aGlzLmVhY2goZnVuY3Rpb24oKXtpZigic3RyaW5nIj09PW4pe3ZhciB0LGk9MCxvPXgodGhpcykscz1lLm1hdGNoKHcpfHxbXTt3aGlsZSh0PXNbaSsrXSlvLmhhc0NsYXNzKHQpP28ucmVtb3ZlQ2xhc3ModCk6by5hZGRDbGFzcyh0KX1lbHNlKG49PT1yfHwiYm9vbGVhbiI9PT1uKSYmKHRoaXMuY2xhc3NOYW1lJiZxLnNldCh0aGlzLCJfX2NsYXNzTmFtZV9fIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGU9PT0hMT8iIjpxLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihlKXt2YXIgdD0iICIrZSsiICIsbj0wLHI9dGhpcy5sZW5ndGg7Zm9yKDtyPm47bisrKWlmKDE9PT10aGlzW25dLm5vZGVUeXBlJiYoIiAiK3RoaXNbbl0uY2xhc3NOYW1lKyIgIikucmVwbGFjZShXLCIgIikuaW5kZXhPZih0KT49MClyZXR1cm4hMDtyZXR1cm4hMX0sdmFsOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHI9eC5pc0Z1bmN0aW9uKGUpLHRoaXMuZWFjaChmdW5jdGlvbihuKXt2YXIgaTsxPT09dGhpcy5ub2RlVHlwZSYmKGk9cj9lLmNhbGwodGhpcyxuLHgodGhpcykudmFsKCkpOmUsbnVsbD09aT9pPSIiOiJudW1iZXIiPT10eXBlb2YgaT9pKz0iIjp4LmlzQXJyYXkoaSkmJihpPXgubWFwKGksZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSx0PXgudmFsSG9va3NbdGhpcy50eXBlXXx8eC52YWxIb29rc1t0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJzZXQiaW4gdCYmdC5zZXQodGhpcyxpLCJ2YWx1ZSIpIT09dW5kZWZpbmVkfHwodGhpcy52YWx1ZT1pKSl9KTtpZihpKXJldHVybiB0PXgudmFsSG9va3NbaS50eXBlXXx8eC52YWxIb29rc1tpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLHQmJiJnZXQiaW4gdCYmKG49dC5nZXQoaSwidmFsdWUiKSkhPT11bmRlZmluZWQ/bjoobj1pLnZhbHVlLCJzdHJpbmciPT10eXBlb2Ygbj9uLnJlcGxhY2UoJCwiIik6bnVsbD09bj8iIjpuKX19fSkseC5leHRlbmQoe3ZhbEhvb2tzOntvcHRpb246e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLmF0dHJpYnV0ZXMudmFsdWU7cmV0dXJuIXR8fHQuc3BlY2lmaWVkP2UudmFsdWU6ZS50ZXh0fX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPWUub3B0aW9ucyxpPWUuc2VsZWN0ZWRJbmRleCxvPSJzZWxlY3Qtb25lIj09PWUudHlwZXx8MD5pLHM9bz9udWxsOltdLGE9bz9pKzE6ci5sZW5ndGgsdT0wPmk/YTpvP2k6MDtmb3IoO2E+dTt1KyspaWYobj1yW3VdLCEoIW4uc2VsZWN0ZWQmJnUhPT1pfHwoeC5zdXBwb3J0Lm9wdERpc2FibGVkP24uZGlzYWJsZWQ6bnVsbCE9PW4uZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpKXx8bi5wYXJlbnROb2RlLmRpc2FibGVkJiZ4Lm5vZGVOYW1lKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9eChuKS52YWwoKSxvKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPXgubWFrZUFycmF5KHQpLHM9aS5sZW5ndGg7d2hpbGUocy0tKXI9aVtzXSwoci5zZWxlY3RlZD14LmluQXJyYXkoeChyKS52YWwoKSxvKT49MCkmJihuPSEwKTtyZXR1cm4gbnx8KGUuc2VsZWN0ZWRJbmRleD0tMSksb319fSxhdHRyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxvLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiB0eXBlb2YgZS5nZXRBdHRyaWJ1dGU9PT1yP3gucHJvcChlLHQsbik6KDE9PT1zJiZ4LmlzWE1MRG9jKGUpfHwodD10LnRvTG93ZXJDYXNlKCksaT14LmF0dHJIb29rc1t0XXx8KHguZXhwci5tYXRjaC5ib29sLnRlc3QodCk/TTpSKSksbj09PXVuZGVmaW5lZD9pJiYiZ2V0ImluIGkmJm51bGwhPT0obz1pLmdldChlLHQpKT9vOihvPXguZmluZC5hdHRyKGUsdCksbnVsbD09bz91bmRlZmluZWQ6byk6bnVsbCE9PW4/aSYmInNldCJpbiBpJiYobz1pLnNldChlLG4sdCkpIT09dW5kZWZpbmVkP286KGUuc2V0QXR0cmlidXRlKHQsbisiIiksbik6KHgucmVtb3ZlQXR0cihlLHQpLHVuZGVmaW5lZCkpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPTAsbz10JiZ0Lm1hdGNoKHcpO2lmKG8mJjE9PT1lLm5vZGVUeXBlKXdoaWxlKG49b1tpKytdKXI9eC5wcm9wRml4W25dfHxuLHguZXhwci5tYXRjaC5ib29sLnRlc3QobikmJihlW3JdPSExKSxlLnJlbW92ZUF0dHJpYnV0ZShuKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oZSx0KXtpZigheC5zdXBwb3J0LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZ4Lm5vZGVOYW1lKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn0scHJvcDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHM9ZS5ub2RlVHlwZTtpZihlJiYzIT09cyYmOCE9PXMmJjIhPT1zKXJldHVybiBvPTEhPT1zfHwheC5pc1hNTERvYyhlKSxvJiYodD14LnByb3BGaXhbdF18fHQsaT14LnByb3BIb29rc1t0XSksbiE9PXVuZGVmaW5lZD9pJiYic2V0ImluIGkmJihyPWkuc2V0KGUsbix0KSkhPT11bmRlZmluZWQ/cjplW3RdPW46aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaGFzQXR0cmlidXRlKCJ0YWJpbmRleCIpfHxCLnRlc3QoZS5ub2RlTmFtZSl8fGUuaHJlZj9lLnRhYkluZGV4Oi0xfX19fSksTT17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdD09PSExP3gucmVtb3ZlQXR0cihlLG4pOmUuc2V0QXR0cmlidXRlKG4sbiksbn19LHguZWFjaCh4LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihlLHQpe3ZhciBuPXguZXhwci5hdHRySGFuZGxlW3RdfHx4LmZpbmQuYXR0cjt4LmV4cHIuYXR0ckhhbmRsZVt0XT1mdW5jdGlvbihlLHQscil7dmFyIGk9eC5leHByLmF0dHJIYW5kbGVbdF0sbz1yP3VuZGVmaW5lZDooeC5leHByLmF0dHJIYW5kbGVbdF09dW5kZWZpbmVkKSE9bihlLHQscik/dC50b0xvd2VyQ2FzZSgpOm51bGw7cmV0dXJuIHguZXhwci5hdHRySGFuZGxlW3RdPWksb319KSx4LnN1cHBvcnQub3B0U2VsZWN0ZWR8fCh4LnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLHguZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7eC5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLHguZWFjaChbInJhZGlvIiwiY2hlY2tib3giXSxmdW5jdGlvbigpe3gudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlLHQpe3JldHVybiB4LmlzQXJyYXkodCk/ZS5jaGVja2VkPXguaW5BcnJheSh4KGUpLnZhbCgpLHQpPj0wOnVuZGVmaW5lZH19LHguc3VwcG9ydC5jaGVja09ufHwoeC52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pO3ZhciBJPS9ea2V5Lyx6PS9eKD86bW91c2V8Y29udGV4dG1lbnUpfGNsaWNrLyxfPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxYPS9eKFteLl0qKSg/OlwuKC4rKXwpJC87ZnVuY3Rpb24gVSgpe3JldHVybiEwfWZ1bmN0aW9uIFkoKXtyZXR1cm4hMX1mdW5jdGlvbiBWKCl7dHJ5e3JldHVybiBvLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goZSl7fX14LmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGUsdCxuLGksbyl7dmFyIHMsYSx1LGwsYyxwLGYsaCxkLGcsbSx5PXEuZ2V0KGUpO2lmKHkpe24uaGFuZGxlciYmKHM9bixuPXMuaGFuZGxlcixvPXMuc2VsZWN0b3IpLG4uZ3VpZHx8KG4uZ3VpZD14Lmd1aWQrKyksKGw9eS5ldmVudHMpfHwobD15LmV2ZW50cz17fSksKGE9eS5oYW5kbGUpfHwoYT15LmhhbmRsZT1mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIHg9PT1yfHxlJiZ4LmV2ZW50LnRyaWdnZXJlZD09PWUudHlwZT91bmRlZmluZWQ6eC5ldmVudC5kaXNwYXRjaC5hcHBseShhLmVsZW0sYXJndW1lbnRzKX0sYS5lbGVtPWUpLHQ9KHR8fCIiKS5tYXRjaCh3KXx8WyIiXSxjPXQubGVuZ3RoO3doaWxlKGMtLSl1PVguZXhlYyh0W2NdKXx8W10sZD1tPXVbMV0sZz0odVsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGQmJihmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30sZD0obz9mLmRlbGVnYXRlVHlwZTpmLmJpbmRUeXBlKXx8ZCxmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30scD14LmV4dGVuZCh7dHlwZTpkLG9yaWdUeXBlOm0sZGF0YTppLGhhbmRsZXI6bixndWlkOm4uZ3VpZCxzZWxlY3RvcjpvLG5lZWRzQ29udGV4dDpvJiZ4LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QobyksbmFtZXNwYWNlOmcuam9pbigiLiIpfSxzKSwoaD1sW2RdKXx8KGg9bFtkXT1bXSxoLmRlbGVnYXRlQ291bnQ9MCxmLnNldHVwJiZmLnNldHVwLmNhbGwoZSxpLGcsYSkhPT0hMXx8ZS5hZGRFdmVudExpc3RlbmVyJiZlLmFkZEV2ZW50TGlzdGVuZXIoZCxhLCExKSksZi5hZGQmJihmLmFkZC5jYWxsKGUscCkscC5oYW5kbGVyLmd1aWR8fChwLmhhbmRsZXIuZ3VpZD1uLmd1aWQpKSxvP2guc3BsaWNlKGguZGVsZWdhdGVDb3VudCsrLDAscCk6aC5wdXNoKHApLHguZXZlbnQuZ2xvYmFsW2RdPSEwKTtlPW51bGx9fSxyZW1vdmU6ZnVuY3Rpb24oZSx0LG4scixpKXt2YXIgbyxzLGEsdSxsLGMscCxmLGgsZCxnLG09cS5oYXNEYXRhKGUpJiZxLmdldChlKTtpZihtJiYodT1tLmV2ZW50cykpe3Q9KHR8fCIiKS5tYXRjaCh3KXx8WyIiXSxsPXQubGVuZ3RoO3doaWxlKGwtLSlpZihhPVguZXhlYyh0W2xdKXx8W10saD1nPWFbMV0sZD0oYVsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpLGgpe3A9eC5ldmVudC5zcGVjaWFsW2hdfHx7fSxoPShyP3AuZGVsZWdhdGVUeXBlOnAuYmluZFR5cGUpfHxoLGY9dVtoXXx8W10sYT1hWzJdJiZSZWdFeHAoIihefFxcLikiK2Quam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIikscz1vPWYubGVuZ3RoO3doaWxlKG8tLSljPWZbb10sIWkmJmchPT1jLm9yaWdUeXBlfHxuJiZuLmd1aWQhPT1jLmd1aWR8fGEmJiFhLnRlc3QoYy5uYW1lc3BhY2UpfHxyJiZyIT09Yy5zZWxlY3RvciYmKCIqKiIhPT1yfHwhYy5zZWxlY3Rvcil8fChmLnNwbGljZShvLDEpLGMuc2VsZWN0b3ImJmYuZGVsZWdhdGVDb3VudC0tLHAucmVtb3ZlJiZwLnJlbW92ZS5jYWxsKGUsYykpO3MmJiFmLmxlbmd0aCYmKHAudGVhcmRvd24mJnAudGVhcmRvd24uY2FsbChlLGQsbS5oYW5kbGUpIT09ITF8fHgucmVtb3ZlRXZlbnQoZSxoLG0uaGFuZGxlKSxkZWxldGUgdVtoXSl9ZWxzZSBmb3IoaCBpbiB1KXguZXZlbnQucmVtb3ZlKGUsaCt0W2xdLG4sciwhMCk7eC5pc0VtcHR5T2JqZWN0KHUpJiYoZGVsZXRlIG0uaGFuZGxlLHEucmVtb3ZlKGUsImV2ZW50cyIpKX19LHRyaWdnZXI6ZnVuY3Rpb24odCxuLHIsaSl7dmFyIHMsYSx1LGwsYyxwLGYsaD1bcnx8b10sZD15LmNhbGwodCwidHlwZSIpP3QudHlwZTp0LGc9eS5jYWxsKHQsIm5hbWVzcGFjZSIpP3QubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYoYT11PXI9cnx8bywzIT09ci5ub2RlVHlwZSYmOCE9PXIubm9kZVR5cGUmJiFfLnRlc3QoZCt4LmV2ZW50LnRyaWdnZXJlZCkmJihkLmluZGV4T2YoIi4iKT49MCYmKGc9ZC5zcGxpdCgiLiIpLGQ9Zy5zaGlmdCgpLGcuc29ydCgpKSxjPTA+ZC5pbmRleE9mKCI6IikmJiJvbiIrZCx0PXRbeC5leHBhbmRvXT90Om5ldyB4LkV2ZW50KGQsIm9iamVjdCI9PXR5cGVvZiB0JiZ0KSx0LmlzVHJpZ2dlcj1pPzI6Myx0Lm5hbWVzcGFjZT1nLmpvaW4oIi4iKSx0Lm5hbWVzcGFjZV9yZT10Lm5hbWVzcGFjZT9SZWdFeHAoIihefFxcLikiK2cuam9pbigiXFwuKD86LipcXC58KSIpKyIoXFwufCQpIik6bnVsbCx0LnJlc3VsdD11bmRlZmluZWQsdC50YXJnZXR8fCh0LnRhcmdldD1yKSxuPW51bGw9PW4/W3RdOngubWFrZUFycmF5KG4sW3RdKSxmPXguZXZlbnQuc3BlY2lhbFtkXXx8e30saXx8IWYudHJpZ2dlcnx8Zi50cmlnZ2VyLmFwcGx5KHIsbikhPT0hMSkpe2lmKCFpJiYhZi5ub0J1YmJsZSYmIXguaXNXaW5kb3cocikpe2ZvcihsPWYuZGVsZWdhdGVUeXBlfHxkLF8udGVzdChsK2QpfHwoYT1hLnBhcmVudE5vZGUpO2E7YT1hLnBhcmVudE5vZGUpaC5wdXNoKGEpLHU9YTt1PT09KHIub3duZXJEb2N1bWVudHx8bykmJmgucHVzaCh1LmRlZmF1bHRWaWV3fHx1LnBhcmVudFdpbmRvd3x8ZSl9cz0wO3doaWxlKChhPWhbcysrXSkmJiF0LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpdC50eXBlPXM+MT9sOmYuYmluZFR5cGV8fGQscD0ocS5nZXQoYSwiZXZlbnRzIil8fHt9KVt0LnR5cGVdJiZxLmdldChhLCJoYW5kbGUiKSxwJiZwLmFwcGx5KGEsbikscD1jJiZhW2NdLHAmJnguYWNjZXB0RGF0YShhKSYmcC5hcHBseSYmcC5hcHBseShhLG4pPT09ITEmJnQucHJldmVudERlZmF1bHQoKTtyZXR1cm4gdC50eXBlPWQsaXx8dC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Zi5fZGVmYXVsdCYmZi5fZGVmYXVsdC5hcHBseShoLnBvcCgpLG4pIT09ITF8fCF4LmFjY2VwdERhdGEocil8fGMmJnguaXNGdW5jdGlvbihyW2RdKSYmIXguaXNXaW5kb3cocikmJih1PXJbY10sdSYmKHJbY109bnVsbCkseC5ldmVudC50cmlnZ2VyZWQ9ZCxyW2RdKCkseC5ldmVudC50cmlnZ2VyZWQ9dW5kZWZpbmVkLHUmJihyW2NdPXUpKSx0LnJlc3VsdH19LGRpc3BhdGNoOmZ1bmN0aW9uKGUpe2U9eC5ldmVudC5maXgoZSk7dmFyIHQsbixyLGksbyxzPVtdLGE9ZC5jYWxsKGFyZ3VtZW50cyksdT0ocS5nZXQodGhpcywiZXZlbnRzIil8fHt9KVtlLnR5cGVdfHxbXSxsPXguZXZlbnQuc3BlY2lhbFtlLnR5cGVdfHx7fTtpZihhWzBdPWUsZS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFsLnByZURpc3BhdGNofHxsLnByZURpc3BhdGNoLmNhbGwodGhpcyxlKSE9PSExKXtzPXguZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGUsdSksdD0wO3doaWxlKChpPXNbdCsrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2UuY3VycmVudFRhcmdldD1pLmVsZW0sbj0wO3doaWxlKChvPWkuaGFuZGxlcnNbbisrXSkmJiFlLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFlLm5hbWVzcGFjZV9yZXx8ZS5uYW1lc3BhY2VfcmUudGVzdChvLm5hbWVzcGFjZSkpJiYoZS5oYW5kbGVPYmo9byxlLmRhdGE9by5kYXRhLHI9KCh4LmV2ZW50LnNwZWNpYWxbby5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fG8uaGFuZGxlcikuYXBwbHkoaS5lbGVtLGEpLHIhPT11bmRlZmluZWQmJihlLnJlc3VsdD1yKT09PSExJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gbC5wb3N0RGlzcGF0Y2gmJmwucG9zdERpc3BhdGNoLmNhbGwodGhpcyxlKSxlLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpLG8scz1bXSxhPXQuZGVsZWdhdGVDb3VudCx1PWUudGFyZ2V0O2lmKGEmJnUubm9kZVR5cGUmJighZS5idXR0b258fCJjbGljayIhPT1lLnR5cGUpKWZvcig7dSE9PXRoaXM7dT11LnBhcmVudE5vZGV8fHRoaXMpaWYodS5kaXNhYmxlZCE9PSEwfHwiY2xpY2siIT09ZS50eXBlKXtmb3Iocj1bXSxuPTA7YT5uO24rKylvPXRbbl0saT1vLnNlbGVjdG9yKyIgIixyW2ldPT09dW5kZWZpbmVkJiYocltpXT1vLm5lZWRzQ29udGV4dD94KGksdGhpcykuaW5kZXgodSk+PTA6eC5maW5kKGksdGhpcyxudWxsLFt1XSkubGVuZ3RoKSxyW2ldJiZyLnB1c2gobyk7ci5sZW5ndGgmJnMucHVzaCh7ZWxlbTp1LGhhbmRsZXJzOnJ9KX1yZXR1cm4gdC5sZW5ndGg+YSYmcy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6dC5zbGljZShhKX0pLHN9LHByb3BzOiJhbHRLZXkgYnViYmxlcyBjYW5jZWxhYmxlIGN0cmxLZXkgY3VycmVudFRhcmdldCBldmVudFBoYXNlIG1ldGFLZXkgcmVsYXRlZFRhcmdldCBzaGlmdEtleSB0YXJnZXQgdGltZVN0YW1wIHZpZXcgd2hpY2giLnNwbGl0KCIgIiksZml4SG9va3M6e30sa2V5SG9va3M6e3Byb3BzOiJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlIi5zcGxpdCgiICIpLGZpbHRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1lLndoaWNoJiYoZS53aGljaD1udWxsIT10LmNoYXJDb2RlP3QuY2hhckNvZGU6dC5rZXlDb2RlKSxlfX0sbW91c2VIb29rczp7cHJvcHM6ImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudCIuc3BsaXQoIiAiKSxmaWx0ZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGkscz10LmJ1dHRvbjtyZXR1cm4gbnVsbD09ZS5wYWdlWCYmbnVsbCE9dC5jbGllbnRYJiYobj1lLnRhcmdldC5vd25lckRvY3VtZW50fHxvLHI9bi5kb2N1bWVudEVsZW1lbnQsaT1uLmJvZHksZS5wYWdlWD10LmNsaWVudFgrKHImJnIuc2Nyb2xsTGVmdHx8aSYmaS5zY3JvbGxMZWZ0fHwwKS0ociYmci5jbGllbnRMZWZ0fHxpJiZpLmNsaWVudExlZnR8fDApLGUucGFnZVk9dC5jbGllbnRZKyhyJiZyLnNjcm9sbFRvcHx8aSYmaS5zY3JvbGxUb3B8fDApLShyJiZyLmNsaWVudFRvcHx8aSYmaS5jbGllbnRUb3B8fDApKSxlLndoaWNofHxzPT09dW5kZWZpbmVkfHwoZS53aGljaD0xJnM/MToyJnM/Mzo0JnM/MjowKSxlfX0sZml4OmZ1bmN0aW9uKGUpe2lmKGVbeC5leHBhbmRvXSlyZXR1cm4gZTt2YXIgdCxuLHIsaT1lLnR5cGUscz1lLGE9dGhpcy5maXhIb29rc1tpXTthfHwodGhpcy5maXhIb29rc1tpXT1hPXoudGVzdChpKT90aGlzLm1vdXNlSG9va3M6SS50ZXN0KGkpP3RoaXMua2V5SG9va3M6e30pLHI9YS5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChhLnByb3BzKTp0aGlzLnByb3BzLGU9bmV3IHguRXZlbnQocyksdD1yLmxlbmd0aDt3aGlsZSh0LS0pbj1yW3RdLGVbbl09c1tuXTtyZXR1cm4gZS50YXJnZXR8fChlLnRhcmdldD1vKSwzPT09ZS50YXJnZXQubm9kZVR5cGUmJihlLnRhcmdldD1lLnRhcmdldC5wYXJlbnROb2RlKSxhLmZpbHRlcj9hLmZpbHRlcihlLHMpOmV9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09VigpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnVuZGVmaW5lZH0sZGVsZWdhdGVUeXBlOiJmb2N1c2luIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09VigpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp1bmRlZmluZWR9LGRlbGVnYXRlVHlwZToiZm9jdXNvdXQifSxjbGljazp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiJjaGVja2JveCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJngubm9kZU5hbWUodGhpcywiaW5wdXQiKT8odGhpcy5jbGljaygpLCExKTp1bmRlZmluZWR9LF9kZWZhdWx0OmZ1bmN0aW9uKGUpe3JldHVybiB4Lm5vZGVOYW1lKGUudGFyZ2V0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXtlLnJlc3VsdCE9PXVuZGVmaW5lZCYmKGUub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1lLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5leHRlbmQobmV3IHguRXZlbnQsbix7dHlwZTplLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtyP3guZXZlbnQudHJpZ2dlcihpLG51bGwsdCk6eC5ldmVudC5kaXNwYXRjaC5jYWxsKHQsaSksaS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmbi5wcmV2ZW50RGVmYXVsdCgpfX0seC5yZW1vdmVFdmVudD1mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuLCExKX0seC5FdmVudD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzIGluc3RhbmNlb2YgeC5FdmVudD8oZSYmZS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9ZSx0aGlzLnR5cGU9ZS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWUuZGVmYXVsdFByZXZlbnRlZHx8ZS5nZXRQcmV2ZW50RGVmYXVsdCYmZS5nZXRQcmV2ZW50RGVmYXVsdCgpP1U6WSk6dGhpcy50eXBlPWUsdCYmeC5leHRlbmQodGhpcyx0KSx0aGlzLnRpbWVTdGFtcD1lJiZlLnRpbWVTdGFtcHx8eC5ub3coKSx0aGlzW3guZXhwYW5kb109ITAsdW5kZWZpbmVkKTpuZXcgeC5FdmVudChlLHQpfSx4LkV2ZW50LnByb3RvdHlwZT17aXNEZWZhdWx0UHJldmVudGVkOlksaXNQcm9wYWdhdGlvblN0b3BwZWQ6WSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpZLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNEZWZhdWx0UHJldmVudGVkPVUsZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZD1VLGUmJmUuc3RvcFByb3BhZ2F0aW9uJiZlLnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVUsdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LHguZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCJ9LGZ1bmN0aW9uKGUsdCl7eC5ldmVudC5zcGVjaWFsW2VdPXtkZWxlZ2F0ZVR5cGU6dCxiaW5kVHlwZTp0LGhhbmRsZTpmdW5jdGlvbihlKXt2YXIgbixyPXRoaXMsaT1lLnJlbGF0ZWRUYXJnZXQsbz1lLmhhbmRsZU9iajtyZXR1cm4oIWl8fGkhPT1yJiYheC5jb250YWlucyhyLGkpKSYmKGUudHlwZT1vLm9yaWdUeXBlLG49by5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnR5cGU9dCksbn19fSkseC5zdXBwb3J0LmZvY3VzaW5CdWJibGVzfHx4LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7dmFyIG49MCxyPWZ1bmN0aW9uKGUpe3guZXZlbnQuc2ltdWxhdGUodCxlLnRhcmdldCx4LmV2ZW50LmZpeChlKSwhMCl9O3guZXZlbnQuc3BlY2lhbFt0XT17c2V0dXA6ZnVuY3Rpb24oKXswPT09bisrJiZvLmFkZEV2ZW50TGlzdGVuZXIoZSxyLCEwKX0sdGVhcmRvd246ZnVuY3Rpb24oKXswPT09LS1uJiZvLnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxyLCEwKX19fSkseC5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8scztpZigib2JqZWN0Ij09dHlwZW9mIGUpeyJzdHJpbmciIT10eXBlb2YgdCYmKG49bnx8dCx0PXVuZGVmaW5lZCk7Zm9yKHMgaW4gZSl0aGlzLm9uKHMsdCxuLGVbc10saSk7cmV0dXJuIHRoaXN9aWYobnVsbD09biYmbnVsbD09cj8ocj10LG49dD11bmRlZmluZWQpOm51bGw9PXImJigic3RyaW5nIj09dHlwZW9mIHQ/KHI9bixuPXVuZGVmaW5lZCk6KHI9bixuPXQsdD11bmRlZmluZWQpKSxyPT09ITEpcj1ZO2Vsc2UgaWYoIXIpcmV0dXJuIHRoaXM7cmV0dXJuIDE9PT1pJiYobz1yLHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHgoKS5vZmYoZSksby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHIuZ3VpZD1vLmd1aWR8fChvLmd1aWQ9eC5ndWlkKyspKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LmFkZCh0aGlzLGUscixuLHQpfSl9LG9uZTpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gdGhpcy5vbihlLHQsbixyLDEpfSxvZmY6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGk7aWYoZSYmZS5wcmV2ZW50RGVmYXVsdCYmZS5oYW5kbGVPYmopcmV0dXJuIHI9ZS5oYW5kbGVPYmoseChlLmRlbGVnYXRlVGFyZ2V0KS5vZmYoci5uYW1lc3BhY2U/ci5vcmlnVHlwZSsiLiIrci5uYW1lc3BhY2U6ci5vcmlnVHlwZSxyLnNlbGVjdG9yLHIuaGFuZGxlciksdGhpcztpZigib2JqZWN0Ij09dHlwZW9mIGUpe2ZvcihpIGluIGUpdGhpcy5vZmYoaSx0LGVbaV0pO3JldHVybiB0aGlzfXJldHVybih0PT09ITF8fCJmdW5jdGlvbiI9PXR5cGVvZiB0KSYmKG49dCx0PXVuZGVmaW5lZCksbj09PSExJiYobj1ZKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt4LmV2ZW50LnJlbW92ZSh0aGlzLGUsbix0KX0pfSx0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3guZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO3JldHVybiBuP3guZXZlbnQudHJpZ2dlcihlLHQsbiwhMCk6dW5kZWZpbmVkfX0pO3ZhciBHPS9eLlteOiNcW1wuLF0qJC8sSj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxRPXguZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsSz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTt4LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuPVtdLHI9dGhpcyxpPXIubGVuZ3RoO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2soeChlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO2k+dDt0KyspaWYoeC5jb250YWlucyhyW3RdLHRoaXMpKXJldHVybiEwfSkpO2Zvcih0PTA7aT50O3QrKyl4LmZpbmQoZSxyW3RdLG4pO3JldHVybiBuPXRoaXMucHVzaFN0YWNrKGk+MT94LnVuaXF1ZShuKTpuKSxuLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcisiICIrZTplLG59LGhhczpmdW5jdGlvbihlKXt2YXIgdD14KGUsdGhpcyksbj10Lmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT0wO2Zvcig7bj5lO2UrKylpZih4LmNvbnRhaW5zKHRoaXMsdFtlXSkpcmV0dXJuITB9KX0sbm90OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1c2hTdGFjayhldCh0aGlzLGV8fFtdLCEwKSl9LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soZXQodGhpcyxlfHxbXSwhMSkpfSxpczpmdW5jdGlvbihlKXtyZXR1cm4hIWV0KHRoaXMsInN0cmluZyI9PXR5cGVvZiBlJiZRLnRlc3QoZSk/eChlKTplfHxbXSwhMSkubGVuZ3RofSxjbG9zZXN0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dGhpcy5sZW5ndGgsbz1bXSxzPVEudGVzdChlKXx8InN0cmluZyIhPXR5cGVvZiBlP3goZSx0fHx0aGlzLmNvbnRleHQpOjA7Zm9yKDtpPnI7cisrKWZvcihuPXRoaXNbcl07biYmbiE9PXQ7bj1uLnBhcmVudE5vZGUpaWYoMTE+bi5ub2RlVHlwZSYmKHM/cy5pbmRleChuKT4tMToxPT09bi5ub2RlVHlwZSYmeC5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7bj1vLnB1c2gobik7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKG8ubGVuZ3RoPjE/eC51bmlxdWUobyk6byl9LGluZGV4OmZ1bmN0aW9uKGUpe3JldHVybiBlPyJzdHJpbmciPT10eXBlb2YgZT9nLmNhbGwoeChlKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxlLmpxdWVyeT9lWzBdOmUpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGUsdCl7dmFyIG49InN0cmluZyI9PXR5cGVvZiBlP3goZSx0KTp4Lm1ha2VBcnJheShlJiZlLm5vZGVUeXBlP1tlXTplKSxyPXgubWVyZ2UodGhpcy5nZXQoKSxuKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeC51bmlxdWUocikpfSxhZGRCYWNrOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmFkZChudWxsPT1lP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGUpKX19KTtmdW5jdGlvbiBaKGUsdCl7d2hpbGUoKGU9ZVt0XSkmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX14LmVhY2goe3BhcmVudDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJjExIT09dC5ub2RlVHlwZT90Om51bGx9LHBhcmVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuIHguZGlyKGUsInBhcmVudE5vZGUiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFooZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gWihlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwibmV4dFNpYmxpbmciKX0scHJldkFsbDpmdW5jdGlvbihlKXtyZXR1cm4geC5kaXIoZSwicHJldmlvdXNTaWJsaW5nIil9LG5leHRVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHguZGlyKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5kaXIoZSwicHJldmlvdXNTaWJsaW5nIixuKX0sc2libGluZ3M6ZnVuY3Rpb24oZSl7cmV0dXJuIHguc2libGluZygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIHguc2libGluZyhlLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50RG9jdW1lbnR8fHgubWVyZ2UoW10sZS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGUsdCl7eC5mbltlXT1mdW5jdGlvbihuLHIpe3ZhciBpPXgubWFwKHRoaXMsdCxuKTtyZXR1cm4iVW50aWwiIT09ZS5zbGljZSgtNSkmJihyPW4pLHImJiJzdHJpbmciPT10eXBlb2YgciYmKGk9eC5maWx0ZXIocixpKSksdGhpcy5sZW5ndGg+MSYmKEtbZV18fHgudW5pcXVlKGkpLEoudGVzdChlKSYmaS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGkpfX0pLHguZXh0ZW5kKHtmaWx0ZXI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRbMF07cmV0dXJuIG4mJihlPSI6bm90KCIrZSsiKSIpLDE9PT10Lmxlbmd0aCYmMT09PXIubm9kZVR5cGU/eC5maW5kLm1hdGNoZXNTZWxlY3RvcihyLGUpP1tyXTpbXTp4LmZpbmQubWF0Y2hlcyhlLHguZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZX0pKX0sZGlyOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bXSxpPW4hPT11bmRlZmluZWQ7d2hpbGUoKGU9ZVt0XSkmJjkhPT1lLm5vZGVUeXBlKWlmKDE9PT1lLm5vZGVUeXBlKXtpZihpJiZ4KGUpLmlzKG4pKWJyZWFrO3IucHVzaChlKX1yZXR1cm4gcn0sc2libGluZzpmdW5jdGlvbihlLHQpe3ZhciBuPVtdO2Zvcig7ZTtlPWUubmV4dFNpYmxpbmcpMT09PWUubm9kZVR5cGUmJmUhPT10JiZuLnB1c2goZSk7cmV0dXJuIG59fSk7ZnVuY3Rpb24gZXQoZSx0LG4pe2lmKHguaXNGdW5jdGlvbih0KSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSxyKXtyZXR1cm4hIXQuY2FsbChlLHIsZSkhPT1ufSk7aWYodC5ub2RlVHlwZSlyZXR1cm4geC5ncmVwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT10IT09bn0pO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoRy50ZXN0KHQpKXJldHVybiB4LmZpbHRlcih0LGUsbik7dD14LmZpbHRlcih0LGUpfXJldHVybiB4LmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZy5jYWxsKHQsZSk+PTAhPT1ufSl9dmFyIHR0PS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcdzpdKylbXj5dKilcLz4vZ2ksbnQ9LzwoW1x3Ol0rKS8scnQ9Lzx8JiM/XHcrOy8saXQ9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxvdD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaSxzdD0vY2hlY2tlZFxzKig/OltePV18PVxzKi5jaGVja2VkLikvaSxhdD0vXiR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksdXQ9L150cnVlXC8oLiopLyxsdD0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2csY3Q9e29wdGlvbjpbMSwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPiIsIjwvc2VsZWN0PiJdLHRoZWFkOlsxLCI8dGFibGU+IiwiPC90YWJsZT4iXSxjb2w6WzIsIjx0YWJsZT48Y29sZ3JvdXA+IiwiPC9jb2xncm91cD48L3RhYmxlPiJdLHRyOlsyLCI8dGFibGU+PHRib2R5PiIsIjwvdGJvZHk+PC90YWJsZT4iXSx0ZDpbMywiPHRhYmxlPjx0Ym9keT48dHI+IiwiPC90cj48L3Rib2R5PjwvdGFibGU+Il0sX2RlZmF1bHQ6WzAsIiIsIiJdfTtjdC5vcHRncm91cD1jdC5vcHRpb24sY3QudGJvZHk9Y3QudGZvb3Q9Y3QuY29sZ3JvdXA9Y3QuY2FwdGlvbj1jdC50aGVhZCxjdC50aD1jdC50ZCx4LmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihlKXtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gZT09PXVuZGVmaW5lZD94LnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmFwcGVuZCgodGhpc1swXSYmdGhpc1swXS5vd25lckRvY3VtZW50fHxvKS5jcmVhdGVUZXh0Tm9kZShlKSl9LG51bGwsZSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGUpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgdD1wdCh0aGlzLGUpO3QuYXBwZW5kQ2hpbGQoZSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciB0PXB0KHRoaXMsZSk7dC5pbnNlcnRCZWZvcmUoZSx0LmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oZSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1lP3guZmlsdGVyKGUsdGhpcyk6dGhpcyxpPTA7Zm9yKDtudWxsIT0obj1yW2ldKTtpKyspdHx8MSE9PW4ubm9kZVR5cGV8fHguY2xlYW5EYXRhKG10KG4pKSxuLnBhcmVudE5vZGUmJih0JiZ4LmNvbnRhaW5zKG4ub3duZXJEb2N1bWVudCxuKSYmZHQobXQobiwic2NyaXB0IikpLG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7dmFyIGUsdD0wO2Zvcig7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKTE9PT1lLm5vZGVUeXBlJiYoeC5jbGVhbkRhdGEobXQoZSwhMSkpLGUudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGw9PWU/ITE6ZSx0PW51bGw9PXQ/ZTp0LHRoaXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHguY2xvbmUodGhpcyxlLHQpfSl9LGh0bWw6ZnVuY3Rpb24oZSl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1swXXx8e30sbj0wLHI9dGhpcy5sZW5ndGg7aWYoZT09PXVuZGVmaW5lZCYmMT09PXQubm9kZVR5cGUpcmV0dXJuIHQuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmIWl0LnRlc3QoZSkmJiFjdFsobnQuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9ZS5yZXBsYWNlKHR0LCI8JDE+PC8kMj4iKTt0cnl7Zm9yKDtyPm47bisrKXQ9dGhpc1tuXXx8e30sMT09PXQubm9kZVR5cGUmJih4LmNsZWFuRGF0YShtdCh0LCExKSksdC5pbm5lckhUTUw9ZSk7dD0wfWNhdGNoKGkpe319dCYmdGhpcy5lbXB0eSgpLmFwcGVuZChlKX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBlPXgubWFwKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuW2UubmV4dFNpYmxpbmcsZS5wYXJlbnROb2RlXX0pLHQ9MDtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24obil7dmFyIHI9ZVt0KytdLGk9ZVt0KytdO2kmJihyJiZyLnBhcmVudE5vZGUhPT1pJiYocj10aGlzLm5leHRTaWJsaW5nKSx4KHRoaXMpLnJlbW92ZSgpLGkuaW5zZXJ0QmVmb3JlKG4scikpfSwhMCksdD90aGlzOnRoaXMucmVtb3ZlKCl9LGRldGFjaDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZW1vdmUoZSwhMCl9LGRvbU1hbmlwOmZ1bmN0aW9uKGUsdCxuKXtlPWYuYXBwbHkoW10sZSk7dmFyIHIsaSxvLHMsYSx1LGw9MCxjPXRoaXMubGVuZ3RoLHA9dGhpcyxoPWMtMSxkPWVbMF0sZz14LmlzRnVuY3Rpb24oZCk7aWYoZ3x8ISgxPj1jfHwic3RyaW5nIiE9dHlwZW9mIGR8fHguc3VwcG9ydC5jaGVja0Nsb25lKSYmc3QudGVzdChkKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKHIpe3ZhciBpPXAuZXEocik7ZyYmKGVbMF09ZC5jYWxsKHRoaXMscixpLmh0bWwoKSkpLGkuZG9tTWFuaXAoZSx0LG4pfSk7aWYoYyYmKHI9eC5idWlsZEZyYWdtZW50KGUsdGhpc1swXS5vd25lckRvY3VtZW50LCExLCFuJiZ0aGlzKSxpPXIuZmlyc3RDaGlsZCwxPT09ci5jaGlsZE5vZGVzLmxlbmd0aCYmKHI9aSksaSkpe2ZvcihvPXgubWFwKG10KHIsInNjcmlwdCIpLGZ0KSxzPW8ubGVuZ3RoO2M+bDtsKyspYT1yLGwhPT1oJiYoYT14LmNsb25lKGEsITAsITApLHMmJngubWVyZ2UobyxtdChhLCJzY3JpcHQiKSkpLHQuY2FsbCh0aGlzW2xdLGEsbCk7aWYocylmb3IodT1vW28ubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQseC5tYXAobyxodCksbD0wO3M+bDtsKyspYT1vW2xdLGF0LnRlc3QoYS50eXBlfHwiIikmJiFxLmFjY2VzcyhhLCJnbG9iYWxFdmFsIikmJnguY29udGFpbnModSxhKSYmKGEuc3JjP3guX2V2YWxVcmwoYS5zcmMpOnguZ2xvYmFsRXZhbChhLnRleHRDb250ZW50LnJlcGxhY2UobHQsIiIpKSl9cmV0dXJuIHRoaXN9fSkseC5lYWNoKHthcHBlbmRUbzoiYXBwZW5kIixwcmVwZW5kVG86InByZXBlbmQiLGluc2VydEJlZm9yZToiYmVmb3JlIixpbnNlcnRBZnRlcjoiYWZ0ZXIiLHJlcGxhY2VBbGw6InJlcGxhY2VXaXRoIn0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUpe3ZhciBuLHI9W10saT14KGUpLG89aS5sZW5ndGgtMSxzPTA7Zm9yKDtvPj1zO3MrKyluPXM9PT1vP3RoaXM6dGhpcy5jbG9uZSghMCkseChpW3NdKVt0XShuKSxoLmFwcGx5KHIsbi5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHIpfX0pLHguZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHMsYT1lLmNsb25lTm9kZSghMCksdT14LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKTtpZighKHguc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZHx8MSE9PWUubm9kZVR5cGUmJjExIT09ZS5ub2RlVHlwZXx8eC5pc1hNTERvYyhlKSkpZm9yKHM9bXQoYSksbz1tdChlKSxyPTAsaT1vLmxlbmd0aDtpPnI7cisrKXl0KG9bcl0sc1tyXSk7aWYodClpZihuKWZvcihvPW98fG10KGUpLHM9c3x8bXQoYSkscj0wLGk9by5sZW5ndGg7aT5yO3IrKylndChvW3JdLHNbcl0pO2Vsc2UgZ3QoZSxhKTtyZXR1cm4gcz1tdChhLCJzY3JpcHQiKSxzLmxlbmd0aD4wJiZkdChzLCF1JiZtdChlLCJzY3JpcHQiKSksYX0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihlLHQsbixyKXt2YXIgaSxvLHMsYSx1LGwsYz0wLHA9ZS5sZW5ndGgsZj10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxoPVtdO2Zvcig7cD5jO2MrKylpZihpPWVbY10saXx8MD09PWkpaWYoIm9iamVjdCI9PT14LnR5cGUoaSkpeC5tZXJnZShoLGkubm9kZVR5cGU/W2ldOmkpO2Vsc2UgaWYocnQudGVzdChpKSl7bz1vfHxmLmFwcGVuZENoaWxkKHQuY3JlYXRlRWxlbWVudCgiZGl2IikpLHM9KG50LmV4ZWMoaSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCksYT1jdFtzXXx8Y3QuX2RlZmF1bHQsby5pbm5lckhUTUw9YVsxXStpLnJlcGxhY2UodHQsIjwkMT48LyQyPiIpK2FbMl0sbD1hWzBdO3doaWxlKGwtLSlvPW8ubGFzdENoaWxkO3gubWVyZ2UoaCxvLmNoaWxkTm9kZXMpLG89Zi5maXJzdENoaWxkLG8udGV4dENvbnRlbnQ9IiJ9ZWxzZSBoLnB1c2godC5jcmVhdGVUZXh0Tm9kZShpKSk7Zi50ZXh0Q29udGVudD0iIixjPTA7d2hpbGUoaT1oW2MrK10paWYoKCFyfHwtMT09PXguaW5BcnJheShpLHIpKSYmKHU9eC5jb250YWlucyhpLm93bmVyRG9jdW1lbnQsaSksbz1tdChmLmFwcGVuZENoaWxkKGkpLCJzY3JpcHQiKSx1JiZkdChvKSxuKSl7bD0wO3doaWxlKGk9b1tsKytdKWF0LnRlc3QoaS50eXBlfHwiIikmJm4ucHVzaChpKX1yZXR1cm4gZn0sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpLG8scyxhPXguZXZlbnQuc3BlY2lhbCx1PTA7Zm9yKDsobj1lW3VdKSE9PXVuZGVmaW5lZDt1Kyspe2lmKEYuYWNjZXB0cyhuKSYmKG89bltxLmV4cGFuZG9dLG8mJih0PXEuY2FjaGVbb10pKSl7aWYocj1PYmplY3Qua2V5cyh0LmV2ZW50c3x8e30pLHIubGVuZ3RoKWZvcihzPTA7KGk9cltzXSkhPT11bmRlZmluZWQ7cysrKWFbaV0/eC5ldmVudC5yZW1vdmUobixpKTp4LnJlbW92ZUV2ZW50KG4saSx0LmhhbmRsZSk7cS5jYWNoZVtvXSYmZGVsZXRlIHEuY2FjaGVbb119ZGVsZXRlIEwuY2FjaGVbbltMLmV4cGFuZG9dXX19LF9ldmFsVXJsOmZ1bmN0aW9uKGUpe3JldHVybiB4LmFqYXgoe3VybDplLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsYXN5bmM6ITEsZ2xvYmFsOiExLCJ0aHJvd3MiOiEwfSl9fSk7ZnVuY3Rpb24gcHQoZSx0KXtyZXR1cm4geC5ub2RlTmFtZShlLCJ0YWJsZSIpJiZ4Lm5vZGVOYW1lKDE9PT10Lm5vZGVUeXBlP3Q6dC5maXJzdENoaWxkLCJ0ciIpP2UuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRib2R5IilbMF18fGUuYXBwZW5kQ2hpbGQoZS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRib2R5IikpOmV9ZnVuY3Rpb24gZnQoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBodChlKXt2YXIgdD11dC5leGVjKGUudHlwZSk7cmV0dXJuIHQ/ZS50eXBlPXRbMV06ZS5yZW1vdmVBdHRyaWJ1dGUoInR5cGUiKSxlfWZ1bmN0aW9uIGR0KGUsdCl7dmFyIG49ZS5sZW5ndGgscj0wO2Zvcig7bj5yO3IrKylxLnNldChlW3JdLCJnbG9iYWxFdmFsIiwhdHx8cS5nZXQodFtyXSwiZ2xvYmFsRXZhbCIpKX1mdW5jdGlvbiBndChlLHQpe3ZhciBuLHIsaSxvLHMsYSx1LGw7aWYoMT09PXQubm9kZVR5cGUpe2lmKHEuaGFzRGF0YShlKSYmKG89cS5hY2Nlc3MoZSkscz1xLnNldCh0LG8pLGw9by5ldmVudHMpKXtkZWxldGUgcy5oYW5kbGUscy5ldmVudHM9e307Zm9yKGkgaW4gbClmb3Iobj0wLHI9bFtpXS5sZW5ndGg7cj5uO24rKyl4LmV2ZW50LmFkZCh0LGksbFtpXVtuXSl9TC5oYXNEYXRhKGUpJiYoYT1MLmFjY2VzcyhlKSx1PXguZXh0ZW5kKHt9LGEpLEwuc2V0KHQsdSkpfX1mdW5jdGlvbiBtdChlLHQpe3ZhciBuPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOmUucXVlcnlTZWxlY3RvckFsbD9lLnF1ZXJ5U2VsZWN0b3JBbGwodHx8IioiKTpbXTtyZXR1cm4gdD09PXVuZGVmaW5lZHx8dCYmeC5ub2RlTmFtZShlLHQpP3gubWVyZ2UoW2VdLG4pOm59ZnVuY3Rpb24geXQoZSx0KXt2YXIgbj10Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7ImlucHV0Ij09PW4mJm90LnRlc3QoZS50eXBlKT90LmNoZWNrZWQ9ZS5jaGVja2VkOigiaW5wdXQiPT09bnx8InRleHRhcmVhIj09PW4pJiYodC5kZWZhdWx0VmFsdWU9ZS5kZWZhdWx0VmFsdWUpfXguZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcEFsbChlLmNhbGwodGhpcyx0KSl9KToodGhpc1swXSYmKHQ9eChlLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmdC5pbnNlcnRCZWZvcmUodGhpc1swXSksdC5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzO3doaWxlKGUuZmlyc3RFbGVtZW50Q2hpbGQpZT1lLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBlfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGUpe3JldHVybiB4LmlzRnVuY3Rpb24oZSk/dGhpcy5lYWNoKGZ1bmN0aW9uKHQpe3godGhpcykud3JhcElubmVyKGUuY2FsbCh0aGlzLHQpKX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciB0PXgodGhpcyksbj10LmNvbnRlbnRzKCk7bi5sZW5ndGg/bi53cmFwQWxsKGUpOnQuYXBwZW5kKGUpfSl9LHdyYXA6ZnVuY3Rpb24oZSl7dmFyIHQ9eC5pc0Z1bmN0aW9uKGUpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24obil7eCh0aGlzKS53cmFwQWxsKHQ/ZS5jYWxsKHRoaXMsbik6ZSl9KX0sdW53cmFwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpe3gubm9kZU5hbWUodGhpcywiYm9keSIpfHx4KHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KTt2YXIgdnQseHQsYnQ9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLHd0PS9ebWFyZ2luLyxUdD1SZWdFeHAoIl4oIitiKyIpKC4qKSQiLCJpIiksQ3Q9UmVnRXhwKCJeKCIrYisiKSg/IXB4KVthLXolXSskIiwiaSIpLGt0PVJlZ0V4cCgiXihbKy1dKT0oIitiKyIpIiwiaSIpLE50PXtCT0RZOiJibG9jayJ9LEV0PXtwb3NpdGlvbjoiYWJzb2x1dGUiLHZpc2liaWxpdHk6ImhpZGRlbiIsZGlzcGxheToiYmxvY2sifSxTdD17bGV0dGVyU3BhY2luZzowLGZvbnRXZWlnaHQ6NDAwfSxqdD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLER0PVsiV2Via2l0IiwiTyIsIk1veiIsIm1zIl07ZnVuY3Rpb24gQXQoZSx0KXtpZih0IGluIGUpcmV0dXJuIHQ7dmFyIG49dC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpLHI9dCxpPUR0Lmxlbmd0aDt3aGlsZShpLS0paWYodD1EdFtpXStuLHQgaW4gZSlyZXR1cm4gdDtyZXR1cm4gcn1mdW5jdGlvbiBMdChlLHQpe3JldHVybiBlPXR8fGUsIm5vbmUiPT09eC5jc3MoZSwiZGlzcGxheSIpfHwheC5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSl9ZnVuY3Rpb24gcXQodCl7cmV0dXJuIGUuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpfWZ1bmN0aW9uIEh0KGUsdCl7dmFyIG4scixpLG89W10scz0wLGE9ZS5sZW5ndGg7Zm9yKDthPnM7cysrKXI9ZVtzXSxyLnN0eWxlJiYob1tzXT1xLmdldChyLCJvbGRkaXNwbGF5Iiksbj1yLnN0eWxlLmRpc3BsYXksdD8ob1tzXXx8Im5vbmUiIT09bnx8KHIuc3R5bGUuZGlzcGxheT0iIiksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJkx0KHIpJiYob1tzXT1xLmFjY2VzcyhyLCJvbGRkaXNwbGF5IixSdChyLm5vZGVOYW1lKSkpKTpvW3NdfHwoaT1MdChyKSwobiYmIm5vbmUiIT09bnx8IWkpJiZxLnNldChyLCJvbGRkaXNwbGF5IixpP246eC5jc3MociwiZGlzcGxheSIpKSkpO2ZvcihzPTA7YT5zO3MrKylyPWVbc10sci5zdHlsZSYmKHQmJiJub25lIiE9PXIuc3R5bGUuZGlzcGxheSYmIiIhPT1yLnN0eWxlLmRpc3BsYXl8fChyLnN0eWxlLmRpc3BsYXk9dD9vW3NdfHwiIjoibm9uZSIpKTtyZXR1cm4gZX14LmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguYWNjZXNzKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz17fSxzPTA7aWYoeC5pc0FycmF5KHQpKXtmb3Iocj1xdChlKSxpPXQubGVuZ3RoO2k+cztzKyspb1t0W3NdXT14LmNzcyhlLHRbc10sITEscik7cmV0dXJuIG99cmV0dXJuIG4hPT11bmRlZmluZWQ/eC5zdHlsZShlLHQsbik6eC5jc3MoZSx0KX0sZSx0LGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gSHQodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gSHQodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7THQodGhpcyk/eCh0aGlzKS5zaG93KCk6eCh0aGlzKS5oaWRlKCl9KX19KSx4LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPXZ0KGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnsiZmxvYXQiOiJjc3NGbG9hdCJ9LHN0eWxlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIGksbyxzLGE9eC5jYW1lbENhc2UodCksdT1lLnN0eWxlO3JldHVybiB0PXguY3NzUHJvcHNbYV18fCh4LmNzc1Byb3BzW2FdPUF0KHUsYSkpLHM9eC5jc3NIb29rc1t0XXx8eC5jc3NIb29rc1thXSxuPT09dW5kZWZpbmVkP3MmJiJnZXQiaW4gcyYmKGk9cy5nZXQoZSwhMSxyKSkhPT11bmRlZmluZWQ/aTp1W3RdOihvPXR5cGVvZiBuLCJzdHJpbmciPT09byYmKGk9a3QuZXhlYyhuKSkmJihuPShpWzFdKzEpKmlbMl0rcGFyc2VGbG9hdCh4LmNzcyhlLHQpKSxvPSJudW1iZXIiKSxudWxsPT1ufHwibnVtYmVyIj09PW8mJmlzTmFOKG4pfHwoIm51bWJlciIhPT1vfHx4LmNzc051bWJlclthXXx8KG4rPSJweCIpLHguc3VwcG9ydC5jbGVhckNsb25lU3R5bGV8fCIiIT09bnx8MCE9PXQuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwodVt0XT0iaW5oZXJpdCIpLHMmJiJzZXQiaW4gcyYmKG49cy5zZXQoZSxuLHIpKT09PXVuZGVmaW5lZHx8KHVbdF09bikpLHVuZGVmaW5lZCl9fSxjc3M6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxzLGE9eC5jYW1lbENhc2UodCk7cmV0dXJuIHQ9eC5jc3NQcm9wc1thXXx8KHguY3NzUHJvcHNbYV09QXQoZS5zdHlsZSxhKSkscz14LmNzc0hvb2tzW3RdfHx4LmNzc0hvb2tzW2FdLHMmJiJnZXQiaW4gcyYmKGk9cy5nZXQoZSwhMCxuKSksaT09PXVuZGVmaW5lZCYmKGk9dnQoZSx0LHIpKSwibm9ybWFsIj09PWkmJnQgaW4gU3QmJihpPVN0W3RdKSwiIj09PW58fG4/KG89cGFyc2VGbG9hdChpKSxuPT09ITB8fHguaXNOdW1lcmljKG8pP298fDA6aSk6aX19KSx2dD1mdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHM9bnx8cXQoZSksYT1zP3MuZ2V0UHJvcGVydHlWYWx1ZSh0KXx8c1t0XTp1bmRlZmluZWQsdT1lLnN0eWxlO3JldHVybiBzJiYoIiIhPT1hfHx4LmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8KGE9eC5zdHlsZShlLHQpKSxDdC50ZXN0KGEpJiZ3dC50ZXN0KHQpJiYocj11LndpZHRoLGk9dS5taW5XaWR0aCxvPXUubWF4V2lkdGgsdS5taW5XaWR0aD11Lm1heFdpZHRoPXUud2lkdGg9YSxhPXMud2lkdGgsdS53aWR0aD1yLHUubWluV2lkdGg9aSx1Lm1heFdpZHRoPW8pKSxhfTtmdW5jdGlvbiBPdChlLHQsbil7dmFyIHI9VHQuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMV0tKG58fDApKSsoclsyXXx8InB4Iik6dH1mdW5jdGlvbiBGdChlLHQsbixyLGkpe3ZhciBvPW49PT0ocj8iYm9yZGVyIjoiY29udGVudCIpPzQ6IndpZHRoIj09PXQ/MTowLHM9MDtmb3IoOzQ+bztvKz0yKSJtYXJnaW4iPT09biYmKHMrPXguY3NzKGUsbitqdFtvXSwhMCxpKSkscj8oImNvbnRlbnQiPT09biYmKHMtPXguY3NzKGUsInBhZGRpbmciK2p0W29dLCEwLGkpKSwibWFyZ2luIiE9PW4mJihzLT14LmNzcyhlLCJib3JkZXIiK2p0W29dKyJXaWR0aCIsITAsaSkpKToocys9eC5jc3MoZSwicGFkZGluZyIranRbb10sITAsaSksInBhZGRpbmciIT09biYmKHMrPXguY3NzKGUsImJvcmRlciIranRbb10rIldpZHRoIiwhMCxpKSkpO3JldHVybiBzfWZ1bmN0aW9uIFB0KGUsdCxuKXt2YXIgcj0hMCxpPSJ3aWR0aCI9PT10P2Uub2Zmc2V0V2lkdGg6ZS5vZmZzZXRIZWlnaHQsbz1xdChlKSxzPXguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsbyk7aWYoMD49aXx8bnVsbD09aSl7aWYoaT12dChlLHQsbyksKDA+aXx8bnVsbD09aSkmJihpPWUuc3R5bGVbdF0pLEN0LnRlc3QoaSkpcmV0dXJuIGk7cj1zJiYoeC5zdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlfHxpPT09ZS5zdHlsZVt0XSksaT1wYXJzZUZsb2F0KGkpfHwwfXJldHVybiBpK0Z0KGUsdCxufHwocz8iYm9yZGVyIjoiY29udGVudCIpLHIsbykrInB4In1mdW5jdGlvbiBSdChlKXt2YXIgdD1vLG49TnRbZV07cmV0dXJuIG58fChuPU10KGUsdCksIm5vbmUiIT09biYmbnx8KHh0PSh4dHx8eCgiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPiIpLmNzcygiY3NzVGV4dCIsImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudCIpKS5hcHBlbmRUbyh0LmRvY3VtZW50RWxlbWVudCksdD0oeHRbMF0uY29udGVudFdpbmRvd3x8eHRbMF0uY29udGVudERvY3VtZW50KS5kb2N1bWVudCx0LndyaXRlKCI8IWRvY3R5cGUgaHRtbD48aHRtbD48Ym9keT4iKSx0LmNsb3NlKCksbj1NdChlLHQpLHh0LmRldGFjaCgpKSxOdFtlXT1uKSxufWZ1bmN0aW9uIE10KGUsdCl7dmFyIG49eCh0LmNyZWF0ZUVsZW1lbnQoZSkpLmFwcGVuZFRvKHQuYm9keSkscj14LmNzcyhuWzBdLCJkaXNwbGF5Iik7cmV0dXJuIG4ucmVtb3ZlKCkscn14LmVhY2goWyJoZWlnaHQiLCJ3aWR0aCJdLGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gbj8wPT09ZS5vZmZzZXRXaWR0aCYmYnQudGVzdCh4LmNzcyhlLCJkaXNwbGF5IikpP3guc3dhcChlLEV0LGZ1bmN0aW9uKCl7cmV0dXJuIFB0KGUsdCxyKX0pOlB0KGUsdCxyKTp1bmRlZmluZWR9LHNldDpmdW5jdGlvbihlLG4scil7dmFyIGk9ciYmcXQoZSk7cmV0dXJuIE90KGUsbixyP0Z0KGUsdCxyLHguc3VwcG9ydC5ib3hTaXppbmcmJiJib3JkZXItYm94Ij09PXguY3NzKGUsImJveFNpemluZyIsITEsaSksaSk6MCl9fX0pLHgoZnVuY3Rpb24oKXt4LnN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodHx8KHguY3NzSG9va3MubWFyZ2luUmlnaHQ9e2dldDpmdW5jdGlvbihlLHQpe3JldHVybiB0P3guc3dhcChlLHtkaXNwbGF5OiJpbmxpbmUtYmxvY2sifSx2dCxbZSwibWFyZ2luUmlnaHQiXSk6dW5kZWZpbmVkfX0pLCF4LnN1cHBvcnQucGl4ZWxQb3NpdGlvbiYmeC5mbi5wb3NpdGlvbiYmeC5lYWNoKFsidG9wIiwibGVmdCJdLGZ1bmN0aW9uKGUsdCl7eC5jc3NIb29rc1t0XT17Z2V0OmZ1bmN0aW9uKGUsbil7cmV0dXJuIG4/KG49dnQoZSx0KSxDdC50ZXN0KG4pP3goZSkucG9zaXRpb24oKVt0XSsicHgiOm4pOnVuZGVmaW5lZH19fSl9KSx4LmV4cHImJnguZXhwci5maWx0ZXJzJiYoeC5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGUpe3JldHVybiAwPj1lLm9mZnNldFdpZHRoJiYwPj1lLm9mZnNldEhlaWdodH0seC5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihlKXtyZXR1cm4heC5leHByLmZpbHRlcnMuaGlkZGVuKGUpfSkseC5lYWNoKHttYXJnaW46IiIscGFkZGluZzoiIixib3JkZXI6IldpZHRoIn0sZnVuY3Rpb24oZSx0KXt4LmNzc0hvb2tzW2UrdF09e2V4cGFuZDpmdW5jdGlvbihuKXt2YXIgcj0wLGk9e30sbz0ic3RyaW5nIj09dHlwZW9mIG4/bi5zcGxpdCgiICIpOltuXTtmb3IoOzQ+cjtyKyspaVtlK2p0W3JdK3RdPW9bcl18fG9bci0yXXx8b1swXTtyZXR1cm4gaX19LHd0LnRlc3QoZSl8fCh4LmNzc0hvb2tzW2UrdF0uc2V0PU90KX0pO3ZhciBXdD0vJTIwL2csJHQ9L1xbXF0kLyxCdD0vXHI/XG4vZyxJdD0vXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksenQ9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO3guZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4geC5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXgucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP3gubWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIXgodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZ6dC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhSXQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IW90LnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49eCh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOnguaXNBcnJheShuKT94Lm1hcChuLGZ1bmN0aW9uKGUpe3JldHVybntuYW1lOnQubmFtZSx2YWx1ZTplLnJlcGxhY2UoQnQsIlxyXG4iKX19KTp7bmFtZTp0Lm5hbWUsdmFsdWU6bi5yZXBsYWNlKEJ0LCJcclxuIil9fSkuZ2V0KCl9fSkseC5wYXJhbT1mdW5jdGlvbihlLHQpe3ZhciBuLHI9W10saT1mdW5jdGlvbihlLHQpe3Q9eC5pc0Z1bmN0aW9uKHQpP3QoKTpudWxsPT10PyIiOnQscltyLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGUpKyI9IitlbmNvZGVVUklDb21wb25lbnQodCl9O2lmKHQ9PT11bmRlZmluZWQmJih0PXguYWpheFNldHRpbmdzJiZ4LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbCkseC5pc0FycmF5KGUpfHxlLmpxdWVyeSYmIXguaXNQbGFpbk9iamVjdChlKSl4LmVhY2goZSxmdW5jdGlvbigpe2kodGhpcy5uYW1lLHRoaXMudmFsdWUpfSk7ZWxzZSBmb3IobiBpbiBlKV90KG4sZVtuXSx0LGkpO3JldHVybiByLmpvaW4oIiYiKS5yZXBsYWNlKFd0LCIrIil9O2Z1bmN0aW9uIF90KGUsdCxuLHIpe3ZhciBpO2lmKHguaXNBcnJheSh0KSl4LmVhY2godCxmdW5jdGlvbih0LGkpe258fCR0LnRlc3QoZSk/cihlLGkpOl90KGUrIlsiKygib2JqZWN0Ij09dHlwZW9mIGk/dDoiIikrIl0iLGksbixyKX0pO2Vsc2UgaWYobnx8Im9iamVjdCIhPT14LnR5cGUodCkpcihlLHQpO2Vsc2UgZm9yKGkgaW4gdClfdChlKyJbIitpKyJdIix0W2ldLG4scil9eC5lYWNoKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGVycm9yIGNvbnRleHRtZW51Ii5zcGxpdCgiICIpLGZ1bmN0aW9uKGUsdCl7eC5mblt0XT1mdW5jdGlvbihlLG4pe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjA/dGhpcy5vbih0LG51bGwsZSxuKTp0aGlzLnRyaWdnZXIodCl9fSkseC5mbi5leHRlbmQoe2hvdmVyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubW91c2VlbnRlcihlKS5tb3VzZWxlYXZlKHR8fGUpfSxiaW5kOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5vbihlLG51bGwsdCxuKX0sdW5iaW5kOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMub2ZmKGUsbnVsbCx0KX0sZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMub24odCxlLG4scil9LHVuZGVsZWdhdGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiAxPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLm9mZihlLCIqKiIpOnRoaXMub2ZmKHQsZXx8IioqIixuKX19KTt2YXIgWHQsVXQsWXQ9eC5ub3coKSxWdD0vXD8vLEd0PS8jLiokLyxKdD0vKFs/Jl0pXz1bXiZdKi8sUXQ9L14oLio/KTpbIFx0XSooW15cclxuXSopJC9nbSxLdD0vXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxadD0vXig/OkdFVHxIRUFEKSQvLGVuPS9eXC9cLy8sdG49L14oW1x3ListXSs6KSg/OlwvXC8oW15cLz8jOl0qKSg/OjooXGQrKXwpfCkvLG5uPXguZm4ubG9hZCxybj17fSxvbj17fSxzbj0iKi8iLmNvbmNhdCgiKiIpO3RyeXtVdD1pLmhyZWZ9Y2F0Y2goYW4pe1V0PW8uY3JlYXRlRWxlbWVudCgiYSIpLFV0LmhyZWY9IiIsVXQ9VXQuaHJlZn1YdD10bi5leGVjKFV0LnRvTG93ZXJDYXNlKCkpfHxbXTtmdW5jdGlvbiB1bihlKXtyZXR1cm4gZnVuY3Rpb24odCxuKXsic3RyaW5nIiE9dHlwZW9mIHQmJihuPXQsdD0iKiIpO3ZhciByLGk9MCxvPXQudG9Mb3dlckNhc2UoKS5tYXRjaCh3KXx8W107aWYoeC5pc0Z1bmN0aW9uKG4pKXdoaWxlKHI9b1tpKytdKSIrIj09PXJbMF0/KHI9ci5zbGljZSgxKXx8IioiLChlW3JdPWVbcl18fFtdKS51bnNoaWZ0KG4pKTooZVtyXT1lW3JdfHxbXSkucHVzaChuKX19ZnVuY3Rpb24gbG4oZSx0LG4scil7dmFyIGk9e30sbz1lPT09b247ZnVuY3Rpb24gcyhhKXt2YXIgdTtyZXR1cm4gaVthXT0hMCx4LmVhY2goZVthXXx8W10sZnVuY3Rpb24oZSxhKXt2YXIgbD1hKHQsbixyKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIGx8fG98fGlbbF0/bz8hKHU9bCk6dW5kZWZpbmVkOih0LmRhdGFUeXBlcy51bnNoaWZ0KGwpLHMobCksITEpfSksdX1yZXR1cm4gcyh0LmRhdGFUeXBlc1swXSl8fCFpWyIqIl0mJnMoIioiKX1mdW5jdGlvbiBjbihlLHQpe3ZhciBuLHIsaT14LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl0W25dIT09dW5kZWZpbmVkJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZ4LmV4dGVuZCghMCxlLHIpLGV9eC5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJm5uKXJldHVybiBubi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHIsaSxvLHM9dGhpcyxhPWUuaW5kZXhPZigiICIpO3JldHVybiBhPj0wJiYocj1lLnNsaWNlKGEpLGU9ZS5zbGljZSgwLGEpKSx4LmlzRnVuY3Rpb24odCk/KG49dCx0PXVuZGVmaW5lZCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLHMubGVuZ3RoPjAmJnguYWpheCh7dXJsOmUsdHlwZTppLGRhdGFUeXBlOiJodG1sIixkYXRhOnR9KS5kb25lKGZ1bmN0aW9uKGUpe289YXJndW1lbnRzLHMuaHRtbChyP3goIjxkaXY+IikuYXBwZW5kKHgucGFyc2VIVE1MKGUpKS5maW5kKHIpOmUpfSkuY29tcGxldGUobiYmZnVuY3Rpb24oZSx0KXtzLmVhY2gobixvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KSx0aGlzfSx4LmVhY2goWyJhamF4U3RhcnQiLCJhamF4U3RvcCIsImFqYXhDb21wbGV0ZSIsImFqYXhFcnJvciIsImFqYXhTdWNjZXNzIiwiYWpheFNlbmQiXSxmdW5jdGlvbihlLHQpe3guZm5bdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub24odCxlKX19KSx4LmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6VXQsdHlwZToiR0VUIixpc0xvY2FsOkt0LnRlc3QoWHRbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZToiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IixhY2NlcHRzOnsiKiI6c24sdGV4dDoidGV4dC9wbGFpbiIsaHRtbDoidGV4dC9odG1sIix4bWw6ImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWwiLGpzb246ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6InJlc3BvbnNlWE1MIix0ZXh0OiJyZXNwb25zZVRleHQiLGpzb246InJlc3BvbnNlSlNPTiJ9LGNvbnZlcnRlcnM6eyIqIHRleHQiOlN0cmluZywidGV4dCBodG1sIjohMCwidGV4dCBqc29uIjp4LnBhcnNlSlNPTiwidGV4dCB4bWwiOngucGFyc2VYTUx9LGZsYXRPcHRpb25zOnt1cmw6ITAsY29udGV4dDohMH19LGFqYXhTZXR1cDpmdW5jdGlvbihlLHQpe3JldHVybiB0P2NuKGNuKGUseC5hamF4U2V0dGluZ3MpLHQpOmNuKHguYWpheFNldHRpbmdzLGUpfSxhamF4UHJlZmlsdGVyOnVuKHJuKSxhamF4VHJhbnNwb3J0OnVuKG9uKSxhamF4OmZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBlJiYodD1lLGU9dW5kZWZpbmVkKSx0PXR8fHt9O3ZhciBuLHIsaSxvLHMsYSx1LGwsYz14LmFqYXhTZXR1cCh7fSx0KSxwPWMuY29udGV4dHx8YyxmPWMuY29udGV4dCYmKHAubm9kZVR5cGV8fHAuanF1ZXJ5KT94KHApOnguZXZlbnQsaD14LkRlZmVycmVkKCksZD14LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxnPWMuc3RhdHVzQ29kZXx8e30sbT17fSx5PXt9LHY9MCxiPSJjYW5jZWxlZCIsVD17cmVhZHlTdGF0ZTowLGdldFJlc3BvbnNlSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKDI9PT12KXtpZighbyl7bz17fTt3aGlsZSh0PVF0LmV4ZWMoaSkpb1t0WzFdLnRvTG93ZXJDYXNlKCldPXRbMl19dD1vW2UudG9Mb3dlckNhc2UoKV19cmV0dXJuIG51bGw9PXQ/bnVsbDp0fSxnZXRBbGxSZXNwb25zZUhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gMj09PXY/aTpudWxsfSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50b0xvd2VyQ2FzZSgpO3JldHVybiB2fHwoZT15W25dPXlbbl18fGUsbVtlXT10KSx0aGlzfSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKGUpe3JldHVybiB2fHwoYy5taW1lVHlwZT1lKSx0aGlzfSxzdGF0dXNDb2RlOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKGUpaWYoMj52KWZvcih0IGluIGUpZ1t0XT1bZ1t0XSxlW3RdXTtlbHNlIFQuYWx3YXlzKGVbVC5zdGF0dXNdKTtyZXR1cm4gdGhpc30sYWJvcnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8YjtyZXR1cm4gbiYmbi5hYm9ydCh0KSxrKDAsdCksdGhpc319O2lmKGgucHJvbWlzZShUKS5jb21wbGV0ZT1kLmFkZCxULnN1Y2Nlc3M9VC5kb25lLFQuZXJyb3I9VC5mYWlsLGMudXJsPSgoZXx8Yy51cmx8fFV0KSsiIikucmVwbGFjZShHdCwiIikucmVwbGFjZShlbixYdFsxXSsiLy8iKSxjLnR5cGU9dC5tZXRob2R8fHQudHlwZXx8Yy5tZXRob2R8fGMudHlwZSxjLmRhdGFUeXBlcz14LnRyaW0oYy5kYXRhVHlwZXx8IioiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKHcpfHxbIiJdLG51bGw9PWMuY3Jvc3NEb21haW4mJihhPXRuLmV4ZWMoYy51cmwudG9Mb3dlckNhc2UoKSksYy5jcm9zc0RvbWFpbj0hKCFhfHxhWzFdPT09WHRbMV0mJmFbMl09PT1YdFsyXSYmKGFbM118fCgiaHR0cDoiPT09YVsxXT8iODAiOiI0NDMiKSk9PT0oWHRbM118fCgiaHR0cDoiPT09WHRbMV0/IjgwIjoiNDQzIikpKSksYy5kYXRhJiZjLnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIGMuZGF0YSYmKGMuZGF0YT14LnBhcmFtKGMuZGF0YSxjLnRyYWRpdGlvbmFsKSksbG4ocm4sYyx0LFQpLDI9PT12KXJldHVybiBUO3U9Yy5nbG9iYWwsdSYmMD09PXguYWN0aXZlKysmJnguZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0IiksYy50eXBlPWMudHlwZS50b1VwcGVyQ2FzZSgpLGMuaGFzQ29udGVudD0hWnQudGVzdChjLnR5cGUpLHI9Yy51cmwsYy5oYXNDb250ZW50fHwoYy5kYXRhJiYocj1jLnVybCs9KFZ0LnRlc3Qocik/IiYiOiI/IikrYy5kYXRhLGRlbGV0ZSBjLmRhdGEpLGMuY2FjaGU9PT0hMSYmKGMudXJsPUp0LnRlc3Qocik/ci5yZXBsYWNlKEp0LCIkMV89IitZdCsrKTpyKyhWdC50ZXN0KHIpPyImIjoiPyIpKyJfPSIrWXQrKykpLGMuaWZNb2RpZmllZCYmKHgubGFzdE1vZGlmaWVkW3JdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIix4Lmxhc3RNb2RpZmllZFtyXSkseC5ldGFnW3JdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLHguZXRhZ1tyXSkpLChjLmRhdGEmJmMuaGFzQ29udGVudCYmYy5jb250ZW50VHlwZSE9PSExfHx0LmNvbnRlbnRUeXBlKSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLGMuY29udGVudFR5cGUpLFQuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IixjLmRhdGFUeXBlc1swXSYmYy5hY2NlcHRzW2MuZGF0YVR5cGVzWzBdXT9jLmFjY2VwdHNbYy5kYXRhVHlwZXNbMF1dKygiKiIhPT1jLmRhdGFUeXBlc1swXT8iLCAiK3NuKyI7IHE9MC4wMSI6IiIpOmMuYWNjZXB0c1siKiJdKTtmb3IobCBpbiBjLmhlYWRlcnMpVC5zZXRSZXF1ZXN0SGVhZGVyKGwsYy5oZWFkZXJzW2xdKTtpZihjLmJlZm9yZVNlbmQmJihjLmJlZm9yZVNlbmQuY2FsbChwLFQsYyk9PT0hMXx8Mj09PXYpKXJldHVybiBULmFib3J0KCk7Yj0iYWJvcnQiO2ZvcihsIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KVRbbF0oY1tsXSk7aWYobj1sbihvbixjLHQsVCkpe1QucmVhZHlTdGF0ZT0xLHUmJmYudHJpZ2dlcigiYWpheFNlbmQiLFtULGNdKSxjLmFzeW5jJiZjLnRpbWVvdXQ+MCYmKHM9c2V0VGltZW91dChmdW5jdGlvbigpe1QuYWJvcnQoInRpbWVvdXQiKX0sYy50aW1lb3V0KSk7dHJ5e3Y9MSxuLnNlbmQobSxrKX1jYXRjaChDKXtpZighKDI+dikpdGhyb3cgQztrKC0xLEMpfX1lbHNlIGsoLTEsIk5vIFRyYW5zcG9ydCIpO2Z1bmN0aW9uIGsoZSx0LG8sYSl7dmFyIGwsbSx5LGIsdyxDPXQ7MiE9PXYmJih2PTIscyYmY2xlYXJUaW1lb3V0KHMpLG49dW5kZWZpbmVkLGk9YXx8IiIsVC5yZWFkeVN0YXRlPWU+MD80OjAsbD1lPj0yMDAmJjMwMD5lfHwzMDQ9PT1lLG8mJihiPXBuKGMsVCxvKSksYj1mbihjLGIsVCxsKSxsPyhjLmlmTW9kaWZpZWQmJih3PVQuZ2V0UmVzcG9uc2VIZWFkZXIoIkxhc3QtTW9kaWZpZWQiKSx3JiYoeC5sYXN0TW9kaWZpZWRbcl09dyksdz1ULmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIiksdyYmKHguZXRhZ1tyXT13KSksMjA0PT09ZXx8IkhFQUQiPT09Yy50eXBlP0M9Im5vY29udGVudCI6MzA0PT09ZT9DPSJub3Rtb2RpZmllZCI6KEM9Yi5zdGF0ZSxtPWIuZGF0YSx5PWIuZXJyb3IsbD0heSkpOih5PUMsKGV8fCFDKSYmKEM9ImVycm9yIiwwPmUmJihlPTApKSksVC5zdGF0dXM9ZSxULnN0YXR1c1RleHQ9KHR8fEMpKyIiLGw/aC5yZXNvbHZlV2l0aChwLFttLEMsVF0pOmgucmVqZWN0V2l0aChwLFtULEMseV0pLFQuc3RhdHVzQ29kZShnKSxnPXVuZGVmaW5lZCx1JiZmLnRyaWdnZXIobD8iYWpheFN1Y2Nlc3MiOiJhamF4RXJyb3IiLFtULGMsbD9tOnldKSxkLmZpcmVXaXRoKHAsW1QsQ10pLHUmJihmLnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW1QsY10pLC0teC5hY3RpdmV8fHguZXZlbnQudHJpZ2dlcigiYWpheFN0b3AiKSkpfXJldHVybiBUfSxnZXRKU09OOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4geC5nZXQoZSx0LG4sImpzb24iKX0sZ2V0U2NyaXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHguZ2V0KGUsdW5kZWZpbmVkLHQsInNjcmlwdCIpfX0pLHguZWFjaChbImdldCIsInBvc3QiXSxmdW5jdGlvbihlLHQpe3hbdF09ZnVuY3Rpb24oZSxuLHIsaSl7cmV0dXJuIHguaXNGdW5jdGlvbihuKSYmKGk9aXx8cixyPW4sbj11bmRlZmluZWQpLHguYWpheCh7dXJsOmUsdHlwZTp0LGRhdGFUeXBlOmksZGF0YTpuLHN1Y2Nlc3M6cn0pfX0pO2Z1bmN0aW9uIHBuKGUsdCxuKXt2YXIgcixpLG8scyxhPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSxyPT09dW5kZWZpbmVkJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYocilmb3IoaSBpbiBhKWlmKGFbaV0mJmFbaV0udGVzdChyKSl7dS51bnNoaWZ0KGkpO2JyZWFrfWlmKHVbMF1pbiBuKW89dVswXTtlbHNle2ZvcihpIGluIG4pe2lmKCF1WzBdfHxlLmNvbnZlcnRlcnNbaSsiICIrdVswXV0pe289aTticmVha31zfHwocz1pKX1vPW98fHN9cmV0dXJuIG8/KG8hPT11WzBdJiZ1LnVuc2hpZnQobyksbltvXSk6dW5kZWZpbmVkfWZ1bmN0aW9uIGZuKGUsdCxuLHIpe3ZhciBpLG8scyxhLHUsbD17fSxjPWUuZGF0YVR5cGVzLnNsaWNlKCk7aWYoY1sxXSlmb3IocyBpbiBlLmNvbnZlcnRlcnMpbFtzLnRvTG93ZXJDYXNlKCldPWUuY29udmVydGVyc1tzXTtvPWMuc2hpZnQoKTt3aGlsZShvKWlmKGUucmVzcG9uc2VGaWVsZHNbb10mJihuW2UucmVzcG9uc2VGaWVsZHNbb11dPXQpLCF1JiZyJiZlLmRhdGFGaWx0ZXImJih0PWUuZGF0YUZpbHRlcih0LGUuZGF0YVR5cGUpKSx1PW8sbz1jLnNoaWZ0KCkpaWYoIioiPT09bylvPXU7ZWxzZSBpZigiKiIhPT11JiZ1IT09byl7aWYocz1sW3UrIiAiK29dfHxsWyIqICIrb10sIXMpZm9yKGkgaW4gbClpZihhPWkuc3BsaXQoIiAiKSxhWzFdPT09byYmKHM9bFt1KyIgIithWzBdXXx8bFsiKiAiK2FbMF1dKSl7cz09PSEwP3M9bFtpXTpsW2ldIT09ITAmJihvPWFbMF0sYy51bnNoaWZ0KGFbMV0pKTticmVha31pZihzIT09ITApaWYocyYmZVsidGhyb3dzIl0pdD1zKHQpO2Vsc2UgdHJ5e3Q9cyh0KX1jYXRjaChwKXtyZXR1cm57c3RhdGU6InBhcnNlcmVycm9yIixlcnJvcjpzP3A6Ik5vIGNvbnZlcnNpb24gZnJvbSAiK3UrIiB0byAiK299fX1yZXR1cm57c3RhdGU6InN1Y2Nlc3MiLGRhdGE6dH19eC5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbihlKXtyZXR1cm4geC5nbG9iYWxFdmFsKGUpLGV9fX0pLHguYWpheFByZWZpbHRlcigic2NyaXB0IixmdW5jdGlvbihlKXtlLmNhY2hlPT09dW5kZWZpbmVkJiYoZS5jYWNoZT0hMSksZS5jcm9zc0RvbWFpbiYmKGUudHlwZT0iR0VUIil9KSx4LmFqYXhUcmFuc3BvcnQoInNjcmlwdCIsZnVuY3Rpb24oZSl7aWYoZS5jcm9zc0RvbWFpbil7dmFyIHQsbjtyZXR1cm57c2VuZDpmdW5jdGlvbihyLGkpe3Q9eCgiPHNjcmlwdD4iKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmUuc2NyaXB0Q2hhcnNldCxzcmM6ZS51cmx9KS5vbigibG9hZCBlcnJvciIsbj1mdW5jdGlvbihlKXt0LnJlbW92ZSgpLG49bnVsbCxlJiZpKCJlcnJvciI9PT1lLnR5cGU/NDA0OjIwMCxlLnR5cGUpfSksby5oZWFkLmFwcGVuZENoaWxkKHRbMF0pfSxhYm9ydDpmdW5jdGlvbigpe24mJm4oKX19fX0pO3ZhciBobj1bXSxkbj0vKD0pXD8oPz0mfCQpfFw/XD8vO3guYWpheFNldHVwKHtqc29ucDoiY2FsbGJhY2siLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgZT1obi5wb3AoKXx8eC5leHBhbmRvKyJfIitZdCsrO3JldHVybiB0aGlzW2VdPSEwLGV9fSkseC5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbih0LG4scil7dmFyIGksbyxzLGE9dC5qc29ucCE9PSExJiYoZG4udGVzdCh0LnVybCk/InVybCI6InN0cmluZyI9PXR5cGVvZiB0LmRhdGEmJiEodC5jb250ZW50VHlwZXx8IiIpLmluZGV4T2YoImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpJiZkbi50ZXN0KHQuZGF0YSkmJiJkYXRhIik7cmV0dXJuIGF8fCJqc29ucCI9PT10LmRhdGFUeXBlc1swXT8oaT10Lmpzb25wQ2FsbGJhY2s9eC5pc0Z1bmN0aW9uKHQuanNvbnBDYWxsYmFjayk/dC5qc29ucENhbGxiYWNrKCk6dC5qc29ucENhbGxiYWNrLGE/dFthXT10W2FdLnJlcGxhY2UoZG4sIiQxIitpKTp0Lmpzb25wIT09ITEmJih0LnVybCs9KFZ0LnRlc3QodC51cmwpPyImIjoiPyIpK3QuanNvbnArIj0iK2kpLHQuY29udmVydGVyc1sic2NyaXB0IGpzb24iXT1mdW5jdGlvbigpe3JldHVybiBzfHx4LmVycm9yKGkrIiB3YXMgbm90IGNhbGxlZCIpLHNbMF19LHQuZGF0YVR5cGVzWzBdPSJqc29uIixvPWVbaV0sZVtpXT1mdW5jdGlvbigpe3M9YXJndW1lbnRzfSxyLmFsd2F5cyhmdW5jdGlvbigpe2VbaV09byx0W2ldJiYodC5qc29ucENhbGxiYWNrPW4uanNvbnBDYWxsYmFjayxobi5wdXNoKGkpKSxzJiZ4LmlzRnVuY3Rpb24obykmJm8oc1swXSkscz1vPXVuZGVmaW5lZH0pLCJzY3JpcHQiKTp1bmRlZmluZWR9KSx4LmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChlKXt9fTt2YXIgZ249eC5hamF4U2V0dGluZ3MueGhyKCksbW49ezA6MjAwLDEyMjM6MjA0fSx5bj0wLHZuPXt9O2UuQWN0aXZlWE9iamVjdCYmeChlKS5vbigidW5sb2FkIixmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiB2bil2bltlXSgpO3ZuPXVuZGVmaW5lZH0pLHguc3VwcG9ydC5jb3JzPSEhZ24mJiJ3aXRoQ3JlZGVudGlhbHMiaW4gZ24seC5zdXBwb3J0LmFqYXg9Z249ISFnbix4LmFqYXhUcmFuc3BvcnQoZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHguc3VwcG9ydC5jb3JzfHxnbiYmIWUuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24obixyKXt2YXIgaSxvLHM9ZS54aHIoKTtpZihzLm9wZW4oZS50eXBlLGUudXJsLGUuYXN5bmMsZS51c2VybmFtZSxlLnBhc3N3b3JkKSxlLnhockZpZWxkcylmb3IoaSBpbiBlLnhockZpZWxkcylzW2ldPWUueGhyRmllbGRzW2ldO2UubWltZVR5cGUmJnMub3ZlcnJpZGVNaW1lVHlwZSYmcy5vdmVycmlkZU1pbWVUeXBlKGUubWltZVR5cGUpLGUuY3Jvc3NEb21haW58fG5bIlgtUmVxdWVzdGVkLVdpdGgiXXx8KG5bIlgtUmVxdWVzdGVkLVdpdGgiXT0iWE1MSHR0cFJlcXVlc3QiKTtmb3IoaSBpbiBuKXMuc2V0UmVxdWVzdEhlYWRlcihpLG5baV0pO3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dCYmKGRlbGV0ZSB2bltvXSx0PXMub25sb2FkPXMub25lcnJvcj1udWxsLCJhYm9ydCI9PT1lP3MuYWJvcnQoKToiZXJyb3IiPT09ZT9yKHMuc3RhdHVzfHw0MDQscy5zdGF0dXNUZXh0KTpyKG1uW3Muc3RhdHVzXXx8cy5zdGF0dXMscy5zdGF0dXNUZXh0LCJzdHJpbmciPT10eXBlb2Ygcy5yZXNwb25zZVRleHQ/e3RleHQ6cy5yZXNwb25zZVRleHR9OnVuZGVmaW5lZCxzLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxzLm9ubG9hZD10KCkscy5vbmVycm9yPXQoImVycm9yIiksdD12bltvPXluKytdPXQoImFib3J0Iikscy5zZW5kKGUuaGFzQ29udGVudCYmZS5kYXRhfHxudWxsKX0sYWJvcnQ6ZnVuY3Rpb24oKXt0JiZ0KCl9fTp1bmRlZmluZWR9KTt2YXIgeG4sYm4sd249L14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFRuPVJlZ0V4cCgiXig/OihbKy1dKT18KSgiK2IrIikoW2EteiVdKikkIiwiaSIpLENuPS9xdWV1ZUhvb2tzJC8sa249W0FuXSxObj17IioiOltmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuY3JlYXRlVHdlZW4oZSx0KSxyPW4uY3VyKCksaT1Ubi5leGVjKHQpLG89aSYmaVszXXx8KHguY3NzTnVtYmVyW2VdPyIiOiJweCIpLHM9KHguY3NzTnVtYmVyW2VdfHwicHgiIT09byYmK3IpJiZUbi5leGVjKHguY3NzKG4uZWxlbSxlKSksYT0xLHU9MjA7aWYocyYmc1szXSE9PW8pe289b3x8c1szXSxpPWl8fFtdLHM9K3J8fDE7ZG8gYT1hfHwiLjUiLHMvPWEseC5zdHlsZShuLmVsZW0sZSxzK28pO3doaWxlKGEhPT0oYT1uLmN1cigpL3IpJiYxIT09YSYmLS11KX1yZXR1cm4gaSYmKHM9bi5zdGFydD0rc3x8K3J8fDAsbi51bml0PW8sbi5lbmQ9aVsxXT9zKyhpWzFdKzEpKmlbMl06K2lbMl0pLG59XX07ZnVuY3Rpb24gRW4oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3huPXVuZGVmaW5lZH0pLHhuPXgubm93KCl9ZnVuY3Rpb24gU24oZSx0LG4pe3ZhciByLGk9KE5uW3RdfHxbXSkuY29uY2F0KE5uWyIqIl0pLG89MCxzPWkubGVuZ3RoO2Zvcig7cz5vO28rKylpZihyPWlbb10uY2FsbChuLHQsZSkpcmV0dXJuIHJ9ZnVuY3Rpb24gam4oZSx0LG4pe3ZhciByLGksbz0wLHM9a24ubGVuZ3RoLGE9eC5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9uKCl7aWYoaSlyZXR1cm4hMTt2YXIgdD14bnx8RW4oKSxuPU1hdGgubWF4KDAsbC5zdGFydFRpbWUrbC5kdXJhdGlvbi10KSxyPW4vbC5kdXJhdGlvbnx8MCxvPTEtcixzPTAsdT1sLnR3ZWVucy5sZW5ndGg7Zm9yKDt1PnM7cysrKWwudHdlZW5zW3NdLnJ1bihvKTtyZXR1cm4gYS5ub3RpZnlXaXRoKGUsW2wsbyxuXSksMT5vJiZ1P246KGEucmVzb2x2ZVdpdGgoZSxbbF0pLCExKX0sbD1hLnByb21pc2Uoe2VsZW06ZSxwcm9wczp4LmV4dGVuZCh7fSx0KSxvcHRzOnguZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9fSxuKSxvcmlnaW5hbFByb3BlcnRpZXM6dCxvcmlnaW5hbE9wdGlvbnM6bixzdGFydFRpbWU6eG58fEVuKCksZHVyYXRpb246bi5kdXJhdGlvbix0d2VlbnM6W10sY3JlYXRlVHdlZW46ZnVuY3Rpb24odCxuKXt2YXIgcj14LlR3ZWVuKGUsbC5vcHRzLHQsbixsLm9wdHMuc3BlY2lhbEVhc2luZ1t0XXx8bC5vcHRzLmVhc2luZyk7cmV0dXJuIGwudHdlZW5zLnB1c2gocikscn0sc3RvcDpmdW5jdGlvbih0KXt2YXIgbj0wLHI9dD9sLnR3ZWVucy5sZW5ndGg6MDtpZihpKXJldHVybiB0aGlzO2ZvcihpPSEwO3I+bjtuKyspbC50d2VlbnNbbl0ucnVuKDEpO3JldHVybiB0P2EucmVzb2x2ZVdpdGgoZSxbbCx0XSk6YS5yZWplY3RXaXRoKGUsW2wsdF0pLHRoaXN9fSksYz1sLnByb3BzO2ZvcihEbihjLGwub3B0cy5zcGVjaWFsRWFzaW5nKTtzPm87bysrKWlmKHI9a25bb10uY2FsbChsLGUsYyxsLm9wdHMpKXJldHVybiByO3JldHVybiB4Lm1hcChjLFNuLGwpLHguaXNGdW5jdGlvbihsLm9wdHMuc3RhcnQpJiZsLm9wdHMuc3RhcnQuY2FsbChlLGwpLHguZngudGltZXIoeC5leHRlbmQodSx7ZWxlbTplLGFuaW06bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbC5wcm9ncmVzcyhsLm9wdHMucHJvZ3Jlc3MpLmRvbmUobC5vcHRzLmRvbmUsbC5vcHRzLmNvbXBsZXRlKS5mYWlsKGwub3B0cy5mYWlsKS5hbHdheXMobC5vcHRzLmFsd2F5cyl9ZnVuY3Rpb24gRG4oZSx0KXt2YXIgbixyLGksbyxzO2ZvcihuIGluIGUpaWYocj14LmNhbWVsQ2FzZShuKSxpPXRbcl0sbz1lW25dLHguaXNBcnJheShvKSYmKGk9b1sxXSxvPWVbbl09b1swXSksbiE9PXImJihlW3JdPW8sZGVsZXRlIGVbbl0pLHM9eC5jc3NIb29rc1tyXSxzJiYiZXhwYW5kImluIHMpe289cy5leHBhbmQobyksZGVsZXRlIGVbcl07Zm9yKG4gaW4gbyluIGluIGV8fChlW25dPW9bbl0sdFtuXT1pKX1lbHNlIHRbcl09aX14LkFuaW1hdGlvbj14LmV4dGVuZChqbix7dHdlZW5lcjpmdW5jdGlvbihlLHQpe3guaXNGdW5jdGlvbihlKT8odD1lLGU9WyIqIl0pOmU9ZS5zcGxpdCgiICIpO3ZhciBuLHI9MCxpPWUubGVuZ3RoO2Zvcig7aT5yO3IrKyluPWVbcl0sTm5bbl09Tm5bbl18fFtdLE5uW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcjpmdW5jdGlvbihlLHQpe3Q/a24udW5zaGlmdChlKTprbi5wdXNoKGUpfX0pO2Z1bmN0aW9uIEFuKGUsdCxuKXt2YXIgcixpLG8scyxhLHUsbD10aGlzLGM9e30scD1lLnN0eWxlLGY9ZS5ub2RlVHlwZSYmTHQoZSksaD1xLmdldChlLCJmeHNob3ciKTtuLnF1ZXVlfHwoYT14Ll9xdWV1ZUhvb2tzKGUsImZ4IiksbnVsbD09YS51bnF1ZXVlZCYmKGEudW5xdWV1ZWQ9MCx1PWEuZW1wdHkuZmlyZSxhLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXthLnVucXVldWVkfHx1KCl9KSxhLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2EudW5xdWV1ZWQtLSx4LnF1ZXVlKGUsImZ4IikubGVuZ3RofHxhLmVtcHR5LmZpcmUoKX0pfSkpLDE9PT1lLm5vZGVUeXBlJiYoImhlaWdodCJpbiB0fHwid2lkdGgiaW4gdCkmJihuLm92ZXJmbG93PVtwLm92ZXJmbG93LHAub3ZlcmZsb3dYLHAub3ZlcmZsb3dZXSwiaW5saW5lIj09PXguY3NzKGUsImRpc3BsYXkiKSYmIm5vbmUiPT09eC5jc3MoZSwiZmxvYXQiKSYmKHAuZGlzcGxheT0iaW5saW5lLWJsb2NrIikpLG4ub3ZlcmZsb3cmJihwLm92ZXJmbG93PSJoaWRkZW4iLGwuYWx3YXlzKGZ1bmN0aW9uKCl7cC5vdmVyZmxvdz1uLm92ZXJmbG93WzBdLHAub3ZlcmZsb3dYPW4ub3ZlcmZsb3dbMV0scC5vdmVyZmxvd1k9bi5vdmVyZmxvd1syXX0pKTtmb3IociBpbiB0KWlmKGk9dFtyXSx3bi5leGVjKGkpKXtpZihkZWxldGUgdFtyXSxvPW98fCJ0b2dnbGUiPT09aSxpPT09KGY/ImhpZGUiOiJzaG93Iikpe2lmKCJzaG93IiE9PWl8fCFofHxoW3JdPT09dW5kZWZpbmVkKWNvbnRpbnVlO2Y9ITB9Y1tyXT1oJiZoW3JdfHx4LnN0eWxlKGUscil9aWYoIXguaXNFbXB0eU9iamVjdChjKSl7aD8iaGlkZGVuImluIGgmJihmPWguaGlkZGVuKTpoPXEuYWNjZXNzKGUsImZ4c2hvdyIse30pLG8mJihoLmhpZGRlbj0hZiksZj94KGUpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXt4KGUpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciB0O3EucmVtb3ZlKGUsImZ4c2hvdyIpO2Zvcih0IGluIGMpeC5zdHlsZShlLHQsY1t0XSl9KTtmb3IociBpbiBjKXM9U24oZj9oW3JdOjAscixsKSxyIGluIGh8fChoW3JdPXMuc3RhcnQsZiYmKHMuZW5kPXMuc3RhcnQscy5zdGFydD0id2lkdGgiPT09cnx8ImhlaWdodCI9PT1yPzE6MCkpfX1mdW5jdGlvbiBMbihlLHQsbixyLGkpe3JldHVybiBuZXcgTG4ucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX14LlR3ZWVuPUxuLExuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6TG4saW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8InN3aW5nIix0aGlzLm9wdGlvbnM9dCx0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9cix0aGlzLnVuaXQ9b3x8KHguY3NzTnVtYmVyW25dPyIiOiJweCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgZT1Mbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gZSYmZS5nZXQ/ZS5nZXQodGhpcyk6TG4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49TG4ucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPXQ9dGhpcy5vcHRpb25zLmR1cmF0aW9uP3guZWFzaW5nW3RoaXMuZWFzaW5nXShlLHRoaXMub3B0aW9ucy5kdXJhdGlvbiplLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6TG4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sTG4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlPUxuLnByb3RvdHlwZSxMbi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIG51bGw9PWUuZWxlbVtlLnByb3BdfHxlLmVsZW0uc3R5bGUmJm51bGwhPWUuZWxlbS5zdHlsZVtlLnByb3BdPyh0PXguY3NzKGUuZWxlbSxlLnByb3AsIiIpLHQmJiJhdXRvIiE9PXQ/dDowKTplLmVsZW1bZS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGUpe3guZnguc3RlcFtlLnByb3BdP3guZnguc3RlcFtlLnByb3BdKGUpOmUuZWxlbS5zdHlsZSYmKG51bGwhPWUuZWxlbS5zdHlsZVt4LmNzc1Byb3BzW2UucHJvcF1dfHx4LmNzc0hvb2tzW2UucHJvcF0pP3guc3R5bGUoZS5lbGVtLGUucHJvcCxlLm5vdytlLnVuaXQpOmUuZWxlbVtlLnByb3BdPWUubm93fX19LExuLnByb3BIb29rcy5zY3JvbGxUb3A9TG4ucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihlKXtlLmVsZW0ubm9kZVR5cGUmJmUuZWxlbS5wYXJlbnROb2RlJiYoZS5lbGVtW2UucHJvcF09ZS5ub3cpfX0seC5lYWNoKFsidG9nZ2xlIiwic2hvdyIsImhpZGUiXSxmdW5jdGlvbihlLHQpe3ZhciBuPXguZm5bdF07eC5mblt0XT1mdW5jdGlvbihlLHIsaSl7cmV0dXJuIG51bGw9PWV8fCJib29sZWFuIj09dHlwZW9mIGU/bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKHFuKHQsITApLGUscixpKX19KSx4LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLmZpbHRlcihMdCkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0fSxlLG4scil9LGFuaW1hdGU6ZnVuY3Rpb24oZSx0LG4scil7dmFyIGk9eC5pc0VtcHR5T2JqZWN0KGUpLG89eC5zcGVlZCh0LG4scikscz1mdW5jdGlvbigpe3ZhciB0PWpuKHRoaXMseC5leHRlbmQoe30sZSksbyk7KGl8fHEuZ2V0KHRoaXMsImZpbmlzaCIpKSYmdC5zdG9wKCEwKX07cmV0dXJuIHMuZmluaXNoPXMsaXx8by5xdWV1ZT09PSExP3RoaXMuZWFjaChzKTp0aGlzLnF1ZXVlKG8ucXVldWUscyl9LHN0b3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RvcDtkZWxldGUgZS5zdG9wLHQobil9O3JldHVybiJzdHJpbmciIT10eXBlb2YgZSYmKG49dCx0PWUsZT11bmRlZmluZWQpLHQmJmUhPT0hMSYmdGhpcy5xdWV1ZShlfHwiZngiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdD0hMCxpPW51bGwhPWUmJmUrInF1ZXVlSG9va3MiLG89eC50aW1lcnMscz1xLmdldCh0aGlzKTtpZihpKXNbaV0mJnNbaV0uc3RvcCYmcihzW2ldKTtlbHNlIGZvcihpIGluIHMpc1tpXSYmc1tpXS5zdG9wJiZDbi50ZXN0KGkpJiZyKHNbaV0pO2ZvcihpPW8ubGVuZ3RoO2ktLTspb1tpXS5lbGVtIT09dGhpc3x8bnVsbCE9ZSYmb1tpXS5xdWV1ZSE9PWV8fChvW2ldLmFuaW0uc3RvcChuKSx0PSExLG8uc3BsaWNlKGksMSkpOyh0fHwhbikmJnguZGVxdWV1ZSh0aGlzLGUpfSl9LGZpbmlzaDpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PSExJiYoZT1lfHwiZngiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgdCxuPXEuZ2V0KHRoaXMpLHI9bltlKyJxdWV1ZSJdLGk9bltlKyJxdWV1ZUhvb2tzIl0sbz14LnRpbWVycyxzPXI/ci5sZW5ndGg6MDtmb3Iobi5maW5pc2g9ITAseC5xdWV1ZSh0aGlzLGUsW10pLGkmJmkuc3RvcCYmaS5zdG9wLmNhbGwodGhpcywhMCksdD1vLmxlbmd0aDt0LS07KW9bdF0uZWxlbT09PXRoaXMmJm9bdF0ucXVldWU9PT1lJiYob1t0XS5hbmltLnN0b3AoITApLG8uc3BsaWNlKHQsMSkpO2Zvcih0PTA7cz50O3QrKylyW3RdJiZyW3RdLmZpbmlzaCYmclt0XS5maW5pc2guY2FsbCh0aGlzKTtkZWxldGUgbi5maW5pc2h9KX19KTtmdW5jdGlvbiBxbihlLHQpe3ZhciBuLHI9e2hlaWdodDplfSxpPTA7Zm9yKHQ9dD8xOjA7ND5pO2krPTItdCluPWp0W2ldLHJbIm1hcmdpbiIrbl09clsicGFkZGluZyIrbl09ZTtyZXR1cm4gdCYmKHIub3BhY2l0eT1yLndpZHRoPWUpLHJ9eC5lYWNoKHtzbGlkZURvd246cW4oInNob3ciKSxzbGlkZVVwOnFuKCJoaWRlIiksc2xpZGVUb2dnbGU6cW4oInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSx0KXt4LmZuW2VdPWZ1bmN0aW9uKGUsbixyKXtyZXR1cm4gdGhpcy5hbmltYXRlKHQsZSxuLHIpfX0pLHguc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT94LmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fHguaXNGdW5jdGlvbihlKSYmZSxkdXJhdGlvbjplLGVhc2luZzpuJiZ0fHx0JiYheC5pc0Z1bmN0aW9uKHQpJiZ0fTtyZXR1cm4gci5kdXJhdGlvbj14LmZ4Lm9mZj8wOiJudW1iZXIiPT10eXBlb2Ygci5kdXJhdGlvbj9yLmR1cmF0aW9uOnIuZHVyYXRpb24gaW4geC5meC5zcGVlZHM/eC5meC5zcGVlZHNbci5kdXJhdGlvbl06eC5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PXIucXVldWV8fHIucXVldWU9PT0hMCkmJihyLnF1ZXVlPSJmeCIpLHIub2xkPXIuY29tcGxldGUsci5jb21wbGV0ZT1mdW5jdGlvbigpe3guaXNGdW5jdGlvbihyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmeC5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LHguZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn19LHgudGltZXJzPVtdLHguZng9TG4ucHJvdG90eXBlLmluaXQseC5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGUsdD14LnRpbWVycyxuPTA7Zm9yKHhuPXgubm93KCk7dC5sZW5ndGg+bjtuKyspZT10W25dLGUoKXx8dFtuXSE9PWV8fHQuc3BsaWNlKG4tLSwxKTt0Lmxlbmd0aHx8eC5meC5zdG9wKCkseG49dW5kZWZpbmVkfSx4LmZ4LnRpbWVyPWZ1bmN0aW9uKGUpe2UoKSYmeC50aW1lcnMucHVzaChlKSYmeC5meC5zdGFydCgpfSx4LmZ4LmludGVydmFsPTEzLHguZnguc3RhcnQ9ZnVuY3Rpb24oKXtibnx8KGJuPXNldEludGVydmFsKHguZngudGljayx4LmZ4LmludGVydmFsKSl9LHguZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoYm4pLGJuPW51bGx9LHguZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LHguZnguc3RlcD17fSx4LmV4cHImJnguZXhwci5maWx0ZXJzJiYoeC5leHByLmZpbHRlcnMuYW5pbWF0ZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHguZ3JlcCh4LnRpbWVycyxmdW5jdGlvbih0KXtyZXR1cm4gZT09PXQuZWxlbX0pLmxlbmd0aH0pLHguZm4ub2Zmc2V0PWZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGU9PT11bmRlZmluZWQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24odCl7eC5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsZSx0KX0pO3ZhciB0LG4saT10aGlzWzBdLG89e3RvcDowLGxlZnQ6MH0scz1pJiZpLm93bmVyRG9jdW1lbnQ7aWYocylyZXR1cm4gdD1zLmRvY3VtZW50RWxlbWVudCx4LmNvbnRhaW5zKHQsaSk/KHR5cGVvZiBpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCE9PXImJihvPWkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkpLG49SG4ocykse3RvcDpvLnRvcCtuLnBhZ2VZT2Zmc2V0LXQuY2xpZW50VG9wLGxlZnQ6by5sZWZ0K24ucGFnZVhPZmZzZXQtdC5jbGllbnRMZWZ0fSk6b30seC5vZmZzZXQ9e3NldE9mZnNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLHMsYSx1LGwsYz14LmNzcyhlLCJwb3NpdGlvbiIpLHA9eChlKSxmPXt9OyJzdGF0aWMiPT09YyYmKGUuc3R5bGUucG9zaXRpb249InJlbGF0aXZlIiksYT1wLm9mZnNldCgpLG89eC5jc3MoZSwidG9wIiksdT14LmNzcyhlLCJsZWZ0IiksbD0oImFic29sdXRlIj09PWN8fCJmaXhlZCI9PT1jKSYmKG8rdSkuaW5kZXhPZigiYXV0byIpPi0xLGw/KHI9cC5wb3NpdGlvbigpLHM9ci50b3AsaT1yLmxlZnQpOihzPXBhcnNlRmxvYXQobyl8fDAsaT1wYXJzZUZsb2F0KHUpfHwwKSx4LmlzRnVuY3Rpb24odCkmJih0PXQuY2FsbChlLG4sYSkpLG51bGwhPXQudG9wJiYoZi50b3A9dC50b3AtYS50b3ArcyksbnVsbCE9dC5sZWZ0JiYoZi5sZWZ0PXQubGVmdC1hLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6cC5jc3MoZil9fSx4LmZuLmV4dGVuZCh7cG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG49dGhpc1swXSxyPXt0b3A6MCxsZWZ0OjB9O3JldHVybiJmaXhlZCI9PT14LmNzcyhuLCJwb3NpdGlvbiIpP3Q9bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooZT10aGlzLm9mZnNldFBhcmVudCgpLHQ9dGhpcy5vZmZzZXQoKSx4Lm5vZGVOYW1lKGVbMF0sImh0bWwiKXx8KHI9ZS5vZmZzZXQoKSksci50b3ArPXguY3NzKGVbMF0sImJvcmRlclRvcFdpZHRoIiwhMCksci5sZWZ0Kz14LmNzcyhlWzBdLCJib3JkZXJMZWZ0V2lkdGgiLCEwKSkse3RvcDp0LnRvcC1yLnRvcC14LmNzcyhuLCJtYXJnaW5Ub3AiLCEwKSxsZWZ0OnQubGVmdC1yLmxlZnQteC5jc3MobiwibWFyZ2luTGVmdCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXMub2Zmc2V0UGFyZW50fHxzO3doaWxlKGUmJiF4Lm5vZGVOYW1lKGUsImh0bWwiKSYmInN0YXRpYyI9PT14LmNzcyhlLCJwb3NpdGlvbiIpKWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fHN9KX19KSx4LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24odCxuKXt2YXIgcj0icGFnZVlPZmZzZXQiPT09bjt4LmZuW3RdPWZ1bmN0aW9uKGkpe3JldHVybiB4LmFjY2Vzcyh0aGlzLGZ1bmN0aW9uKHQsaSxvKXt2YXIgcz1Ibih0KTtyZXR1cm4gbz09PXVuZGVmaW5lZD9zP3Nbbl06dFtpXToocz9zLnNjcm9sbFRvKHI/ZS5wYWdlWE9mZnNldDpvLHI/bzplLnBhZ2VZT2Zmc2V0KTp0W2ldPW8sdW5kZWZpbmVkKX0sdCxpLGFyZ3VtZW50cy5sZW5ndGgsbnVsbCl9fSk7ZnVuY3Rpb24gSG4oZSl7cmV0dXJuIHguaXNXaW5kb3coZSk/ZTo5PT09ZS5ub2RlVHlwZSYmZS5kZWZhdWx0Vmlld314LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihlLHQpe3guZWFjaCh7cGFkZGluZzoiaW5uZXIiK2UsY29udGVudDp0LCIiOiJvdXRlciIrZX0sZnVuY3Rpb24obixyKXt4LmZuW3JdPWZ1bmN0aW9uKHIsaSl7dmFyIG89YXJndW1lbnRzLmxlbmd0aCYmKG58fCJib29sZWFuIiE9dHlwZW9mIHIpLHM9bnx8KHI9PT0hMHx8aT09PSEwPyJtYXJnaW4iOiJib3JkZXIiKTtyZXR1cm4geC5hY2Nlc3ModGhpcyxmdW5jdGlvbih0LG4scil7dmFyIGk7cmV0dXJuIHguaXNXaW5kb3codCk/dC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrZV06OT09PXQubm9kZVR5cGU/KGk9dC5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgodC5ib2R5WyJzY3JvbGwiK2VdLGlbInNjcm9sbCIrZV0sdC5ib2R5WyJvZmZzZXQiK2VdLGlbIm9mZnNldCIrZV0saVsiY2xpZW50IitlXSkpOnI9PT11bmRlZmluZWQ/eC5jc3ModCxuLHMpOnguc3R5bGUodCxuLHIscyl9LHQsbz9yOnVuZGVmaW5lZCxvLG51bGwpfX0pfSkseC5mbi5zaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RofSx4LmZuLmFuZFNlbGY9eC5mbi5hZGRCYWNrLCJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9eDoiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoImpxdWVyeSIsW10sZnVuY3Rpb24oKXtyZXR1cm4geH0pLCJvYmplY3QiPT10eXBlb2YgZSYmIm9iamVjdCI9PXR5cGVvZiBlLmRvY3VtZW50JiYoZS5qUXVlcnk9ZS4kPXgpfSkod2luZG93KTsKICAgICAgICBsb2coJ1VzaW5nIGlubGluZSBqUXVlcnknKQogICAgfSBlbHNlIHsKICAgICAgICBsb2coJ1VzaW5nIEByZXF1aXJlIGpRdWVyeScpCiAgICB9CgogICAgLy8gR2VuZXJpYyBmdW5jdGlvbnMKCiAgICAvLyBBdm9pZHMgY29uZmxpY3RzIHdoZW4gdGhlIG1haW4gcGFnZSBpcyBhbHNvIHVzaW5nIGpRdWVyeSBvciBhbm90aGVyIGxpYnJhcnkgdXNpbmcgJyQnCiAgICAvLyB0aGlzLiQgPSB0aGlzLmpRdWVyeSA9IGpRdWVyeS5ub0NvbmZsaWN0KHRydWUpOwogICAgLy8gLS0+IEluc3RlYWQgSSB1c2UgQGdyYW50IEdNX2FkZFN0eWxlIHdoaWNoIHJlc3RvcmVzIHRoZSBzYW5kYm94IGFuZCB0aHVzIGF2b2lkIHVzIHRoaXMgdHJpY2sKICAgIAogICAgLy8gVGhpcyBqUXVlcnkgcGx1Z2luIHdpbGwgZ2F0aGVyIHRoZSBjb21tZW50cyB3aXRoaW4KICAgIC8vIHRoZSBjdXJyZW50IGpRdWVyeSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgYWxsIHRoZQogICAgLy8gY29tbWVudHMgaW4gYSBuZXcgalF1ZXJ5IGNvbGxlY3Rpb24uCiAgICAvLwogICAgLy8gTk9URTogQ29tbWVudHMgYXJlIHdyYXBwZWQgaW4gRElWIHRhZ3MuCgogICAgalF1ZXJ5LmZuLmNvbW1lbnRzID0gZnVuY3Rpb24gKGJsbkRlZXApIHsKICAgICAgICB2YXIgYmxuRGVlcCA9IChibG5EZWVwIHx8IGZhbHNlKTsKICAgICAgICB2YXIgakNvbW1lbnRzID0gJChbXSk7CgogICAgICAgIC8vIExvb3Agb3ZlciBlYWNoIG5vZGUgdG8gc2VhcmNoIGl0cyBjaGlsZHJlbiBmb3IKICAgICAgICAvLyBjb21tZW50IG5vZGVzIGFuZCBlbGVtZW50IG5vZGVzIChpZiBkZWVwIHNlYXJjaCkuCiAgICAgICAgdGhpcy5lYWNoKAogICAgICAgICAgICBmdW5jdGlvbiAoaW50SSwgb2JqTm9kZSkgewogICAgICAgICAgICAgICAgdmFyIG9iakNoaWxkTm9kZSA9IG9iak5vZGUuZmlyc3RDaGlsZDsKICAgICAgICAgICAgICAgIHZhciBzdHJQYXJlbnRJRCA9ICQodGhpcykuYXR0cigiaWQiKTsKCiAgICAgICAgICAgICAgICAvLyBLZWVwIGxvb3Bpbmcgb3ZlciB0aGUgdG9wLWxldmVsIGNoaWxkcmVuCiAgICAgICAgICAgICAgICAvLyB3aGlsZSB3ZSBoYXZlIGEgbm9kZSB0byBleGFtaW5lLgogICAgICAgICAgICAgICAgd2hpbGUgKG9iakNoaWxkTm9kZSkgewoKICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhpcyBub2RlIGlzIGEgY29tbWVudC4KICAgICAgICAgICAgICAgICAgICBpZiAob2JqQ2hpbGROb2RlLm5vZGVUeXBlID09PSA4KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIGNvbW1lbnQgbm9kZS4gQWRkIGl0IHRvCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBub2RlcyBjb2xsZWN0aW9uIHdyYXBwZWQgaW4gYQogICAgICAgICAgICAgICAgICAgICAgICAvLyBESVYgKGFzIHdlIG1heSBoYXZlIEhUTUwpLgogICAgICAgICAgICAgICAgICAgICAgICBqQ29tbWVudHMgPSBqQ29tbWVudHMuYWRkKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIjxkaXYgcmVsPSciICsgc3RyUGFyZW50SUQgKyAiJz4iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iakNoaWxkTm9kZS5ub2RlVmFsdWUgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgIjwvZGl2PiIKICAgICAgICAgICAgICAgICAgICAgICAgKTsKCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgYmxuRGVlcCAmJgogICAgICAgICAgICAgICAgICAgICAgICAob2JqQ2hpbGROb2RlLm5vZGVUeXBlID09PSAxKQogICAgICAgICAgICAgICAgICAgICkgewoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJhdmVyc2UgdGhpcyBub2RlIGRlZXBseS4KICAgICAgICAgICAgICAgICAgICAgICAgakNvbW1lbnRzID0gakNvbW1lbnRzLmFkZCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQob2JqQ2hpbGROb2RlKS5jb21tZW50cyh0cnVlKQogICAgICAgICAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlIG5leHQgc2libGluZy4KICAgICAgICAgICAgICAgICAgICBvYmpDaGlsZE5vZGUgPSBvYmpDaGlsZE5vZGUubmV4dFNpYmxpbmc7CgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICk7CgogICAgICAgIC8vIFJldHVybiB0aGUgalF1ZXJ5IGNvbW1lbnRzIGNvbGxlY3Rpb24uCiAgICAgICAgcmV0dXJuIChqQ29tbWVudHMpOwogICAgfQoKICAgIC8vIFRlc3RzIGlmIGEgc3RyaW5nIGlzIHBhcnQgb2YgYW5vdGhlciBvbmUuCiAgICBTdHJpbmcucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHRlc3RTdHJpbmcpIHsKICAgICAgICByZXR1cm4gdGhpcy5pbmRleE9mKHRlc3RTdHJpbmcpICE9IC0xCiAgICB9CgogICAgLy8gQWxsb3dzIHRvIHJlbW92ZSBhIHN1YnN0cmluZyBmcm9tIGEgc3RyaW5nIGV2ZW4gd2hlbiBwcmVzZW50IG11bHRpcGxlIHRpbWVzCiAgICBTdHJpbmcucHJvdG90eXBlLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICh0ZXN0U3RyaW5nKSB7CiAgICAgICAgdmFyIHJldFN0cmluZyA9IHRoaXM7CiAgICAgICAgd2hpbGUgKChjdXJySW5kZXggPSByZXRTdHJpbmcuaW5kZXhPZih0ZXN0U3RyaW5nKSkgIT0gLTEpIHsKICAgICAgICAgICAgcmV0U3RyaW5nID0gcmV0U3RyaW5nLnJlbW92ZU9uY2UodGVzdFN0cmluZyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXRTdHJpbmcKICAgIH0KCiAgICAvLyBBbGxvd3MgdG8gcmVtb3ZlIGEgc3Vic3RyaW5nIGZyb20gYSBzdHJpbmcgb25lIHRpbWUuCiAgICBTdHJpbmcucHJvdG90eXBlLnJlbW92ZU9uY2UgPSBmdW5jdGlvbiAodGVzdFN0cmluZykgewogICAgICAgIHZhciBjdXJySW5kZXggPSB0aGlzLmluZGV4T2YodGVzdFN0cmluZykKICAgICAgICBpZiAoY3VyckluZGV4ICE9IC0xKSByZXR1cm4gdGhpcy5zdWJzdHJpbmcoMCwgY3VyckluZGV4KSArIHRoaXMuc3Vic3RyaW5nKGN1cnJJbmRleCArIHRlc3RTdHJpbmcubGVuZ3RoKQogICAgICAgIHJldHVybiB0aGlzCiAgICB9CgogICAgLy8gR2VuZXJpYyBsb2cgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIGxvZyhzdHJpbmcpIHsKICAgICAgICBpZiAob19kZWJ1ZykgY29uc29sZS5sb2coc3RyaW5nKQogICAgfQoKICAgIC8vIENoZWNrIGlmIGEgSlFvYmplY3QgaXMgdmFsaWQKICAgIGZ1bmN0aW9uIGV4aXN0cyhKUW9iamVjdCkgewogICAgICAgIHJldHVybiAoSlFvYmplY3QubGVuZ3RoICE9IDApCiAgICB9CgogICAgLy8gQ2hlY2sgaWYgYW4gaW5wdXQgY2hlY2tib3ggaXMgY2hlY2tlZAogICAgZnVuY3Rpb24gaXNDaGVja2VkKEpRb2JqZWN0KSB7CiAgICAgICAgcmV0dXJuIEpRb2JqZWN0LnByb3AoImNoZWNrZWQiKQogICAgfQoKICAgIC8vIFVuY2hlY2sgYW4gaW5wdXQgY2hlY2tib3gKICAgIGZ1bmN0aW9uIHVuY2hlY2soSlFvYmplY3QpIHsKICAgICAgICBpZiAoIWV4aXN0cyhKUW9iamVjdCkpIHJldHVybiBmYWxzZQogICAgICAgIGlmIChpc0NoZWNrZWQoSlFvYmplY3QpKSBKUW9iamVjdC5jbGljaygpCiAgICAgICAgLy8gVGhlIG9iamVjdCBleGlzdHMsIHdlIGhhdmUgdW5jaGVja2VkIGl0IGlmIGl0IHdhcyBjaGVja2VkCiAgICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICAvLyBIaWRlIGFuIGVsZW1lbnQgKGRvZXNuJ3QgZGVsZXRlIGl0KQogICAgZnVuY3Rpb24gaGlkZShKUW9iamVjdCkgewogICAgICAgIGlmICghZXhpc3RzKEpRb2JqZWN0KSkgcmV0dXJuIGZhbHNlCiAgICAgICAgSlFvYmplY3QuYXR0cigic3R5bGUiLCAiZGlzcGxheSA6IG5vbmUgIWltcG9ydGFudCIpCiAgICAgICAgcmV0dXJuIHRydWUKICAgIH0KCiAgICAvLyBGb3JjZSBhbiBlbGVtZW50IHRvIHNob3cKICAgIGZ1bmN0aW9uIHNob3coSlFvYmplY3QpIHsKICAgICAgICBpZiAoIWV4aXN0cyhKUW9iamVjdCkpIHJldHVybiBmYWxzZQoKICAgICAgICAvLyBGSVhNRTogYXZvaWQgdG8gYmxpbmRseSBzZXQgdGhlIGRpc3BsYXkgdG8gYmxvY2sgKGNhbiBiZSBpbmxpbmUgdG9vKQogICAgICAgIEpRb2JqZWN0LmF0dHIoInN0eWxlIiwgImRpc3BsYXkgOiBibG9jayAhaW1wb3J0YW50IikKICAgICAgICByZXR1cm4gdHJ1ZQogICAgfQoKICAgIGZvciAodmFyIGkgaW4gYWR3YXJlUnVsZXMpIHsKICAgICAgICAvLyBDcmVhdGUgYSBSZWdFeHAgdG8gdGVzdCBpZiB3ZSBhcmUgb24gdGhpcyBkb21haW4KICAgICAgICB2YXIgdGVzdEhvc3RzID0gbmV3IFJlZ0V4cChhZHdhcmVSdWxlc1tpXS5ob3N0LmpvaW4oJ3wnKSwgJ2knKQogICAgICAgIC8vIElmIHdlIGFyZSBvbiBvbmUgb2YgdGhlIGRvbWFpbnMKICAgICAgICBpZiAodGVzdEhvc3RzLnRlc3QoZG9jdW1lbnQuZG9tYWluKSkgewogICAgICAgICAgICB2YXIgY3VyclJ1bGUgPSBhZHdhcmVSdWxlc1tpXQogICAgICAgICAgICBicmVhawogICAgICAgIH0KICAgIH0KCiAgICBpZiAodHlwZW9mIGN1cnJSdWxlID09ICJ1bmRlZmluZWQiKSByZXR1cm4KCiAgICB2YXIgYXBwbHlSdWxlcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBsb2coJ1RyeWluZyB0byBleGVjdXRlIGN1c3RvbSBmdW5jdGlvbjogJyArIGN1cnJSdWxlLmV4ZWMpCiAgICAgICAgaWYgKGN1cnJSdWxlLmV4ZWMgIT0gdW5kZWZpbmVkKSBjdXJyUnVsZS5leGVjKCk7CiAgICAgICAgbG9nKCJJdGVyYXRpbmcgdGhyb3VnaCB1bmNoZWNrcyIpCgogICAgICAgIC8vIElmIHRoZXJlIGlzIHNvbWV0aGluZyB0byB1bmNoZWNrCiAgICAgICAgaWYgKGN1cnJSdWxlLnVuY2hlY2sgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIC8vIEl0ZXJhdGUgZWFjaCBjaGVja2JveCB0byB1bmNoZWNrIGl0CiAgICAgICAgICAgICQuZWFjaChjdXJyUnVsZS51bmNoZWNrLCBmdW5jdGlvbiAoa2V5LCBjdXJyVW5jaGVjaykgewogICAgICAgICAgICAgICAgbG9nKCJUcnlpbmcgdG8gdW5jaGVjayBbIiArIGtleSArICddJyArIGN1cnJVbmNoZWNrKQogICAgICAgICAgICAgICAgLy8gQ29uc3RhbnRseSB0cnlpbmcgdG8gdW5jaGVjayB0aGUgY2hlY2tib3gKICAgICAgICAgICAgICAgIGlmIChjdXJyUnVsZS5vcHR1bmNoZWNrICE9IHVuZGVmaW5lZCAmJiBjdXJyUnVsZS5vcHR1bmNoZWNrLmNvbnN0YW50Y2hlY2sgPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIHVuY2hlY2soJChjdXJyVW5jaGVjaykpCiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmlvZGljSGlkZSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5jaGVjayBpdAogICAgICAgICAgICAgICAgICAgICAgICB1bmNoZWNrKCQoY3VyclVuY2hlY2spKQogICAgICAgICAgICAgICAgICAgIH0sIDEwMCkKICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHVuY2hlY2tpbmcgaXQgb25jZQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY2hlY2tib3ggd2FzIHN1Y2Nlc3NmdWxseSB1bmNoZWNrZWQKICAgICAgICAgICAgICAgICAgICBpZiAodW5jaGVjaygkKGN1cnJVbmNoZWNrKSkpIHJldHVybgogICAgICAgICAgICAgICAgICAgIGxvZygiQ291bGRuJ3QgdW5jaGVjayB0aGUgY2hlY2tib3giKQogICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byB1bmNoZWNrIGl0IGxhdGVyCiAgICAgICAgICAgICAgICAgICAgdmFyIHBlcmlvZGljVW5jaGVjayA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVuY2hlY2sgc3VjY2VlZGVkIHRoaXMgdGltZSwgd2Ugc3RvcCB0aGUgdW5jaGVja2luZwogICAgICAgICAgICAgICAgICAgICAgICBpZiAodW5jaGVjaygkKGN1cnJVbmNoZWNrKSkpIGNsZWFySW50ZXJ2YWwocGVyaW9kaWNVbmNoZWNrKQogICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGNvbnRpbnVlIHRvIGNoZWNrCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIH0KCiAgICAgICAgLy8gSWYgdGhlcmUgaXMgc29tZXRoaW5nIHRvIGhpZGUKICAgICAgICBpZiAoY3VyclJ1bGUuaGlkZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgLy8gSXRlcmF0ZSBlYWNoIGhpZGUgdG8gaGlkZSBpdAogICAgICAgICAgICAkLmVhY2goY3VyclJ1bGUuaGlkZSwgZnVuY3Rpb24gKGtleSwgY3VyckhpZGUpIHsKICAgICAgICAgICAgICAgIGxvZygiVHJ5aW5nIHRvIGhpZGUgIiArIGN1cnJIaWRlKQogICAgICAgICAgICAgICAgLy8gSWYgd2UgdHJ5IHRvIGNvbnRpbnVlIGhpZGluZyBpdCBldmVuIGlmIHRoZSBoaWRpbmcgd2FzIGFscmVhZHkgc3VjY2Vzc2Z1bAogICAgICAgICAgICAgICAgaWYgKGN1cnJSdWxlLm9wdGhpZGUgIT0gdW5kZWZpbmVkICYmIGN1cnJSdWxlLm9wdGhpZGUuY29uc3RhbnRjaGVjayA9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgICAgaGlkZSgkKGN1cnJIaWRlKSkKICAgICAgICAgICAgICAgICAgICB2YXIgcGVyaW9kaWNIaWRlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBIaWRlIGl0CiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGUoJChjdXJySGlkZSkpCiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKQogICAgICAgICAgICAgICAgICAgIC8vIEhpZGUgaXQgb25jZSwgdGhlbiBzdG9wIHRyeWluZyB0byBoaWRlIGl0ICh1c3VhbCBjYXNlLCBpdCBzdGF5cyBoaWRkZW4pCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBvYmplY3QgdG8gaGlkZSB3YXMgaGlkZGVuCiAgICAgICAgICAgICAgICAgICAgaWYgKGhpZGUoJChjdXJySGlkZSkpKSByZXR1cm4KICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gaGlkZSBpdCBsYXRlcgogICAgICAgICAgICAgICAgICAgIHZhciBwZXJpb2RpY0hpZGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBoaWRlIHN1Y2NlZWRlZCB0aGlzIHRpbWUsIHdlIHN0b3AgdG8gdHJ5IGhpZGluZyBpdAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGlkZSgkKGN1cnJIaWRlKSkpIGNsZWFySW50ZXJ2YWwocGVyaW9kaWNIaWRlKQogICAgICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGNvbnRpbnVlIHRvIHRyeSBoaWRpbmcgaXQgICAgICAKICAgICAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfQoKICAgICAgICAvLyBJZiB0aGVyZSBpcyBzb21ldGhpbmcgdG8gc2hvdwogICAgICAgIGlmIChjdXJyUnVsZS5zaG93ICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAvLyBJdGVyYXRlIGVhY2ggc2hvdyB0byBzaG93IGl0CiAgICAgICAgICAgICQuZWFjaChjdXJyUnVsZS5zaG93LCBmdW5jdGlvbiAoa2V5LCBjdXJyU2hvdykgewogICAgICAgICAgICAgICAgbG9nKCJUcnlpbmcgdG8gc2hvdyAiICsgY3VyclNob3cpCgogICAgICAgICAgICAgICAgLy8gSWYgdGhlIG9iamVjdCB0byBzaG93IHdhcyBzdWNjZXNzZnVsbHkgc2hvd24KICAgICAgICAgICAgICAgIGlmIChzaG93KCQoY3VyclNob3cpKSkgcmV0dXJuCgogICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHNob3cgaXQgbGF0ZXIKICAgICAgICAgICAgICAgIHZhciBwZXJpb2RpY1Nob3cgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvdygkKGN1cnJTaG93KSkKICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgc2hvdyBzdWNjZWVkZWQgdGhpcyB0aW1lLCB3ZSBzdG9wIHRvIHRyeSBzaG93aW5nIGl0CiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3coJChjdXJyU2hvdykpKSBjbGVhckludGVydmFsKHBlcmlvZGljU2hvdykKICAgICAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIGNvbnRpbnVlIHRvIHRyeSBzaG93aW5nIGl0ICAgICAgCiAgICAgICAgICAgICAgICB9LCAxMDApCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQogICAgCiAgICAvLyBHb29nbGUgQ2hyb21lIHRyaWNrOiBzb21ldGltZXMgdGhlIHNjcmlwdCBpcyBleGVjdXRlZCBhZnRlciB0aGF0IERPTUNvbnRlbnRMb2FkZWQgd2FzIHRyaWdnZXJlZCwgaW4gdGhpcyBjYXNlIHdlIGRpcmVjdGx5IHJ1biBvdXIgY29kZQogICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gImNvbXBsZXRlIikgewogICAgICAgIGFwcGx5UnVsZXMoKQogICAgICAgIGxvZygiRGlyZWN0bHkgYXBwbHlpbmcgcnVsZXMiKQogICAgfSBlbHNlIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGFwcGx5UnVsZXMpCiAgICAgICAgbG9nKCJXYWl0aW5nIGZvciBET01Db250ZW50TG9hZGVkIHRvIGFwcGx5IHJ1bGVzIikKICAgIH0KfSgpCg=="},{"name":"Bypass Wait, Code & Login on Websites","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":["down.lepan.cc","music.baidu.com","yinyueyun.baidu.com","media.store.kugou.com","trackercdn.kugou.com","yinyuetai.com","itwusun.com"],"orig_excludes":[],"orig_includes":["http://d.119g.com/*","http://123564.com/*","http://m.123564.com/*","http://www.5xfile.com/*","http://7958.com/*","http://*.7958.com/*","http://qjwm.com/*","http://*.qjwm.com/*","http://www.9pan.net/*","http://*.www.9pan.net/*","http://yun.baidu.com/*","http://*.yun.baidu.com/*","http://pan.baidu.com/*","http://*.pan.baidu.com/*","http://bx0635.com/*","http://*.bx0635.com/*","http://colayun.com/*","http://*.colayun.com/*","http://colafile.com/*","http://*.colafile.com/*","http://coladrive.com/*","http://*.coladrive.com/*","http://400gb.com/*","http://*.400gb.com/*","http://ctdisk.com/*","http://*.ctdisk.com/*","http://pipipan.com/*","http://*.pipipan.com/*","http://bego.cc/*","http://*.bego.cc/*","http://ctfile.com/*","http://*.ctfile.com/*","http://t00y.com/*","http://*.t00y.com/*","http://dlkoo.com/*","http://*.dlkoo.com/*","http://howfile.com/*","http://*.howfile.com/*","http://www.lepan.cc/*","http://www.sx566.com/*","http://rayfile.com/*","http://*.rayfile.com/*","http://sudupan.com/*","http://*.sudupan.com/*","http://vdisk.cn/*","http://*.vdisk.cn/*","http://yimuhe.com/*","http://*.yimuhe.com/*","http://douban.fm/*","http://jing.fm/*","http://moe.fm/*","http://fm.qq.com/*","http://music.163.com/*","http://www.1ting.com/*","http://www.565656.com/*","http://5sing.com/*","http://*.5sing.com/*","http://5sing.kugou.com/*","http://*.5sing.kugou.com/*","http://www.9ku.com/*","http://music.baidu.com/*","http://play.baidu.com/*","http://*.play.baidu.com/*","http://yinyueyun.baidu.com/*","http://www.djcc.com/*","http://www.djkk.com/*","http://www.djye.com/*","http://music.douban.com/*","http://www.duole.com/*","http://ear.duomi.com/*","http://web.kugou.com/*","http://kugou.com/*","http://www.kugou.com/*","http://oyinyue.com/*","http://*.oyinyue.com/*","http://y.qq.com/*","http://*.y.qq.com/*","http://i.y.qq.com/*","http://*.i.y.qq.com/*","http://fm.qq.com/*","http://*.fm.qq.com/*","http://y.qq.com/*","http://soso.music.qq.com/*","http://songtaste.com/*","http://*.songtaste.com/*","http://www.xiami.com/*","http://yinyuetai.com/*","http://*.yinyuetai.com/*","http://79pan.com/*","http://*.79pan.com/*","http://03xg.com/*","http://*.03xg.com/*","http://7mv.cc/*","http://*.7mv.cc/*","http://pan.52zz.org/*","http://*.pan.52zz.org/*","http://258pan.com/*","http://*.258pan.com/*","http://huimeiku.com/*","http://*.huimeiku.com/*","http://wpan.cc/*","http://*.wpan.cc/*","http://ypan.cc/*","http://*.ypan.cc/*","http://azpan.com/*","http://*.azpan.com/*","http://gxdisk.com/*","http://*.gxdisk.com/*","http://2kuai.com/*","http://*.2kuai.com/*","http://1wp.me/*","http://*.1wp.me/*","http://77pan.cc/*","http://*.77pan.cc/*","http://vvpan.com/*","http://*.vvpan.com/*","http://fmdisk.com/*","http://*.fmdisk.com/*","http://bx0635.com/*","http://*.bx0635.com/*","http://10pan.cc/*","http://*.10pan.cc/*","http://1pan.cc/*","http://*.1pan.cc/*","http://123wzwp.com/*","http://*.123wzwp.com/*","http://wwp5.com/*","http://*.wwp5.com/*","http://fydisk.com/*","http://*.fydisk.com/*","https://jixunmoe.github.io/cuwcl4c/config/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-start","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1478252146948,"data":{}},"enabled":true,"position":16,"file_url":"https://greasyfork.org/scripts/2600-%E8%B7%B3%E8%BF%87%E7%BD%91%E7%AB%99%E7%AD%89%E5%BE%85-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%8A%E7%99%BB%E5%BD%95/code/%E8%B7%B3%E8%BF%87%E7%BD%91%E7%AB%99%E7%AD%89%E5%BE%85%E3%80%81%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8F%8A%E7%99%BB%E5%BD%95.user.js","uuid":"1da69931-c48c-4a01-9695-da1fc94bcf5d","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQGdyYW50ICAgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAZ3JhbnQgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICAgIEdNX29wZW5JblRhYgovLyBAZ3JhbnQgICAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgICAgR01fZ2V0VmFsdWUKLy8gQGdyYW50ICAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgICBHTV9pbmZvCgovLyBAcnVuLWF0ICAgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gQG5hbWU6ZW4gICAgICAgIEJ5cGFzcyBXYWl0LCBDb2RlICYgTG9naW4gb24gV2Vic2l0ZXMKLy8gQG5hbWUgICAgICAgICAgIOi3s+i/h+e9keermeetieW+heOAgemqjOivgeeggeWPiueZu+W9lQovLyBAbmFtZTp6aC1DTiAgICAg6Lez6L+H572R56uZ562J5b6F44CB6aqM6K+B56CB5Y+K55m75b2VCi8vIEBuYW1lOnpoLVRXICAgICDnuZ7pgY7nq5npu57nrYnlvoXjgIHorZjliKXnorzlj4rnmbvpjIQKCi8vIEBkZXNjcmlwdGlvbiAgICAgICDnp7vpmaTlkITnsbvnvZHnq5npqozor4HnoIHjgIHnmbvlvZXjgIHlgJLorqHml7blj4rmm7TlpJohCi8vIEBkZXNjcmlwdGlvbjp6aC1DTiDnp7vpmaTlkITnsbvnvZHnq5npqozor4HnoIHjgIHnmbvlvZXjgIHlgJLorqHml7blj4rmm7TlpJohCi8vIEBkZXNjcmlwdGlvbjp6aC1UVyDnp7vpmaTlkITpoZ7nq5npu57orZjliKXnorzjgIHnmbvpjITjgIHlgJLoqIjmmYLlj4rmm7TlpJohCi8vIEBkZXNjcmlwdGlvbjplbiAgICBSZW1vdmUgdmVyaWZ5IGNvZGUsIGxvZ2luIHJlcXVpcmVtZW50LCBjb3VudGluZyBkb3duLi4uIGFuZCBtb3JlIQoKCi8vIEBjb3B5cmlnaHQgICAgICAyMDE0KywgWXVsZWksIE1vZCBieSBKaXh1bi4KLy8vLyAgICAgICAgICAgICAgIEJhc2VkIG9uIFtDcmFjayBVcmwgV2FpdCBDb2RlIExvZ2luXSBCeSBZdWxlaQoKLy8g6YG/5YWNIFNvdXJjZSBNYXAg5paH5Lu25om+5LiN5Yiw55qE6ZSZ6K+vCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9qcXVlcnkvMi4xLjQvanF1ZXJ5LmpzCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS91bmRlcnNjb3JlLmpzLzEuOC4zL3VuZGVyc2NvcmUuanMKCi8vLyBDcnlwdG9KUyDnm7jlhbPlupMKLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2NyeXB0by1qcy8zLjEuMi9jb21wb25lbnRzL2NvcmUtbWluLmpzCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2Nkbi5ib290Y3NzLmNvbS9jcnlwdG8tanMvMy4xLjIvY29tcG9uZW50cy9lbmMtYmFzZTY0LW1pbi5qcwovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9jZG4uYm9vdGNzcy5jb20vY3J5cHRvLWpzLzMuMS4yL2NvbXBvbmVudHMvbWQ1LW1pbi5qcwovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzY2OTYvY29kZS9DcnlwdG9KUy1CeXRlQXJyYXkuanMKCi8vLyDpnZ7lkIzmraXmnprkuL4KLy8gQHJlcXVpcmUgICAgICAgIGh0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvc2NyaXB0cy8zNTg4LWludGVydmFsLWxvb3Blci9jb2RlL0ludGVydmFsLUxvb3Blci5qcwoKLy8vIOWFvOWuuSBHTSAxLngsIDIueAovLyBAcmVxdWlyZSAgICAgICAgaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy9zY3JpcHRzLzI1OTkvY29kZS9nbTItcG9ydC12MTA0LmpzCgovLy8gQXJpYTIgUlBDCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2dyZWFzeWZvcmsub3JnL3NjcmlwdHMvNTY3Mi9jb2RlL0FyaWEyLVJQQy1idWlsZC0xMC5qcwoKLy8gQGF1dGhvciAgICAgICAgIEppeHVuLk1vZTxZZWxsb3cgWW9zaGk+Ci8vIEBuYW1lc3BhY2UgICAgICBodHRwOi8vaml4dW4ub3JnLwovLyBAdmVyc2lvbiAgICAgICAgMy4wLjU3NQoKLy8g5bCd6K+V5L2/55So6ISa5pys55Sf5oiQ5Yy56YWN6KeE5YiZCgovLyBAaW5jbHVkZSBodHRwOi8vZC4xMTlnLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8xMjM1NjQuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL20uMTIzNTY0LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3cuNXhmaWxlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly83OTU4LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjc5NTguY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3Fqd20uY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyoucWp3bS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vd3d3LjlwYW4ubmV0LyoKLy8gQGluY2x1ZGUgaHR0cDovLyoud3d3LjlwYW4ubmV0LyoKLy8gQGluY2x1ZGUgaHR0cDovL3l1bi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi55dW4uYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3Bhbi5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5wYW4uYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2J4MDYzNS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5ieDA2MzUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2NvbGF5dW4uY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouY29sYXl1bi5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vY29sYWZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouY29sYWZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2NvbGFkcml2ZS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5jb2xhZHJpdmUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLzQwMGdiLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjQwMGdiLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9jdGRpc2suY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouY3RkaXNrLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9waXBpcGFuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLnBpcGlwYW4uY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2JlZ28uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vKi5iZWdvLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovL2N0ZmlsZS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5jdGZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3QwMHkuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyoudDAweS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vZGxrb28uY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouZGxrb28uY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2hvd2ZpbGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouaG93ZmlsZS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vd3d3LmxlcGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovL3d3dy5zeDU2Ni5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vcmF5ZmlsZS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5yYXlmaWxlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9zdWR1cGFuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLnN1ZHVwYW4uY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3ZkaXNrLmNuLyoKLy8gQGluY2x1ZGUgaHR0cDovLyoudmRpc2suY24vKgovLyBAaW5jbHVkZSBodHRwOi8veWltdWhlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLnlpbXVoZS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vZG91YmFuLmZtLyoKLy8gQGluY2x1ZGUgaHR0cDovL2ppbmcuZm0vKgovLyBAaW5jbHVkZSBodHRwOi8vbW9lLmZtLyoKLy8gQGluY2x1ZGUgaHR0cDovL2ZtLnFxLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9tdXNpYy4xNjMuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3d3dy4xdGluZy5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vd3d3LjU2NTY1Ni5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vNXNpbmcuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouNXNpbmcuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLzVzaW5nLmt1Z291LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjVzaW5nLmt1Z291LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3cuOWt1LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9tdXNpYy5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vcGxheS5iYWlkdS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5wbGF5LmJhaWR1LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly95aW55dWV5dW4uYmFpZHUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3d3dy5kamNjLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3cuZGpray5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vd3d3LmRqeWUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL211c2ljLmRvdWJhbi5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vd3d3LmR1b2xlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9lYXIuZHVvbWkuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3dlYi5rdWdvdS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8va3Vnb3UuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3d3dy5rdWdvdS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vb3lpbnl1ZS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5veWlueXVlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly95LnFxLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLnkucXEuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2kueS5xcS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5pLnkucXEuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2ZtLnFxLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLmZtLnFxLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly95LnFxLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9zb3NvLm11c2ljLnFxLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9zb25ndGFzdGUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouc29uZ3Rhc3RlLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3cueGlhbWkuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3lpbnl1ZXRhaS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi55aW55dWV0YWkuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLzc5cGFuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjc5cGFuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8wM3hnLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjAzeGcuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLzdtdi5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjdtdi5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9wYW4uNTJ6ei5vcmcvKgovLyBAaW5jbHVkZSBodHRwOi8vKi5wYW4uNTJ6ei5vcmcvKgovLyBAaW5jbHVkZSBodHRwOi8vMjU4cGFuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjI1OHBhbi5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vaHVpbWVpa3UuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouaHVpbWVpa3UuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL3dwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vKi53cGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovL3lwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vKi55cGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovL2F6cGFuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLmF6cGFuLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly9neGRpc2suY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouZ3hkaXNrLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8ya3VhaS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi4ya3VhaS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vMXdwLm1lLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouMXdwLm1lLyoKLy8gQGluY2x1ZGUgaHR0cDovLzc3cGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouNzdwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vdnZwYW4uY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLyoudnZwYW4uY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2ZtZGlzay5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5mbWRpc2suY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2J4MDYzNS5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5ieDA2MzUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovLzEwcGFuLmNjLyoKLy8gQGluY2x1ZGUgaHR0cDovLyouMTBwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vMXBhbi5jYy8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLjFwYW4uY2MvKgovLyBAaW5jbHVkZSBodHRwOi8vMTIzd3p3cC5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi4xMjN3endwLmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly93d3A1LmNvbS8qCi8vIEBpbmNsdWRlIGh0dHA6Ly8qLnd3cDUuY29tLyoKLy8gQGluY2x1ZGUgaHR0cDovL2Z5ZGlzay5jb20vKgovLyBAaW5jbHVkZSBodHRwOi8vKi5meWRpc2suY29tLyoKLy8gQGluY2x1ZGUgaHR0cHM6Ly9qaXh1bm1vZS5naXRodWIuaW8vY3V3Y2w0Yy9jb25maWcvCgovLyBHTV94bWxIdHRwUmVxdWVzdCDov5znq6/mnI3liqHlmajliJfooagKLy8gQGNvbm5lY3QgZG93bi5sZXBhbi5jYwovLyBAY29ubmVjdCBtdXNpYy5iYWlkdS5jb20KLy8gQGNvbm5lY3QgeWlueXVleXVuLmJhaWR1LmNvbQovLyBAY29ubmVjdCBtZWRpYS5zdG9yZS5rdWdvdS5jb20KLy8gQGNvbm5lY3QgdHJhY2tlcmNkbi5rdWdvdS5jb20KLy8gQGNvbm5lY3QgeWlueXVldGFpLmNvbQovLyBAY29ubmVjdCBpdHd1c3VuLmNvbQoKLy8gPT0vVXNlclNjcmlwdD09CgoKKGZ1bmN0aW9uICgpIHsKCS8vIOWIneWni+WMlgp2YXIgY3JlYXRlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZCAoZG9jdW1lbnQpOwoKdmFyIEggPSB7CglzY3JpcHROYW1lOiAnQ1VXQ0w0QycsCglzY3JpcHRIb21lOiAnaHR0cHM6Ly9ncmVhc3lmb3JrLm9yZy96aC1DTi9zY3JpcHRzLzI2MDAnLAoJcmVwb3J0VXJsOiAgJ2h0dHBzOi8vZ3JlYXN5Zm9yay5vcmcvZm9ydW0vcG9zdC9kaXNjdXNzaW9uP0Rpc2N1c3Npb24vU2NyaXB0SUQ9MjYwMCcsCglpc0ZyYW1lOiAoZnVuY3Rpb24gKCkgewoJCXRyeSB7CgkJCXJldHVybiB1bnNhZmVXaW5kb3cudG9wICE9IHVuc2FmZVdpbmRvdy5zZWxmOwoJCX0gY2F0Y2ggKGUpIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoJfSkoKSwKCgl2ZXJzaW9uOiAgICBHTV9pbmZvLnNjcmlwdC52ZXJzaW9uLAoJY3VycmVudFVybDogbG9jYXRpb24uaHJlZi5zcGxpdCAoJyMnKVswXSwKCWxvd2VySG9zdDogIGxvY2F0aW9uLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCksCglkaXJlY3RIb3N0OiBsb2NhdGlvbi5ob3N0bmFtZS5tYXRjaCgvXHcrXC4/XHcrPyQvKVswXS50b0xvd2VyQ2FzZSgpLAoKCWRlZmF1bHREbEljb246ICAgJ2p4X2RsJywKCWRlZmF1bHREbENsYXNzOiAnLmp4X2RsJywKCglub3A6IGZ1bmN0aW9uICgpIHt9LAoKCW1lcmdlOiBmdW5jdGlvbiAocGFyZW50KSB7CgkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKQoJCQlyZXR1cm4gcGFyZW50IHx8IHt9OwoKCQl2YXIgYXJncyA9IGFyZ3VtZW50czsKCQlmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQlpZiAoYXJndW1lbnRzW2ldKSB7CgkJCQlPYmplY3Qua2V5cyAoYXJndW1lbnRzW2ldKS5mb3JFYWNoIChmdW5jdGlvbiAoa2V5KSB7CgkJCQkJcGFyZW50W2tleV0gPSBhcmdzW2ldW2tleV07CgkJCQl9KTsKCQkJfQoJCX0KCgkJcmV0dXJuIHBhcmVudDsKCX0sCgoJZXh0cmFjdDogZnVuY3Rpb24gKGZvbykgewoJCXJldHVybiBmb28udG9TdHJpbmcoKS5tYXRjaCgvXC9cKihbXHNcU10rKVwqXC8vKVsxXS5yZXBsYWNlKC9ccyotLS4rL2csICcnKTsKCX0sCgoJc0Zvcm1hdDogZnVuY3Rpb24gKHNvdXJjZVN0cikgewoJCXZhciBhcmdzID0gYXJndW1lbnRzLAoJCQlhcmdMZW4gPSBhcmdzLmxlbmd0aDsKCgkJaWYgKGFyZ0xlbiA8PSAxKSByZXR1cm4gc291cmNlU3RyOyAvLyDml6DmlYjmiJbml6Dlj4LmlbAKCgkJZm9yICh2YXIgaSA9IGFyZ0xlbjsgaS0tOyApCgkJCXNvdXJjZVN0ciA9IHNvdXJjZVN0ci5yZXBsYWNlIChuZXcgUmVnRXhwKCclJyArIGkgKyAnKFteXFxkXXwkKScsJ2cnKSwgYXJnc1tpXSk7CgoJCXJldHVybiBzb3VyY2VTdHI7Cgl9LAoKCXNwcmludGY6IGZ1bmN0aW9uIChzb3VyY2VTdHIpIHsKCQl2YXIgYXJncyA9IGFyZ3VtZW50cywKCQkJYXJnTGVuID0gYXJncy5sZW5ndGg7CgoJCWlmIChhcmdMZW4gPD0gMSkgcmV0dXJuIHNvdXJjZVN0cjsgLy8g5peg5pWI5oiW5peg5Y+C5pWwCgoJCWZvciAodmFyIGkgPSAxOyBpIDwgYXJnTGVuOyBpKyspCgkJCXNvdXJjZVN0ciA9IHNvdXJjZVN0ci5yZXBsYWNlICgvJVtzZF0vaSwgYXJnc1tpXSk7CgoJCXJldHVybiBzb3VyY2VTdHI7Cgl9LAoKCWJlZ2luV2l0aDogZnVuY3Rpb24gKHN0ciwgd2hhdCkgewoJCXJldHVybiBzdHIuaW5kZXhPZiAod2hhdCkgPT09IDA7Cgl9LAoKCWNvbnRhaW5zOiBmdW5jdGlvbiAoc3RyLCB3aGF0KSB7CgkJcmV0dXJuIHN0ci5pbmRleE9mICh3aGF0KSAhPSAtMTsKCX0sCgoJYWRkRG93bmxvYWQ6IGZ1bmN0aW9uICh1cmwsIGZpbGUpIHsKCQlpZiAoSC5jb25maWcuZFVyaVR5cGUgPT0gMikgewoJCQlILmFkZFRvQXJpYSh1cmwsIGZpbGUpOwoJCX0gZWxzZSB7CgkJCUdNX29wZW5JblRhYiAoSC51cmkodXJsLCBmaWxlKSwgdHJ1ZSk7CgkJfQoJfSwKCgl1cmk6IGZ1bmN0aW9uICh1cmwsIGZpbGVuYW1lLCByZWYpIHsKCQlzd2l0Y2ggKEguY29uZmlnLmRVcmlUeXBlKSB7CgkJCWNhc2UgMToKCQkJCXJldHVybiAnY3V3Y2w0YzovL3wxfCcgKyBbCgkJCQkJdXJsLAoJCQkJCWZpbGVuYW1lLnRvU3RyaW5nKCkucmVwbGFjZSgvWyciXC9cXDp8XS9nLCAnXycpLAoJCQkJCShyZWYgfHwgbG9jYXRpb24uaHJlZikudG9TdHJpbmcoKS5yZXBsYWNlKC8jLiovLCAnJykKCQkJCV0uam9pbignfCcpOwoKCQkJY2FzZSAyOgoJCQkJLy8g5aaC5p6c6ISa5pys5rKh5pyJ5omL5Yqo57uR5a6aIEFyaWEg6L+e5o6lCgkJCQkvLyDmraTlpITov5vooYzlhajlsYDov57mjqXmjqXnrqEKCQkJCWlmICghSC5oYXNBcmlhQ2FwdHVyZSkKCQkJCQlILmNhcHR1cmVBcmlhICgpOwoKCQkJCXJldHVybiAnYXJpYTI6Ly98JyArIFsKCQkJCQl1cmwsCgkJCQkJZmlsZW5hbWUudG9TdHJpbmcoKS5yZXBsYWNlKC9bJyJcL1xcOnxdL2csICdfJyksCgkJCQkJKHJlZiB8fCBsb2NhdGlvbi5ocmVmKS50b1N0cmluZygpLnJlcGxhY2UoLyMuKi8sICcnKQoJCQkJXS5qb2luKCd8Jyk7CgoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIHVybDsKCQl9Cgl9LAoKCXNldHVwQXJpYTogZnVuY3Rpb24gKGJGb3JjZU5ldykgewoJCWlmIChiRm9yY2VOZXcgfHwgIUguYXJpYSkgewoJCQlILmFyaWEyID0gbmV3IEFyaWEyKHsKCQkJCWF1dGg6IHsKCQkJCQl0eXBlOiBILmNvbmZpZy5kQXJpYV9hdXRoLAoJCQkJCXVzZXI6IEguY29uZmlnLnNBcmlhX3VzZXIsCgkJCQkJcGFzczogSC5jb25maWcuc0FyaWFfcGFzcwoJCQkJfSwKCQkJCWhvc3Q6IEguY29uZmlnLnNBcmlhX2hvc3QsCgkJCQlwb3J0OiBILmNvbmZpZy5kQXJpYV9wb3J0CgkJCX0pOwoJCX0KCgkJcmV0dXJuIEguYXJpYTI7Cgl9LAoKCWFkZFRvQXJpYTogZnVuY3Rpb24gKHVybCwgZmlsZW5hbWUsIHJlZmVyZXIsIGNvb2tpZSwgaGVhZGVycykgewoJCXZhciBhcmlhUGFyYW0gPSB7CgkJCW91dDogZmlsZW5hbWUsCgkJCXJlZmVyZXI6IHJlZmVyZXIgfHwgbG9jYXRpb24uaHJlZiwKCQkJZGlyOiBILmNvbmZpZy5zQXJpYV9kaXIsCgkJCSd1c2VyLWFnZW50JzogbmF2aWdhdG9yLnVzZXJBZ2VudCwKCQkJaGVhZGVyOiBoZWFkZXJzIHx8IFtdCgkJfTsKCgkJaWYgKGNvb2tpZSA9PT0gdHJ1ZSkKCQkJY29va2llID0gZG9jdW1lbnQuY29va2llOwoKCQlpZiAoY29va2llKQoJCQlhcmlhUGFyYW0uaGVhZGVyLnB1c2ggKCdDb29raWU6ICcgKyBjb29raWUpOwoKCQlILmFyaWEyLmFkZFVyaSAoW3VybF0sIGFyaWFQYXJhbSwgSC5ub3AsIGZ1bmN0aW9uIChyKSB7CgkJCXZhciBzRXJyb3JNc2c7CgkJCWlmIChyLmVycm9yKSB7CgkJCQlzRXJyb3JNc2cgPSBILnNwcmludGYgKCfplJnor6/ku6PnoIEgJXM6ICVzJywgci5lcnJvci5jb2RlLCByLmVycm9yLm1lc3NhZ2UpOwoJCQl9IGVsc2UgewoJCQkJc0Vycm9yTXNnID0gJ+S4jiBBcmlhMiDlkI7lj7DpgJrkv6HlpLHotKUsIOacjeWKoeacquW8gOWQrz8nOwoJCQl9CgoJCQlhbGVydCAoSC5zcHJpbnRmKCdbJXNdIOaPkOS6pOS7u+WKoeWPkeeUn+mUmeivryFcblxuJXMnLCBILnNjcmlwdE5hbWUsIHNFcnJvck1zZykpOwoJCX0pOwoJfSwKCgljYXB0dXJlQXJpYTogZnVuY3Rpb24gKGVsKSB7CgkJaWYgKEguY29uZmlnLmRVcmlUeXBlICE9PSAyKQoJCQlyZXR1cm4gOwoKCQlILmhhc0FyaWFDYXB0dXJlID0gdHJ1ZTsKCQlILnNldHVwQXJpYSAoKTsKCQkKCQkkKGVsIHx8IGRvY3VtZW50KS5jbGljayhmdW5jdGlvbiAoZSkgewoJCQl2YXIgbGlua0VsID0gZS50YXJnZXQ7CgkJCXZhciAkZWwgPSAkKGUudGFyZ2V0KTsKCQkJaWYgKCEkZWwuaXMoJ2EnKSkgewoJCQkJbGlua0VsID0gJGVsLnBhcmVudHMoJ2EnKVswXTsKCQkJfQoKCQkJaWYgKGxpbmtFbCAmJiBsaW5rRWwudGFnTmFtZSA9PSAnQScgJiYgSC5iZWdpbldpdGgobGlua0VsLmhyZWYsICdhcmlhMjovL3wnKSkgewoJCQkJZS5zdG9wUHJvcGFnYXRpb24gKCk7CgkJCQllLnByZXZlbnREZWZhdWx0ICAoKTsKCgkJCQl2YXIgbGluayA9IGxpbmtFbC5ocmVmLnNwbGl0KCd8Jyk7CgkJCQlILmFkZFRvQXJpYShsaW5rWzFdLCBkZWNvZGVVUklDb21wb25lbnQobGlua1syXSksIGxpbmtbM10sIGxpbmtFbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FyaWEtY29va2llJykpOwoJCQl9CgkJfSk7Cgl9LAoKCWJ1aWxkQXJpYVBhcmFtOiBmdW5jdGlvbiAob3B0cykgewoJCWlmIChvcHRzLmNvb2tpZSkgewoJCQlvcHRzLmhlYWRlciA9IG9wdHMuaGVhZGVyIHx8IFtdOwoJCQlvcHRzLmhlYWRlci5wdXNoICgnQ29va2llOiAnICsgKG9wdHMuY29va2llIHx8IGRvY3VtZW50LmNvb2tpZSkpOwoJCQlkZWxldGUgb3B0cy5jb29raWU7CgkJfQoJCXJldHVybiBILm1lcmdlICh7CgkJCXJlZmVyZXI6IGxvY2F0aW9uLmhyZWYsCgkJCWRpcjogSC5jb25maWcuc0FyaWFfZGlyLAoJCQkndXNlci1hZ2VudCc6IG5hdmlnYXRvci51c2VyQWdlbnQKCQl9LCBvcHRzKTsKCX0sCgoJYmF0Y2hEb3dubG9hZDogZnVuY3Rpb24gKGZDYWxsYmFjaywgcmVmLCBhcnJEb3dubG9hZHMpIHsKCQlILnNldHVwQXJpYSAoKTsKCgkJcmV0dXJuIEguYXJpYTIuYmF0Y2hBZGRVcmkuYXBwbHkgKAoJCQkvLyB0aGlzCgkJCUguYXJpYTIsIAoKCQkJLy8gZkNhbGxiYWNrLCBmaWxlMSwgZmlsZTIsIC4uLgoJCQlbIGZDYWxsYmFjayBdLmNvbmNhdCAoCgkJCQlhcnJEb3dubG9hZHMubWFwIChmdW5jdGlvbiAoYXJnKSB7CgkJCQkJYXJnLm9wdGlvbnMgPSBILmJ1aWxkQXJpYVBhcmFtIChILm1lcmdlKHsgcmVmZXJlcjogcmVmIH0sIGFyZy5vcHRpb25zKSk7CgkJCQkJcmV0dXJuIGFyZzsKCQkJCX0pCgkJCSkKCQkpOwoJfQp9OwoKSC5tZXJnZSAoSCwgewoJX2xvZzogY29uc29sZS5sb2cuYmluZCAoY29uc29sZSksCglfaW5mOiBjb25zb2xlLmluZm8uYmluZCAoY29uc29sZSksCglfd2FyOiBjb25zb2xlLndhcm4uYmluZCAoY29uc29sZSksCglfZXJyOiBjb25zb2xlLmVycm9yLmJpbmQgKGNvbnNvbGUpLAoKCWxvZzogZnVuY3Rpb24gKF9wcmVmaXgsIG1zZykgewoJCXZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoKCQlpZiAodHlwZW9mIG1zZyA9PSAnc3RyaW5nJykgewoJCQkvLyBUT0RPOiBTaW1wbGlmeSB0aGlzPwoJCQlILl9sb2cuYXBwbHkgKDAsIFtdLmNvbmNhdC5hcHBseSAoW19wcmVmaXggKyBtc2ddLCBhcmdzLnNsaWNlKDEpKSk7CgkJfSBlbHNlIHsKCQkJSC5fbG9nLmFwcGx5ICgwLCBbXS5jb25jYXQuYXBwbHkoW19wcmVmaXhdLCBhcmdzKSk7CgkJfQoJfS5iaW5kIChILCBILnNwcmludGYgKCdbJXNdW+aXpeW/l10gJywgSC5zY3JpcHROYW1lKSksCgoJaW5mbzogZnVuY3Rpb24gKF9wcmVmaXgsIG1zZykgewoJCXZhciBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpOwoKCQlpZiAodHlwZW9mIG1zZyA9PSAnc3RyaW5nJykgewoJCQkvLyBUT0RPOiBTaW1wbGlmeSB0aGlzPwoJCQlILl9pbmYuYXBwbHkgKDAsIFtdLmNvbmNhdC5hcHBseSAoW19wcmVmaXggKyBtc2ddLCBhcmdzLnNsaWNlKDEpKSk7CgkJfSBlbHNlIHsKCQkJSC5faW5mLmFwcGx5ICgwLCBbXS5jb25jYXQuYXBwbHkoW19wcmVmaXhdLCBhcmdzKSk7CgkJfQoJfS5iaW5kIChILCBILnNwcmludGYgKCdbJXNdW+S/oeaBr10gJywgSC5zY3JpcHROYW1lKSksCgoJZXJyb3I6IGZ1bmN0aW9uIChfcHJlZml4LCBtc2cpIHsKCQl2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKS5jb25jYXQgKCdcblxu6ZSZ6K+v6L+96LiqJyArIG5ldyBFcnJvcigpLnN0YWNrKTsKCgkJaWYgKHR5cGVvZiBtc2cgPT0gJ3N0cmluZycpIHsKCQkJSC5fZXJyLmFwcGx5ICgwLCBbXS5jb25jYXQuYXBwbHkgKFtfcHJlZml4ICsgbXNnXSwgYXJncy5zbGljZSgxKSkpOwoJCX0gZWxzZSB7CgkJCUguX2Vyci5hcHBseSAoMCwgW10uY29uY2F0LmFwcGx5KFtfcHJlZml4XSwgYXJncykpOwoJCX0KCX0uYmluZCAoSCwgSC5zcHJpbnRmICgnWyVzXVvplJnor69dICcsIEguc2NyaXB0TmFtZSkpLAoKCXdhcm46IGZ1bmN0aW9uIChfcHJlZml4LCBtc2cpIHsKCQl2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsKCgkJaWYgKHR5cGVvZiBtc2cgPT0gJ3N0cmluZycpIHsKCQkJLy8gVE9ETzogU2ltcGxpZnkgdGhpcz8KCQkJSC5faW5mLmFwcGx5ICgwLCBbXS5jb25jYXQuYXBwbHkgKFtfcHJlZml4ICsgbXNnXSwgYXJncy5zbGljZSgxKSkpOwoJCX0gZWxzZSB7CgkJCUguX2luZi5hcHBseSAoMCwgW10uY29uY2F0LmFwcGx5KFtfcHJlZml4XSwgYXJncykpOwoJCX0KCX0uYmluZCAoSCwgSC5zcHJpbnRmICgnWyVzXVvorablkYpdICcsIEguc2NyaXB0TmFtZSkpCn0pOwoKSC5jb25maWcgPSBILm1lcmdlICh7CiAgICB2ZXJzaW9uOiAxLAogICAgYkRpYXBsYXlMb2c6IHRydWUsCiAgICBiWWVsbG93RWFzZUludGVybmF0aW9uYWw6IGZhbHNlLAogICAgYlllbGxvd0Vhc2VVc2VPbGRBcGk6IGZhbHNlLAogICAgYlllbGxvd0Vhc2VVc2VUaHJpZE9uRmFpbDogZmFsc2UsCiAgICBiVXNlQ3VzdG9tUnVsZXM6IGZhbHNlLAogICAgCiAgICBkQXJpYV9hdXRoOiBBcmlhMi5BVVRILm5vQXV0aCwKICAgIGRBcmlhX3BvcnQ6IDY4MDAsCiAgICBkVXJpVHlwZTogMCwKICAgIAogICAgc0FyaWFfZGlyOiAiRDpcXERvd25sb2FkXFwiLAogICAgc0FyaWFfaG9zdDogIjEyNy4wLjAuMSIsCiAgICBzQXJpYV9wYXNzOiAiIiwKICAgIHNBcmlhX3VzZXI6ICIiLAogICAgCiAgICBzQ3VzdG9tUnVsZTogIiIKfSwgKGZ1bmN0aW9uIChjb25mKSB7CglpZiAoIWNvbmYpIHJldHVybiB7fTsKCgl0cnkgewoJCXJldHVybiBKU09OLnBhcnNlIChjb25mKTsKCX0gY2F0Y2ggKGUpIHsKCQlILmluZm8gKCfphY3nva7mlofku7YgWyVzXSDml6DmlYgsIOeOsOWcqOS9v+eUqOepuueZvemFjee9ri4nLCBjb25mKTsKCQlyZXR1cm4ge307Cgl9Cn0pKEdNX2dldFZhbHVlIChILnNjcmlwdE5hbWUpKSk7Cgpjb25zdCBfX2xhdGVzdF92ZXJzaW9uID0gMTsKaWYgKEguY29uZmlnLnZlcnNpb24gIT0gX19sYXRlc3RfdmVyc2lvbikgewogICAgc3dpdGNoIChDb25maWcudmVyc2lvbikgewogICAgICAgIGNhc2UgdW5kZWZpbmVkOgogICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgSC5pbmZvKCfljYfnuqcgdjAg6YWN572u5paH5Lu2Li4uJyk7CiAgICAgICAgICAgIENvbmZpZy52ZXJzaW9uID0gMTsKCiAgICAgICAgICAgIENvbmZpZy5iWWVsbG93RWFzZUludGVybmF0aW9uYWwgPSBILmNvbmZpZy5iSW50ZXJuYXRpb25hbDsKICAgICAgICAgICAgQ29uZmlnLmJZZWxsb3dFYXNlVXNlT2xkQXBpID0gSC5jb25maWcuYlByb3h5SW5zdGFsbGVkOwogICAgICAgICAgICBDb25maWcuYlllbGxvd0Vhc2VVc2VUaHJpZE9uRmFpbCA9IEguY29uZmlnLmJVc2VUaHJpZE9uRmFpbDsKCiAgICAgICAgICAgIGRlbGV0ZSBILmNvbmZpZy5iSW50ZXJuYXRpb25hbDsKICAgICAgICAgICAgZGVsZXRlIEguY29uZmlnLmJVc2VUaHJpZE9uRmFpbDsKICAgICAgICAgICAgZGVsZXRlIEguY29uZmlnLmJQcm94eUluc3RhbGxlZDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgCiAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBicmVhazsKICAgIH0KCiAgICBHTV9zZXRWYWx1ZSAoSC5zY3JpcHROYW1lLCBKU09OLnN0cmluZ2lmeShILmNvbmZpZykpOwp9CgovLyAyMDE0LjExLjMwOiDkuI3mmL7npLrml6Xlv5cKaWYgKCFILmNvbmZpZy5iRGlhcGxheUxvZyB8fCBILmlzRnJhbWUpIHsKCS8vIOWxj+iUveaXpeW/l+WHveaVsAoJSC5ub0xvZyA9IHRydWU7CglbJ2xvZycsICdpbmZvJ10ubWFwKGZ1bmN0aW9uIChmb29OYW1lKSB7CgkJSFsnXycgKyBmb29OYW1lLnNsaWNlKDAsIDMpXSA9IEhbZm9vTmFtZV0gPSBILm5vcDsKCX0pOwp9CgpILm1lcmdlIChILCB7Cglob29rUmVxdWlyZTogZnVuY3Rpb24gKG5hbWVzcGFjZSwgZm9vLCBjYWxsYmFjaykgewoJCS8vIFRoZSBmaXJzdCBvbmUgaXMgYHRoaXNgLCBzbyBub3QgZ29pbmcgdG8gYmUgdXNlZC4KCQl2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwgKGFyZ3VtZW50cywgMik7CgkJYXJnc1swXSA9IG51bGw7CgoJCXZhciBob29rUmVxID0gY3JlYXRlRWxlbWVudCAoJ3NjcmlwdCcpOwoJCWhvb2tSZXEudGV4dENvbnRlbnQgPSAnOygnICsgZnVuY3Rpb24gKG5hbWVzcGFjZSwgZm9vLCBjdXN0b20pIHsKCQkJdmFyICRucywgJGZvbzsKCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5ICh3aW5kb3csIG5hbWVzcGFjZSwgewoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuICRuczsKCQkJCX0sCgkJCQlzZXQ6IGZ1bmN0aW9uIChuKSB7CgkJCQkJJG5zID0gbjsKCgkJCQkJJGZvbyA9IG5bZm9vXTsKCQkJCQlPYmplY3QuZGVmaW5lUHJvcGVydHkgKCRucywgZm9vLCB7CgkJCQkJCWdldDogZnVuY3Rpb24gKCkgewoJCQkJCQkJcmV0dXJuIGZ1bmN0aW9uICgpIHsKCQkJCQkJCQl2YXIgcmV0ID0gY3VzdG9tLmFwcGx5ICgwLCBbXS5jb25jYXQuYXBwbHkoWyRucywgJGZvby5iaW5kICgkbnMpXSwgYXJndW1lbnRzKSk7CgkJCQkJCQkJaWYgKHJldCkgcmV0dXJuIHJldDsKCQkJCQkJCQlyZXR1cm4gJGZvby5hcHBseSAoJG5zLCBhcmd1bWVudHMpOwoJCQkJCQkJfTsKCQkJCQkJfSwKCQkJCQkJc2V0OiBmdW5jdGlvbiAoZm5OZXcpIHsKCQkJCQkJCSRmb28gPSBmbk5ldzsKCQkJCQkJfQoJCQkJCX0pOwoJCQkJfQoJCQl9KTsKCQl9ICsgJykoIicgKyBuYW1lc3BhY2UgKyAnIiwgIicgKyBmb28gKyAnIiwgRnVuY3Rpb24uYmluZC5hcHBseSAoJwoJCQkrIGNhbGxiYWNrICsgJywgJyArIEpTT04uc3RyaW5naWZ5IChhcmdzKSArICcpKTsnOwoJCWRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQgKGhvb2tSZXEpOwoJCXJldHVybiBob29rUmVxOwoJfSwKCglob29rRGVmaW5lOiBmdW5jdGlvbiAoZm9vTmFtZSwgY2FsbGJhY2spIHsKCQkvLyBUaGUgZmlyc3Qgb25lIGlzIGB0aGlzYCwgc28gbm90IGdvaW5nIHRvIGJlIHVzZWQuCgkJdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsIChhcmd1bWVudHMsIDEpOwoJCWFyZ3NbMF0gPSBudWxsOwoKCQl2YXIgaG9va0RlZiA9IGNyZWF0ZUVsZW1lbnQgKCdzY3JpcHQnKTsKCQlob29rRGVmLnRleHRDb250ZW50ID0gJzsoJyArIGZ1bmN0aW9uIChmb29OYW1lLCBjdXN0b20pIHsKCQkJdmFyICRkZWZpbmU7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSAod2luZG93LCBmb29OYW1lLCB7CgkJCQlnZXQ6IGZ1bmN0aW9uICgpIHsKCQkJCQlyZXR1cm4gZnVuY3Rpb24gKCkgewoJCQkJCQl2YXIgcmV0ID0gY3VzdG9tLmFwcGx5ICgwLCBbXS5jb25jYXQuYXBwbHkoWyRkZWZpbmVdLCBhcmd1bWVudHMpKTsKCQkJCQkJaWYgKHJldCkgcmV0dXJuIHJldDsKCQkJCQkJcmV0dXJuICRkZWZpbmUuYXBwbHkgKHdpbmRvdywgYXJndW1lbnRzKTsKCQkJCQl9OwoJCQkJfSwKCQkJCXNldDogZnVuY3Rpb24gKG4pIHsKCQkJCQkkZGVmaW5lID0gbjsKCQkJCX0KCQkJfSk7CgkJfSArICcpKCInICsgbmFtZXNwYWNlICsgJyIsICInICsgZm9vICsgJyIsIEZ1bmN0aW9uLmJpbmQuYXBwbHkgKCcKCQkJKyBjYWxsYmFjayArICcsICcgKyBKU09OLnN0cmluZ2lmeSAoYXJncykgKyAnKSk7JzsKCQlkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkIChob29rRGVmKTsKCQlyZXR1cm4gaG9va0RlZjsKCX0sCgoJYmFzZTY0RGVjb2RlOiBmdW5jdGlvbiAoc3RyKSB7CgkJcmV0dXJuIENyeXB0b0pTLmVuYy5VdGY4LnN0cmluZ2lmeShDcnlwdG9KUy5lbmMuQmFzZTY0LnBhcnNlKHN0cikpOwoJfSwKCQoJZ2V0Rmxhc2hWYXJzOiBmdW5jdGlvbiAoZWxlKSB7CgkJLy8galF1ZXJ5IGVsZW1lbnQgZml4LgoJCWlmICghZWxlKSByZXR1cm4ge307CgkJaWYgKGVsZS5qcXVlcnkpIGVsZSA9IGVsZVswXTsKCgkJLy8gQ2hlY2sgaWYgaXMgYSBmbGFzaCBvYmplY3QKCQlpZiAoZWxlLnR5cGUuaW5kZXhPZignZmxhc2gnKSA9PSAtMSkgcmV0dXJuIHt9OwoKCQlmb3IodmFyIGZsYXNoT2JqZWN0LCBmbGFzaFZhcnMgPSB7fSwgaSA9IGVsZS5jaGlsZE5vZGVzLmxlbmd0aDsgaS0tOykKCQkJaWYgKGVsZS5jaGlsZE5vZGVzW2ldLm5hbWUgPT0gJ2ZsYXNodmFycycpIHsKCQkJCWZsYXNoT2JqZWN0ID0gZWxlLmNoaWxkTm9kZXNbaV07CgkJCQlicmVhazsKCQkJfQoKCQlpZiAoZmxhc2hPYmplY3QpIHsKCQkJZmxhc2hPYmplY3QudmFsdWUucmVwbGFjZSgvJmFtcDsvZywgJyYnKS5yZXBsYWNlKC8oW1xzXFNdKz8pPShbXHNcU10rPykoJnwkKS9nLCBmdW5jdGlvbiAobiwga2V5LCB2YWx1ZSkgewoJCQkJLy8g5Yip55So5q2j5YiZ55qE5om56YeP5pu/5o2i5Yqf6IO95oqT5Y+W5pWw5o2uIF5eCgkJCQlmbGFzaFZhcnMgW2tleV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpOwoJCQl9KTsKCQl9CgoJCXJldHVybiBmbGFzaFZhcnM7Cgl9LAoKCWdldEZpcnN0S2V5OiBmdW5jdGlvbiAob2JqKSB7CgkJcmV0dXJuIE9iamVjdC5rZXlzKG9iailbMF07Cgl9LAoJZ2V0Rmlyc3RWYWx1ZTogZnVuY3Rpb24gKG9iaikgewoJCXRyeSB7CgkJCXJldHVybiBvYmpbSC5nZXRGaXJzdEtleShvYmopXTsKCQl9IGNhdGNoIChlKSB7CgkJCXJldHVybiBudWxsOwoJCX0KCX0sCgoJZ2V0TGlua0V4dDogZnVuY3Rpb24gKHVybCkgewoJCXJldHVybiB1cmwubWF0Y2goLy4rXC8oPzpbXi5dKyhcLi4rPykpKD86XD98JCkvKVsxXTsKCX0sCgoJZ2V0TGlua0V4dEZyb21RdWVyeTogZnVuY3Rpb24gKHVybCkgewoJCWlmIChILmNvbnRhaW5zKHVybCwgJz8nKSkgewoJCQl2YXIgcGFydHMgPSBsaW5rMy5zbGljZShsaW5rMy5pbmRleE9mKCc/JykgKyAxKS5yZXBsYWNlKC9bXj1dKz89KC4rPygmfCQpKS9nLCAnJDEnKS5zcGxpdCgnJicpOwoJCQlmb3IgKHZhciBpID0gcGFydHMubGVuZ3RoLCBleHRzOyBpLS07ICkgewoJCQkJaWYgKGV4dHMgPSBwYXJ0c1tpXS5tYXRjaCgvXC4oPzpbYS16MC05XXsyLDl9KS8pKSB7CgkJCQkJcmV0dXJuIGV4dHNbMF07CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuIEguZ2V0TGlua0V4dCAodXJsKTsKCX0sCgoJcGFyc2VRdWVyeVN0cmluZzogZnVuY3Rpb24gKHJhd1VybCkgewoJCXZhciB1cmxQYXJhbXMgPSAoSC5jb250YWlucyAocmF3VXJsLCAnPycpCgkJCT8gcmF3VXJsLnNsaWNlIChyYXdVcmwuaW5kZXhPZignPycpICsgMSkKCQkJOiByYXdVcmwpLnNwbGl0KCcmJyk7CgoJCXZhciByZXQgPSB7fTsKCQlmb3IgKHZhciBpID0gMCwgcXVlcnlTdHIsIHBvc0VxdWFsOyBpIDwgdXJsUGFyYW1zLmxlbmd0aDsgaSsrKSB7CgkJCXF1ZXJ5U3RyID0gdXJsUGFyYW1zW2ldLnRvU3RyaW5nKCk7CgkJCXBvc0VxdWFsID0gcXVlcnlTdHIuaW5kZXhPZignPScpOwoJCQlpZiAocG9zRXF1YWwgPT0gLTEpIGNvbnRpbnVlOwoKCQkJcmV0W2RlY29kZVVSSUNvbXBvbmVudChxdWVyeVN0ci5zbGljZSAoMCwgcG9zRXF1YWwpKV0gPQoJCQkJZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5U3RyLnNsaWNlIChwb3NFcXVhbCArIDEpKTsKCQl9CgoJCXJldHVybiByZXQ7Cgl9LAoKCXdvcmRwcmVzc0F1ZGlvOiBmdW5jdGlvbiAoKSB7CgkJSC5sb2coJ1dvcmRQcmVzcyBBdWRpbyDmj5Lku7bpgJrnlKjku6PnoIEg5ZCv5YqoJyk7CgoJCXZhciBmaXhFbWJlZCA9IGZ1bmN0aW9uIChvYmopIHsKCQkJaWYgKG9iai50YWdOYW1lICE9ICdPQkpFQ1QnIHx8IG9iai5oYXNBdHRyaWJ1dGUoSC5zY3JpcHROYW1lKSkgcmV0dXJuOwoKCQkJdmFyIHNvbmdPYmogID0gSC5nZXRGbGFzaFZhcnMob2JqKTsKCQkJdmFyIHNvbmdBZGRyID0gSC5iYXNlNjREZWNvZGUoc29uZ09iai5zb3VuZEZpbGUpOwoJCQkkKCc8YT4nKS5odG1sKCfkuIvovb3jgIwnICsgc29uZ09iai50aXRsZXMgKyAn44CNPGJyPicpCgkJCQkuYXR0ciAoewoJCQkJCWhyZWY6IEgudXJpIChzb25nQWRkciwgc29uZ09iai50aXRsZXMgKyBzb25nQWRkci5zbGljZSgtNCkpLAoJCQkJCXRhcmdldDogJ19ibGFuaycKCQkJCX0pLmluc2VydEJlZm9yZSAob2JqKTsKCgkJCW9iai5zZXRBdHRyaWJ1dGUgKEguc2NyaXB0TmFtZSwgJ15eJyk7CgkJfTsKCgkJbmV3IE11dGF0aW9uT2JzZXJ2ZXIgKGZ1bmN0aW9uIChldmUpIHsKCQkJZm9yICh2YXIgaT0wOyBpPGV2ZS5sZW5ndGg7IGkrKykKCQkJCWlmIChldmVbaV0udGFyZ2V0LmNsYXNzTmFtZSA9PSAnYXVkaW9wbGF5ZXJfY29udGFpbmVyJyAmJiBldmVbaV0uYWRkZWROb2Rlcy5sZW5ndGgpCgkJCQkJZml4RW1iZWQoZXZlW2ldLmFkZGVkTm9kZXNbMF0pOwoJCX0pLm9ic2VydmUgKCQoJy5wb3N0ID4gLmVudHJ5JylbMF0sIHsKCQkJY2hpbGRMaXN0OiB0cnVlLAoJCQlzdWJ0cmVlOiB0cnVlCgkJfSk7CgoJCS8vIEZpcmVmb3ggZml4Li4gPSA9CgkJJCgnb2JqZWN0W2lkXj0iYXVkaW9wbGF5ZXJfIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHsgZml4RW1iZWQodGhpcyk7IH0pOwoJCUgubG9nKCdXb3JkUHJlc3MgQXVkaW8g5o+S5Lu26YCa55So5Luj56CBIOe7k+adnycpOwoJfSwKCgl3YWl0VW50aWw6IGZ1bmN0aW9uIChjaGVja0NvbmQsIGZDYWxsYmFjaywgblRpbWVPdXQsIG5UaW1lSW50ZXJ2YWwpIHsKCQlpZiAodHlwZW9mIGZDYWxsYmFjayAhPSAnZnVuY3Rpb24nKQoJCQkvLyBSZXF1aXJlZC4KCQkJcmV0dXJuIDsKCgkJaWYgKCdzdHJpbmcnID09IHR5cGVvZiBjaGVja0NvbmQgJiYgY2hlY2tDb25kLmluZGV4T2YgKCcuJykgIT09IC0xKSB7CgkJCWNoZWNrQ29uZCA9IGNoZWNrQ29uZC5zcGxpdCAoJy4nKTsKCQl9CgkJaWYgKGNoZWNrQ29uZCBpbnN0YW5jZW9mIEFycmF5KSB7CgkJCWNoZWNrQ29uZCA9IGZ1bmN0aW9uICh2YXJzKSB7CgkJCQlmb3IgKHZhciBpID0gMCwgciA9IHVuc2FmZVdpbmRvdzsgaSA8IHZhcnMubGVuZ3RoOyBpKyspIHsKCQkJCQlyID0gclt2YXJzW2ldXTsKCQkJCQlpZiAoIXIpCgkJCQkJCXJldHVybiA7CgkJCQl9CgoJCQkJcmV0dXJuIHRydWU7CgkJCX0uYmluZCAobnVsbCwgY2hlY2tDb25kLnNsaWNlKCkpOwoJCX07CgoJCXZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKCQkJaWYgKCdmdW5jdGlvbicgPT0gdHlwZW9mIGNoZWNrQ29uZCkgewoJCQkJdHJ5IHsKCQkJCQlpZiAoIWNoZWNrQ29uZCgpKSByZXR1cm47CgkJCQl9IGNhdGNoIChlKSB7CgkJCQkJLy8gTm90IHJlYWR5IHlldC4KCQkJCQlyZXR1cm4gOwoJCQkJfQoJCQl9IGVsc2UgaWYgKCdzdHJpbmcnID09IHR5cGVvZiBjaGVja0NvbmQpIHsKCQkJCWlmICh0eXBlb2YgKHVuc2FmZVdpbmRvd1tjaGVja0NvbmRdKSA9PSAndW5kZWZpbmVkJykKCQkJCQlyZXR1cm4gOwoJCQl9CgkJCWNsZWFySW50ZXJ2YWwodGltZXIpOwoJCQl0cnkgewoJCQkJZkNhbGxiYWNrLmNhbGwodGhpcyk7CgkJCX0gY2F0Y2ggKGUpIHsKCQkJCUguZXJyb3IgKCdbSC53YWl0VW50aWxdIENhbGxiYWNrIGZvciAlcyBoYWQgYW4gZXJyb3I6ICVzJywgSC52ZXJzaW9uLCBlLm1lc3NhZ2UpOwoJCQl9CgkJfSwgblRpbWVJbnRlcnZhbCB8fCAxNTApOwoKCQkvLyDlpoLmnpwgblRpbWVPdXQg55qE5Lyg5YWl5YC85Li6IHRydWUsIOWImeaXoOmZkOWItuetieW+hS4KCQlpZiAoblRpbWVPdXQgIT09IHRydWUpIHsKCQkJc2V0VGltZW91dCAoZnVuY3Rpb24gKCkgewoJCQkJLy8gVGltZW91dAoJCQkJY2xlYXJJbnRlcnZhbCh0aW1lcik7CgkJCX0sIG5UaW1lT3V0IHx8IDEwMDAwKTsKCQl9Cgl9LAoKCW1ha2VGaW5lQ3NzOiBmdW5jdGlvbiAobmFtZSwgcGFyYW0pIHsKCQl2YXIgcmV0ID0ge307CgkJcmV0W25hbWVdID0gcGFyYW07CgkJWydtb3onLCAnd2Via2l0J10uZm9yRWFjaCAoZnVuY3Rpb24gKGUpIHsKCQkJcmV0WyctJyArIGUgKyAnLScgKyBuYW1lXSA9IHBhcmFtOwoJCX0pOwoJCXJldHVybiByZXQ7Cgl9LAoKCW1ha2VEZWxheUNzczogZnVuY3Rpb24gKHRyYW5zaXRpb25UZXh0KSB7CgkJcmV0dXJuIEgubWFrZUZpbmVDc3MoJ3RyYW5zaXRpb24nLCB0cmFuc2l0aW9uVGV4dCB8fCAnYWxsIC4ycycpOwoJfSwKCgltYWtlUm90YXRlQ3NzOiBmdW5jdGlvbiAoZGVnKSB7CgkJcmV0dXJuIEgubWFrZUZpbmVDc3MoJ3RyYW5zZm9ybScsICdyb3RhdGUoJyArIChkZWcgfHwgMTgwKSArICdkZWcpJyk7Cgl9LAoKCWNyZWF0ZU51bVBhZDogZnVuY3Rpb24gKG1heExlbiwgdGFyZ2V0SW5wdXQsIGZpbmlzaENhbGxiYWNrLCBjb2RlUmVzZXRDYWxsYmFjaykgewoJCWlmICghY29kZVJlc2V0Q2FsbGJhY2spCgkJCWNvZGVSZXNldENhbGxiYWNrID0gZUZ1bmM7CgoJCXZhciB0YWJsZSA9IGNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyksCgkJCXJjZGUgPSAkKHRhcmdldElucHV0KVswXTsKCQkkKHRhYmxlKS5jc3MoewoJCQknYmFja2dyb3VuZC1jb2xvcic6ICcjZmZjYzk5JywKCQkJJ3Bvc2l0aW9uJzogJ3JlbGF0aXZlJywKCQkJJ2JvdHRvbSc6ICcxNjRweCcsCgkJCSdsZWZ0JzogJzE3MHB4JwoJCX0pOwoJCWZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7CgkJCXZhciB0ciA9IGNyZWF0ZUVsZW1lbnQoJ3RyJyk7CgkJCWZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7CgkJCQl2YXIgdGQgPSBjcmVhdGVFbGVtZW50KCd0ZCcpOwoJCQkJdGQuaW5uZXJIVE1MID0gJCh0ZCkuYXR0cignaycsICcxMjM0NTY3ODlDMOKGkCdbaSAqIDMgKyBqXSkuYXR0cignaycpOwoJCQkJdHIuYXBwZW5kQ2hpbGQodGQpOwoJCQl9CgkJCXRhYmxlLmFwcGVuZENoaWxkKHRyKTsKCQl9CgkJJCh0YWJsZSkuZmluZCgndGQnKS5jbGljayhmdW5jdGlvbiAoKSB7CgkJCXZhciB2YWwgPSByY2RlLnZhbHVlLAoJCQkJbGVuID0gdmFsLmxlbmd0aCwKCQkJCWtleSA9ICQodGhpcykuYXR0cignaycpIHx8ICcnOwoJCQkkKHJjZGUpLmZvY3VzKCk7CgoJCQlzd2l0Y2ggKGtleSkgewoJCQkJY2FzZSAn4oaQJzoKCQkJCQlyY2RlLnZhbHVlID0gdmFsLnNsaWNlKDAsIC0xKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJ0MnOgoJCQkJCXJjZGUudmFsdWUgPSAnJzsKCQkJCQljb2RlUmVzZXRDYWxsYmFjayAoKTsKCQkJCQlicmVhazsKCQkJCWRlZmF1bHQ6CgkJCQkJcmNkZS52YWx1ZSArPSBrZXk7CgkJCQkJbGVuICsrOwoJCQkJCWlmIChsZW4gPj0gbWF4TGVuKSB7CgkJCQkJCWlmIChmaW5pc2hDYWxsYmFjayhyY2RlLnZhbHVlKSkgewoJCQkJCQkJJCh0YWJsZSkuaGlkZSgpOwoJCQkJCQl9IGVsc2UgewoJCQkJCQkJY29kZVJlc2V0Q2FsbGJhY2soKTsKCQkJCQkJCXJjZGUudmFsdWUgPSAnJzsKCQkJCQkJfQoJCQkJCX0KCQkJCQlicmVhazsKCQkJfQoJCX0pLmNzcyh7CgkJCWZvbnQ6ICdib2xkIDI1cHggVGFob21hJywKCQkJY29sb3I6ICdyZWQnLAoJCQljdXJzb3I6ICdwb2ludGVyJywKCQkJdmVydGljYWxBbGlnbjogJyBtaWRkbGUnLAoJCQl0ZXh0QWxpZ246ICcgY2VudGVyJywKCQkJYm9yZGVyOiAnMXB4IHNvbGlkICNEREREREQnLAoJCQlwYWRkaW5nOiAnNnB4JywKCQkJd2lkdGg6ICc0MHB4JywKCQkJaGVpZ2h0OiAnNDBweCcKCQl9KTsKCQlyZXR1cm4gdGFibGU7Cgl9LAoJcmVEaXJXaXRoUmVmOiBmdW5jdGlvbiAodGFyZ2V0VXJsKSB7CgkJaWYgKCF0YXJnZXRVcmwpIHJldHVybiA7CgkJSC5pbmZvICgnUmVkaXJlY3QgdG8gJXMuLi4nLCB0YXJnZXRVcmwpOwoJCQoJCXZhciBsaW5rID0gJCgnPGE+JykKCQkJLmF0dHIoJ2hyZWYnLCB0YXJnZXRVcmwpCgkJCS50ZXh0KCfmraPlnKjot7PovawgWycgKyB0YXJnZXRVcmwgKyAnXSwg6K+356iN5ZCOLi4gJykKCQkJLnByZXBlbmRUbyhkb2N1bWVudC5ib2R5KQoJCQkuY3NzICh7Zm9udFNpemU6IDEyLCBjb2xvcjogJ2luaGVyaXQnfSk7CgkJCgkJbGlua1swXS5jbGljaygpOwoJCXJldHVybiB0cnVlOwoJfSwKCgkvLyDnvZHnm5jlnLDlnYDoh6rliqjlr7zlkJEgW+WfuuS6jiBwaHBEaXNrIOeahOe9keebmF0KCXBocERpc2tBdXRvUmVkaXI6IGZ1bmN0aW9uIChmQ2FsbGJhY2spewoJCWlmICghZkNhbGxiYWNrKSB7CgkJCWZDYWxsYmFjayA9IGRvY3VtZW50LmJvZHkgPyBILnJlRGlyV2l0aFJlZiA6IGZ1bmN0aW9uIChwKSB7CgkJCQlILndhaXRVbnRpbCgnZG9jdW1lbnQuYm9keScsIEgucmVEaXJXaXRoUmVmLmJpbmQobnVsbCwgcCkpOwoJCQl9OwoJCX0KCgkJdmFyIHJDaGVja1BhdGggPSAvXC8oZmlsZSk/KGZpbGV8dmlldykoW1wvLlwtX10uKikvOwoJCS8vIEJlY2F1c2UgbG9jYXRpb24ueHggPSB4eCBkb2VzIG5vdCBwYXNzIHRoZSByZWZlciwgc28gd2UncmUgZ29pbmcgdG8gbWFrZSBhIGR1bW15IGZvcm0uCgkJaWYgKHJDaGVja1BhdGgudGVzdCAobG9jYXRpb24ucGF0aG5hbWUpKSB7CgkJCWZDYWxsYmFjayAobG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSAockNoZWNrUGF0aCwgJy8kMWRvd24kMycpKTsKCQl9IGVsc2UgaWYgKEguYmVnaW5XaXRoKGxvY2F0aW9uLnBhdGhuYW1lLCAnL3ZpZXdmaWxlJykpIHsKCQkJZkNhbGxiYWNrIChsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKCcvdmlld2ZpbGUnLCAnL2Rvd25sb2FkJykpOwoJCX0gZWxzZSB7IHJldHVybiBmYWxzZTsgfQoKCQlyZXR1cm4gdHJ1ZTsKCX0sCgoJLy8g5o+S5YWl5qC35byP6KGoCglpbmplY3RTdHlsZTogZnVuY3Rpb24gKCkgewoJCXZhciBzdHlsZUJsb2NrID0gKHRoaXMgJiYgdGhpcy50YWdOYW1lID09ICdTVFlMRScpID8gdGhpcyA6IChILnN0eWxlQmxvY2sgfHwgY3JlYXRlRWxlbWVudCgnc3R5bGUnKSk7CgkJc3R5bGVCbG9jay50ZXh0Q29udGVudCArPSBbXS5qb2luLmNhbGwoYXJndW1lbnRzLCAnXG4nKTsKCQlILnN0eWxlQmxvY2sgPSBzdHlsZUJsb2NrOwoJCWRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVCbG9jayk7CgkJcmV0dXJuIHN0eWxlQmxvY2s7Cgl9LAoKCS8vIOW8uuWItumakOiXjy/mmL7npLrmn5DkupvlhYPntKAKCWZvcmNlSGlkZTogZnVuY3Rpb24gKCkgewoJCXJldHVybiBILmluamVjdFN0eWxlLmNhbGwgKHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKS5qb2luICgnLCAnKSArICd7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudCB9JyAgKTsKCX0sCglmb3JjZVNob3c6IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gSC5pbmplY3RTdHlsZS5jYWxsICh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykuam9pbiAoJywgJykgKyAneyBkaXNwbGF5OiBibG9jayAhaW1wb3J0YW50IH0nICk7Cgl9LAoJLy8g5by65Yi26ZqQ6JeP5qGG5p62Cglmb3JjZUhpZGVGcmFtZXM6IGZ1bmN0aW9uICgpewoJCXJldHVybiBmb3JjZUhpZGUoJ2lmcmFtZSwgZnJhbWVzZXQsIGZyYW1lJyk7Cgl9LAoKCS8vIOmAmueUqCBqUGxheWVyIOazqOWFpQoJalBsYXllclBhdGNoZXI6IGZ1bmN0aW9uIChjYWxsYmFjaywgbmFtZXNwYWNlKSB7CgkJLy8g6buY6K6k5Li6IGpQbGF5ZXIKCQlpZiAoIW5hbWVzcGFjZSkgbmFtZXNwYWNlID0gJ2pQbGF5ZXInOwoKCQlILmluZm8gKCfnrYnlgJkgalBsYXllciDlsLHnu6ogLi4nKTsKCQlILndhaXRVbnRpbCgnJC4nICsgbmFtZXNwYWNlICsgJy5wcm90b3R5cGUuc2V0TWVkaWEnLCBmdW5jdGlvbiAoKSB7CgkJCUguaW5mbyAoJ+W8gOWni+e7keWumuWHveaVsCAuLicpOwoJCQl1bnNhZmVPdmVyd3JpdGVGdW5jdGlvblNhZmVQcm94eSAoewoJCQkJc2V0TWVkaWE6IGZ1bmN0aW9uIChuZXdNZWRpYSkgewoJCQkJCUguaW5mbyAoJ+atjOabsuaVsOaNrjogJywgbmV3TWVkaWEpOwoJCQkJCWNhbGxiYWNrIChuZXdNZWRpYSk7CgkJCQkJdGhyb3cgbmV3IEVycm9yVW5zYWZlU3VjY2VzcygpOwoJCQkJfQoJCQl9LCB1bnNhZmVXaW5kb3cuJFtuYW1lc3BhY2VdLnByb3RvdHlwZSwgJy4kLicgKyBuYW1lc3BhY2UgKyAnLnByb3RvdHlwZScpOwoJCQlILmluZm8gKCfnu5Hlrprlrozmr5UsIGVuam95ficpOwoJCX0pOwoJfSwKCglmaXhTdHlsZU9yZGVyOiBmdW5jdGlvbiAoZWxTdHlsZSkgewoJCSQoJ2hlYWQnKS5hcHBlbmQgKGVsU3R5bGUpOwoJfSwKCgkvLyBGaXNoZXItWWF0ZXMgU2h1ZmZsZSBieSBjb21tdW5pdHkgd2lraSg/KQoJLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjI3NDM5OAoJc2h1ZmZsZTogZnVuY3Rpb24gKGFycmF5KSB7CgkJdmFyIGNvdW50ZXIgPSBhcnJheS5sZW5ndGgsIHRlbXAsIGluZGV4OwoKCQkvLyBXaGlsZSB0aGVyZSBhcmUgZWxlbWVudHMgaW4gdGhlIGFycmF5CgkJd2hpbGUgKGNvdW50ZXIgPiAwKSB7CgkJCS8vIFBpY2sgYSByYW5kb20gaW5kZXgKCQkJaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb3VudGVyKTsKCgkJCS8vIERlY3JlYXNlIGNvdW50ZXIgYnkgMQoJCQljb3VudGVyLS07CgoJCQkvLyBBbmQgc3dhcCB0aGUgbGFzdCBlbGVtZW50IHdpdGggaXQKCQkJdGVtcCA9IGFycmF5W2NvdW50ZXJdOwoJCQlhcnJheVtjb3VudGVyXSA9IGFycmF5W2luZGV4XTsKCQkJYXJyYXlbaW5kZXhdID0gdGVtcDsKCQl9CgoJCXJldHVybiBhcnJheTsKCX0KfSk7CgovLyDnroDljZXlsY/olL3lub/lkYoKdW5zYWZlV2luZG93LmFudGlhZHN2MiA9IDA7CnVuc2FmZURlZmluZUZ1bmN0aW9uICgnQ05aWl9BRF9CQVRDSCcsIGZ1bmN0aW9uICgpIHt9KTsKCi8vIOepuueZveWHveaVsCwg6YCC5ZCI6IW+56m66aG16Z2i5Ye95pWw44CCCnZhciBlRnVuYyA9IGZ1bmN0aW9uICgpIHt9LAoJdEZ1bmMgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyAgfSwKCWZGdW5jID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH07Cgp2YXIgJF9HRVQgPSBILnBhcnNlUXVlcnlTdHJpbmcgKEguY3VycmVudFVybCk7CgpILmxvZyAoJ+iEmuacrOW8gOWni+aJp+ihjOOAgicpOwpILmxvZyAoJ+Wfn+WQjTogJXM7IOWujOaVtOWcsOWdgDogJXM7IOivt+axguWPguaVsDogJXMnLCBILmRpcmVjdEhvc3QsIEguY3VycmVudFVybCwgSlNPTi5zdHJpbmdpZnkgKCRfR0VUKSk7CkgubG9nICgn6ISa5pys54mI5pysIFsgJXMgXSAsIOWmguaenOWPkeeOsOiEmuacrOmXrumimOivt+aPkOS6pOWIsCBbICVzIF0g6LCi6LCi44CCJywgSC52ZXJzaW9uLCBILnJlcG9ydFVybCk7CgoKCXZhciBzaXRlcyA9IFsgLyogQ29tcGlsZWQgZnJvbSBBQS5jb25maWcuanMgKi8KewoJaWQ6ICdpbnRlcm5hbC5jb25maWcnLAoJbmFtZTogJ+iEmuacrOmFjee9rumhtemdoicsCglob3N0OiBbJ2xvY2FsaG9zdCcsICdqaXh1bm1vZS5naXRodWIuaW8nXSwKCXBhdGg6IFsnL2NvbmYvJywgJy9jdXdjbDRjL2NvbmZpZy8nXSwKCglvblN0YXJ0OiBmdW5jdGlvbiAoKSB7CgkJdW5zYWZlV2luZG93LnJTY3JpcHRWZXJzaW9uID0gSC52ZXJzaW9uOwoJCXVuc2FmZVdpbmRvdy5yU2NyaXB0Q29uZmlnICA9IEpTT04uc3RyaW5naWZ5IChILmNvbmZpZyk7CgkJSC5pbmZvIChILmNvbmZpZyk7CgoJCXZhciBfYyA9IGNvbmZpcm07CgkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAoJ1NhdmVDb25maWcnLCBmdW5jdGlvbiAoZSkgewoJCQl0cnkgewoJCQkJdmFyIGNvbmZpZyA9IEpTT04uc3RyaW5naWZ5IChKU09OLnBhcnNlIChlLmRldGFpbCkpOwoJCQkJaWYgKF9jIChILnNwcmludGYgKCfnoa7lrprlgqjlrZjorr7lrproh7MgJXM/JywgSC5zY3JpcHROYW1lKSkpCgkJCQkJR01fc2V0VmFsdWUgKEguc2NyaXB0TmFtZSwgY29uZmlnKTsKCQkJfSBjYXRjaCAoZSkgewoJCQkJYWxlcnQgKCfop6PmnpDorr7lrprlgLzlh7rplJkhJyk7CgkJCX0KCQl9KTsKCX0sCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKICAgICAgICBILmNhcHR1cmVBcmlhKGRvY3VtZW50LmJvZHkpOwoJfQp9CiwKLyogQ29tcGlsZWQgZnJvbSBhcGkubXVzaWMuc3B5LmpzICovCi8qKgogKiDnrKzkuInmlrkgLSAi6Z+z5LmQ6Ze06LCNIiDop6PmnpDmjqXlj6MKICogVFlQRV9TVUJfTU9EVUxFCiAqLwooewoJaWQ6ICdhcGkubXVzaWMuc3B5JywKCglzdG9yYWdlS2V5OiAnX01VU0lDX1NQWScsCglyZWxvYWRDYWNoZTogdHJ1ZSwKCgkvLyDliJ3lp4vljJbnm5HlkKzkuovku7YKCWluaXQ6IGZ1bmN0aW9uICgpIHsKCQl2YXIgc2VsZiA9IHRoaXM7CgoJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgZnVuY3Rpb24gKGUpIHsKCQkJc3dpdGNoIChlLmtleSkgewoJCQkJY2FzZSBzZWxmLnN0b3JhZ2VLZXk6CgkJCQkJc2VsZi5yZWxvYWRDYWNoZSA9IHRydWU7CgkJCQkJYnJlYWs7CgkJCX0KCQl9LCBmYWxzZSk7CgoJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoSC5zY3JpcHROYW1lICsgJy1ORS1TUFknLCBmdW5jdGlvbiAoZSkgewoJCQl2YXIgZGF0YSA9IEpTT04ucGFyc2UoZS5kZXRhaWwpOwoJCQl2YXIgaWQgPSBkYXRhLmlkOwoJCQlzZWxmLmdldE5ldEVhc2UoaWQsIHVuc2FmZVdpbmRvd1tkYXRhLmNhbGxiYWNrXSk7CgkJfSk7Cgl9LAoKCS8vIOi/m+ihjOe8k+WtmOmHjei9vQoJZG9SZWxvYWRDYWNoZTogZnVuY3Rpb24gKCkgewoJCXRyeSB7CgkJCXRoaXMuY2FjaGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVt0aGlzLnN0b3JhZ2VLZXldKTsKCQl9IGNhdGNoIChleCkgewoJCQl0aGlzLmNhY2hlID0ge307CgkJfQoKCQl0aGlzLnJlbG9hZENhY2hlID0gZmFsc2U7Cgl9LAoKCS8vIOivu+WFpee8k+WtmAoJY2FjaGVSZWFkOiBmdW5jdGlvbiAoc29uZ0lkKSB7CgkJaWYgKHRoaXMucmVsb2FkQ2FjaGUpCgkJCXRoaXMuZG9SZWxvYWRDYWNoZSgpOwoKCQlpZiAoIXRoaXMuY2FjaGUuaGFzT3duUHJvcGVydHkoc29uZ0lkKSkKCQkJcmV0dXJuIG51bGw7CgoJCXJldHVybiB0aGlzLmNhY2hlW3NvbmdJZF07Cgl9LAoKCS8vIOWCqOWtmOe8k+WtmAoJY2FjaGVTYXZlOiBmdW5jdGlvbiAoKSB7CgkJbG9jYWxTdG9yYWdlW3RoaXMuc3RvcmFnZUtleV0gPSBKU09OLnN0cmluZ2lmeSh0aGlzLmNhY2hlKTsKCX0sCgoJLy8g5YWs5byA5o6l5Y+jOiDojrflj5bpu4TmmJPnmoTpn7PkuZDlnLDlnYAKCS8vIOS8mOWFiOivu+WPlue8k+WtmCwg6Ziy5q2i6KKr5p+l5p2ACglnZXROZXRFYXNlOiBmdW5jdGlvbiAoc29uZ0lkLCBjYWxsYmFjaykgewoJCXZhciBzZWxmID0gdGhpczsKCgkJdmFyIGNhY2hlU29uZyA9IHRoaXMuY2FjaGVSZWFkKHNvbmdJZCk7CgkJaWYgKGNhY2hlU29uZykgewoJCQljYWxsYmFjayhjYWNoZVNvbmcudXJsKTsKCQkJcmV0dXJuIDsKCQl9CgoJCUdNX3htbGh0dHBSZXF1ZXN0KHsKCQkJbWV0aG9kOiAiR0VUIiwKCQkJdXJsOiAnaHR0cDovL2l0d3VzdW4uY29tL3NlYXJjaC93eS8nICsgc29uZ0lkICsgJz9wPTEmZj1qc29uJnNpZ249aXR3dXN1bicsCgkJCW9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKCQkJCS8vIOino+aekOaVsOaNrgoJCQkJdmFyIGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7CgkJCQlpZiAoZGF0YS5sZW5ndGggPT09IDApIHsKCQkJCQljYWxsYmFjayhudWxsKTsKCQkJCQlyZXR1cm4gOwoJCQkJfQoKCQkJCS8vIOeOsOWcqOWwneivleivu+WPluatjOabsuaVsOaNrgoJCQkJdmFyIHNvbmcgPSBkYXRhLmZpbHRlcihmdW5jdGlvbiAoc29uZykgewoJCQkJCXJldHVybiBzb25nLlR5cGUgPT0gInd5IiAmJiBzb25nLlNvbmdJZCA9PSBzb25nSWQ7CgkJCQl9KS5wb3AoKTsKCgkJCQkvLyDmsqHmnInmib7liLAKCQkJCWlmICghc29uZykgewoJCQkJCWNhbGxiYWNrKG51bGwpOwoJCQkJCXJldHVybiA7CgkJCQl9CgoJCQkJLy8g5LyY5YWI6I635Y+W6auY5riF6Z+z6LSoCgkJCQl2YXIgdXJsID0gc29uZy5TcVVybCB8fCBzb25nLkhxVXJsIHx8IHNvbmcuTHFVcmw7CgoJCQkJLy8g5YKo5a2YCgkJCQl2YXIgc29uZ09iaiA9IHsKCQkJCQl0aW1lOiBEYXRlLm5vdygpLAoJCQkJCXVybDogdXJsLAoJCQkJfTsKCgkJCQlzZWxmLmNhY2hlW3NvbmdJZF0gPSBzb25nT2JqOwoJCQkJc2VsZi5jYWNoZVNhdmUoKTsKCQkJCWNhbGxiYWNrKHVybCk7CgkJCX0KCQl9KTsKCX0KfSksCi8qIENvbXBpbGVkIGZyb20gZGwuMTE5Zy5qcyAqLwp7CglpZDogJ2RsLjExOWcnLAoJbmFtZTogJzExOWcg572R55uYJywKCWhvc3Q6IFsnZC4xMTlnLmNvbSddLAoJbm9TdWJIb3N0OiB0cnVlLAoKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQlpZiAoSC5iZWdpbldpdGggKGxvY2F0aW9uLnBhdGhuYW1lLCAnL2YvJykgJiYgIUguY29udGFpbnMgKGxvY2F0aW9uLnBhdGhuYW1lLCAnX2JhaycpKSB7CgkJCWxvY2F0aW9uLnBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvKF8uKyk/XC4vLCAnX2Jhay4nKTsKCQl9Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gZGwuMTIzNTY0LmpzICovCnsKCWlkOiAnZGwuMTIzNTY0JywKCW5hbWU6ICcxMjM1NjQg572R55uYJywKCWhvc3Q6IFsnMTIzNTY0LmNvbScsICdtLjEyMzU2NC5jb20nXSwKCW5vU3ViSG9zdDogdHJ1ZSwKCgljc3M6ICcuYWQxe2hlaWdodDoxcHggIWltcG9ydGFudH0nLAoJaGlkZTogWycjbG9hZGluZycsICcjeXptJ10sCglzaG93OiAnI2Rvd25sb2FkJywKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQl1bnNhZmVXaW5kb3cua2lsbHBhbmFkcyA9IDE7Cgl9LAoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJJCgnI2Rvd25sb2FkID4gYScpLmNsaWNrKCk7Cgl9Cn0KLAovKiBDb21waWxlZCBmcm9tIGRsLjV4ZmlsZS5qcyAqLwovKioKICogNXhmaWxlLmNvbQogKiAgIOS6lOaYn+e9keebmCAoPykKICovCih7CglpZDogJ2RsLjV4ZmlsZScsCgluYW1lOiAn5LqU5pif572R55uYJywKCWhvc3Q6IFsnd3d3LjV4ZmlsZS5jb20nXSwKCW5vU3ViSG9zdDogdHJ1ZSwKCgloaWRlOiBbCgkJJy5mYl9yJywgJ2lmcmFtZScsICdbaWRePSJfXyJdJywgJyNhZGRyX2JveCcKCV0sCgoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCXVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5ICh7CgkJCW9wZW46IHRGdW5jCgkJfSk7CgkJSC5waHBEaXNrQXV0b1JlZGlyICgpOwoJfSwKCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKCQl2YXIgZmlsZSA9IGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9cZCsvKTsKCQl1bnNhZmVFeGVjKGZ1bmN0aW9uIChmaWQpIHsKCQkJaWYgKHR5cGVvZiBsb2FkX2Rvd25fYWRkcjEgPT0gJ2Z1bmN0aW9uJykKCQkJCWxvYWRfZG93bl9hZGRyMShmaWQpOwoJCX0sIGZpbGVbMF0pOwoJfQp9KSwKLyogQ29tcGlsZWQgZnJvbSBkbC43OTU4LmpzICovCnsKCWlkOiAnZGwuNzk1OCcsCgluYW1lOiAn5Y2D5Yab5LiH6ams572R55uY57O75YiXJywKCWhvc3Q6IFsnNzk1OC5jb20nLCAncWp3bS5jb20nXSwKCWhpZGU6IFsKCQknI2Rvd250YycsICdbaWRePSJjcHJvXyJdJywgJy5kb3dubG9hZF9hbGVydCcsICcjaW5wdXR5em0nLAoJCScjaG91c2UnLCAnI3VwdG93bicsICdhW2hyZWYkPSJtb25leS5odG1sIl0nLCAnYVtocmVmJD0icmVnLmh0bWwiXScKCV0sCglzaG93OiBbJyNkb3dudGMyJywgJy5uZXdfZG93biddLAoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJaWYgKEguY29udGFpbnMgKGxvY2F0aW9uLnBhdGhuYW1lLCAnZG93bl8nKSkgewoJCQlsb2NhdGlvbi5wYXRobmFtZSA9IGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoJ18nLCAnbG9hZF8nKTsKCQl9CgoJCUgud2FpdFVudGlsKCdhdXRoYWQnLCBmdW5jdGlvbiAoKSB7CgkJCXVuc2FmZURlZmluZUZ1bmN0aW9uICgnYXV0aGFkJywgdEZ1bmMpOwoJCX0pOwoJfQp9LAovKiBDb21waWxlZCBmcm9tIGRsLjlwYW4uanMgKi8KewoJaWQ6ICdkbC45cGFuJywKCW5hbWU6ICc555uYJywKCWhvc3Q6ICd3d3cuOXBhbi5uZXQnLAoKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQlpZiAoIC9cL1xkLy50ZXN0ICggbG9jYXRpb24ucGF0aG5hbWUgKSApIHsKCQkJbG9jYXRpb24ucGF0aG5hbWUgPSBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlICgnLycsICcvZG93bi0nKTsKCQl9Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gZGwuYmFpZHUuanMgKi8KewoJaWQ6ICdkbC5iYWlkdScsCgluYW1lOiAn55m+5bqm55uY5YWN5LiL6L29566h5a62JywKCWhvc3Q6IFsneXVuLmJhaWR1LmNvbScsICdwYW4uYmFpZHUuY29tJ10sCgoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJSC53YWl0VW50aWwgKCdyZXF1aXJlJywgZnVuY3Rpb24gKCkgewoJCQl1bnNhZmVFeGVjIChmdW5jdGlvbiAoKSB7CgkJCQl2YXIgc2VydmljZSA9IHJlcXVpcmUoJ2Rpc2stc3lzdGVtOndpZGdldC9wbHVnaW4vZG93bmxvYWQvdXRpbC9kb3dubG9hZENvbW1vblV0aWwuanMnKTsKCQkJCXNlcnZpY2UuaXNQbGF0Zm9ybVdpbmRvd3MgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTsKCQkJfSk7CgkJfSk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gZGwuYngwNjM1LmpzICovCnsKCWlkOiAnZGwuYngwNjM1JywKCW5hbWU6ICfmmrTpm6rnm5gnLAoJaGlkZTogJyNiMj46bm90KCNkb3duX2JveCksIC50aXQgKyBkaXYsIC5jbGVhcitkaXYsIC5sb2dvX3InLAoJaG9zdDogJ2J4MDYzNS5jb20nLAoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCXVuc2FmZVdpbmRvdy5vcGVuID0gbnVsbDsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBkbC5jb2xhZmlsZS5qcyAqLwp7CglpZDogJ2RsLmNvbGFmaWxlJywKCW5hbWU6ICflj6/kuZDnm5gnLAoJaG9zdDogWydjb2xheXVuLmNvbScsICdjb2xhZmlsZS5jb20nLCAnY29sYWRyaXZlLmNvbSddLAoJaGlkZTogWwoJCScudGFibGVfcmlnaHQnLCAnI2Rvd25fbGluazMnLCAnLnR1aScsICcuYWQxID4gLmFkMSA+ICo6bm90KC5kb3duYm94KScsCgoJCS8vIOiuoeaXtuS4i+i9vemhteeahOW5v+WRigoJCScuaG90cmVjLWVsZScsICcudmlld3NoYXJlLWNvcHktb3V0ZXInCgldLAoJZ2VuRGlnaXQ6IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAyNTUpOwoJfSwKCWdlblZhbGlkSXA6IGZ1bmN0aW9uICgpIHsKCQlyZXR1cm4gWzAsMCwwLDBdLm1hcCh0aGlzLmdlbkRpZ2l0KS5qb2luKCcuJyk7Cgl9LAoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJdmFyIGZpbGVfaWQgPSBsb2NhdGlvbi5wYXRobmFtZS5tYXRjaCgvXGQrLylbMF07CgoJCSQuYWpheCh7CgkJCXVybDogJy8vJyArIGxvY2F0aW9uLmhvc3RuYW1lICsgJy9hamF4LnBocD9hY3Rpb249ZG93bmFkZHJlc3MmZmlsZV9pZD0nICsgZmlsZV9pZCwKCQkJaGVhZGVyczogewoJCQkJJ1gtRm9yd2FyZGVkLUZvcic6IHRoaXMuZ2VuVmFsaWRJcCgpCgkJCX0sCgkJCWRhdGFUeXBlOiAndGV4dCcKCQl9KS5zdWNjZXNzIChmdW5jdGlvbiAocikgewoJCQl2YXIgJGRsID0gci5tYXRjaCAoL2Rvd25sb2FkRmlsZVwoIiguKz8pIi8pWzFdLnJlcGxhY2UoJy9kbC5waHAnLCAnL3RkLnBocCcpOwoJCQl2YXIgbGlua1RleHQgPSBILnNwcmludGYoJyVzIOS4k+eUqOS4i+i9vScsIEguc2NyaXB0TmFtZSk7CgoJCQkvLyDmlrDniYgKCQkJJCgnPGE+JykuYWRkQ2xhc3MgKCduZXctZGJ0bicpCgkJCQkuYXR0ciAoJ2hyZWYnLCAkZGwpCgkJCQkuYXBwZW5kICgkKCc8ZW0+JykuYWRkQ2xhc3MgKCdpY29uLWRvd25sb2FkJykpCgkJCQkuYXBwZW5kICgkKCc8Yj4nKS50ZXh0IChsaW5rVGV4dCkpCgkJCQkuYXBwZW5kVG8gKCQoJy5zbGlkZS1oZWFkZXItZnVuY3MnKSk7CgoJCQkvLyDml6fniYgKCQkJJCgnPGE+JykuYWRkQ2xhc3MgKCdidXR0b24gYnRuLWdyZWVuJykKCQkJCS5hdHRyICgnaHJlZicsICRkbCkKCQkJCS5hcHBlbmQgKCQoJzxpPicpLmFkZENsYXNzICgnaWNvbicpKQoJCQkJLmFwcGVuZCAobGlua1RleHQpCgkJCQkuYXBwZW5kVG8gKCQoJyNkb3duX3ZlcmlmeV9ib3ggPiBsaScpKQoJCQkJLmNzcyAoewoJCQkJCXdpZHRoOiAzMDAsCgkJCQkJbWFyZ2luOiAnMmVtIDAnCgkJCQl9KTsKCQl9KTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBkbC5jdGRpc2suanMgKi8KewoJaWQ6ICdkbC5jdGRpc2snLAoJbmFtZTogJ+WfjumAmue9keebmOezu+WIlycsCglob3N0OiBbCgkJJzQwMGdiLmNvbScsICdjdGRpc2suY29tJywgJ3BpcGlwYW4uY29tJywgJ2JlZ28uY2MnLAoJCSdjdGZpbGUuY29tJywgJ3QwMHkuY29tJwoJXSwKCXBhdGg6ICcvZmlsZS8nLAoJaGlkZTogWycuY2FwdGNoYScsICcua2tfeHNob3cnLCAnZGl2LnNwYW42OmZpcnN0LWNoaWxkJywgJyN0b3AgPiAuYWxlcnQnXSwKCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKCQkvLyBGaXggQW50aS1BQlAgYXMgaXQgZG9lc24ndCBjaGVjayB0aGUgY29kZS4KCQlILndhaXRVbnRpbCAoJ2d1ZXN0dmlld2Noa2Zvcm0nLCBmdW5jdGlvbiAoKSB7CgkJCXVuc2FmZUV4ZWMoZnVuY3Rpb24gKCkgewoJCQkJd2luZG93Lmd1ZXN0dmlld2Noa2Zvcm0gPSBmdW5jdGlvbiAoZm9ybSkgewoJCQkJCXJldHVybiBmb3JtLnJhbmRjb2RlICYmIGZvcm0ucmFuZGNvZGUudmFsdWUubGVuZ3RoID09IDQ7CgkJCQl9OwoJCQl9KTsKCQl9KTsKCgkJdmFyIGtleUZvcm0gPSBkb2N1bWVudC51c2VyX2Zvcm07CgkJdmFyICRrZiA9ICQoa2V5Rm9ybSk7CgkJCgkJdHJ5IHsKCQkJa2V5Rm9ybS5oYXNoX2tleS52YWx1ZSA9IEguYmFzZTY0RGVjb2RlKGtleUZvcm0uaGFzaF9pbmZvLnZhbHVlKTsKCQl9IGNhdGNoIChlKSB7CgkJCUguaW5mbyAoJ+e8uuWkseaIluaXoOaViOeahCBoYXNoX2tleSDlsZ7mgKflgLwsIOi3s+i/h+KApicpOwoJCX0KCgkJJGtmLmF0dHIoJ2FjdGlvbicsICRrZi5hdHRyKCdhY3Rpb24nKS5yZXBsYWNlKC8oVilcZC9pLCAnJDEyJykpOwoKCQkkKCcuY2FwdGNoYV9yaWdodCcpLmNzcygnZmxvYXQnLCAnbGVmdCcpOwoJCQoJCS8qIOWfjumAmueOsOWcqOeahOmqjOivgeeggeaYr+a3t+WQiOaVsOWtl+OAgeWtl+avjQoJCSQoJyN2ZmNvZGU6Zmlyc3QnKS5wYXJlbnQoKQoJCQkuYXBwZW5kKEguY3JlYXRlTnVtUGFkKDQsICQoJyNyYW5kY29kZScpWzBdLCBmdW5jdGlvbiAoKSB7CgkJCQkka2Yuc3VibWl0KCk7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfSkpOwoJCSovCgoJCSQoJyNwYWdlX2NvbnRlbnQnKQoJCQkuYXR0cignaWQnLCAnXl9eJykKCQkJLnZhbCgnY3Byb0lmcmFtZXUxMjU4MTMwMnxodHRwdWJtY21tYmFpZHVzdGF0aWNjb21jcHJvbWVkaWFzbWFsbHBuZycpOwoKCQlILmxvZyAoJ+WfjumAmuWwsee7qi4nKTsKCX0sCgkKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCSQoJyNtb2RhbF9jYXB0Y2hhJykuYWRkQ2xhc3MoJ2luJykuc2hvdygpOwoJfQp9LAovKiBDb21waWxlZCBmcm9tIGRsLmRsa29vLmpzICovCnsKCWlkOiAnZGwuZGxrb28nLAoJbmFtZTogJ+Wkp+i/nueUn+a0u+e9kScsCglleGFtcGxlOiAnaHR0cDovL3d3dy5kbGtvby5jb20vZG93bi82LzIwMTEvMjIyNjg2NzU0Lmh0bWwnLAoJaG9zdDogWydkbGtvby5jb20nXSwKCXBhdGg6ICcvZG93bi9kb3duZmlsZS5hc3AnLAoKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQlkb2N1bWVudC53cml0ZSA9IChmdW5jdGlvbiAoKSB7fSkuYmluZChudWxsKTsKCQkKICAgICAgICB2YXIgX2NlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYmluZChkb2N1bWVudCk7CiAgICAgICAgdGhpcy5jcmVhdGVFbGVtZW50ID0gX2NlbDsKCQlkb2N1bWVudC5jcmVhdGVFbGVtZW50ID0gKGZ1bmN0aW9uICh0YWcpIHsKCQkJaWYgKHRhZy50b0xvd2VyQ2FzZSgpID09ICdzY3JpcHQnKQoJCQkJdGFnID0gJ2Rpdic7CgkJCXJldHVybiBfY2VsKHRhZyk7CgkJfSkuYmluZChudWxsKTsKCX0sCgoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJdmFyIGZpcnN0RWwgPSBkb2N1bWVudC5ib2R5LmNoaWxkcmVuWzBdOwoJCWlmICghZmlyc3RFbCkgZmlyc3RFbCA9IGRvY3VtZW50LmJvZHk7CgoJCXZhciBmaXJzdFR4dCA9IGZpcnN0RWwudGV4dENvbnRlbnQ7CgkJaWYgKEguYmVnaW5XaXRoKGZpcnN0VHh0LCAn6Ziy55uX6ZO+5o+Q56S6JykgfHwgSC5iZWdpbldpdGgoZmlyc3RUeHQsICfpqozor4HnoIEnKSkgewoJCQlILnJlRGlyV2l0aFJlZihsb2NhdGlvbi5ocmVmKTsKCQkJcmV0dXJuIDsKCQl9IGVsc2UgaWYgKEguYmVnaW5XaXRoKGZpcnN0VHh0LCAn6Ziy5Yi35pawJykpIHsKCQkJZmlyc3RFbC5zdHlsZS53aGl0ZVNwYWNlID0gJ3ByZSc7CgkJCWZpcnN0RWwudGV4dENvbnRlbnQgKz0gJ1xuXG7or7fnqI3lkI4sIDXnp5LlkI7oh6rliqjliLfmlrDigKYnOwoJCQlzZXRUaW1lb3V0KEgucmVEaXJXaXRoUmVmLCA1NTAwLCBsb2NhdGlvbi5ocmVmKTsKCQkJcmV0dXJuIDsKCQl9CgoJCXZhciBidG5EbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidHN1Ym1pdCcpOwoJCWlmIChidG5EbCkgewoJCQlidG5EbC5pZCA9IG51bGw7CgkJCWJ0bkRsLnZhbHVlID0gJ+W8gOWni+S4i+i9vSc7CgkJCWJ0bkRsLmRpc2FibGVkID0gZmFsc2U7CgoJCQl2YXIgZmFrZUJ0biA9IHRoaXMuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKCQkJZmFrZUJ0bi5pZCA9ICdidHN1Ym1pdCc7CgkJCSQoZmFrZUJ0bikuaGlkZSgpLmFwcGVuZFRvKCdib2R5Jyk7CgkJfQoJfQp9LAovKiBDb21waWxlZCBmcm9tIGRsLmhvd2ZpbGUuanMgKi8KewoJaWQ6ICdkbC5ob3dmaWxlJywKCW5hbWU6ICflpb3nm5gnLAoJaG9zdDogJ2hvd2ZpbGUuY29tJywKCQoJaGlkZTogWycjZmxvYXRkaXYgZGl2JywgJy5yb3cxX3JpZ2h0J10sCgljc3MgOiAnI2Zsb2F0ZGl2IHsgdG9wOiAxNTBweDsgei1pbmRleDogOTk5OTk7IGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7IH0nCn0sCi8qIENvbXBpbGVkIGZyb20gZGwubGVwYW4uY2MuanMgKi8KewoJaWQ6ICdjYy5sZXBhbicsCgluYW1lOiAn5LmQ55uY6Ieq5Yqo5LiL6L295Zyw5Z2AJywKCWhvc3Q6IFsnd3d3LmxlcGFuLmNjJywgJ3d3dy5zeDU2Ni5jb20nXSwKCW5vU3ViSG9zdDogdHJ1ZSwKCXNob3c6ICcjZG93bl9ib3gnLAoJaGlkZTogWycud2lkZ2V0LWJveCcsICdhW2hyZWY9InZpcC5waHAiXSddLAoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCS8vIOegtOWdj+W5v+WRigoJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1bnNhZmVXaW5kb3csICdnb29nbGUnLCB7CgkJCXNldDogZnVuY3Rpb24gKCkgeyB9LAoJCQlnZXQ6IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH0KCQl9KTsKCQkKCQlPYmplY3QuZGVmaW5lUHJvcGVydHkodW5zYWZlV2luZG93LCAnYWRzYnlnb29nbGUnLCB7CgkJCXNldDogZnVuY3Rpb24gKCkgeyB9LAoJCQlnZXQ6IGZ1bmN0aW9uICgpIHsgdGhyb3cgbmV3IEVycm9yKCk7IH0KCQl9KTsKCQkKCQlILnJ1bGUuZXhlYygncGhwZGlzay56JywgJ29uU3RhcnQnKTsKCX0sCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKCQkkKCcjZG93bl9ib3ggLndpZGdldC1ib3gnKS5yZW1vdmVDbGFzcygnd2lkZ2V0LWJveCcpOwoJCSQoJ1tocmVmKj0iZG93bi5sZXBhbi5jYy8/ZG93bnVybCJdJykuZWFjaChmdW5jdGlvbihpLCBlbCl7CgkJCWVsLnJlbW92ZUF0dHJpYnV0ZSgnb25jbGljaycpOwoJCQlHTV94bWxodHRwUmVxdWVzdCh7CgkJCQltZXRob2Q6ICJHRVQiLAoJCQkJdXJsOiBlbC5ocmVmLAoJCQkJb25sb2FkOiBmdW5jdGlvbiAocikgewoJCQkJCXZhciB1cmwgPSByLnJlc3BvbnNlVGV4dC5tYXRjaCgvZGVsYXlVUkxcKCIoLis/KSIvKVsxXTsKCQkJCQljb25zb2xlLmluZm8oJ0ZpeCBsaW5rIHRvICVzJywgdXJsKTsKCQkJCQllbC5ocmVmID0gdXJsOwoJCQkJfQoJCQl9KTsKCQl9KTsKCX0KfQosCi8qIENvbXBpbGVkIGZyb20gZGwucmF5ZmlsZS5qcyAqLwp7CglpZDogJ2RsLnJheWZpbGUnLAoJbmFtZTogJ+mjnumAn+e9kScsCglob3N0OiAncmF5ZmlsZS5jb20nLAoJaGlkZTogWydkaXYubGVmdCddLAoKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCWlmICh1bnNhZmVXaW5kb3cudmtleSkgewoJCQlsb2NhdGlvbi5wYXRobmFtZSArPSB1bnNhZmVXaW5kb3cudmtleTsKCQl9IGVsc2UgewoJCQl1bnNhZmVXaW5kb3cuZmlsZXNpemUgPSAxMDA7CgkJCXVuc2FmZVdpbmRvdy5zaG93RG93bmxvYWQgKCk7CgkJCXVuc2FmZVdpbmRvdy5zaG93RG93bmxvYWQgPSBlRnVuYzsKCQkJCgkJCSQoJyNkb3dubG9hZGxpbmsnKS5hZGRDbGFzcygnYnRuX2Rvd25Ob3dfemgtY24nKTsKCQkJJCgnI3ZvZGxpbmsnKS5hZGRDbGFzcygnYnRuX2Rvd25Ub29sc196aC1jbicpOwoJCX0KCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBkbC5zdWR1cGFuLmpzICovCnsKCWlkOiAnZGwuc3VkdXBhbicsCgluYW1lOiAn6YCf5bqm55uYJywKCWhvc3Q6IFsnc3VkdXBhbi5jb20nXSwKCXNob3c6IFsnI3NkcHh6bGonLCAnI3NkcHh6bGogPiB0ZCddLAoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCWlmIChILmJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9kb3duXycpKSB7CgkJCWxvY2F0aW9uLnBhdGhuYW1lID0gbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSAoJy9kb3duXycsICcvc2RwL3hpYXphaV8nKTsKCQl9Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gZGwudmRpc2suanMgKi8KewoJaWQ6ICdkbC52ZGlzaycsCgluYW1lOiAn5aiB55uYJywKCWhvc3Q6IFsndmRpc2suY24nXSwKCWhpZGU6IFsnI2xvYWRpbmdib3gnLCAnI3lhbnpoZW5nYm94JywgJyN5em1ib3gnLCAnI2dldGJveCA+IC5idG46Zmlyc3QtY2hpbGQnXSwKCXNob3c6IFsnI2J0bmJveCddCn0sCi8qIENvbXBpbGVkIGZyb20gZGwueWltdWhlLmpzICovCnsKCWlkOiAnZGwueWltdWhlJywKCW5hbWU6ICfkuIDmnKjnpr7nvZHnm5gnLAoJaG9zdDogJ3lpbXVoZS5jb20nLAoKCWhpZGU6IFsnI2xvYWRpbmcnLCAnLmdnYW8nLCAnLmt1YW4nXSwKCXNob3c6IFsnI3l6bSddLAoKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQlILnBocERpc2tBdXRvUmVkaXIoKTsKCX0sCgoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJaWYgKEguYmVnaW5XaXRoICggbG9jYXRpb24ucGF0aG5hbWUsICcvbl9kZC5waHAnICkpIHsKCQkJSC5yZURpcldpdGhSZWYoJCgnI2Rvd25zJykuYXR0cignaHJlZicpKTsKCQkJcmV0dXJuIDsKCQl9CgoJCXZhciBkbENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICgnZG93bmxvYWQnKTsKCQlpZiAoIWRsQ29udGFpbmVyKSByZXR1cm4gOwoKCQkvLyDlvZPkuIvovb3moYbnmoQgc3R5bGUg5bGe5oCn6KKr5pu05pS55ZCOLCDmqKHmi5/kuIvovb3mjInpkq7ljZXlh7suCgkJdmFyIG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIgKGZ1bmN0aW9uICgpIHsKCQkJJCgnYScsIGRsQ29udGFpbmVyKVsxXS5jbGljaygpOwoJCX0pOwoJCW1vLm9ic2VydmUgKGRsQ29udGFpbmVyLCB7IGF0dHJpYnV0ZXM6IHRydWUgfSk7CgoJCSQoJyN5em0+Zm9ybScpCgkJCS5hcHBlbmQoSC5jcmVhdGVOdW1QYWQoNCwgJyNjb2RlJywgZnVuY3Rpb24gKCkgewoJCQkJZG9jdW1lbnQueXpjb2RlLlN1Ym1pdC5jbGljaygpOwoJCQkJcmV0dXJuIHRydWU7CgkJCX0sIGZ1bmN0aW9uICgpIHsKCQkJCSQoJyN2Y29kZV9pbWcnKVswXS5jbGljaygpOwoJCQl9KSk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gZm0uZG91YmFuLmpzICovCnsKCWlkOiAnZm0uZG91YmFuJywKCW5hbWU6ICfosYbnk6PnlLXlj7AnLAoJaG9zdDogJ2RvdWJhbi5mbScsCglub1N1Ykhvc3Q6IHRydWUsCgljc3M6IC8qIFJlc291cmNlOiBmbS5kb3ViYW4uZGwuY3NzICovCkguZXh0cmFjdChmdW5jdGlvbiAoKSB7IC8qCmEjanhfZG91YmFuX2RsIHsKCWJhY2tncm91bmQ6ICM5REQ2QzU7CglwYWRkaW5nOiAzcHggNXB4OwoJY29sb3I6ICNmZmYKfQoKYSNqeF9kb3ViYW5fZGw6aG92ZXIgewoJbWFyZ2luLWxlZnQ6IDVweDsKCXBhZGRpbmctbGVmdDogMTBweDsKCWJhY2tncm91bmQ6ICNCQUUyRDY7Cn0KCmRpdiNqeF9kb3ViYW5fZGxfd3JhcCB7CglmbG9hdDogcmlnaHQ7CgltYXJnaW4tdG9wOiAtMjMwcHg7CgltYXJnaW4tcmlnaHQ6IC0zMnB4OwoJZm9udC13ZWlnaHQ6IGJvbGQ7Cglmb250LWZhbWlseTogJ01pY3Jvc29mdCBKSGVuZ0hlaSBVSScsICflvq7ova/pm4Xpu5EnLCBzZXJpZi1zYW5zOwp9CiovfSksCgoJLy8g5Y+C6ICD5Luj56CBIOixhuiXpCwgVVNPOiA0OTkxMQoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJdmFyIGxpbmtEb3dubG9hZCA9ICQoJzxhPicpLmNzcyhILm1ha2VEZWxheUNzcygpKQoJCQkuYXR0ciAoJ3RhcmdldCcsICdfYmxhbmsnKQoJCQkuYXR0ciAoJ2lkJywgJ2p4X2RvdWJhbl9kbCcpCgkJCS50ZXh0ICgn5LiL6L29Jyk7CgoJCSQoJzxkaXY+JykKCQkJLmF0dHIgKCdpZCcsICdqeF9kb3ViYW5fZGxfd3JhcCcpCgkJCS5hcHBlbmQobGlua0Rvd25sb2FkKQoJCQkuaW5zZXJ0QWZ0ZXIoJy5wbGF5ZXItd3JhcCcpOwoJCQoJCUgubG9nICgn562J5b6F6LGG55Oj55S15Y+w5Yqg6L29IC4uJyk7CgkJCgkJSC53YWl0VW50aWwoJ2V4dFN0YXR1c0hhbmRsZXInLCBmdW5jdGlvbiAoKSB7CgkJCUgubG9nICgn57uR5a6a5Ye95pWwIC4uJyk7CgkJCXVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5ICh7CgkJCQlleHRTdGF0dXNIYW5kbGVyOiBmdW5jdGlvbiAoanNvblNvbmdPYmopIHsKCQkJCQl2YXIgc29uZ09iaiA9IEpTT04ucGFyc2UoanNvblNvbmdPYmopOwoJCQkJCWlmICgnc3RhcnQnID09IHNvbmdPYmoudHlwZSAmJiBzb25nT2JqLnNvbmcpIHsKCQkJCQkJbGlua0Rvd25sb2FkCgkJCQkJCQkuYXR0cignaHJlZicsIEgudXJpIChzb25nT2JqLnNvbmcudXJsLCBzb25nT2JqLnNvbmcudGl0bGUgKyBzb25nT2JqLnNvbmcudXJsLnNsaWNlKC00KSkpCgkJCQkJCQkuYXR0cigndGl0bGUnLCAn5LiL6L29OiAnICsgc29uZ09iai5zb25nLnRpdGxlKTsKCQkJCQkJCgkJCQkJCUguaW5mbyAoJyVzID0+ICVzJywgc29uZ09iai5zb25nLnRpdGxlLCBzb25nT2JqLnNvbmcudXJsKTsKCQkJCQl9CgoJCQkJCXRocm93IG5ldyBFcnJvclVuc2FmZVN1Y2Nlc3MgKCk7CgkJCQl9CgkJCX0pOwoKCQkJSC5sb2cgKCflh73mlbDnu5Hlrprlrozmr5UsIEVuam95ficpOwoJCQkKCQl9KTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBmbS5qaW5nLmpzICovCnsKCWlkOiAnZm0uamluZycsCgluYW1lOiAnSmluZy5mbScsCglob3N0OiAnamluZy5mbScsCglub1N1Ykhvc3Q6IHRydWUsCgoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCXRoaXMuZGxCb3ggPSAkKCc8YT4nKS5jc3MoewoJCQlwb3NpdGlvbjogJ2Fic29sdXRlJywKCQkJcmlnaHQ6IDAsCgkJCXpJbmRleDogOQoJCX0pLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKS50ZXh0KCfkuIvovb0nKTsKCgkJSC5qUGxheWVyUGF0Y2hlciAoZnVuY3Rpb24gKHNvbmdPYmopIHsKCQkJdGhpcy5kbEJveAoJCQkJLmF0dHIgKCAnaHJlZicsIEguZ2V0Rmlyc3RWYWx1ZSAoc29uZ09iaikucmVwbGFjZSgvXD8uKy8sICcnKSApCgkJCQkuYXR0ciAoICd0aXRsZScsICQoJyNtc2NQbHIgPiAudGl0JykudGV4dCAoKSApOwoJCX0uYmluZCAodGhpcykpOwoKCQlILndhaXRVbnRpbCAoJ1BsYXllci5sb2FkJywgZnVuY3Rpb24gKCkgewoJCQl1bnNhZmVPdmVyd3JpdGVGdW5jdGlvblNhZmVQcm94eSAoewoJCQkJbG9hZDogZnVuY3Rpb24gKCkgewoJCQkJCXNldFRpbWVvdXQgKGZ1bmN0aW9uICgpIHsKCQkJCQkJZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCAoIG5ldyBDdXN0b21FdmVudCAoJ2p4X2ppbmdfZm1fcGxheWVyX2xvYWRlZCcpICk7CgkJCQkJfSwgMTAwKTsKCgkJCQkJdGhyb3cgbmV3IEVycm9yVW5zYWZlU3VjY2VzcygpOwoJCQkJfQoJCQl9LCB1bnNhZmVXaW5kb3cuUGxheWVyLCAnLlBsYXllcicpOwoJCX0pOwoKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICgnanhfamluZ19mbV9wbGF5ZXJfbG9hZGVkJywgZnVuY3Rpb24gKCkgewoJCQlILmluZm8gKCdKaW5nLmZtIOaSreaUvuWZqOWKoOi9veWujOavlScpOwoJCQl0aGlzLmRsQm94LmFwcGVuZFRvKCQoJyNtc2NQbHInKSk7CgkJfS5iaW5kICh0aGlzKSwgZmFsc2UpOwoJfQp9LAovKiBDb21waWxlZCBmcm9tIGZtLm1vZS5qcyAqLwovKioKICog6JCM5ZCm6Z+z5LmQ55S15Y+wCiAqIDIwMTYuMDQuMDg6IOS/ruWkjeS7pemAguW6lOaWsOeJiOaSreaUvuWZqOS7o+eggeOAggogKi8KKHsKCWlkOiAnZm0ubW9lJywKCW5hbWU6ICfokIznlLXlj7AgW21vZS5mbV0nLAoJaG9zdDogJ21vZS5mbScsCglub1N1Ykhvc3Q6IHRydWUsCglwYXRoOiAnL2xpc3Rlbi9oNScsCgloaWRlOiBbJyNwcm9tb3Rpb25fbHMnXSwKCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKCQlILndhaXRVbnRpbCgnc2VhanMnLCBmdW5jdGlvbiAoKSB7CgkJCS8vIOeZu+W9leegtOinowoJCQl1bnNhZmVXaW5kb3cuaXNfbG9naW4gPSB0cnVlOwoJCQkKCQkJLy8g5LiL6L295oyJ6ZKuCgkJCXZhciBkbExpbmsgPSAkKCc8YT4nKS5hZGRDbGFzcygncGxheWVyLWJ1dHRvbiBsZWZ0JykuY3NzKEgubWFrZVJvdGF0ZUNzcyg5MCkpLmNzcyh7CgkJCQknd2lkdGgnOiAnMjZweCcsCgkJCQknYmFja2dyb3VuZC1wb3NpdGlvbic6ICctMTlweCAtOTZweCcKCQkJfSkuaW5zZXJ0QWZ0ZXIgKCQoJ2Rpdi5wbGF5ZXItYnV0dG9uLmJ1dHRvbi12b2x1bWUnKS5maXJzdCgpKTsKCQkJCgkJCS8vIOebkeWQrAoJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIChILnNjcmlwdE5hbWUsIGZ1bmN0aW9uIChlKSB7CgkJCQl2YXIgc29uZ09iaiA9IGUuZGV0YWlsOwoJCQkJSC5pbmZvKHNvbmdPYmopOwoKCQkJCWRsTGluawoJCQkJCS5hdHRyKCdocmVmJywgSC51cmkoc29uZ09iai51cmwsIHNvbmdPYmouc3ViX3RpdGxlICsgJy5tcDMnKSkKCQkJCQkuYXR0cigndGl0bGUnLCAn5LiL6L29OiAnICsgc29uZ09iai5zdWJfdGl0bGUpOwoJCQl9LCBmYWxzZSk7CgoJCQkvLyDmjILovb3lpJbmjILmqKHnu4QKCQkJdW5zYWZlRXhlYyAoZnVuY3Rpb24gKHNjcmlwdE5hbWUpIHsKCQkJCWZ1bmN0aW9uIG5vdGlmeVVwZGF0ZSAoY2xpcCkgewoJCQkJCWRvY3VtZW50LmRpc3BhdGNoRXZlbnQgKCBuZXcgQ3VzdG9tRXZlbnQgKHNjcmlwdE5hbWUsIHtkZXRhaWw6IGNsaXAgfSkgKTsKCQkJCX0KCgkJCQlkZWZpbmUoJ3BsdWdpbi9qaXh1bicsIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMpIHsKCQkJCQljb25zb2xlLmluZm8oJ1tDVVdDTDRDXSDlvIDlp4vms6jlhaUgLi4uJyk7CgkJCQkJdmFyIGxpc3RlbiA9IHJlcXVpcmUoJy9wdWJsaWMvanMvZm0vcGFnZS9saXN0ZW4uanMnKTsKCQkJCQl2YXIgcGxheWVyID0gcmVxdWlyZSgncGxheWVyL3BsYXllcicpOwoKCQkJCQl2YXIgX2luaXRQbGF5ZXIgPSBwbGF5ZXIuaW5pdFBsYXllcjsKCQkJCQlwbGF5ZXIuaW5pdFBsYXllciA9IGZ1bmN0aW9uIChjbGlwKSB7CgkJCQkJCW5vdGlmeVVwZGF0ZShjbGlwKTsKCQkJCQkJX2luaXRQbGF5ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCQkJCQl9OwoJCQkJCWNvbnNvbGUuaW5mbygnW0NVV0NMNENdIOazqOWFpee7k+adnyAuLi4nKTsKCQkJCX0pOwoJCQkJCgkJCQkvLyDopoHmsYLovb3lhaXlpJbmjILmqKHnu4QKCQkJCXNlYWpzLnVzZSgncGx1Z2luL2ppeHVuJyk7CgkJCX0sIEguc2NyaXB0TmFtZSk7CgkJfSk7Cgl9Cn0pLAovKiBDb21waWxlZCBmcm9tIGZtLnFxLmpzICovCnsKCWlkOiAnZm0ucXEnLAoJbmFtZTogJ1FRIOeUteWPsOS4i+i9veino+aekCcsCglob3N0OiAnZm0ucXEuY29tJywKCW5vU3ViSG9zdDogdHJ1ZSwKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCUgubG9nICgnV2FpdGluZyBmb3IgZm1RUS4uLicpOwoJCUgud2FpdFVudGlsKCckLnFQbGF5ZXIucGxheWVyLnBsYXlVcmwnLCBmdW5jdGlvbiAoKSB7CgkJCUgubG9nICgnZm1RUSBIb29rIHN0YXJ0IScpOwoJCQkKCQkJLy8gQ3JlYXRlRExCdXR0b24KCQkJdmFyIGRsTGluayA9ICQoJzxhPicpLmNzcyhILm1ha2VSb3RhdGVDc3MoOTApKS5jc3MoewoJCQkJJ2JhY2tncm91bmQtcG9zaXRpb24nOiAnLTI0cHggLTczcHgnCgkJCX0pOwoJCQkkKCcuYnRuX2RlbCcpLmFmdGVyKGRsTGluayk7CgkJCQoJCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIChILnNjcmlwdE5hbWUsIGZ1bmN0aW9uIChlKSB7CgkJCQl2YXIgc29uZ09iaiA9IGUuZGV0YWlsOwoKCQkJCWRsTGluawoJCQkJCS5hdHRyKCdocmVmJywgSC51cmkoc29uZ09iai5zb25ndXJsLCBzb25nT2JqLm1zb25nICsgJy5tcDMnKSkKCQkJCQkuYXR0cigndGl0bGUnLCAn5LiL6L29OiAnICsgc29uZ09iai5tc29uZyk7CgkJCX0sIGZhbHNlKTsKCgkJCXVuc2FmZUV4ZWMgKGZ1bmN0aW9uICgpIHsKCQkJCXZhciBfcGxheXVybCA9IHdpbmRvdy4kLnFQbGF5ZXIucGxheWVyLnBsYXlVcmwuYmluZCh3aW5kb3cuJC5xUGxheWVyLnBsYXllcik7CgkJCQl2YXIgX3VwZGF0ZVVybCA9IGZ1bmN0aW9uICgpIHsKCQkJCQlkb2N1bWVudC5kaXNwYXRjaEV2ZW50ICggbmV3IEN1c3RvbUV2ZW50IChILnNjcmlwdE5hbWUsIHtkZXRhaWw6ICQucVBsYXllci5wbGF5TGlzdC5nZXRTb25nSW5mb09iaigpIH0pICk7CgkJCQl9CgkJCQl3aW5kb3cuJC5xUGxheWVyLnBsYXllci5wbGF5VXJsID0gZnVuY3Rpb24gKCkgewoJCQkJCV91cGRhdGVVcmwgKCk7CgkJCQkJcmV0dXJuIF9wbGF5dXJsLmFwcGx5ICgwLCBhcmd1bWVudHMpOwoJCQkJfTsKCgkJCQlfdXBkYXRlVXJsICgpOwoJCQl9KTsKCgkJCUgubG9nICgnZm1RUSBIb29rIGZpbmlzaCEnKTsKCQl9KTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBtdXNpYy4xNjMuanMgKi8KLyoqCiAqIOe9keaYk+mfs+S5kOS4i+i9veino+aekCBCeSBKaXh1bgogKiAg4oCU4oCUIOWPl+WkoOS6hiBDb2ZmZWUgU2NyaXB0IOS6hgogKi8KKHsKCWlkOiAnbXVzaWMuMTYzJywKCW5hbWU6ICfnvZHmmJPpn7PkuZDkuIvovb3op6PmnpAnLAoJaG9zdDogJ211c2ljLjE2My5jb20nLAoJbm9TdWJIb3N0OiB0cnVlLAoJbm9GcmFtZTogZmFsc2UsCglkbF9pY29uOiB0cnVlLAoJY3NzOiAvKiBSZXNvdXJjZTogY29tLjE2My5tdXNpYy5kbC5jc3MgKi8KSC5leHRyYWN0KGZ1bmN0aW9uICgpIHsgLyoKLm0tcGJhciwgLm0tcGJhciAuYmFyYmcgewoJd2lkdGg6IGNhbGMoIDQ1NXB4IC0gMi41ZW0gKTsKfQoKLm0tcGxheWJhciAucGxheSB7Cgl3aWR0aDogY2FsYyggNTcwcHggLSAyLjVlbSApOwp9CgoubS1wbGF5YmFyIC5vcGVyIHsKCXdpZHRoOiBpbml0aWFsOwp9CgouanhfZGw6aG92ZXIgewoJY29sb3I6IHdoaXRlOwp9CgotLSDlupXpg6jljZXmm7LkuIvovb0KLm0tcGxheWJhciAub3BlciAuanhfYnRuIHsKCXRleHQtaW5kZW50OiAwOwoJZm9udC1zaXplOiAxLjVlbTsKCW1hcmdpbjogMTNweCAycHggMCAwOwoJZmxvYXQ6IGxlZnQ7Cgljb2xvcjogI2NjYzsKCXRleHQtc2hhZG93OiAxcHggMXB4IDJweCBibGFjaywgMCAwIDFlbSBibGFjaywgMCAwIDAuMmVtICNhYWE7CglsaW5lLWhlaWdodDogMS42ZW07Cglmb250LXNpemU6IDEuMmVtOwp9CgoubS1wbGF5YmFyIC5vcGVyIC5qeF9kbDo6YmVmb3JlIHsKCXBhZGRpbmctcmlnaHQ6IC4yNWVtOwp9CgouanhfYnRuOmhvdmVyIHsKCWNvbG9yOiB3aGl0ZTsKfQoKLS0g5pKt5pS+5YiX6KGo5LiL6L29Ci5tLXBsYXliYXIgLmxpc3RoZGMgLmp4X2RsLmFkZGFsbCB7CglsZWZ0OiAzMDZweDsKCWxpbmUtaGVpZ2h0OiAxZW07CgktLSDlpJrkuIDkuKogcHgsIOWvuem9kOaWh+WtlwoJdG9wOiAxM3B4Owp9CgoubS1wbGF5YmFyIC5saXN0aGRjIC5saW5lLmp4X2RsX2xpbmUgewoJbGVmdDogMzg1cHg7Cn0KKi99KSwKCV9fTVAzX0JMQU5LOiAnaHR0cHM6Ly9qaXh1bm1vZS5naXRodWIuaW8vY3V3Y2w0Yy9ibGFuay5tcDMnLAoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCWlmIChILmNvbmZpZy5iVXNlVGhyaWRPbkZhaWwpIHsKCQkJSC5ydWxlLmdldCgnYXBpLm11c2ljLnNweScpLmluaXQoKTsKCQl9CgoJCXRoaXMuYlByb3h5TG9jYWwgPSBILmNvbmZpZy5iSW50ZXJuYXRpb25hbCAmJiBILmNvbmZpZy5iUHJveHlJbnN0YWxsZWQ7CgoJCWlmIChILmNvbmZpZy5iSW50ZXJuYXRpb25hbCkKCQkJdGhpcy5nZW5lcmF0ZUNkbigpOwoKCQlpZiAobG9jYWxTdG9yYWdlLl9fSElERV9CQU5ORVIpIHsKCQkJSC5mb3JjZUhpZGUoJyNpbmRleC1iYW5uZXInKTsKCQl9CgoJCXRoaXMucmVnUGxheWVyKCk7CgoJCXVuc2FmZUV4ZWMoZnVuY3Rpb24gKCkgewoJCQkvLyDkvJjlhYjkvb/nlKggSFRNTDUg5pKt5pS+5ZmoCgkJCS8vIOWmguaenOayoeacieWGjeiAg+iZkSBGbGFzaCDmlK/mj7QKCQkJCgkJCS8vIOaEn+inieW5tuayoeacieS7gOS5iOWNteeUqOS6hj8KCQkJdmFyIGZha2VQbGF0Rm9ybSA9IG5hdmlnYXRvci5wbGF0Zm9ybSArICItLUZha2UtbWFjIjsKCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgInBsYXRmb3JtIiwgewoJCQkJZ2V0OiBmdW5jdGlvbigpeyByZXR1cm4gZmFrZVBsYXRGb3JtOyB9LAoJCQkJc2V0OiBmdW5jdGlvbigpe30KCQkJfSk7CgoKCQkJLy8g6aCG5L6/LCDop6PpjpblhajnkIPpmZDliLYKCQkJd2luZG93LkdSZXN0cmljdGl2ZSA9IGZhbHNlOwoJCX0pOwoJfSwKCglnZW5lcmF0ZUNkbjogZnVuY3Rpb24gKCkgewoJCS8vIFRPRE86CgkJLy8gKyDnlKjmiLfmj5DkvpsgQ0ROIOWIl+ihqAoJCS8vICsg55So5oi35oyH5a6a5L2/55So55qEIElQIOe8k+WtmOiKgueCuSAo5aW95YOP5Lya6ZqP5py6PykKCQkvLyDpmo/kvr8gcGluZyDkuoblh6DkuKoKCQl2YXIgY2RucyA9IFsKCQkJLy8g55S15L+hCgkJCSIxMjUuOTAuMjA2LjMyIiwgCgkJCSIyMjIuMTg2LjEzMi4xMDMiLCAKCQkJIjExNy4yMy42Ljg5IiwgCgkJCSIxMTkuMTQ1LjIwNy4xNyIsIAoJCQkiMTgwLjk3LjE4MC43MSIsIAoJCQkiMTE2LjU1LjIzNi45MyIsIAoJCQkiMjE4Ljc2LjEwNS40MiIsIAoJCQkiMTI1LjY0LjIzMi4xNSIsIAoJCQkiMTE1LjIzMS44Ny4zNyIsIAoJCQkiNTguMjIxLjc4LjY4IiwgCgkJCSIyMjAuMTEyLjE5NS4xNDgiLCAKCQkJIjIxOC42NC45NC42NyIsIAoJCQkiMzYuNDIuMzIuNzYiLCAKCQkJIjYxLjEzNi4yMTEuMTYiLCAKCQkJIjIxOC42NC45NC42OCIsIAoJCQkiMjE5LjEzOC4yMS43MSIsIAoJCQkiNDkuNzkuMjMyLjU4IiwgCgkJCSIxMjIuMjI4LjI0LjMwIiwgCgkJCSIxODIuMTA2LjE5NC44NSIsIAoJCQkiMjE4LjU5LjE4Ni45OCIsIAoJCQkiNjEuMTU4LjEzMy4yMSIsIAoJCQkiMTE3LjI3LjI0MS4yMCIsIAoJCQkiNTguNTEuMTUwLjEzMyIsIAoJCQkiMjE4LjI5LjQ5LjEzMiIsIAoJCQkiNjAuMjE1LjEyNS43NiIsIAoJCQkiMTgzLjYxLjIyLjE3IiwgCgkJCSIxODMuMTM0LjE0LjI2IiwgCgkJCSI1OC4yMjAuNi4xNDIiLCAKCQkJIjExNS4yMzEuMTU4LjQ0IiwgCgkJCSI2MS4xNjQuMjQxLjEwNSIsIAoJCQkiMTI1LjQ2LjIyLjEyNCIsIAoJCQkiMjIyLjI4LjE1Mi4xMzkiLCAKCQkJIjEyNC4xNjUuMjE2LjI0NCIsIAoJCQkiMjE4LjYwLjEwNi4xMTUiLCAKCQkJIjIwMi4xMDcuODUuODEiLCAKCQkJIjYxLjE3OS4xMDcuMTE2IiwgCgkJCSIxNzUuNDMuMjAuNjkiLCAKCQkJIjIyMC4xOTQuMjAzLjg2IiwgCgkJCSI2MS4xNjAuMjA5LjI3IiwgCgkJCSIxMjAuMjA5LjE0MS43OSIsIAoJCQkiMTIwLjIwOS4xNDIuMTM4IiwgCgkJCSIyMTkuMTM4LjIxLjcyIiwgCgkJCSI1OC4yMTYuMjEuMTMyIiwKCQkJJzE0LjIxNS4yMjguMTAnLAoJCQknMjE4Ljg3LjExMS44MycsCgoJCQkvLyDljJfkuqznlLXkv6EKCQkJJzIwMy4xMzAuNTkuOCcsCgkJCScyMDMuMTMwLjU5LjknLAoJCQknMjAzLjEzMC41OS4xMCcsCgkJCScyMDMuMTMwLjU5LjExJywKCQkJJzIwMy4xMzAuNTkuMTInCgkJXTsKCQl0aGlzLmNkbl9pcCA9IEguc2h1ZmZsZShjZG5zKTsKCX0sCgoJLyoqCgkgKiDnp7vpmaTntrLnq5nnmoTpmZDliLYKCSAqLwoJX2RvUmVtb3ZhbDogZnVuY3Rpb24gKCkgewoJCXZhciBzZWxmID0gdGhpczsKCQlILndhaXRVbnRpbCgnbm0ueCcsIGZ1bmN0aW9uICgpIHsKCQkJdmFyIENSMSA9IHNlbGYuc2VhcmNoRnVuY3Rpb24odW5zYWZlV2luZG93Lm5lai5lLCAnbmVqLmUnLCAnLmRhdGFzZXQ7aWYnKTsKCQkJdmFyIENSMiA9IHNlbGYuc2VhcmNoRnVuY3Rpb24odW5zYWZlV2luZG93Lm5tLngsICdubS54JywgICcuY29weXJpZ2h0SWQ9PScpOwoJCQl2YXIgQ1IzID0gc2VsZi5zZWFyY2hGdW5jdGlvbih1bnNhZmVXaW5kb3cubm0ueCwgJ25tLngnLCAgJy5wcml2aWxlZ2U7aWYnKTsKCQkJc2VsZi5mbHVzaExvZ1RhYmxlKCk7CgoJCQkvLyBDUjIg5L2N572u55qE5YWn5a655ZyoIENSMSDlh73mlbjlkI7liqDovIkKCQkJSC53YWl0VW50aWwoJ25tLnguJyArIENSMiwgZnVuY3Rpb24gKCkgewoJCQkJdW5zYWZlRXhlYyhmdW5jdGlvbiAoYklzRnJhbWUsIENSMSwgQ1IyLCBDUjMpIHsKCQkJCQl2YXIgX0NSMSA9IG5lai5lW0NSMV07CgkJCQkJbmVqLmVbQ1IxXSA9IGZ1bmN0aW9uICh6LCBuYW1lKSB7CgkJCQkJCWlmIChuYW1lID09ICdjb3B5cmlnaHQnIHx8IG5hbWUgPT0gJ3Jlc0NvcHlyaWdodCcpIHsKCQkJCQkJCXJldHVybiAxOwoJCQkJCQl9CgoJCQkJCQlyZXR1cm4gX0NSMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJCX07CgoJCQkJCW5tLnhbQ1IyXT0gZnVuY3Rpb24gKCkgewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfTsKCgkJCQkJbm0ueFtDUjNdPSBmdW5jdGlvbiAoKSB7CgkJCQkJCXZhciBzb25nRGV0YWlsID0gYXJndW1lbnRzWzBdOwoJCQkJCQlzb25nRGV0YWlsLnN0YXR1cyA9IDA7CgoJCQkJCQlpZiAoc29uZ0RldGFpbC5wcml2aWxlZ2UpIHsKCQkJCQkJCXNvbmdEZXRhaWwucHJpdmlsZWdlLnBsID0gMzIwMDAwOwoJCQkJCQkJc29uZ0RldGFpbC5wcml2aWxlZ2Uuc3RhdHVzID0gMDsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJcmV0dXJuIDA7CgkJCQkJfTsKCQkJCX0sIEguaXNGcmFtZSwgQ1IxLCBDUjIsIENSMyk7CgkJCX0sIDcwMDAsIDUwMCk7CgkJfSk7Cgl9LAoKCWFkZExvZ0l0ZW06IGZ1bmN0aW9uIChsb2dJdGVtKSB7CgkJaWYgKCF0aGlzLmxvZ0l0ZW1zKQoJCQl0aGlzLmxvZ0l0ZW1zID0gW107CgoJCXRoaXMubG9nSXRlbXMucHVzaChsb2dJdGVtKTsKCX0sCgoJZmx1c2hMb2dUYWJsZTogZnVuY3Rpb24gKCkgewoJCXZhciBsb2dJdGVtcyA9IHRoaXMubG9nSXRlbXM7CgkJdGhpcy5sb2dJdGVtcyA9IFtdOwoKCQlpZiAoIUgubm9Mb2cgJiYgbG9nSXRlbXMubGVuZ3RoID4gMCkKCQkJY29uc29sZS50YWJsZShsb2dJdGVtcyk7Cgl9LAoKCXNlYXJjaEZ1bmN0aW9uOiBmdW5jdGlvbihiYXNlLCBuYW1lLCBrZXkpIHsKCQl2YXIgaXNSZWcgPSBrZXkgaW5zdGFuY2VvZiBSZWdFeHA7CgoJCWZvciAodmFyIGJhc2VOYW1lIGluIGJhc2UpIHsKCQkJdmFyIGZuID0gYmFzZVtiYXNlTmFtZV07CgkJCWlmIChmbiAmJiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHsKCQkJCXZhciBmblN0ciA9IGZuLnRvU3RyaW5nKCk7CgkJCQlpZiAoaXNSZWcgPyBrZXkudGVzdChmblN0cikgOiBmblN0ci5pbmRleE9mKGtleSkgIT09IC0xKSB7CgkJCQkJaWYgKCFILm5vTG9nKSB7CgkJCQkJCXRoaXMuYWRkTG9nSXRlbSh7CgkJCQkJCQknS2V5d29yZCc6IGtleSwKCQkJCQkJCSdGb3VuZCc6IG5hbWUgKyAnLicgKyBiYXNlTmFtZQoJCQkJCQl9KTsKCQkJCQl9CgoJCQkJCXJldHVybiBiYXNlTmFtZTsKCQkJCX0KCQkJfQoJCX0KCQlILmluZm8oJ1NlYXJjaCAlcywgZm91bmQgbm90aGluZy4nLCBrZXkpOwoJCXJldHVybiBudWxsOwoJfSwKCgkvKioKCSAqIOiou+WGiuS4i+i8ieS6i+S7tgoJICogQHJldHVybiB7W3R5cGVdfSBbZGVzY3JpcHRpb25dCgkgKi8KCXJlZ1BsYXllcjogZnVuY3Rpb24gKCkgewoJCXZhciBzZWxmID0gdGhpczsKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKEguc2NyaXB0TmFtZSwgZnVuY3Rpb24oZSkgewoJCQl2YXIgc29uZ09iaiA9IGUuZGV0YWlsOwoKCQkJc2VsZi5saW5rRG93bmxvYWQuYXR0cih7CgkJCQlocmVmOiBILnVyaShzb25nT2JqLnNvbmdfdXJsIHx8IHNlbGYuZ2V0VXJpKEpTT04ucGFyc2Uoc29uZ09iai5zb25nKSksIHNvbmdPYmoubmFtZSArICIgWyIgKyBzb25nT2JqLmFydGlzdCArICJdLm1wMyIpLAoJCQkJdGl0bGU6ICfkuIvovb06ICcgKyBzb25nT2JqLm5hbWUKCQkJfSk7CgkJfSk7Cgl9LAoKCXJhbmRvbUNETjogZnVuY3Rpb24gKCkgewoJCXZhciBpcCA9IHRoaXMuY2RuX2lwLnNoaWZ0KCk7CgkJdGhpcy5jZG5faXAucHVzaChpcCk7CgkJcmV0dXJuIGlwOwoJfSwKCgl1cGRhdGVDRE46IGZ1bmN0aW9uIChjZG4pIHsKCQlpZiAoIWNkbikgY2RuID0gdGhpcy5yYW5kb21DRE4oKTsKCgkJaWYgKHRoaXMuY2hhbmdlQ0ROKQoJCQl0aGlzLmNoYW5nZUNETi5hdHRyKCd0aXRsZScsICfmm7TmjaIgQ0ROIFvlvZPliY06ICcgKyBjZG4gKyAnXSA9PiDliIfmrYzlkI7nlJ/mlYgnKTsKCgkJLy8g6YCa55+l5omA5pyJ5qCH562+6aG15pu05o2iIENETgoJCXRoaXMud3NfY2RuX21lZGlhID0gY2RuOwoJCWxvY2FsU3RvcmFnZS53c19jZG5fbWVkaWEgPSBjZG47CgkJR01fc2V0VmFsdWUoJ193c19jZG5fbWVkaWEnLCBjZG4pOwoKCQlkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChILnNjcmlwdE5hbWUgKyAnLWNkbicsIHsKCQkJZGV0YWlsOiBjZG4KCQl9KSk7Cgl9LAoKCWhvb2tQbGF5ZXI6IGZ1bmN0aW9uICgpIHsKCQl2YXIgc2VsZiA9IHRoaXM7CgoJCWV4cG9ydEZ1bmN0aW9uKGZ1bmN0aW9uIChvYmopIHsKCQkJcmV0dXJuIHNlbGYuZ2V0VXJpKG9iaik7CgkJfSwgdW5zYWZlV2luZG93LCB7CgkJCWRlZmluZUFzOiAnX19qeF9nZXRTb25nVXJsJwoJCX0pOwoKCQkvLyDku47mkq3mlL7lmaggSG9vayDmlLnkuLrov5znq68gSG9vawoJCS8vIOWboOS4uueOsOWcqOavj+asoeaSreaUvumDveS8muivt+axguS4gOasoee9kee7nAoJCUgud2FpdFVudGlsKCduZWouaicsIGZ1bmN0aW9uICgpIHsKCQkJdmFyIGhvb2tOYW1lID0gc2VsZi5zZWFyY2hGdW5jdGlvbih1bnNhZmVXaW5kb3cubmVqLmosICduZWouaicsICcucmVwbGFjZSgiYXBpIiwid2VhcGknKTsKCQkJdmFyIGhvb2tRdWV1ZVVwZGF0ZSA9IHNlbGYuc2VhcmNoRnVuY3Rpb24odW5zYWZlV2luZG93Lm5tLncucFAucHJvdG90eXBlLCAnbm0udy5wUC5wcm90b3R5cGUnLCAvcmV0dXJuIHRoaXNcLlx3K1xbdGhpc1wuXHcrXF0vKTsKCQkJc2VsZi5mbHVzaExvZ1RhYmxlKCk7CgoJCQl2YXIgY3VycmVudENETjsKCQkJaWYgKEguY29uZmlnLmJJbnRlcm5hdGlvbmFsICYmICFILmNvbmZpZy5iUHJveHlJbnN0YWxsZWQpIHsKCQkJCS8vIOaPkOWPluS/neWtmOeahCBDRE4KCQkJCXZhciBjaGFuZ2VDRE4gPSAkKCc8YT4nKS5hZGRDbGFzcygnanhfYnRuIGp4X2NkbicpLmluc2VydEFmdGVyKHNlbGYubGlua0Rvd25sb2FkKS50ZXh0KCfmjaInKTsKCQkJCXNlbGYuY2hhbmdlQ0ROID0gY2hhbmdlQ0ROOwoJCQkJY2hhbmdlQ0ROLmNsaWNrKGZ1bmN0aW9uICgpIHsKCQkJCQlzZWxmLnVwZGF0ZUNETigpOwoJCQkJfSk7CgoJCQkJY3VycmVudENETiA9IEdNX2dldFZhbHVlKCdfd3NfY2RuX21lZGlhJywgc2VsZi5yYW5kb21DRE4oKSk7CgkJCQlpZiAoIUguY29udGFpbnMoc2VsZi5jZG5faXAsIGN1cnJlbnRDRE4pKSB7CgkJCQkJY3VycmVudENETiA9IHNlbGYucmFuZG9tQ0ROKCk7CgkJCQl9CgkJCQlzZWxmLnVwZGF0ZUNETihjdXJyZW50Q0ROKTsKCgkJCQkvLyDmmoLml7bpmpDol48KCQkJCS8vIHNlbGYubGlua0Rvd25sb2FkLmhpZGUoKTsKCQkJfQoKCgkJCXVuc2FmZUV4ZWMoZnVuY3Rpb24oCgkJCQlzY3JpcHROYW1lLCBob29rTmFtZSwgaG9va1F1ZXVlVXBkYXRlLCBiSW50ZXJuYXRpb25hbCwKCQkJCWNkbl9pcCwgYlByb3h5SW5zdGFsbGVkLCBfX01QM19CTEFOSywKCQkJCWJVc2VUaHJpZE9uRmFpbAoJCQkpIHsKCQkJCXZhciBRVUVVRV9LRVkgPSAidHJhY2stcXVldWUtY2FjaGUiOwoJCQkJdmFyIENETl9LRVkgICA9ICdfd3NfY2RuX21lZGlhJzsKCgkJCQkvLyDlu7rnq4vnvJPlrZgKCQkJCXZhciBfY2FjaGUgPSB7fTsKCgkJCQkvKioKCQkJCSAqIOmHjei9vee8k+WtmO+8jOmYsuatoueUqOaIt+W8gOWQr+S4pOS4quagh+etvumhteWvvOiHtOabsuebrue8k+WtmOS4jeWQjOatpeOAggoJCQkJICovCgkJCQlmdW5jdGlvbiByZWxvYWRDYWNoZSAoKSB7CgkJCQkJdHJ5IHsKCQkJCQkJX2NhY2hlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbUVVFVUVfS0VZXSk7CgkJCQkJfSBjYXRjaCAoZXJyKSB7CgkJCQkJCWxvY2FsU3RvcmFnZVtRVUVVRV9LRVldID0gJ3t9JzsKCQkJCQl9CgkJCQl9CgoJCQkJLyoqCgkJCQkgKiDlgqjlrZjnvJPlrZjoh7MgbG9jYWxTdG9yYWdlCgkJCQkgKi8KCQkJCWZ1bmN0aW9uIHNhdmVDYWNoZSAoKSB7CgkJCQkJbG9jYWxTdG9yYWdlW1FVRVVFX0tFWV0gPSBKU09OLnN0cmluZ2lmeShfY2FjaGUpOwoJCQkJfQoKCQkJCS8vIOebkeWQrOe8k+WtmOOAgUNETiDlkIzmraXkuovku7YKCQkJCXZhciBfbmVlZF9yZWxvYWQgPSB0cnVlOwoJCQkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCBmdW5jdGlvbiAoZSkgewoJCQkJCXN3aXRjaCAoZS5rZXkpIHsKCQkJCQkJY2FzZSBRVUVVRV9LRVk6CgkJCQkJCQlfbmVlZF9yZWxvYWQgPSB0cnVlOwoJCQkJCQkJYnJlYWs7CgoJCQkJCQljYXNlIENETl9LRVk6CgkJCQkJCQljZG5faXAgPSBsb2NhbFN0b3JhZ2VbQ0ROX0tFWV07CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9LCBmYWxzZSk7CgoJCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihzY3JpcHROYW1lICsgJy1jZG4nLCBmdW5jdGlvbihlKSB7CgkJCQkJY2RuX2lwID0gZS5kZXRhaWw7CgkJCQl9KTsKCgkJCQlmdW5jdGlvbiBjaGVja0FuZFJlbG9hZCAoKSB7CgkJCQkJaWYgKF9uZWVkX3JlbG9hZCkKCQkJCQkJcmVsb2FkQ2FjaGUoKTsKCQkJCX0KCgkJCQkvKioKCQkJCSAqIOWFi+mahuS4gOS7veWvueixoQoJCQkJICogQHBhcmFtICB7T2JqZWN0fSBvYmog5a+56LGhCgkJCQkgKiBAcmV0dXJuIHtPYmplY3R9ICAgICDlhYvpmoblkI7nmoTlr7nosaEKCQkJCSAqLwoJCQkJZnVuY3Rpb24gcmVidWlsZF9vYmplY3QgKG9iaikgewoJCQkJCXJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpOwoJCQkJfQoKCQkJCWZ1bmN0aW9uIGdlbmVyYXRlU2NyaXB0UHJvdG9jb2wgKHNvbmdPYmopIHsKCQkJCQlyZXR1cm4gewoJCQkJCQlhcnRpc3Q6IChzb25nT2JqLmFydGlzdHMgfHwgc29uZ09iai5hcikubWFwKGZ1bmN0aW9uKGFydGlzdCkgewoJCQkJCQkJcmV0dXJuIGFydGlzdC5uYW1lOwoJCQkJCQl9KS5qb2luKCfjgIEnKSwKCQkJCQkJbmFtZTogc29uZ09iai5uYW1lLAoJCQkJCQlzb25nOiBKU09OLnN0cmluZ2lmeShzb25nT2JqKQoJCQkJCX07CgkJCQl9CgoJCQkJLyoqCgkJCQkgKiDlsIbmm7Lnm67lhajpg6jovazmjaLkuLrpu4TmmJPmkq3mlL7lmajog73or4bliKvnmoTmoLzlvI/jgIIKCQkJCSAqIEBwYXJhbSAge0FycmF5fSBzb25ncyDmm7Lnm67liJfooagKCQkJCSAqIEByZXR1cm4ge09iamVjdH0gICAgICDmtYHph4/mqKHmi58KCQkJCSAqLwoJCQkJZnVuY3Rpb24gc29uZ3NfdG9fZGF0YSAoc29uZ3MpIHsKCQkJCQl2YXIgc29uZ09iaiA9IHNvbmdzWzBdOwoKCQkJCQl2YXIgZXZlU29uZ09iaiA9IGdlbmVyYXRlU2NyaXB0UHJvdG9jb2woc29uZ09iaik7CgoJCQkJCWRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHNjcmlwdE5hbWUsIHsKCQkJCQkJZGV0YWlsOiBldmVTb25nT2JqCgkJCQkJfSkpOwoKCQkJCQlyZXR1cm4gewoJCQkJCQljb2RlOiAyMDAsCgkJCQkJCWRhdGE6IHNvbmdzLm1hcChmdW5jdGlvbiAoc29uZykgewoJCQkJCQkJdmFyIHNvbmdfb2JqID0gcmVidWlsZF9vYmplY3Qoc29uZyk7CgkJCQkJCQlpZiAoc29uZ19vYmoubXAzVXJsKSB7CgkJCQkJCQkJaWYgKGJJbnRlcm5hdGlvbmFsKSB7CgkJCQkJCQkJCXNvbmdfb2JqLm1wM1VybCA9IHNvbmdfb2JqLm1wM1VybC5yZXBsYWNlKCdodHRwOi8vJywgJ2h0dHA6Ly8xMjcuMC4wLjE6NDAwMy8nKTsKCQkJCQkJCQl9CgkJCQkJCQkJc29uZ19vYmoudXJsID0gc29uZ19vYmoubXAzVXJsOwoJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQlzb25nX29iai51cmwgPSBfX2p4X2dldFNvbmdVcmwoc29uZ19vYmopOwoJCQkJCQkJfQoJCQkJCQkJc29uZ19vYmouZXhwaSA9IDFlMTM7CgkJCQkJCQlyZXR1cm4gc29uZ19vYmo7CgkJCQkJCX0pLAoJCQkJCQlfcmF3OiBzb25ncwoJCQkJCX07CgkJCQl9CgoJCQkJdmFyIGFqYXggPSBuZWoualtob29rTmFtZV07CgkJCQlmdW5jdGlvbiBhamF4UGF0Y2hNYWlubGFuZCAodXJsLCBwYXJhbXMpIHsKCQkJCQlpZiAoLTEgIT09IHVybC5pbmRleE9mKCdsb2cvJykpIHsKCQkJCQkJc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CgkJCQkJCQlwYXJhbXMub25sb2FkKHsgY29kZTogMjAwIH0pOwoJCQkJCQl9LCAxMDApOwoJCQkJCQlyZXR1cm4gOwoJCQkJCX0KCgkJCQkJaWYgKHVybCA9PSAnL2FwaS9zb25nL2VuaGFuY2UvcGxheWVyL3VybCcpIHsKCQkJCQkJdXJsID0gJy9hcGkvdjMvc29uZy9kZXRhaWwnOwoKCQkJCQkJaWYgKHBhcmFtcy5xdWVyeS5icikKCQkJCQkJCWRlbGV0ZSBwYXJhbXMucXVlcnkuYnI7CgoJCQkJCQkvLyDmo4Dmn6XnvJPlrZgsIOWHj+Wwkea1gemHjwoJCQkJCQl2YXIgX2lkcyA9IEpTT04ucGFyc2UocGFyYW1zLnF1ZXJ5Lmlkcyk7CgkJCQkJCXZhciBfcmVxX2lkcyA9IFtdOwoJCQkJCQljaGVja0FuZFJlbG9hZCgpOwoJCQkJCQlfaWRzID0gX2lkcy5tYXAoZnVuY3Rpb24gKGlkKSB7CgkJCQkJCQlpZiAoaWQgaW4gX2NhY2hlKSB7CgkJCQkJCQkJcmV0dXJuIF9jYWNoZVtpZF07CgkJCQkJCQl9CgoJCQkJCQkJX3JlcV9pZHMucHVzaChpZCk7CgkJCQkJCQlyZXR1cm4gaWQ7CgkJCQkJCX0pOwoKCQkJCQkJaWYgKF9yZXFfaWRzLmxlbmd0aCA9PT0gMCkgewoJCQkJCQkJLy8g55u05o6l6L+U5Zue5oiR5Lus55qE57yT5a2Y5pWw5o2uCgkJCQkJCQljb25zb2xlLmluZm8oJ1slc11bSU5GT10gTG9hZCBmcm9tIGNhY2hlOiAnLCBzY3JpcHROYW1lLCBwYXJhbXMucXVlcnkuaWRzKTsKCQkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24gKCl7CgkJCQkJCQkJcGFyYW1zLm9ubG9hZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJCQkJfSwgMSwgc29uZ3NfdG9fZGF0YShfaWRzKSk7CgkJCQkJCQlyZXR1cm4gOwoJCQkJCQl9CgoJCQkJCQkvLyDnvLrlsJHmlbDmja4sIOivt+axguacjeWKoeWZqAoJCQkJCQljb25zb2xlLmluZm8oJ1slc11bSU5GT10gUmVxdWVzdCBmcm9tIHNlcnZlcjogJywgc2NyaXB0TmFtZSwgX3JlcV9pZHMpOwoKCQkJCQkJLy8gdjMgYXBpCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gX3JlcV9pZHMubWFwKGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgaWQ6IGlkIH07CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YV9zdHIgPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5jID0gZGF0YV9zdHI7CgkJCQkJCXBhcmFtcy5xdWVyeSA9IGRhdGE7CgoJCQkJCQkvLyDmioogb25sb2FkIOe8k+WtmOaIkeS7rOeahOWHveaVsO+8jOaWueS+v+e8k+WtmOOAggoJCQkJCQl2YXIgX29ubG9hZCA9IHBhcmFtcy5vbmxvYWQ7CgkJCQkJCXBhcmFtcy5vbmxvYWQgPSBmdW5jdGlvbiAoZGF0YSkgewoJCQkJCQkJLy8g6aaW5YWI6YeN5paw5Yqg6L2957yT5a2YLCDpmLLmraLlhrLnqoEKCQkJCQkJCWNoZWNrQW5kUmVsb2FkKCk7CgoJCQkJCQkJLy8g5ou85o6l5pWw5o2u6Iez57yT5a2YCgkJCQkJCQlkYXRhLnNvbmdzLmZvckVhY2goZnVuY3Rpb24gKHNvbmcpIHsKCQkJCQkJCQl2YXIgaSA9IF9pZHMuaW5kZXhPZihzb25nLmlkKTsKCgkJCQkJCQkJaWYgKGkgPT0gLTEpIHsgZGVidWdnZXI7IC8vIGkg5LiN5b6X5bCP5LqOIDAgIQoJCQkJCQkJCQl0aHJvdyBuZXcgRXJyb3IoJ+WPluW+l+e0ouW8leWksei0peOAgicpOwoJCQkJCQkJCX0KCgkJCQkJCQkJX2lkc1tpXSA9IHNvbmc7CgkJCQkJCQkJX2NhY2hlW3NvbmcuaWRdID0gc29uZzsKCQkJCQkJCX0pOwoKCQkJCQkJCS8vIOWCqOWtmAoJCQkJCQkJc2F2ZUNhY2hlKCk7CgoJCQkJCQkJc2V0VGltZW91dChfb25sb2FkLCAxLCBzb25nc190b19kYXRhKF9pZHMpKTsKCQkJCQkJfTsKCQkJCQl9CgoJCQkJCXJldHVybiBhamF4KHVybCwgcGFyYW1zKTsKCQkJCX0KCgkJCQkvLyDlvLrliLbliLfmlrDmkq3mlL7lmagKCQkJCS8vIOeUqOS6juino+aekOS4i+i9vSAvIOa1t+WkluWkhOeQhuOAggoJCQkJZnVuY3Rpb24gbmV4dFNvbmcgKCkgewoJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ueHQnKS5jbGljaygpOwoJCQkJfQoJCQkJbmV4dFNvbmcoKTsKCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewoJCQkJCWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcnYnKS5jbGljaygpOwoJCQkJfSwgMzAwKTsKCgkJCQl2YXIgc29uZ0luZm8gPSB7fTsKCQkJCXZhciBicl9saXN0ID0gWzEyODAwMCwgOTYwMDAsIDE5MjAwMCwgMzIwMDAwXTsKCgkJCQlmdW5jdGlvbiBhamF4UGF0Y2hJbnRlcm5hdGlvbmFsICh1cmwsIHBhcmFtcywgdHJ5X2JyKSB7CgkJCQkJdmFyIF9ub25jZSA9IHNvbmdJbmZvLl9ub25jZTsKCgkJCQkJaWYgKC0xICE9PSB1cmwuaW5kZXhPZignbG9nLycpKSB7CgkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewoJCQkJCQkJcGFyYW1zLm9ubG9hZCh7IGNvZGU6IDIwMCB9KTsKCQkJCQkJfSwgMTAwKTsKCQkJCQkJcmV0dXJuIDsKCQkJCQl9CgoJCQkJCWlmICh1cmwgPT0gJy9hcGkvc29uZy9lbmhhbmNlL3BsYXllci91cmwnKSB7CgkJCQkJCXZhciBzZWxmID0gdGhpczsKCgkJCQkJCWlmICghcGFyYW1zLmhlYWRlcnMpCgkJCQkJCQlwYXJhbXMuaGVhZGVycyA9IHt9OwoKCQkJCQkJcGFyYW1zLmhlYWRlcnNbJ1gtUmVhbC1JUCddID0gJzExOC44OC44OC44OCc7CgoJCQkJCQl2YXIgX29ubG9hZCA9IHBhcmFtcy5vbmxvYWQ7CgkJCQkJCXBhcmFtcy5vbmxvYWQgPSBmdW5jdGlvbiAoZGF0YSkgewoJCQkJCQkJaWYgKGRhdGEuZGF0YVswXS51cmwpIHsKCQkJCQkJCQlvblBhcnNlU3VjY2VzcyhkYXRhLmRhdGFbMF0udXJsKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJLy8g6Kej5p6Q5LiN5Yiw6Z+z5LmQLCDlubbkuJTkuI3lnKjph43or5XpmLbmrrU6CgkJCQkJCQkJLy8g5bCd6K+V5L2/55So56ys5LiJ5pa55pCc5q2MCgkJCQkJCQkJaWYgKGJVc2VUaHJpZE9uRmFpbCAmJiAhdHJ5X2JyKSB7CgkJCQkJCQkJCWRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHNjcmlwdE5hbWUgKyAnLU5FLVNQWScsIHsKCQkJCQkJCQkJCWRldGFpbDogSlNPTi5zdHJpbmdpZnkoewoJCQkJCQkJCQkJCWlkOiBKU09OLnBhcnNlKHBhcmFtcy5xdWVyeS5pZHMpWzBdLAoJCQkJCQkJCQkJCWNhbGxiYWNrOiBnZW5lcmF0ZUNhbGxiYWNrKG9uUmVjdlNweURhdGEpCgkJCQkJCQkJCQl9KQoJCQkJCQkJCQl9KSk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJLy8g6Kej5p6Q5LiN5Yiw6Z+z5LmQOiDoh6rliqjkuIvkuIDpppYKCQkJCQkJCQkJZmFpbFRyeU5leHQoKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgoJCQkJCQkJcmV0dXJuIDsKCQkJCQkJfTsKCQkJCQl9CgoJCQkJCXJldHVybiBhamF4KHVybCwgcGFyYW1zKTsKCgkJCQkJZnVuY3Rpb24gZ2VuZXJhdGVDYWxsYmFjayAoY2IpIHsKCQkJCQkJdmFyIG5hbWUgPSAnX2NiXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc2xpY2UoMykgKyAnXycgKyBEYXRlLm5vdygpOwoJCQkJCQl3aW5kb3dbbmFtZV0gPSBmdW5jdGlvbiAoKSB7CgkJCQkJCQl2YXIgciA9IGNiLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkJCQkJCQlkZWxldGUgd2luZG93W25hbWVdOwoJCQkJCQkJcmV0dXJuIHI7CgkJCQkJCX07CgkJCQkJCXJldHVybiBuYW1lOwoJCQkJCX0KCgkJCQkJZnVuY3Rpb24gb25QYXJzZVN1Y2Nlc3MgKHVybCkgewoJCQkJCQkvLyDlt7Lnu4/mmK/liKvnmoTmrYzmm7LlnKjop6PmnpDkuK3kuoYhCgkJCQkJCWlmIChfbm9uY2UgIT0gc29uZ0luZm8uX25vbmNlKSByZXR1cm4gOwoKCQkJCQkJLy8gbTEwIOWfn+WQjeeahOmfs+S5kOaWh+S7tuWPr+S7pemAmui/h+WJjee9riBjZG4gaXAg57uV6L+HLgoJCQkJCQl2YXIgc29uZ191cmwgPSB1cmw7CgkJCQkJCWlmICgvbVxkK1wubXVzaWNcLjEyNlwubmV0Ly50ZXN0KHNvbmdfdXJsKSkgewoJCQkJCQkJc29uZ191cmwgPSBzb25nX3VybC5yZXBsYWNlKCdodHRwOi8vJywgJ2h0dHA6Ly8nICsgY2RuX2lwICsgJy8nKTsKCQkJCQkJfQoKCgkJCQkJCS8vIOaehOW7uuS4i+i9veS/oeaBrwoJCQkJCQl2YXIgX2luZm8gPSByZWJ1aWxkX29iamVjdChzb25nSW5mbyk7CgkJCQkJCXZhciBldmVTb25nT2JqID0gZ2VuZXJhdGVTY3JpcHRQcm90b2NvbChfaW5mbyk7CgkJCQkJCWV2ZVNvbmdPYmouc29uZ191cmwgPSBzb25nX3VybDsKCQkJCQkJZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoc2NyaXB0TmFtZSwgewoJCQkJCQkJZGV0YWlsOiBldmVTb25nT2JqCgkJCQkJCX0pKTsKCgkJCQkJCXJldHVybiBfb25sb2FkKHsKCQkJCQkJCWRhdGE6IFt7CgkJCQkJCQkJaWQ6IHNvbmdJbmZvLmlkLAoJCQkJCQkJCXVybDogc29uZ191cmwsCgkJCQkJCQkJYnI6IDE5MjAwMCwKCQkJCQkJCQlzaXplOiAwLAoJCQkJCQkJCW1kNTogbnVsbCwKCQkJCQkJCQljb2RlOiAyMDAsCgkJCQkJCQkJZXhwaTogMTIwMCwKCQkJCQkJCQl0eXBlOiAnbXAzJywKCQkJCQkJCQlnYWluOiAwLAoJCQkJCQkJCWZlZTogMCwKCQkJCQkJCQl1ZjogbnVsbCwKCQkJCQkJCQlwYXllZDogMCwKCQkJCQkJCQljYW5FeHRlbmQ6IGZhbHNlCgkJCQkJCQl9XSwKCQkJCQkJCWNvZGU6IDIwMAoJCQkJCQl9KTsKCQkJCQl9CgoJCQkJCWZ1bmN0aW9uIGZhaWxUcnlOZXh0ICgpIHsKCQkJCQkJY29uc29sZS53YXJuKCdbJXNdIOi9veWFpemfs+S5kOaVsOaNruWksei0pSwg5YeG5aSH5LitLi4nLCBzY3JpcHROYW1lKTsKCgkJCQkJCWlmICghdHJ5X2JyKSB7CgkJCQkJCQl0cnlfYnIgPSBwYXJzZUludChwYXJhbXMucXVlcnkuYnIpOwoJCQkJCQl9CgoJCQkJCQl2YXIgaSA9IGJyX2xpc3QuaW5kZXhPZih0cnlfYnIpICsgMTsKCQkJCQkJaWYgKGkgPCBicl9saXN0Lmxlbmd0aCkgewoJCQkJCQkJY29uc29sZS5pbmZvICgnWyVzXSDlsJ3or5XnoIHnjocgJWRrYnBzJywgc2NyaXB0TmFtZSwgYnJfbGlzdFtpXSAvIDEwMDApOwoJCQkJCQkJcGFyYW1zLm9ubG9hZCA9IF9vbmxvYWQ7CgkJCQkJCQlhamF4UGF0Y2hJbnRlcm5hdGlvbmFsKHVybCwgcGFyYW1zLCBicl9saXN0W2ldKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWNvbnNvbGUuaW5mbyAoJ1slc10g5pS+5byDLCDot7Poh7PkuIvkuIDpppYnLCBzY3JpcHROYW1lKTsKCQkJCQkJCW5leHRTb25nKCk7CgkJCQkJCX0KCQkJCQl9CgoJCQkJCWZ1bmN0aW9uIG9uUmVjdlNweURhdGEgKHVybCkgewoJCQkJCQlpZiAoIXVybCkgewoJCQkJCQkJY29uc29sZS5pbmZvKCfpgJrov4fnrKzkuInmlrnojrflj5bpn7PkuZDlnLDlnYDlpLHotKUsIOatjOabsuS4jeWPr+eUqC4nKTsKCQkJCQkJCWZhaWxUcnlOZXh0KCk7CgkJCQkJCQlyZXR1cm4gOwoJCQkJCQl9CgoJCQkJCQlvblBhcnNlU3VjY2Vzcyh1cmwpOwoJCQkJCX0KCQkJCX0KCgkJCQl2YXIgcHVyZUludGVybmF0aW9uYWwgPSBiSW50ZXJuYXRpb25hbCAmJiAhYlByb3h5SW5zdGFsbGVkOwoJCQkJbmVqLmpbaG9va05hbWVdID0gcHVyZUludGVybmF0aW9uYWwgPyBhamF4UGF0Y2hJbnRlcm5hdGlvbmFsIDogYWpheFBhdGNoTWFpbmxhbmQ7CgkJCQlpZiAocHVyZUludGVybmF0aW9uYWwpIHsKCQkJCQl2YXIgX3F1ZXVlVXBkYXRlID0gbm0udy5wUC5wcm90b3R5cGVbaG9va1F1ZXVlVXBkYXRlXTsKCQkJCQlubS53LnBQLnByb3RvdHlwZVtob29rUXVldWVVcGRhdGVdID0gZnVuY3Rpb24gKCkgewoJCQkJCQl2YXIgciA9IF9xdWV1ZVVwZGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJCQlzb25nSW5mbyA9IHJlYnVpbGRfb2JqZWN0KHIpOwoJCQkJCQlzb25nSW5mby5fbm9uY2UgPSBNYXRoLnJhbmRvbSgpOwoJCQkJCQlyZXR1cm4gcjsKCQkJCQl9OwoJCQkJfQoKCQkJfSwKCQkJCUguc2NyaXB0TmFtZSwgaG9va05hbWUsIGhvb2tRdWV1ZVVwZGF0ZSwgSC5jb25maWcuYkludGVybmF0aW9uYWwsIAoJCQkJY3VycmVudENETiwgSC5jb25maWcuYlByb3h5SW5zdGFsbGVkLCBzZWxmLl9fTVAzX0JMQU5LLAoJCQkJSC5jb25maWcuYlVzZVRocmlkT25GYWlsCgkJCSk7CgkJfSk7Cgl9LAoKCS8qKgoJICog5aSW6ZO+5pKt5pS+5Zmo6JmV55CGCgkgKi8KCWhvb2tQbGF5ZXJPdXRjaGFpbjogZnVuY3Rpb24gKCkgewoJCXZhciBzZWxmID0gdGhpczsKCQlILndhaXRVbnRpbCgnbm0ubS5EbScsIGZ1bmN0aW9uKCkgewoJCQlzZWxmLmxpbmtEb3dubG9hZCA9ICQoJzxhPicpCgkJCQkuaW5zZXJ0QmVmb3JlKCcub3ByQm94ID4gLmJnLm9wZW4nKQoJCQkJLmFkZENsYXNzKCdiZyBuZXh0JykKCQkJCS5jc3MoewoJCQkJCXRyYW5zZm9ybTogJ3JvdGF0ZSg5MGRlZyknLAoJCQkJCXBvc2l0aW9uOiAnYWJzb2x1dGUnLAoJCQkJCXJpZ2h0OiAnMjFweCcsCgkJCQkJdG9wOiAnM3B4JywKCQkJCQlvcGFjaXR5OiAwLjYKCQkJCX0pOwoKCQkJLy8g5bCL5om+5rOo5YWl5Ye95pW4CgkJCXZhciBmblBsYXlBdEluZGV4ID0gc2VsZi5zZWFyY2hGdW5jdGlvbih1bnNhZmVXaW5kb3cubm0ubS5EbS5wcm90b3R5cGUsCgkJCQknbm0ubS5EbS5wcm90b3R5cGUnLCAnLm1wM1VybCk7Jyk7CgkJCXNlbGYuZmx1c2hMb2dUYWJsZSgpOwoKCQkJaWYgKCFmblBsYXlBdEluZGV4KQoJCQkJcmV0dXJuIDsKCgkJCXVuc2FmZUV4ZWMoZnVuY3Rpb24oc2NyaXB0TmFtZSwgZm5QbGF5QXRJbmRleCwgYkludGVybmF0aW9uYWwsIGJQcm94eUluc3RhbGxlZCwgY2RuX2lwLCBjc3NUaXRsZSwgY3NzU3VidGl0bGUpIHsKCQkJCXZhciBDRE5fS0VZID0gJ193c19jZG5fbWVkaWEnOwoJCQkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCBmdW5jdGlvbiAoZSkgewoJCQkJCXN3aXRjaCAoZS5rZXkpIHsKCQkJCQkJY2FzZSBDRE5fS0VZOgoJCQkJCQkJY2RuX2lwID0gbG9jYWxTdG9yYWdlW0NETl9LRVldOwoJCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfSwgZmFsc2UpOwoJCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihzY3JpcHROYW1lICsgJy1jZG4nLCBmdW5jdGlvbihlKSB7CgkJCQkJY2RuX2lwID0gZS5kZXRhaWw7CgkJCQl9KTsKCgkJCQlmdW5jdGlvbiBpbnNlcnRBZnRlcihuZXdOb2RlLCByZWYpIHsKCQkJCQlyZWYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobmV3Tm9kZSwgcmVmLm5leHRTaWJsaW5nKTsKCQkJCX0KCgkJCQl2YXIgc3ViVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzbWFsbCcpOwoJCQkJdmFyIHBhZ2VUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpOwoJCQkJaWYgKHBhZ2VUaXRsZSkgewoJCQkJCWluc2VydEFmdGVyKHN1YlRpdGxlLCBwYWdlVGl0bGUpOwoJCQkJCXBhZ2VUaXRsZS5zdHlsZS5jc3NUZXh0ID0gY3NzVGl0bGU7CgkJCQkJc3ViVGl0bGUuc3R5bGUuY3NzVGV4dCA9IGNzc1N1YnRpdGxlOwoJCQkJfQoKCgkJCQl2YXIgX2Jha1BsYXllclVwZGF0ZVVJID0gbm0ubS5EbS5wcm90b3R5cGVbZm5QbGF5QXRJbmRleF07CgoJCQkJdmFyIG0gPSBfYmFrUGxheWVyVXBkYXRlVUkudG9TdHJpbmcoKS5tYXRjaCgvPXRoaXMuKFx3KylcWy8pOwoJCQkJaWYgKCFtKSByZXR1cm4gOwoKCQkJCXZhciB0cmFja3MgPSBtWzFdOwoJCQkJbm0ubS5EbS5wcm90b3R5cGVbZm5QbGF5QXRJbmRleF0gPSBmdW5jdGlvbihzb25nSW5kZXgpIHsKCQkJCQl2YXIgaSA9IHBhcnNlSW50KHNvbmdJbmRleCkgfHwgMDsKCQkJCQl2YXIgbGVuID0gdGhpc1t0cmFja3NdLmxlbmd0aDsKCQkJCQlpZiAoaSA+PSBsZW4pIHsKCQkJCQkJaSA9IDA7CgkJCQkJfSBlbHNlIGlmIChpIDwgMCkgewoJCQkJCQlpID0gbGVuIC0gMTsKCQkJCQl9CgoJCQkJCXZhciB0cmFjayA9IHRoaXNbdHJhY2tzXVtpXTsKCQkJCQl0cmFjay5mZWUgPSB0cmFjay5zdGF0dXMgPSAwOwoKCQkJCQlzdWJUaXRsZS50ZXh0Q29udGVudCA9ICdcdTI1YjYgJyArIHRyYWNrLm5hbWU7CgkJCQkJc3ViVGl0bGUudGl0bGUgPSB0cmFjay5uYW1lOwoKCQkJCQkvLyDlnIvpmpvnlKjmiLbovYnmj5vlnLDlnYAKCQkJCQlpZiAoYkludGVybmF0aW9uYWwpIHsKCQkJCQkJaWYgKGJQcm94eUluc3RhbGxlZCkgewoJCQkJCQkJdHJhY2subXAzVXJsID0gdHJhY2subXAzVXJsLnJlcGxhY2UoJ2h0dHA6Ly8nLCAnaHR0cDovLzEyNy4wLjAuMTo0MDAzLycpOwoJCQkJCQl9IGVsc2UgewoKCQkJCQkJCXZhciBzb25nX3VybCA9IHRyYWNrLm1wM1VybDsKCQkJCQkJCWlmICgvbVxkK1wubXVzaWNcLjEyNlwubmV0Ly50ZXN0KHNvbmdfdXJsKSkgewoJCQkJCQkJCXNvbmdfdXJsID0gc29uZ191cmwucmVwbGFjZSgnaHR0cDovLycsICdodHRwOi8vJyArIGNkbl9pcCArICcvJyk7CgkJCQkJCQl9CgkJCQkJCQl0cmFjay5tcDNVcmwgPSBzb25nX3VybDsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJdmFyIGV2ZVNvbmdPYmogPSB7CgkJCQkJCWFydGlzdDogKHRyYWNrLmFydGlzdHMgfHwgdHJhY2suYXIpLm1hcChmdW5jdGlvbihhcnRpc3QpIHsKCQkJCQkJCXJldHVybiBhcnRpc3QubmFtZTsKCQkJCQkJfSkuam9pbign44CBJyksCgkJCQkJCW5hbWU6IHRyYWNrLm5hbWUsCgkJCQkJCXNvbmc6IEpTT04uc3RyaW5naWZ5KHRyYWNrKQoJCQkJCX07CgoJCQkJCWRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHNjcmlwdE5hbWUsIHsKCQkJCQkJZGV0YWlsOiBldmVTb25nT2JqCgkJCQkJfSkpOwoKCQkJCQlyZXR1cm4gX2Jha1BsYXllclVwZGF0ZVVJLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkJCQl9OwoJCQkJCgkJCX0sIEguc2NyaXB0TmFtZSwgZm5QbGF5QXRJbmRleCwgSC5jb25maWcuYkludGVybmF0aW9uYWwsIEguY29uZmlnLmJQcm94eUluc3RhbGxlZCwgc2VsZi5jZG5faXAsIEguZXh0cmFjdChmdW5jdGlvbiAoKSB7LyoKCQkJCXBhZGRpbmctdG9wOiAuMmVtOwoJCQkJb3ZlcmZsb3c6IGhpZGRlbjsKCQkJCXdoaXRlLXNwYWNlOiBub3dyYXA7CgkJCQl0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKCQkJKi99KSwgSC5leHRyYWN0KGZ1bmN0aW9uICgpIHsvKgoJCQkJcGFkZGluZy1sZWZ0OiAuNXJlbTsKCQkJCWNvbG9yOiAjYWFhOwoJCQkJZGlzcGxheTogYmxvY2s7CgkJCQltYXJnaW4tdG9wOiAtMC41cmVtOwoJCQkJb3ZlcmZsb3c6IGhpZGRlbjsKCQkJCXdoaXRlLXNwYWNlOiBub3dyYXA7CgkJCQl0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKCQkJKi99KSk7CgkJfSk7Cgl9LAoKCWhvb2tQbGF5ZXJGbTogZnVuY3Rpb24gKCkgewoJCXZhciBzZWxmID0gdGhpczsKCQlILndhaXRVbnRpbCgnbm0ubS5mTycsIGZ1bmN0aW9uKCkgewoJCQl2YXIgaG9vayA9IHNlbGYuc2VhcmNoRnVuY3Rpb24oCgkJCQl1bnNhZmVXaW5kb3cubm0ubS5mTy5wcm90b3R5cGUsICdubS5tLmZPOjonLCAnLm1wM1VybCx0cnVlJyk7CgkJCXNlbGYuZmx1c2hMb2dUYWJsZSgpOwoKCQkJc2VsZi5saW5rRG93bmxvYWQgPSAkKCc8YT4nKQoJCQkJLnByZXBlbmRUbygnLm9wdHMuZi1jYj4uZi1mcicpCgkJCQkuYWRkQ2xhc3MoJ2ljb24gaWNvbi1uZXh0JykKCQkJCS5odG1sKCcmbmJzcDsnKQoJCQkJLmNzcygndHJhbnNmb3JtJywgJ3JvdGF0ZSg5MGRlZyknKTsKCQkJCgkJCXVuc2FmZUV4ZWMoZnVuY3Rpb24oc2NyaXB0TmFtZSwgaG9vaykgewoJCQkJdmFyIF9iYWtQbGF5U29uZyA9IG5tLm0uZk8ucHJvdG90eXBlW2hvb2tdOwoKCQkJCW5tLm0uZk8ucHJvdG90eXBlW2hvb2tdID0gZnVuY3Rpb24oc29uZ09iaikgewoJCQkJCXZhciBldmVTb25nT2JqID0gewoJCQkJCQlhcnRpc3Q6IChzb25nT2JqLmFydGlzdHMgfHwgc29uZ09iai5hcikubWFwKGZ1bmN0aW9uKGFydGlzdCkgewoJCQkJCQkJcmV0dXJuIGFydGlzdC5uYW1lOwoJCQkJCQl9KS5qb2luKCfjgIEnKSwKCQkJCQkJbmFtZTogc29uZ09iai5uYW1lLAoJCQkJCQlzb25nOiBKU09OLnN0cmluZ2lmeShzb25nT2JqKQoJCQkJCX07CgoJCQkJCWRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KHNjcmlwdE5hbWUsIHsKCQkJCQkJZGV0YWlsOiBldmVTb25nT2JqCgkJCQkJfSkpOwoKCQkJCQlyZXR1cm4gX2Jha1BsYXlTb25nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkJCQl9OwoJCQl9LCBILnNjcmlwdE5hbWUsIGhvb2spOwoJCX0pOwoJfSwKCgkvLyDmnI3liqHlmaggMSB+IDg7IOS9huaYr+iyjOS8vCAxIH4gMiDnmoTmnIDnqLPlrpoKCWdldFVyaTogZnVuY3Rpb24oc29uZykgewoJCXZhciBkc2ZJZDsKCQl2YXIgcSA9IChzb25nLmggfHwgc29uZy5oTXVzaWMgfHwgc29uZy5tIHx8IHNvbmcubU11c2ljIHx8IHNvbmcubCB8fCBzb25nLmxNdXNpYyB8fCBzb25nLmEgfHwgc29uZy5hTXVzaWMpOwoJCWlmIChxKSBkc2ZJZCA9IHEuZmlkIHx8IHEuZHNmSWQ7CgkJaWYgKCFkc2ZJZCkgewoJCQljb25zb2xlLmluZm8oJ+atjOabsiAlc1slZF0g5bey5LiL5p6277yM5peg5rOV6I635Y+W6Z+z5LmQ5Zyw5Z2AIScsIHNvbmcubmFtZSwgc29uZy5pZCk7CgkJCXJldHVybiB0aGlzLl9fTVAzX0JMQU5LOwoJCX0KCQl2YXIgcmFuZFNlcnZlciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpICsgMTsKCgoJCXZhciBjZG5QcmVmaXggPSAnJzsKCQl2YXIgY2RuU2VydmVyID0gJ20nOwoJCWlmIChILmNvbmZpZy5iSW50ZXJuYXRpb25hbCkgewoJCQlpZiAoSC5jb25maWcuYlByb3h5SW5zdGFsbGVkKSB7CgkJCQljZG5QcmVmaXggPSAnMTI3LjAuMC4xOjQwMDMvJzsKCQkJfSBlbHNlIHsKCQkJCWNkblByZWZpeCA9IHRoaXMud3NfY2RuX21lZGlhICsgJy8nOwoJCQkJY2RuU2VydmVyID0gJ3AnOwoJCQl9CgkJfQoKCQlyZXR1cm4gImh0dHA6Ly8iICsgY2RuUHJlZml4ICsgY2RuU2VydmVyICsgcmFuZFNlcnZlciArICIubXVzaWMuMTI2Lm5ldC8iICsgKHRoaXMuZGZzSGFzaChkc2ZJZCkpICsgIi8iICsgZHNmSWQgKyAiLm1wMyI7Cgl9LAoKCS8qKgoJICog5bCL5om+IERGUyDlk4jluIwKCSAqIEBwYXJhbSAge0ludGVnZXJ9IGRmc2lkICAg5ZOI5biM5YC8CgkgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgIOino+aekOWQjueahOWFp+WuueeahOWAvAoJICovCglkZnNIYXNoOiBmdW5jdGlvbihkZnNpZCkgewoJCWZ1bmN0aW9uIHN0clRvS2V5Q29kZXMgKHN0cikgewoJCQlyZXR1cm4gU3RyaW5nKHN0cikuc3BsaXQoJycpLm1hcChmdW5jdGlvbihlKSB7CgkJCQlyZXR1cm4gZS5jaGFyQ29kZUF0KCk7CgkJCX0pOwoJCX0KCgkJLy8g6L+Y5Y6fOgoJCS8vIGFyci5tYXAoZnVuY3Rpb24gKGUpIHsgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZSkgfSkuam9pbignJyk7CgkJLy8g5LiN6IO955u05o6l5LygIFN0cmluZy5mcm9tQ2hhckNvZGUgISEg5Y+C5pWwMiDnmoQgaW5kZXgg5Lya546p5Z2P6L+U5Zue5YC8CgkJCgkJdmFyIGtleXMgPSBbCgkJCTUxLCAxMDMsIDExMSwgNTYsIDM4LCAzNiwKCQkJNTYsIDQyLCA1MSwgNDIsIDUxLCAxMDQsCgkJCTQ4LCAxMDcsIDQwLCA1MCwgNDEsIDUwCgkJXTsKCgkJdmFyIGZpZHMgPSBzdHJUb0tleUNvZGVzKGRmc2lkKS5tYXAoZnVuY3Rpb24oZmlkLCBpKSB7CgkJCXJldHVybiAoZmlkIF4ga2V5c1tpICUga2V5cy5sZW5ndGhdKSAmIDB4RkY7CgkJfSk7CgoJCXJldHVybiBDcnlwdG9KUwoJCQkJCQkuTUQ1KENyeXB0b0pTLmxpYi5CeXRlQXJyYXkoZmlkcykpCgkJCQkJCS50b1N0cmluZyhDcnlwdG9KUy5lbmMuQmFzZTY0KQoJCQkJCQkucmVwbGFjZSgvXC8vZywgIl8iKQoJCQkJCQkucmVwbGFjZSgvXCsvZywgIi0iKTsKCX0sCgoJZW5jX2FqYXg6IGZ1bmN0aW9uICh1cmwsIHJlcU9iaiwgY2IpIHsKCQl2YXIgX2Nyc2YgPSB1bnNhZmVXaW5kb3cuTkVKX0NPTkYucF9jc3JmLnBhcmFtOwoJCXZhciBfdG9rZW4gPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCh1bnNhZmVXaW5kb3cuTkVKX0NPTkYucF9jc3JmLmNvb2tpZSArICc9KFxcdyspJykpWzFdOwoJCXJlcU9ialtfY3JzZl0gPSBfdG9rZW47CgoJCS8vIOaehOW7uiB1cmwKCQl1cmwgKz0gdXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJic7CgkJdXJsICs9IF9jcnNmICsgJz0nICsgX3Rva2VuOwoKCQl2YXIgZW5jcnlwdGVkRGF0YSA9IHVuc2FmZVdpbmRvdy5hc3JzZWEoSlNPTi5zdHJpbmdpZnkocmVxT2JqKSwgIjAxMDAwMSIsIjAwZTBiNTA5ZjYyNTlkZjg2NDJkYmMzNTY2MjkwMTQ3N2RmMjI2NzdlYzE1MmI1ZmY2OGFjZTYxNWJiN2I3MjUxNTJiM2FiMTdhODc2YWVhOGE1YWE3NmQyZTQxNzYyOWVjNGVlMzQxZjU2MTM1ZmNjZjY5NTI4MDEwNGUwMzEyZWNiZGE5MjU1N2M5Mzg3MDExNGFmNmM5ZDA1YzRmN2YwYzM2ODViN2E0NmJlZTI1NTkzMjU3NWNjZTEwYjQyNGQ4MTNjZmU0ODc1ZDNlODIwNDdiOTdkZGVmNTI3NDFkNTQ2YjhlMjg5ZGM2OTM1YjNlY2UwNDYyZGIwYTIyYjhlNyIsICIwQ29KVW02UXl3OFc4anVkIik7CgkJdmFyIHBvc3REYXRhID0gewoJCQlwYXJhbXM6IGVuY3J5cHRlZERhdGEuZW5jVGV4dCwKCQkJZW5jU2VjS2V5OiBlbmNyeXB0ZWREYXRhLmVuY1NlY0tleQoJCX07CgoJCXZhciBhamF4ID0gJC5hamF4KHsKCQkJdXJsOiB1cmwsCgkJCW1ldGhvZDogJ1BPU1QnLAoJCQlkYXRhOiBwb3N0RGF0YSwKCQkJZGF0YVR5cGU6ICdqc29uJwoJCX0pOwoKCQlpZiAoY2IpIGFqYXguZG9uZShjYik7CgoJCXJldHVybiBhamF4OwoJfSwKCglmZXRjaFNvbmc6IGZ1bmN0aW9uIChpZHMsIGNiKSB7CgkJcmV0dXJuIHRoaXMuZW5jX2FqYXgoJy93ZWFwaS9zb25nL2RldGFpbC8nLCB7CgkJCWlkczogaWRzCgkJfSwgY2IpOwoJfSwKCglnZXRNdklkOiBmdW5jdGlvbiAoc29uZ0lkLCBjYikgewoJCXZhciBfY2FjaGU7CgkJdHJ5IHsKCQkJX2NhY2hlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UubXZfY2FoY2UpOwoJCX0gY2F0Y2ggKGUpIHsKCQkJX2NhY2hlID0ge307CgkJfQoKCQlpZiAoc29uZ0lkIGluIF9jYWNoZSkgewoJCQljYihfY2FjaGVbc29uZ0lkXSk7CgkJCXJldHVybiA7CgkJfQoKCQl0aGlzLmZldGNoU29uZyhbJF9HRVQuaWRdLCBmdW5jdGlvbiAoZGF0YSkgewoJCQlpZiAoZGF0YS5jb2RlID09IDIwMCkgewoJCQkJdmFyIG12aWQgPSBfY2FjaGVbc29uZ0lkXSA9IGRhdGEuc29uZ3NbMF0ubXZpZDsKCQkJCWxvY2FsU3RvcmFnZS5tdl9jYWhjZSA9IEpTT04uc3RyaW5naWZ5KF9jYWNoZSk7CgkJCQljYihtdmlkKTsKCQkJfQoJCX0pOwoJfSwKCglwYXJzZU12OiBmdW5jdGlvbiAoKSB7CgkJdmFyICRmbGFzaEJveCA9ICQoJyNmbGFzaF9ib3gnKTsKCQlpZiAoJGZsYXNoQm94Lmxlbmd0aCkgewoJCQl2YXIgaHRtbCA9ICRmbGFzaEJveC5odG1sKCk7CgkJCXZhciBwYXJhbXMgPSBILnBhcnNlUXVlcnlTdHJpbmcoaHRtbC5tYXRjaCgvZmxhc2h2YXJzPSIoW1xzXFNdKz8pIi8pWzFdLnJlcGxhY2UoLyZhbXA7L2csICcmJykpOwoKCQkJdmFyIHEgPSB7CgkJCQlodXJsOiAn6auY5riFJywKCQkJCW11cmw6ICfmoIfmuIUnLAoJCQkJbHVybDogJ+a4o+eUu+i0qCcKCQkJfTsKCgkJCXZhciAkZGxIb2xkZXIgPSAkKCc8cD4nKS5jc3MoewoJCQkJdGV4dEFsaWduOiAncmlnaHQnCgkJCX0pLnRleHQoJ01WIOS4i+i9vTogJykuaW5zZXJ0QWZ0ZXIoJGZsYXNoQm94KTsKCQkJT2JqZWN0LmtleXMocSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CgkJCQlpZiAocGFyYW1zW2tleV0pIHsKCQkJCQl2YXIgJGRsID0gJCgnPGE+JykuYXR0cih7CgkJCQkJCWhyZWY6IEgudXJpKHBhcmFtc1trZXldLCBILnNwcmludGYoJyVzWyVzTVZdLm1wNCcsIHBhcmFtcy50cmFja05hbWUsIHFba2V5XSkpLAoJCQkJCQl0aXRsZTogSC5zcHJpbnRmKCfkuIvovb0gJXMg55qEICVzIE12JywgcGFyYW1zLnRyYWNrTmFtZSwgcVtrZXldKQoJCQkJCX0pLnByb3AoJ2Rvd25sb2FkJywgdHJ1ZSkudGV4dChxW2tleV0pOwoKCQkJCQkvLyDkv67mraMgMTYzIOiHquW3seeahOi3s+i9rC4KCQkJCQlILmNhcHR1cmVBcmlhKCRkbCk7CgkJCQkJJGRsSG9sZGVyLmFwcGVuZCgkZGwpOwoJCQkJCSRkbEhvbGRlci5hcHBlbmQoJyB8ICcpOwoJCQkJfQoJCQl9KTsKCQkJJGRsSG9sZGVyLmFwcGVuZChILnNwcmludGYgKCfmj5Dkvps6ICVzICVzICcsIEguc2NyaXB0TmFtZSwgSC52ZXJzaW9uKSk7CgoJCQlpZiAoSC5jb25maWcuYkludGVybmF0aW9uYWwpIHsKCQkJCSRmbGFzaEJveC5odG1sKGh0bWwucmVwbGFjZSgvcmVzdHJpY3Q9dHJ1ZS9nLCAncmVzdHJpY3Q9JykpOwoKCQkJCS8vIOiHquWKqOWFs+mXreW8ueWHuueahOaPkOekuuahhgoJCQkJdW5zYWZlRXhlYyhmdW5jdGlvbiAoKSB7CgkJCQkJdmFyIHQgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CgkJCQkJCXZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3pjbHMnKVswXTsKCQkJCQkJaWYgKGVsKSB7CgkJCQkJCQllbC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnbW91c2Vkb3duJykpOwoJCQkJCQkJY2xlYXJJbnRlcnZhbCh0KTsKCQkJCQkJfQoJCQkJCX0sIDEwMCk7CgkJCQl9KTsKCQkJfQoJCX0KCX0sCgoJZW5hYmxlU29uZ1BsYXlCdXR0b246IGZ1bmN0aW9uICgpIHsKCQl2YXIgZW5hYmxlUGxheUJ1dHRvbk9uU29uZ1BhZ2UgPSBmdW5jdGlvbigpIHsKCQkgIC8vIFRyeSB0byBmaW5kIGEgbm9ybWFsIGJ1dHRvbi4gSWYgaXQgY291bGQgYmUgZm91bmQsIGRvIG5vdGhpbmcuCgkJICB2YXIgcGxheUJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3UtYnRuaS1hZGRwbHknKTsKCQkJaWYgKHBsYXlCdXR0b24ubGVuZ3RoID09IDEpIHsKCQkJCXdpbmRvdy5jbGVhckludGVydmFsKGVuYWJsZVBsYXlCdXR0b25JbnRlcnZhbCk7CgkJCQlyZXR1cm47CgkJCX0KCgkJCS8vIE90aGVyd2lzZSBpdCBzaG91bGQgYmUgYSBkaXNhYmxlZCBidXR0b24uCgkJCXBsYXlCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd1LWJ0bmktcGxheS1kaXMnKTsKCQkJaWYgKHBsYXlCdXR0b24ubGVuZ3RoID09IDEpIHsKCQkJCXdpbmRvdy5jbGVhckludGVydmFsKGVuYWJsZVBsYXlCdXR0b25JbnRlcnZhbCk7CgkJCQl2YXIgc29uZ0lkID0gJCgnI2NvbnRlbnQtb3BlcmF0aW9uJykuZGF0YSgncmlkJyk7CgkJCQlwbGF5QnV0dG9uWzBdLm91dGVySFRNTCA9ICc8YSBkYXRhLXJlcy1hY3Rpb249InBsYXkiIGRhdGEtcmVzLWlkPSIjU09OR0lEIyIgZGF0YS1yZXMtdHlwZT0iMTgiIGhyZWY9ImphdmFzY3JpcHQ6OyIgY2xhc3M9InUtYnRuMiB1LWJ0bjItMiB1LWJ0bmktYWRkcGx5IGYtZmwiIGhpZGVmb2N1cz0idHJ1ZSIgdGl0bGU9IuaSreaUviI+PGk+PGVtIGNsYXNzPSJwbHkiPjwvZW0+5pKt5pS+PC9pPjwvYT48YSBkYXRhLXJlcy1hY3Rpb249ImFkZHRvIiBkYXRhLXJlcy1pZD0iI1NPTkdJRCMiIGRhdGEtcmVzLXR5cGU9IjE4IiBocmVmPSJqYXZhc2NyaXB0OjsiIGNsYXNzPSJ1LWJ0bmkgdS1idG5pLWFkZCIgaGlkZWZvY3VzPSJ0cnVlIiB0aXRsZT0i5re75Yqg5Yiw5pKt5pS+5YiX6KGoIj48L2E+Jy5yZXBsYWNlKC8jU09OR0lEIy9nLCBzb25nSWQpOwoJCQl9CgkJfTsKCQl2YXIgZW5hYmxlUGxheUJ1dHRvbkludGVydmFsID0gd2luZG93LnNldEludGVydmFsKGVuYWJsZVBsYXlCdXR0b25PblNvbmdQYWdlLCAxMDAwKTsKCX0sCgoJZW5hYmxlUGxheWxpc3RQbGF5QnV0dG9uOiBmdW5jdGlvbiAoKSB7CgkJdmFyIGVuYWJsZVBsYXlCdXR0b25PblBsYXlsaXN0UGFnZSA9IGZ1bmN0aW9uKCkgewoJCQkvLyBGaW5kIG91dCBkaXNhYmxlZCBzb25ncy4KCQkJdmFyIGRpc2FibGVkU29uZ3NJblBsYXlsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnanMtZGlzJyk7CgkJCWlmIChkaXNhYmxlZFNvbmdzSW5QbGF5bGlzdC5sZW5ndGggPT09IDApewoJCQkJd2luZG93LmNsZWFySW50ZXJ2YWwoZW5hYmxlUGxheUJ1dHRvbkludGVydmFsKTsKCQkJfQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGRpc2FibGVkU29uZ3NJblBsYXlsaXN0Lmxlbmd0aDsgKXsKCQkJCWRpc2FibGVkU29uZ3NJblBsYXlsaXN0W2ldLmNsYXNzTmFtZSA9IGRpc2FibGVkU29uZ3NJblBsYXlsaXN0W2ldLmNsYXNzTmFtZS5yZXBsYWNlKCdqcy1kaXMnLCAnJyk7CgkJCX0KCQl9OwoJCXZhciBlbmFibGVQbGF5QnV0dG9uSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwoZW5hYmxlUGxheUJ1dHRvbk9uUGxheWxpc3RQYWdlLCAxMDAwKTsKCX0sCgoJb25Cb2R5RnJhbWU6IGZ1bmN0aW9uICgpIHsKCQlzd2l0Y2gobG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKVsxXSkgewoJCQljYXNlICdtdic6IAkJCS8vIE1WCgkJCQl0aGlzLnBhcnNlTXYoKTsKCQkJCWJyZWFrOwoKCQkJY2FzZSAnb3V0Y2hhaW4nOiAJLy8g5aSW6ZO+CgkJCQl0aGlzLmhvb2tQbGF5ZXJPdXRjaGFpbigpOwoJCQkJYnJlYWs7CgoJCQljYXNlICdzb25nJzogCQkvLyDljZXmm7IKCQkJCXRoaXMuZW5hYmxlU29uZ1BsYXlCdXR0b24oKTsKCQkJCWJyZWFrOwoKCQkJY2FzZSAnYWxidW0nOiAJCS8vIOS4k+i+kQoJCQljYXNlICdhcnRpc3QnOiAJCS8vIOiJuuacr+WutgoJCQljYXNlICdwbGF5bGlzdCc6IAkvLyDmkq3mlL7liJfooagKCQkJY2FzZSAnZGlzY292ZXInOiAJLy8g6aaW6aG1CgkJCQl0aGlzLmVuYWJsZVBsYXlsaXN0UGxheUJ1dHRvbigpOwoJCQkJYnJlYWs7CgkJfQoJfSwKCglvbkJvZHk6IGZ1bmN0aW9uKCkgewoJCXZhciBzZWxmID0gdGhpczsKCQl0aGlzLl9kb1JlbW92YWwoKTsKCQl1bnNhZmVXaW5kb3cuR0Ficm9hZCA9IGZhbHNlOwoKCQkvLyDkuI3lnKjmoYbmnrbln7fooYwKCQlpZiAoSC5pc0ZyYW1lKSB7CgkJCXRoaXMub25Cb2R5RnJhbWUoKTsKCQkJcmV0dXJuOwoJCX0KCgkJdGhpcy5saW5rRG93bmxvYWQgPSAkKCc8YT4nKS5hcHBlbmRUbygkKCcubS1wbGF5YmFyIC5vcGVyJykpLmF0dHIoewoJCQl0aXRsZTogJ+aSreaUvumfs+S5kCwg5Y2z5Yi76Kej5p6QJwoJCX0pLmNsaWNrKGZ1bmN0aW9uKGUpIHsKCQkJZS5zdG9wUHJvcGFnYXRpb24oKTsKCQl9KS5hZGRDbGFzcyhILmRlZmF1bHREbEljb24pLmFkZENsYXNzKCdqeF9idG4nKTsKCgkJdGhpcy5saW5rRG93bmxvYWRBbGwgPSAkKCc8YT4nKS5hZGRDbGFzcyhILmRlZmF1bHREbEljb24pLmFkZENsYXNzKCdhZGRhbGwnKS50ZXh0KCflhajpg6jkuIvovb0nKS5hdHRyKHsKCQkJdGl0bGU6ICfkuIvovb3liJfooajph4znmoTmiYDmnInmrYzmm7InCgkJfSkuY2xpY2soZnVuY3Rpb24oZSkgewoJCQllLnN0b3BQcm9wYWdhdGlvbigpOwoKCQkJdmFyIHRyYWNrUXVldWUgPSBsb2NhbFN0b3JhZ2VbJ3RyYWNrLXF1ZXVlJ107CgkJCXZhciBhcmlhMiA9IG5ldyBBcmlhMi5CQVRDSChILmFyaWEyLCBmdW5jdGlvbigpIHsKCQkJCXJldHVybiBILmluZm8oYXJndW1lbnRzKTsKCQkJfSk7CgoJCQl2YXIgdHJhY2tzID0gSlNPTi5wYXJzZSh0cmFja1F1ZXVlKTsKCQkJdmFyIHBhZHMgPSB+fk1hdGgubG9nMTAodHJhY2tzLmxlbmd0aCk7CgoJCQl0cmFja3MuZm9yRWFjaChmdW5jdGlvbiAodHJhY2ssIGkpIHsKCQkJCXZhciBhcnRpc3RzID0gKHRyYWNrLmFydGlzdHMgfHwgdHJhY2suYXIpLm1hcChnZXROYW1lKS5qb2luKCfjgIEnKTsKCgkJCQl2YXIgcGFyYW0gPSBILmJ1aWxkQXJpYVBhcmFtKHsKCQkJCQlvdXQ6IHBhZFplcm8oaSkgKyAiLiAiICsgdHJhY2submFtZSArICIgWyIgKyBhcnRpc3RzICsgIl0ubXAzIgoJCQkJfSk7CgoJCQkJYXJpYTIuYWRkKEFyaWEyLmZuLmFkZFVyaSwgW3NlbGYuZ2V0VXJpKHRyYWNrKV0sIHBhcmFtKTsKCQkJfSk7CgkJCWFyaWEyLnNlbmQodHJ1ZSk7CgoJCQlmdW5jdGlvbiBnZXROYW1lICh4KSB7CgkJCQlyZXR1cm4geC5uYW1lOwoJCQl9CgoJCQlmdW5jdGlvbiBwYWRaZXJvIChzdHIpIHsKCQkJCWZvciAodmFyIGkgPSBzdHIubGVuZ3RoOyBpIDwgcGFkczsgaSsrKSB7CgkJCQkJc3RyID0gJzAnICsgc3RyOwoJCQkJfQoKCQkJCXJldHVybiBzdHI7CgkJCX0KCQl9KS5oaWRlKCk7CgoJCS8vIOaaguaXtuemgeeUqOaJuemHj+S4i+i9veWKn+iDveOAggoKCQlpZiAoSC5jb25maWcuZFVyaVR5cGUgPT09IDIvKiBVUklfVVNFX0FSSUEgKi8pIHsKCQkJSC5jYXB0dXJlQXJpYSh0aGlzLmxpbmtEb3dubG9hZCk7CgkJfSBlbHNlIHsKCQkJdGhpcy5saW5rRG93bmxvYWRBbGwuYWRkQ2xhc3MoJ2p4X2hpZGUnKTsKCQl9CgoJCXN3aXRjaCAobG9jYXRpb24ucGF0aG5hbWUpIHsKCQkJY2FzZSAnL2RlbW8vZm0nOgoJCQkJdGhpcy5ob29rUGxheWVyRm0oKTsKCQkJCWJyZWFrOwoKCQkJZGVmYXVsdDoKCQkJCUgud2FpdFVudGlsKGZ1bmN0aW9uKCkgewoJCQkJCXJldHVybiAkKCcubGlzdGhkYyA+IC5hZGRhbGwnKS5sZW5ndGg7CgkJCQl9LCBmdW5jdGlvbigpIHsKCQkJCQlzZWxmLmxpbmtEb3dubG9hZEFsbC5pbnNlcnRCZWZvcmUoJCgnLm0tcGxheWJhciAubGlzdGhkYyAuYWRkYWxsJykpLmFmdGVyKCQoJzxhPicpLmFkZENsYXNzKCdsaW5lIGp4X2RsX2xpbmUnKSk7CgkJCQl9LCB0cnVlLCA1MDApOwoJCQkJdGhpcy5ob29rUGxheWVyKCk7CgkJfQoKCQkvLyDmjqfliLblj7DmiafooYw6IGxvY2FsU3RvcmFnZS5fUExFQVNFX0FVVE9fU0lHTiA9IDEKCQkvLyDljbPlj6/lkK/nlKjoh6rliqjnrb7liLDlip/og70gKOS4jeS8muiuoeeul+aXtuW3rikgOkQKCQlpZihsb2NhbFN0b3JhZ2UuX1BMRUFTRV9BVVRPX1NJR04pCgkJCXNldFRpbWVvdXQodGhpcy5hdXRvX3NpZ24uYmluZCh0aGlzKSwgMzAwMCk7CgoJCS8vIOaOp+WItuWPsOaJp+ihjDogbG9jYWxTdG9yYWdlLl9fSElERV9CQU5ORVIgPSAxCgkJLy8g5Y2z5Y+v56e76Zmk6aaW6aG15qiq5bmF5LiO5a6i5oi356uv5YWl5Y+j6ZO+5o6lIDpECgkJaWYgKGxvY2FsU3RvcmFnZS5fX0hJREVfQkFOTkVSKSB7CgkJCXZhciAkbHN0ID0gJCgnLm0tbmF2ID4gLmxzdCcpOwoJCQkkbHN0LnByZXYoKS5hZGRDbGFzcygnbHN0Jyk7CgkJCSRsc3QucmVtb3ZlKCk7CgkJfQoJfSwKCglhdXRvX3NpZ246IGZ1bmN0aW9uICgpIHsKCQl2YXIgZCA9IG5ldyBEYXRlKCk7CgkJdmFyIGRhdGVfc3RyID0gZC5nZXRGdWxsWWVhcigpICsgJy8nICsgZC5nZXRNb250aCgpICsgJy8nICsgZC5nZXREYXkoKTsKCQlpZiAobG9jYWxTdG9yYWdlLl9fU0lHTl9EQVRFICE9IGRhdGVfc3RyKSB7CgkJCWxvY2FsU3RvcmFnZS5fX1NJR05fREFURSA9IGRhdGVfc3RyOwoKCQkJdGhpcy5lbmNfYWpheCgnL2FwaS9wb2ludC9kYWlseVRhc2s/dHlwZT0xJywgeyAgfSwgZnVuY3Rpb24gKHIpIHsKCQkJCWlmIChyLmNvZGUgPT0gMjAwKSB7CgkJCQkJSC5pbmZvKCfnrb7liLDmiJDlip86IOiOt+W+lyAlYyVkJWMg54K556ev5YiGLicsICdjb2xvcjpibHVlJywgci5wb2ludCwgJ2NvbG9yOmluaXRpYWwnKTsKCQkJCX0gZWxzZSB7CgkJCQkJSC5pbmZvKCfnrb7liLDlpLHotKUgKCVjJWQlYyk6ICVzJywgJ2NvbG9yOmJsdWUnLCByLmNvZGUsICdjb2xvcjppbml0aWFsJywgci5tc2cpOwoJCQkJfQoJCQl9KTsKCQl9Cgl9Cn0pLAovKiBDb21waWxlZCBmcm9tIG11c2ljLjF0aW5nLmpzICovCnsKCWlkOiAnbXVzaWMuMXRpbmcnLAoJbmFtZTogJ+S4gOWQrOmfs+S5kCcsCglob3N0OiBbJ3d3dy4xdGluZy5jb20nXSwKCW5vU3ViSG9zdDogdHJ1ZSwKCXBhdGg6IFsnL3BsYXllci8nLCAnL2FsYnVtXyddLAoKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCXRoaXMuZGxCdG4gPSAkKCcuc29uZ2FjdCBhLmRvd24nKQoJCQkudGV4dCAoJ+ebtOaOpeS4i+i9vScpCgkJCS5yZW1vdmVBdHRyKCdvbmNsaWNrJyk7CgoJCUgud2FpdFVudGlsICgneWl0aW5nLnBsYXllci5lbnRpdHkuc3JjJywgZnVuY3Rpb24gKCkgewoJCQl1bnNhZmVFeGVjIChmdW5jdGlvbiAoKSB7CgkJCQl2YXIgcGxheVRyaWdnZXIgPSBmdW5jdGlvbiAoKSB7CgkJCQkJLy8gZGxCdG4uYXR0cignaHJlZicsIHdpbmRvdy55aXRpbmcucGxheWVyLmVudGl0eS5zcmMpOwoJCQkJCWRvY3VtZW50LmRpc3BhdGNoRXZlbnQgKCBuZXcgQ3VzdG9tRXZlbnQgKEguc2NyaXB0TmFtZSkgKTsKCQkJCX07CgoJCQkJd2luZG93LnlpdGluZy5wbGF5ZXIuaG9vaygncGxheScsIHBsYXlUcmlnZ2VyKTsKCQkJCXBsYXlUcmlnZ2VyICgpOwoJCQl9KTsKCQl9KTsKCgkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAoSC5zY3JpcHROYW1lLCB0aGlzLmV2ZW50SGFuZGxlci5iaW5kICh0aGlzKSwgZmFsc2UpOwoJCXRoaXMuZXZlbnRIYW5kbGVyICgpOwoJfSwKCglldmVudEhhbmRsZXI6IGZ1bmN0aW9uICgpIHsKCQl2YXIgc29uZ1RpdGxlID0gJCgnLnNvbmcgLnNvbmd0aXRsZSA+IGEnKS50ZXh0ICgpOwoJCXRoaXMuZGxCdG4uYXR0ciAoewoJCQlocmVmOiBILnVyaSAodW5zYWZlV2luZG93LnlpdGluZy5wbGF5ZXIuZW50aXR5LnNyYywgc29uZ1RpdGxlICsgJy5tcDMnKSwKCQkJdGl0bGU6ICfkuIvovb06ICcgKyBzb25nVGl0bGUKCQl9KTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBtdXNpYy41NjU2NTYuanMgKi8KewoJaWQ6ICdtdXNpYy41NjU2NTYnLAoJbmFtZTogJzU2NTY1NiDpn7PkuZAnLAoJaG9zdDogJ3d3dy41NjU2NTYuY29tJywKCW5vU3ViSG9zdDogdHJ1ZSwKCXBhdGg6IFsnL3BsdXMvcGxheWVyLmFzaHgnLCAnL3RpbmcvJ10sCgoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCUgualBsYXllclBhdGNoZXIgKGZ1bmN0aW9uIChzb25nT2JqKSB7CgkJCXZhciBzb25nQWRkciA9IHNvbmdPYmoubXAzIHx8IHNvbmdPYmoubTRhOwoJCQkkKCcucGxheS1pbmZvLW90aGVyb3B0ID4gYTpsYXN0JykKCQkJCS5hdHRyKCdocmVmJywgSC51cmkgKHNvbmdBZGRyLCBzb25nT2JqLnNvbmduYW1lICsgc29uZ09iai5tNGEuc2xpY2UoLTQpKSkKCQkJCS5maW5kKCdzcGFuJykudGV4dCgn5LiL6L29OiAnICsgc29uZ09iai5zb25nbmFtZSArICcgLSAnICsgc29uZ09iai5zaW5nZXJuYW1lKTsKCQl9KTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBtdXNpYy41c2luZy5qcyAqLwp7CglpZDogJ211c2ljLjVzaW5nJywKCW5hbWU6ICc1c2luZyDkuIvovb3op6PmnpAnLAoJaG9zdDogWyc1c2luZy5jb20nLCAnNXNpbmcua3Vnb3UuY29tJ10sCgoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCWlmIChILmJlZ2luV2l0aChsb2NhdGlvbi5wYXRobmFtZSwgJy9mbS8nKSkgewoJCQkvLyBlLmcuIGh0dHA6Ly81c2luZy5rdWdvdS5jb20vZm0vbS8KCQkJdGhpcy5fZm1Ib29rICgpOwoJCX0KCX0sCgoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJaWYgKEguY29udGFpbnMobG9jYXRpb24ucGF0aG5hbWUsICcvZG93bi8nKSkgewoJCQl0aGlzLl9kbFBhZ2UgKCk7CgkJCXJldHVybiA7CgkJfQoKCQkvLyDml6fniYjljZXmm7Lmkq3mlL7pobXpnaIKCQlILndhaXRVbnRpbCAoJ3BhZ2VPcHRpb25zLnRpY2tldCcsIGZ1bmN0aW9uICgpIHsKCQkJdmFyIHNvbmdPYmogPSBKU09OLnBhcnNlKEguYmFzZTY0RGVjb2RlKHVuc2FmZVdpbmRvdy5wYWdlT3B0aW9ucy50aWNrZXQpKTsKCQkJJCgnLmZ1bmNfaWNvbjM+YScpLmF0dHIgKHsKCQkJCWhyZWY6IEgudXJpKHNvbmdPYmouZmlsZSwgc29uZ09iai5zb25nTmFtZSArICcubXAzJyksCgkJCQl0aXRsZTogJ+WNleWHu+S4i+i9vTogJyArIHNvbmdPYmouc29uZ05hbWUsCgkJCX0pLmh0bWwoJzxiLz7nm7Tpk77kuIvovb0nKTsKCgkJCSQoJyNwbGF5JykuY3NzICh7CgkJCQl0b3A6ICdpbml0aWFsJwoJCQl9KTsKCQkJJCgnLnNvbmdfcGxheScpLmNzcyAoewoJCQkJbWFyZ2luVG9wOiAnMWVtJwoJCQl9KTsKCQkJJCgnLnJ0MicpLmhpZGUoKTsKCQkJJCgnI3JlcG9ydCcpLnBhcmVudCgpLmhpZGUoKTsKCQl9KTsKCgkJLy8g5paw54mI5Y2V5puy5pKt5pS+6aG16Z2iCgkJSC53YWl0VW50aWwgKCdnbG9iYWxzLnRpY2tldCcsIGZ1bmN0aW9uICgpIHsKCQkJdmFyIHNvbmdPYmogPSBKU09OLnBhcnNlKEguYmFzZTY0RGVjb2RlKHVuc2FmZVdpbmRvdy5nbG9iYWxzLnRpY2tldCkpOwoJCQkkKCcudmlld19pbmZvPnVsOmxhc3Q+bGk6Zmlyc3QnKS5yZXBsYWNlV2l0aCgkKCc8bGk+JykuYXBwZW5kICgKCQkJCSQoJzxhPicpLnRleHQoJ+eCueaIkeS4i+i9vScpLmF0dHIoewoJCQkJCWhyZWY6IEgudXJpKHNvbmdPYmouZmlsZSwgc29uZ09iai5zb25nTmFtZSArICcubXAzJyksCgkJCQkJdGl0bGU6ICfljZXlh7vkuIvovb06ICcgKyBzb25nT2JqLnNvbmdOYW1lLAoJCQkJCXRhcmdldDogJ19ibGFuaycKCQkJCX0pLmNzcyAoJ2NvbG9yJywgJyNGODc4NzcnKQoJCQkpKTsKCQl9KTsKCX0sCgoJX2RsUGFnZTogZnVuY3Rpb24gKCkgewoJCXZhciAkZGwgPSAkKCc8cD4nKS5wcmVwZW5kVG8gKCQoJy5zaW5nX3ZpZXcnKSkudGV4dCgn5q2j5Zyo6Kej5p6Q6Z+z5LmQ5Zyw5Z2A4oCmJyk7CgoJCSQuZ2V0KCQoJy5tYWluID4gaDEgPiBhJykuYXR0cignaHJlZicpKS5zdWNjZXNzIChmdW5jdGlvbiAocmVzKSB7CgkJCXZhciBzb25nQWRkcmVzcyA9IHJlcy5tYXRjaCgvInRpY2tldCJccyo6XHMqXCIoLis/KSIvKTsKCQkJaWYgKHNvbmdBZGRyZXNzKSB7CgkJCQl2YXIgc29uZ09iaiA9IEpTT04ucGFyc2UoSC5iYXNlNjREZWNvZGUoc29uZ0FkZHJlc3NbMV0pKTsKCQkJCXNvbmdBZGRyZXNzID0gSC51cmkoc29uZ09iai5maWxlLCBzb25nT2JqLnNvbmdOYW1lICsgJy5tcDMnKTsKCQkJfSBlbHNlIGlmIChzb25nQWRkcmVzcyA9IHJlcy5tYXRjaCgvLFxzKmZpbGVccyo6XHMqXCIoLis/KSIvKSkgewoJCQkJLy8g5p2l5rqQ6K+35rGCCgkJCQlzb25nQWRkcmVzcyA9IHNvbmdBZGRyZXNzWzFdOwoJCQl9IGVsc2UgewoJCQkJJGRsIC50ZXh0ICgnKiDkuIvovb3op6PmnpDlpLHotKXvvIzor7forr/pl67mrYzmm7LpobXop6PmnpDjgIInKQoJCQkJCS5jc3MgKCdjb2xvcicsICdyZWQnKTsKCQkJCXJldHVybiA7CgkJCX0KCgkJCSRkbC50ZXh0KCfop6PmnpDlrozmr5U6ICcpLmFwcGVuZCAoJCgnPGE+JykuYXR0cih7CgkJCQlocmVmOiBzb25nQWRkcmVzcywKCQkJCXRhcmdldDogJ19ibGFuaycKCQkJfSkudGV4dCgn54K55oiR5LiL6L29JykpOwoJCX0pLmVycm9yIChmdW5jdGlvbiAoKSB7CgkJCSRkbCAudGV4dCAoJyog572R57uc6ZSZ6K+v77yM6K+356iN5YCZ6YeN6K+V5oiW6K6/6Zeu5q2M5puy6aG16Kej5p6Q44CCJykKCQkJCS5jc3MgKCdjb2xvcicsICdyZWQnKTsKCQl9KTsKCX0sCgoJX2ZtSG9vazogZnVuY3Rpb24gKCkgewoJCWlmICh0aGlzLmZtSG9va2VkKSByZXR1cm4gOwoJCXRoaXMuZm1Ib29rZWQgPSB0cnVlOwoKCQlILmhvb2tEZWZpbmUgKCdkZWZpbmUnLCBmdW5jdGlvbiAoc2NyaXB0TmFtZSwgX2RlZmluZSwgbW9kdWxlTmFtZSwgcmVxdWlyZXMsIGZDYWxsYmFjaykgewoJCQlpZiAoJ3BsYXllci9zaW5nbGUnID09PSBtb2R1bGVOYW1lKSB7CgkJCQlyZXR1cm4gX2RlZmluZSAobW9kdWxlTmFtZSwgcmVxdWlyZXMsIGZ1bmN0aW9uIChyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpIHsKCQkJCQl2YXIgcmV0ID0gZkNhbGxiYWNrLmNhbGwgKG51bGwsIHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSk7CgoJCQkJCXZhciAkd3NwID0gbW9kdWxlLmV4cG9ydHM7CgkJCQkJdmFyIE1lZGlhRWxlbWVudCA9ICR3c3AubWVkaWFFbGVtZW50OwoJCQkJCSR3c3AubWVkaWFFbGVtZW50ID0gZnVuY3Rpb24gKHBsYXllckJveElkLCBvcHRpb25zKSB7CgkJCQkJCW9wdGlvbnMuc3RhdHMuZW5hYmxlID0gZmFsc2U7CgkJCQkJCXZhciBtUGxheWVyID0gbmV3IE1lZGlhRWxlbWVudCAocGxheWVyQm94SWQsIG9wdGlvbnMpOwoJCQkJCQl2YXIgX3BsYXkgPSBtUGxheWVyLnBsYXk7CgkJCQkJCW1QbGF5ZXIucGxheSA9IGZ1bmN0aW9uIChzb25nT2JqKSB7CgkJCQkJCQlkb2N1bWVudC5kaXNwYXRjaEV2ZW50ICggbmV3IEN1c3RvbUV2ZW50IChzY3JpcHROYW1lLCB7ZGV0YWlsOiBzb25nT2JqfSkgKTsKCQkJCQkJCXJldHVybiBfcGxheS5jYWxsIChtUGxheWVyLCBzb25nT2JqKTsKCQkJCQkJfTsKCQkJCQkJcmV0dXJuIG1QbGF5ZXI7CgkJCQkJfTsKCQkJCQlyZXR1cm4gcmV0OwoJCQkJfSk7CgkJCX0KCQl9LCBILnNjcmlwdE5hbWUpOwoKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIChILnNjcmlwdE5hbWUsIGZ1bmN0aW9uIChlKSB7CgkJCXZhciBzb25nT2JqID0gZS5kZXRhaWw7CgkJCXNldFRpbWVvdXQgKGZ1bmN0aW9uICgpIHsKCQkJCSQoJy5qcC1kb3dubG9hZCcpLmF0dHIgKHsKCQkJCQlocmVmOiBILnVyaShzb25nT2JqLmZpbGUsIHNvbmdPYmouc29uZ05hbWUgKyAnLm1wMycpLAoJCQkJCXRpdGxlOiAn5LiL6L29OiAnICsgc29uZ09iai5zb25nTmFtZQoJCQkJfSk7CgkJCX0sIDEpOwoJCX0sIGZhbHNlKTsKCX0sCgp9LAovKiBDb21waWxlZCBmcm9tIG11c2ljLjlrdS5qcyAqLwp7CglpZDogJ211c2ljLjlrdScsCgluYW1lOiAnOemFt+mfs+S5kCcsCglob3N0OiAnd3d3LjlrdS5jb20nLAoJbm9TdWJIb3N0OiB0cnVlLAoJaGlkZTogWycjTFIyJywgJyNMUjMnLCAnI3NlZWdjJywgJy5kb25nRG93biddLAoJcGF0aDogWycvcGxheS8nLCAnL3BsYXkuaHRtJ10sCgoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCXRoaXMuZGxMaW5rID0gJCgnPGE+JykKCQkJLmF0dHIgKCd0YXJnZXQnLCAnX2JsYW5rJykKCQkJLmF0dHIgKCd0aXRsZScsICAn5q2j5Zyo5oqT5Y+W5q2M5puy5pWw5o2uIC4uJykKCQkJLnRleHQgKCfkuIvovb0nKTsKCgkJSC5qUGxheWVyUGF0Y2hlciAoZnVuY3Rpb24gKHNvbmdPYmopIHsKCQkJdmFyIHNvbmdVcmwgID0gc29uZ09iai5tcDMgfHwgc29uZ09iai5tNGEsCgkJCQlzb25nTmFtZSA9ICQoJyNwbGF5X211c2ljbmFtZScpLnRleHQoKTsKCgkJCXRoaXMuZGxMaW5rCgkJCQkuYXR0ciAoJ2hyZWYnLCBILnVyaSAoc29uZ1VybCwgc29uZ05hbWUgKyBzb25nVXJsLnNsaWNlKC00KSkpCgkJCQkuYXR0ciAoJ3RpdGxlJywgJ+S4i+i9vTogJyArIHNvbmdOYW1lKTsKCQl9LmJpbmQgKHRoaXMpKTsKCX0sCgoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJJCgnLnJpbmdEb3duJykuY3NzICh7CgkJCWZsb2F0OiAnbm9uZScsCgkJCWRpc3BsYXk6ICdibG9jaycsCgkJCXRleHRBbGlnbjogJ2NlbnRlcicKCQl9KS5odG1sICh0aGlzLmRsTGluayk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMuYmFpZHUuanMgKi8KewoJaWQ6ICdtdXNpYy5iYWlkdScsCgluYW1lOiAn55m+5bqm6Z+z5LmQJywKCWhvc3Q6ICdtdXNpYy5iYWlkdS5jb20nLAoJbm9TdWJIb3N0OiB0cnVlLAoJcGF0aDogL15cL3NvbmdcL1xkK1wvZG93bmxvYWQvLAoKCWhpZGU6ICcuZm9yZWlnbi10aXAnLAoJX3NldFRleHQ6IGZ1bmN0aW9uICh0ZXh0KSB7CgkJaWYgKHRleHRbMF0gPT0gJysnKSB7CgkJCXRoaXMuYnRuRG93bmxvYWQudGl0bGUuYXBwZW5kKHRleHQuc2xpY2UoMSkpOwoJCX0gZWxzZSB7CgkJCXRoaXMuYnRuRG93bmxvYWQudGl0bGUudGV4dCh0ZXh0KTsKCQl9Cgl9LAoJX3NldExpbms6IGZ1bmN0aW9uICh1cmwpIHsKCQl0aGlzLmJ0bkRvd25sb2FkLmJ0bi5hdHRyKCdocmVmJywgdXJsKTsKCX0sCglfYnRuOiBmdW5jdGlvbiAodGV4dCwgb3V0ZXJJY29uLCBpbm5lckljb24pIHsKCQl2YXIgYnRuID0gJCgnPGE+PHNwYW4gY2xhc3M9ImlubmVyIj48aSBjbGFzcz0iaWNvbiBidG4taWNvbi0nICsgaW5uZXJJY29uICsgJyI+JykKCQkJLmFkZENsYXNzKCdidG4gYnRuLScgKyBvdXRlckljb24gKyAnIGFjdGl2ZWQnKQoJCQkuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpCgkJCS5hdHRyKCdocmVmJywgJyMnKQoJCQkuYXBwZW5kVG8odGhpcy5wKTsKCgkJcmV0dXJuICh7CgkJCWJ0bjogYnRuLAoJCQl0aXRsZTogJCgnPHNwYW4+JykuYXBwZW5kVG8oJCgnLmlubmVyJywgYnRuKSkudGV4dCh0ZXh0KQoJCX0pOwoJfSwKCglfaW5pdERsOiBmdW5jdGlvbiAoZSkgewoJCXRoaXMuZG93bmxvYWRJbmZvID0gSlNPTi5wYXJzZShlLmRldGFpbCkuZG93bmxvYWRJbmZvOwoJfSwKCglvblN0YXJ0OiBmdW5jdGlvbiAoKSB7CgkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAoSC5zY3JpcHROYW1lLCB0aGlzLl9pbml0RGwuYmluZCAodGhpcyksIGZhbHNlKTsKCgkJdW5zYWZlRXhlYyhmdW5jdGlvbiAoc2NyaXB0TmFtZSkgewoJCQkvLyDlsY/olL3lub/lkYrlhpnlh7oKCQkJZG9jdW1lbnQud3JpdGUgPSAoZnVuY3Rpb24gd3JpdGUoKXt9KS5iaW5kKDApOwoKCQkJd2luZG93LnRpbmcgPSB7fTsKCQkJdmFyIG9yaWdJbml0RG93bmxvYWQ7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cudGluZywgJ2luaXREb3dubG9hZCcsIHsKCQkJCWdldDogZnVuY3Rpb24gKCkgewoJCQkJCXJldHVybiBmdW5jdGlvbiAoaW5pdE9wdHMpIHsKCQkJCQkJZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCAobmV3IEN1c3RvbUV2ZW50IChzY3JpcHROYW1lLCB7ZGV0YWlsOiBKU09OLnN0cmluZ2lmeSAoaW5pdE9wdHMpfSkpOwoKCQkJCQkJcmV0dXJuIG9yaWdJbml0RG93bmxvYWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCQkJCQl9OwoJCQkJfSwKCQkJCXNldDogZnVuY3Rpb24gKGlkbCkgewoJCQkJCW9yaWdJbml0RG93bmxvYWQgPSBpZGw7CgkJCQl9CgkJCX0pOwoJCX0sIEguc2NyaXB0TmFtZSk7Cgl9LAoKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCXZhciBzZWxmID0gdGhpczsKCQl0aGlzLnBhcnNlciA9IEgucnVsZS5nZXQgKCdtdXNpYy5iYWlkdS5wbGF5Jyk7CgkJaWYgKCF0aGlzLnBhcnNlcikgewoJCQlILmVycm9yICgnUmVxdWlyZWQgcnVsZSBgbXVzaWMuYmFpZHUucGxheWAgbWlzc2luZywgcGxlYXNlIHJlLWluc3RhbGwgdGhpcyBzY3JpcHQuJyk7CgkJCXJldHVybiA7CgkJfQoKCQkvLyDluqblqJjnmoTmjInpkq7liY3pnaLmj5LlhaXmiJHku6znmoQKCQl2YXIgb3BlckRpdiA9ICQoJy5vcGVyYXRpb24nKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPSJjbGVhcmZpeCI+Jyk7CgkJdGhpcy5wID0gJCgnPHA+JykucHJlcGVuZFRvKG9wZXJEaXYpLmNzcygnbWFyZ2luLWJvdHRvbScsICcyZW0nKTsKCgkJLy8g5re75Yqg5oyJ6ZKuCgkJdGhpcy5idG5Eb3dubG9hZCA9IHRoaXMuX2J0bign6K+36YCJ5oup6Z+z6LSoJywgJ2gnLCAnZG93bmxvYWQtc21hbGwnKTsKCQkvLyB0aGlzLmJ0bkV4cG9ydCA9IHRoaXMuX2J0bign5a+85Ye65Zyw5Z2AJywgJ2InLCAnZG93bmxvYWQtc21hbGwnKTsKCQl0aGlzLmJ0bkRvd25sb2FkLmJ0bi5jbGljayh0aGlzLl9jbGlja0RsLmJpbmQodGhpcykpOwoKCQkkKCcuZG93bi1yYWRpbycpLmNoYW5nZShmdW5jdGlvbiAoKSB7CgkJCXNlbGYuY2hhbmdlQml0cmF0ZSgkKHRoaXMpKTsKCQl9KS5maWx0ZXIoJzpjaGVja2VkJykuY2hhbmdlKCk7Cgl9LAoKCV9jbGlja0RsOiBmdW5jdGlvbiAoZSkgewoJCWlmICh0aGlzLmJ0bkRvd25sb2FkLmJ0bi5kYXRhICgnZG8tbm90aGluZycpKQoJCQlyZXR1cm4gOwoKCQllLnByZXZlbnREZWZhdWx0KCk7CgkJdmFyIHNlbGYgPSB0aGlzOwoJCXZhciAkZWwgPSB0aGlzLiRlbDsKCgkJdmFyIHNpZCAgPSAkZWwuZGF0YSgnc2lkJyksCgkJCXJhdGUgPSAkZWwuZGF0YSgncmF0ZScpLAoJCQlmbXQgID0gJGVsLmRhdGEoJ2Zvcm1hdCcpOwoKCQlzZWxmLl9zZXRUZXh0ICgnKyAo5byA5aeL6Kej5p6QKScpOwoJCXZhciBmbiA9IEguc3ByaW50ZignJXMgWyVzXS4lcycsIHRoaXMuZG93bmxvYWRJbmZvLnNvbmdfdGl0bGUsIHRoaXMuZG93bmxvYWRJbmZvLnNpbmdlcl9uYW1lLCBmbXQpOwoJCXRoaXMucGFyc2VyLl9hZGRGYXYgKHNpZCwgZnVuY3Rpb24gKGVyckluZm8pIHsKCQkJdmFyIGJOZWVkUm1GYXYgPSBlcnJJbmZvLmNvZGUgPT09IDIyMDAwOwoKCQkJc2VsZi5wYXJzZXIuX2dldFJlYWxVcmwgKHNlbGYucGFyc2VyLl9idWlsZFVybChzaWQsIHJhdGUsIGZtdCksIGZ1bmN0aW9uICh1cmwpIHsKCQkJCUguYWRkRG93bmxvYWQodXJsLCBmbik7CgkJCQlzZWxmLl9zZXRMaW5rIChILnVyaSAodXJsLCBmbikpOwoJCQkJc2VsZi5fc2V0VGV4dCAoJysgKOino+aekOWujOavlSknKTsKCQkJCXNlbGYuYnRuRG93bmxvYWQuYnRuLmRhdGEoJ3BhcnNlLScgKyByYXRlLCBbdXJsLCBmbl0pOwoJCQkJaWYgKGJOZWVkUm1GYXYpIHNlbGYucGFyc2VyLl9ybUZhdiAoc2lkKTsKCgkJCQlzZWxmLmJ0bkRvd25sb2FkLmJ0bi5kYXRhICgnZG8tbm90aGluZycsIHRydWUpOwoJCQl9KTsKCQl9KTsKCX0sCgoJY2hhbmdlQml0cmF0ZTogZnVuY3Rpb24gKCRlbCkgewoJCXRoaXMuJGVsID0gJGVsOwoJCXRoaXMuX3NldFRleHQgKEguc3ByaW50Zign5LiL6L29ICglc2ticHMsICVzIOagvOW8jyknLCAkZWwuZGF0YSgncmF0ZScpLCAkZWwuZGF0YSgnZm9ybWF0JykpKTsKCQl2YXIgZGF0YVVybCA9IHRoaXMuYnRuRG93bmxvYWQuYnRuLmRhdGEgKCdwYXJzZS0nICsgJGVsLmRhdGEoJ3JhdGUnKSk7CgkJdGhpcy5idG5Eb3dubG9hZC5idG4uZGF0YSAoJ2RvLW5vdGhpbmcnLCAhIWRhdGFVcmwpOwoKCQlpZiAoZGF0YVVybCkgewoJCQl0aGlzLl9zZXRMaW5rIChkYXRhVXJsKTsKCQkJdGhpcy5fc2V0VGV4dCAoJysgKOW3suino+aekCknKTsKCQl9Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMuYmFpZHUucGxheS5qcyAqLwp7CglpZDogJ211c2ljLmJhaWR1LnBsYXknLAoJbmFtZTogJ+eZvuW6pumfs+S5kOebkicsCglob3N0OiAncGxheS5iYWlkdS5jb20nLAoJcGF0aDogJy8nLAoKCXNob3c6ICcjZmxvYXRCdG4+Lmxvc3NsZXNzJywKCgkvLyBqUXVlcnkg55qEIHdpZHRoIOiuoeeul+WcqOeBq+eLkOS4i+S8muWMheaLrOagt+W8j+ihqCwg5Y2z5L2/5YWD57Sg5bey57uP5LiN5ZyoIGJvZHkg6YeM4oCmCgljc3M6ICAnLmNvbHVtbjR7d2lkdGg6MCAhaW1wb3J0YW50fScsCgoJLy8g5Y2V5puy6Kej5p6Q5Y+q5pyJ6L+Z5LqbCglxdWFsaXRpZXM6ICdhdXRvXzEgbXAzXzMyMCtfMSBtcDNfMzIwXzEnLnNwbGl0KCcgJyksCgoJLyoqCgkgKiBAcHJpdmF0ZQoJICog5Yid5aeL5YyW5LqL5Lu257uR5a6aCgkgKi8KCWluaXRFdmVudHM6IGZ1bmN0aW9uICgpIHsKCQl0aGlzLmlzQXJpYSA9IEguY29uZmlnLmRVcmlUeXBlID09IDI7CgoJCS8vIEJhdGNoIGRvd25sb2FkIHF1ZXVlCgkJSC5zZXR1cEFyaWEgKCk7CgkJdGhpcy4kcSA9IG5ldyBJbnRlcnZhbExvb3AoW10sIHRoaXMuX2JhdGNoLmJpbmQodGhpcyksIDMwMCk7CgkJdGhpcy4kcS5sb29wKCk7IC8vIOWHhuWkh+aOpeaUtuaVsOaNrgoJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgKEguc2NyaXB0TmFtZSArICctQkFUQ0gnLCB0aGlzLl9iYXRjaERvd25sb2FkLmJpbmQgKHRoaXMpLCBmYWxzZSk7CgoJCWlmICghdGhpcy5pc0FyaWEpIHsKCQkJSC53YXJuICgn5om56YeP5LiL6L295LuF5pSv5o+0IEFyaWEyIOaooeW8jyEnKTsKCQl9CgoJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgKEguc2NyaXB0TmFtZSwgdGhpcy5fcmVjdkV2ZW50LmJpbmQgKHRoaXMpLCBmYWxzZSk7Cgl9LAoKCS8qKgoJICog6ZSZ6K+v5pWw5o2uCgkgKiBAdHlwZSB7T2JqZWN0fQoJICovCglFUlJPUjogewoJCScyMjIzMic6IHsKCQkJdGV4dDogSC5leHRyYWN0KGZ1bmN0aW9uICgpIHsvKgror7fmjILkuIoq5aSn6ZmGKumprOeUsiwg5Zug5YW25a6D5Zyw5Yy66K6/6Zeu6KKr5bGP6JS9LgoK5aaC5p6c5oKo5Lya5L2/55So55u45YWz5o+S5Lu2LCDor7fliqDlhaXkuIvov7DlnLDlnYDoh7Pop4TliJk6ICAKaHR0cDovL211c2ljLmJhaWR1LmNvbS9kYXRhL3VzZXIvY29sbGVjdD8qICAKCuaCqOWPr+S7peaMieS4iyBDdHJsK0Mg5ou36LSd6K+l5raI5oGvLgoK55u45YWz6ZiF6K+7OiBodHRwczovL2dpdGh1Yi5jb20vSml4dW5Nb2UvY3V3Y2w0Yy93aWtpL+mFjeWQiOWkp+mZhuS7o+eQhuWunueOsOiuv+mXruino+mZpOWwgemUgQoqL30pLAoJCQlsZXZlbDogJ2Vycm9yJywKCQkJYWxlcnQ6IHRydWUKCQl9LAoJCScyMjMyMic6IHsKCQkJdGV4dDogJ+W3sue7j+WcqOaUtuiXj+WIl+ihqCwg5LiN56e76ZmkLicsCgkJCWxldmVsOiAnaW5mbycKCQl9LAoJCScyMjMzMSc6IHsKCQkJdGV4dDogJ+S6keerr+aUtuiXj+W3sua7oSwg6K+35YWI6IW+5Ye65L2N572uIScsCgkJCWxldmVsOiAnd2FybicsCgkJCWFsZXJ0OiB0cnVlCgkJfSwKCQknMjIwMDAnOiB7CgkJCXRleHQ6ICflm6DkuIvovb3op6PmnpDogIzmt7vliqDoh7PmlLbol48sIOino+aekOWQjuenu+mZpOmTvuaOpS4nLAoJCQlsZXZlbDogJ2luZm8nCgkJfQoJfSwKCgkvKioKCSAqIOaPkOWPlumUmeivr+S/oeaBrwoJICogQHBhcmFtICB7SW50ZWdlcn0gZXJyQ29kZSDplJnor6/ku6PnoIEKCSAqIEByZXR1cm4ge09iamVjdH0gICAgICAgICAg6ZSZ6K+v5L+h5oGv6K+m57uGCgkgKi8KCWVycm9yOiBmdW5jdGlvbiAoZXJyQ29kZSkgewoJCXZhciBlcnJJbmZvID0gdGhpcy5FUlJPUltlcnJDb2RlLnRvU3RyaW5nKCldIHx8IHsKCQkJdGV4dDogJ+acquefpemUmeivrzogJyArIGVyckNvZGUsCgkJCWFsZXJ0OiB0cnVlLAoJCQlsZXZlbDogJ3dhcm4nCgkJfTsKCQllcnJJbmZvLmNvZGUgPSBwYXJzZUludChlcnJDb2RlLCAxMCk7CgoJCUhbZXJySW5mby5sZXZlbF0oZXJySW5mby50ZXh0KTsKCgkJaWYgKGVyckluZm8uYWxlcnQpCgkJCWFsZXJ0KCBlcnJJbmZvLnRleHQgKTsKCgkJcmV0dXJuIGVyckluZm87Cgl9LAoKCS8qKgoJICogQHByaXZhdGUKCSAqIOaLpuaIquaSreaUvuWZqOS4i+i9veS6i+S7tgoJICovCglob29rUGxheWVyRG93bmxvYWQ6IGZ1bmN0aW9uICgpIHsKCQl2YXIgdGhhdCA9IHRoaXM7CgoJCS8vIGZtUGxheWVyVmlldyDmmK/mnIDlkI7kuIDkuKoKCQlILndhaXRVbnRpbCAoJ2ZtUGxheWVyVmlldycsIGZ1bmN0aW9uICgpIHsKCQkJdGhhdC4kZGxCdG4gPSAkKCcubWFpbi1wYW5lbCAuZG93bmxvYWQgPiBhJyk7CgoJCQl1bnNhZmVFeGVjKGZ1bmN0aW9uIChzY3JpcHROYW1lLCBob29rQmF0Y2gpIHsKCQkJCS8vIOm7hOmHkSBWSVAKCQkJCXZhciBvbGRTZXRWaXAgPSBIUS5tb2RlbC5zZXRWaXBJbmZvOwoJCQkJSFEubW9kZWwuc2V0VmlwSW5mbyA9IGZ1bmN0aW9uICggaXNWaXAsIHogKSB7CgkJCQkJaWYgKCFpc1ZpcCkgewoJCQkJCQlpc1ZpcCA9IHRydWU7CgkJCQkJfQoKCQkJCQlyZXR1cm4gb2xkU2V0VmlwLmNhbGwgKHRoaXMsIGlzVmlwLCB6KTsKCQkJCX07CgkJCQlIUS5tb2RlbC5pc0dvbGQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9OwoJCQkJSFEubW9kZWwuc2V0VmlwSW5mbyAoKTsKCgkJCQl2YXIgYmFrRXh0cmFjdFVzZXJJbmZvID0gVXNlck1vZGVsLnByb3RvdHlwZS5fZ2V0VXNlckluZm87CgkJCQlVc2VyTW9kZWwucHJvdG90eXBlLl9nZXRVc2VySW5mbyA9IGZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgciA9IGJha0V4dHJhY3RVc2VySW5mby5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJCWlmICghci52aXApIHsKCQkJCQkJci52aXAgPSB7CgkJCQkJCQljbG91ZDogewoJCQkJCQkJCXNlcnZpY2VfbGV2ZWw6ICdnb2xkJwoJCQkJCQkJfQoJCQkJCQl9OwoJCQkJCX0KCQkJCQlyLmlzU2hvd1NvdXJjZUljb24gPSBmYWxzZTsKCgkJCQkJcmV0dXJuIHI7CgkJCQl9OwoKCQkJCS8vIOWxj+iUveaXpeW/l+WPkemAgSwg5Yi35bGP5aW954OmCgkJCQlsb2dDdHJsLnNlbmRMb2cgPSBmdW5jdGlvbiAoKSB7fTsKCgkJCQl2YXIgaW5zdEZsb2F0QnRuID0gbGlzdFZpZXcudGlwLmRhdGEoInVpLWZsb2F0QnV0dG9uIik7CgkJCQl2YXIgb2xkTXVzaWNEb3dubG9hZCA9IGxpc3RWaWV3LmRvd25sb2FkOwoJCQkJbGlzdFZpZXcuZG93bmxvYWQgPSBmdW5jdGlvbiAoc29uZ0luZGV4LCBpc0ZsYWMpIHsKCQkJCQkvLyDmibnph4/kuIvovb0sIOS9huaYr+S4jeaYryBBcmlhIOaooeW8j+WImeaUvuW8gwoJCQkJCWlmICghaG9va0JhdGNoICYmIHNvbmdJbmRleC5sZW5ndGggPiAxKSB7CgkJCQkJCXJldHVybiBvbGRNdXNpY0Rvd25sb2FkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkJCQkJfQoJCQkJCXZhciBzb25nRGF0YSA9IGluc3RGbG9hdEJ0bi5saXN0RWxlbS5yZWVsTGlzdCgib3B0aW9uIiwgImRhdGEiKS5maWx0ZXIoZnVuY3Rpb24gKGUsIGkpIHsKCQkJCQkJcmV0dXJuIC0xICE9PSBzb25nSW5kZXguaW5kZXhPZihpKQoJCQkJCX0pLm1hcCAoZnVuY3Rpb24gKGUpIHsKCQkJCQkJcmV0dXJuIHsKCQkJCQkJCXNvbmdOYW1lOiAgIGUuc29uZ05hbWUsCgkJCQkJCQlhcnRpc3ROYW1lOiBlLmFydGlzdE5hbWUsCgkJCQkJCQlzb25nSWQ6ICAgICBlLnNvbmdJZCwKCQkJCQkJCWlzRmxhYzogICAgICEhaXNGbGFjLAoJCQkJCQkJaXNGYXY6ICAgICAgISFlLmhhc0NvbGxlY3RlZAoJCQkJCQl9OwoJCQkJCX0pOwoKCQkJCQlkb2N1bWVudC5kaXNwYXRjaEV2ZW50IChuZXcgQ3VzdG9tRXZlbnQgKHNjcmlwdE5hbWUgKyAnLUJBVENIJywgeyBkZXRhaWw6IEpTT04uc3RyaW5naWZ5KHNvbmdEYXRhKSB9KSk7CgkJCQl9OwoKCQkJCShmdW5jdGlvbiAoKSB7CgkJCQkJLy8g5Y+W5raI5LiL6L295oyJ6ZKu54K55Ye7CgkJCQkJdGhpcy4kdGl0bGUuZmluZCgnLmRvd25sb2FkJykub2ZmKCdjbGljaycpOwoKCQkJCQkvLyDnu5Hlrprmkq3mlL7kuovku7YKCQkJCQl0aGlzLmxpc3RDdHJsLm9uKCdjaGFuZ2U6c29uZ0xpbmsnLCBmdW5jdGlvbiAoeiwgc29uZ0RhdGEpIHsKCQkJCQkJZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCAobmV3IEN1c3RvbUV2ZW50IChzY3JpcHROYW1lLCB7ZGV0YWlsOiBKU09OLnN0cmluZ2lmeSAoc29uZ0RhdGEpfSkpOwoJCQkJCX0pOwoJCQkJfSkuY2FsbCAod2luZG93LnNvbmdJbmZvVmlldyk7CgkJCX0sIEguc2NyaXB0TmFtZSwgdGhpcy5pc0FyaWEpOwoJCX0pOwoJfSwKCgkvKioKCSAqIEBwcml2YXRlCgkgKiBkb2N1bWVudC1zdGFydCDlm57osIMKCSAqLwoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCXRoaXMuaW5pdEV2ZW50cyAoKTsKCQl0aGlzLmhvb2tQbGF5ZXJEb3dubG9hZCAoKTsKCX0sCgoJLyoqCgkgKiDmj5DkuqQgUG9zdCDor7fmsYIKCSAqIEBwYXJhbSAge1JlcXVlc3R9IHJlcSAgIOivt+axguWvueixoSwg5Y+C6KeBIEdNX3htbGh0dHBSZXF1ZXN0CgkgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICB4bWxodHRwUmVxdWVzdCDlr7nosaEKCSAqLwoJcG9zdDogZnVuY3Rpb24gKHJlcSkgewoJCXJlcS5tZXRob2QgPSAnUE9TVCc7CgkJcmVxLmhlYWRlcnMgPSByZXEuaGVhZGVycyB8fCB7fTsKCQlyZXEuaGVhZGVycy5SZWZlcmVyID0gcmVxLmhlYWRlcnMuUmVmZXJlciB8fCAnaHR0cDovL211c2ljLmJhaWR1LmNvbS8nOwoJCXJlcS5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOwoJCXJlcS5kYXRhID0gJC5wYXJhbShyZXEuZGF0YSk7CgoJCXJldHVybiBHTV94bWxodHRwUmVxdWVzdChyZXEpOwoJfSwKCgkvKioKCSAqIEBwcml2YXRlCgkgKiDmkq3mlL7lmajkuIvmlrnnmoTkuIvovb3kuovku7bmjqXnrqEKCSAqIEBwYXJhbSAge0V2ZW50fSBlICAg5LqL5Lu2CgkgKi8KCV9yZWN2RXZlbnQ6IGZ1bmN0aW9uIChlKSB7CgkJdmFyIHNvbmdEYXRhID0gSlNPTi5wYXJzZSAoZS5kZXRhaWwpOwoKCQlmb3IgKHZhciBpID0gMy8qIHRoaXMucXVhbGl0aWVzLmxlbmd0aCAqLywgc29uZzsgIXNvbmcgJiYgaS0tOyApCgkJCXNvbmcgPSBzb25nRGF0YS5saW5rc1t0aGlzLnF1YWxpdGllc1tpXV07CgoJCS8vIOiOt+WPluatjOabsuWksei0pQoJCWlmICghc29uZyB8fCAhc29uZy5zb25nTGluaykgewoJCQlILndhcm4gKCfop6PmnpDkuIvovb3lnLDlnYDlpLHotKUsIOWPr+iDveeZvuW6puabtOaWsOS6huiOt+WPluaWueW8jy4nKTsKCQkJcmV0dXJuIDsKCQl9CgoJCXRoaXMuJGRsQnRuLmF0dHIgKHsKCQkJdGl0bGU6IHNvbmcuc29uZ05hbWUsCgkJCWhyZWY6IEgudXJpKHNvbmcuc29uZ0xpbmssIEguc3ByaW50ZignJXMgWyVzXS4lcycsIHNvbmdEYXRhLnNvbmdOYW1lLCBzb25nRGF0YS5hcnRpc3ROYW1lLCBzb25nLmZvcm1hdCkpCgkJfSk7Cgl9LAoKCS8qKgoJICog6ZqP5py65pWwCgkgKiBAcmV0dXJuIHtTdHJpbmd9IOmaj+acuuaVsAoJICovCglfcm5kOiBmdW5jdGlvbiAoKSB7CgkJcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zbGljZSgyKTsKCX0sCgoJLyoqCgkgKiDop6PmnpDnmb7luqbov5Tlm57nmoTkuI3op4TliJnmlbDmja4KCSAqIEBwYXJhbSAge1Jlc3BvbnNlfSByICAgR01feG1saHR0cFJlcXVlc3Qub25sb2FkIOWbnuiwg+eahOWPguaVsCAxCgkgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgIOebuOWFs+aVsOaNrgoJICovCglfcGFyc2VSYXc6IGZ1bmN0aW9uIChyKSB7CgkJcmV0dXJuIEpTT04ucGFyc2Uoci5yZXNwb25zZVRleHQucmVwbGFjZSgvXHMvZywgJycpKTsKCX0sCgoJLyoqCgkgKiDop6PmnpDnmb7luqbov5Tlm57nmoTkuI3op4TliJnmlbDmja7nmoQgZGF0YSDoioLngrkKCSAqIEBwYXJhbSAge1Jlc3BvbnNlfSByICAgR01feG1saHR0cFJlcXVlc3Qub25sb2FkIOWbnuiwg+eahOWPguaVsCAxCgkgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgIOebuOWFs+aVsOaNrgoJICovCglfcGFyc2U6IGZ1bmN0aW9uIChyKSB7CgkJcmV0dXJuIHRoaXMuX3BhcnNlUmF3KHIpLmRhdGE7Cgl9LAoKCS8qKgoJICog5Y+W5q2M5puy5piv5ZCm5Zyo5pS26JeP6YeM6Z2iLCDmmK/nmoTor53liJnog73nm7TmjqXop6PmnpAKCSAqIEBwYXJhbSAge0ludGVnZXJ9ICAgc29uZ0lkIOabsuebriBJRAoJICogQHBhcmFtICB7RnVuY3Rpb259ICBjYkRvbmUg5Zue6LCDLCAxIOWPguaVsCwgQm9vbGVhbiDmmK/lkKblnKjmlLbol4/lpLkKCSAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICAgICBbZGVzY3JpcHRpb25dCgkgKi8KCV9pc0ZhdjogZnVuY3Rpb24gKHNvbmdJZCwgY2JEb25lKSB7CgkJdmFyIHNlbGYgPSB0aGlzOwoJCUdNX3htbGh0dHBSZXF1ZXN0ICh7CgkJCW1ldGhvZDogJ0dFVCcsCgkJCXVybDogSC5zcHJpbnRmKCdodHRwOi8vbXVzaWMuYmFpZHUuY29tL2RhdGEvdXNlci9pc0NvbGxlY3Q/dHlwZT1zb25nJmlkcz0lcyZyPSVzJywgc29uZ0lkLCB0aGlzLl9ybmQoKSksCgkJCW9ubG9hZDogZnVuY3Rpb24gKHIpIHsKCQkJCWNiRG9uZSghIXNlbGYuX3BhcnNlKHIpLmlzQ29sbGVjdCk7CgkJCX0KCQl9KTsKCX0sCgoJLyoqCgkgKiDliqDlhaXmlLbol4/lpLkKCSAqIEBwYXJhbSB7SW50ZWdlcn0gIHNvbmdJZCDmm7Lnm64gSUQKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNiRG9uZSDlm57osIPplJnor6/kv6Hmga8KCSAqLwoJX2FkZEZhdjogZnVuY3Rpb24gKHNvbmdJZCwgY2JEb25lKSB7CgkJdmFyIHNlbGYgPSB0aGlzOwoJCXRoaXMucG9zdCh7CgkJCXVybDogJ2h0dHA6Ly9tdXNpYy5iYWlkdS5jb20vZGF0YS91c2VyL2NvbGxlY3Q/cj0nICsgdGhpcy5fcm5kKCksCgkJCWRhdGE6IHsKCQkJCWlkczogc29uZ0lkLAoJCQkJdHlwZTogJ3NvbmcnLAoJCQkJcGF5X3R5cGU6IDAKCQkJfSwKCQkJb25sb2FkOiBmdW5jdGlvbiAocikgewoJCQkJY2JEb25lKHNlbGYuZXJyb3Ioc2VsZi5fcGFyc2VSYXcocikuZXJyb3JDb2RlKSk7CgkJCX0KCQl9KTsKCX0sCgoJLyoqCgkgKiDnp7vpmaTmlLbol4/lpLkKCSAqIEBwYXJhbSB7SW50ZWdlcn0gIHNvbmdJZCDmm7Lnm64gSUQKCSAqIEBwYXJhbSB7RnVuY3Rpb259IGNiRG9uZSDlm57osIPplJnor6/kv6Hmga8KCSAqLwoJX3JtRmF2OiBmdW5jdGlvbiAoc29uZ0lkLCBjYkRvbmUpIHsKCQl2YXIgc2VsZiA9IHRoaXM7CgkJdGhpcy5wb3N0KHsKCQkJdXJsOiAnaHR0cDovL211c2ljLmJhaWR1LmNvbS9kYXRhL3VzZXIvZGVsZXRlQ29sbGVjdGlvbj9yPScgKyB0aGlzLl9ybmQoKSwKCQkJZGF0YTogewoJCQkJaWRzOiBzb25nSWQsCgkJCQl0eXBlOiAnc29uZycsCgkJCQlwYXlfdHlwZTogMAoJCQl9LAoJCQlvbmxvYWQ6IGZ1bmN0aW9uIChyKSB7CgkJCQljYkRvbmUoc2VsZi5lcnJvcihzZWxmLl9wYXJzZVJhdyhyKS5lcnJvckNvZGUpKTsKCQkJfQoJCX0pOwoJfSwKCgkvKioKCSAqIOebtOaOpeiOt+WPluabsuebruS/oeaBrywg6K+356Gu5L+d55So5oi35pyJ5p2D6ZmQ55u05o6l6Kej5p6Q5oiW5Zyo5pS26JeP5aS55YaFLgoJICogQHBhcmFtICB7SW50ZWdlcn0gIHNvbmdJZCAgIOabsuebriBJRAoJICogQHBhcmFtICB7RnVuY3Rpb259IGNiU29uZyAgIOWbnuiwgwoJICovCglfZ2V0U29uZ0luZm9EaXJlY3Q6IGZ1bmN0aW9uIChzb25nSWQsIGNiU29uZykgewoJCXZhciBzZWxmID0gdGhpczsKCQlHTV94bWxodHRwUmVxdWVzdCAoewoJCQltZXRob2Q6ICdHRVQnLAoJCQl1cmw6ICdodHRwOi8veWlueXVleXVuLmJhaWR1LmNvbS9kYXRhL2Nsb3VkL2Rvd25sb2FkP3NvbmdJZHM9JyArIHNvbmdJZCwKCQkJb25sb2FkOiBmdW5jdGlvbiAocikgewoJCQkJY2JTb25nKHNlbGYuX3BhcnNlKHIpLmRhdGEpOwoJCQl9CgkJfSk7Cgl9LAoKCS8qKgoJICog6I635Y+W5puy55uu5L+h5oGvCgkgKiBAcGFyYW0gIHtJbnRlZ2VyfSAgc29uZ0lkIOabsuebriBJRAoJICogQHBhcmFtICB7RnVuY3Rpb259IGNiU29uZyDlm57osIMKCSAqLwoJX2dldFNvbmdJbmZvOiBmdW5jdGlvbiAoc29uZ0lkLCBjYlNvbmcpIHsKCQl2YXIgc2VsZiA9IHRoaXM7CgkJdGhpcy5fYWRkRmF2KHNvbmdJZCwgZnVuY3Rpb24gKGVyckluZm8pIHsKCQkJaWYgKGVyckluZm8ubGV2ZWwgPT0gJ2Vycm9yJykgewoJCQkJSC5lcnJvcign5re75Yqg5pS26JeP5aS55Ye66ZSZLCDlj5bmtojmk43kvZwuJyk7CgkJCQlyZXR1cm4gOwoJCQl9CgoJCQl2YXIgaXNGYXYgPSBlcnJJbmZvLmNvZGUgPT09IDIyMDAwOwoJCQl2YXIgcVJlbW92ZUZhdiA9ICQuRGVmZXJyZWQoKTsKCQkJcVJlbW92ZUZhdi5kb25lKGlzRmF2ID8gSC5ub3AgOiBmdW5jdGlvbiAoKSB7CgkJCQlILmluZm8gKCfnp7vpmaTkuLrop6PmnpDogIzkuLTml7bmt7vliqDnmoTmrYzmm7LigKYgJXMnLCBzb25nSWQpOwoJCQkJc2VsZi5fcm1GYXYoc29uZ0lkKTsKCQkJfSk7CgoJCQlzZWxmLl9nZXRTb25nSW5mb0RpcmVjdChzb25nSWQsIGZ1bmN0aW9uIChyKSB7CgkJCQljYlNvbmcociwgcVJlbW92ZUZhdi5yZXNvbHZlLmJpbmQocVJlbW92ZUZhdikpOwoJCQl9KTsKCQl9KTsKCX0sCgoJLyoqCgkgKiDmoLnmja7ln7rmnKzkv6Hmga/mnoTlu7rkuIvovb3lnLDlnYAKCSAqIEBwYXJhbSAge0ludGVnZXJ9IHNvbmdJZCAgICAgIOabsuebriBJRAoJICogQHBhcmFtICB7SW50ZWdlcn0gc29uZ1JhdGUgICAg56CB546HLCDljZXkvY3kuLoga2JwcwoJICogQHBhcmFtICB7U3RyaW5nfSAgbXVzaWNGb3JtYXQg6Z+z5LmQ5paH5Lu25qC85byPCgkgKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgICAgICDmnoTlu7rnmoTmlofku7blnLDlnYAsIOmcgOimgSBDb29raWUKCSAqLwoJX2J1aWxkVXJsOiBmdW5jdGlvbiAoc29uZ0lkLCBzb25nUmF0ZSwgbXVzaWNGb3JtYXQpIHsKCQlyZXR1cm4gSC5zcHJpbnRmKAoJCQknaHR0cDovL3lpbnl1ZXl1bi5iYWlkdS5jb20vZGF0YS9jbG91ZC9kb3dubG9hZHNvbmdmaWxlP3NvbmdJZHM9JXMmcmF0ZT0lcyZmb3JtYXQ9JXMnLAoJCQlzb25nSWQsIHNvbmdSYXRlLCBtdXNpY0Zvcm1hdAoJCSk7Cgl9LAoKCS8qKgoJICog5p6E5bu65peg6ZyA6ZmE5Yqg5pWw5o2u55qE5LiL6L295Zyw5Z2ACgkgKiBAcGFyYW0gIHtTdHJpbmd9ICAgdXJsICAg5Lya6Lez6L2s55qE5Zyw5Z2ACgkgKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2JVcmwg5Zue6LCDLCAxIOWPguaVsCwgU3RyaW5nIOecn+WunuWcsOWdgAoJICovCglfZ2V0UmVhbFVybDogZnVuY3Rpb24gKHVybCwgY2JVcmwpIHsKCQlHTV94bWxodHRwUmVxdWVzdCAoewoJCQltZXRob2Q6ICdHRVQnLAoJCQl1cmw6IHVybCwKCQkJaGVhZGVyczogewoJCQkJUmFuZ2U6ICdieXRlcz0wLTEnCgkJCX0sCgkJCW9ubG9hZDogZnVuY3Rpb24gKHIpIHsKCQkJCWNiVXJsIChyLmZpbmFsVXJsKTsKCQkJfQoJCX0pOwoJfSwKCgkvKioKCSAqIOmAieaLqeacgOmrmOeggeeOhwoJICogQHBhcmFtICB7T2JqZWN0fSBkbCAgIOW4puacieeggeeOh+aVsOaNrueahOWvueixoQoJICogQHJldHVybiB7T2JqZWN0fSAgICAgIOacgOmrmOeahOeggeeOh+WvueixoQoJICovCglfZ2V0QmVzdFF1YWxpdHk6IGZ1bmN0aW9uIChkbCkgewoJCXZhciBxdSA9IE9iamVjdC5rZXlzKGRsKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CgkJCWlmICghZGxbYV0pIHJldHVybiBkbFtiXSA/IC0xIDogMDsKCQkJaWYgKCFkbFtiXSkgcmV0dXJuICAxOwoJCQlyZXR1cm4gZGxbYV0ucmF0ZSAtIGRsW2JdLnJhdGU7CgkJfSkucG9wKCk7CgoJCXJldHVybiBkbFtxdV07Cgl9LAoKCV9yZW5hbWVVcmw6IGZ1bmN0aW9uIChvbGRVcmwsIGZpbGUpIHsKCQkvLyAgICAvMTIzNDUveHh4Lm1wMz95eXkgLT4gLzEyMzQ1L2ZpbGUubXAzP3l5eQoJCXJldHVybiBvbGRVcmwucmVwbGFjZSgvKFwvXGQrXC8pLitcPy8sICckMScgKyBmaWxlICsgJz8nKTsKCX0sCgoJLyoqCgkgKiBAcHJpdmF0ZQoJICog5om56YeP5LiL6L295aSE55CG55qE5Zue6LCD5Ye95pWwCgkgKiBAcGFyYW0gIHtGdW5jdGlvbn0gbmV4dCAgICDlm57osIMsIOW9k+WJjemhueebruWkhOeQhuWujOavleWQjuiwg+eUqAoJICogQHBhcmFtICB7T2JqZWN0fSAgIG9ialNvbmcg5puy55uu5L+h5oGvCgkgKi8KCV9iYXRjaDogZnVuY3Rpb24gKG5leHQsIG9ialNvbmcpIHsKCQl2YXIgc2VsZiA9IHRoaXM7CgoJCS8vIOajgOafpeaYr+WQpumcgOimgeS4tOaXtuWKoOWFpeaUtuiXj+WkuQoJCXZhciBnZXRTb25nSW5mb1R5cGUgPSBvYmpTb25nLmlzRmF2ID8gJ19nZXRTb25nSW5mb0RpcmVjdCcgOiAnX2dldFNvbmdJbmZvJzsKCQl0aGlzW2dldFNvbmdJbmZvVHlwZV0gKG9ialNvbmcuc29uZ0lkLCBmdW5jdGlvbiAoZGwsIGNiUmVtb3ZlRmF2KSB7CgkJCS8vIOmZpOmdnumAieaLqeS4i+aXoOaNnyDlkKbliJnkuI3ph4fnlKjml6DmjZ8KCQkJaWYgKCFvYmpTb25nLmlzRmxhYyAmJiBkbC5mbGFjKQoJCQkJZGVsZXRlIGRsLmZsYWM7CgoJCQl2YXIgc29uZ0RsID0gc2VsZi5fZ2V0QmVzdFF1YWxpdHkoZGwpOwoJCQl2YXIgZmlsZSA9IEguc3ByaW50ZignJXMgWyVzXS4lcycsIG9ialNvbmcuc29uZ05hbWUsIG9ialNvbmcuYXJ0aXN0TmFtZSwgc29uZ0RsLmZvcm1hdCk7CgoJCQlzZWxmLl9nZXRSZWFsVXJsIChzZWxmLl9idWlsZFVybChvYmpTb25nLnNvbmdJZCwgc29uZ0RsLnJhdGUsIHNvbmdEbC5mb3JtYXQpLCBmdW5jdGlvbiAodXJsKSB7CgkJCQkvLyDnp7vpmaTkuLTml7bnlKjnmoTmlLbol4/lpLksIOS4jeWNoOS9jQoJCQkJaWYgKGNiUmVtb3ZlRmF2KQoJCQkJCWNiUmVtb3ZlRmF2ICgpOwoKCQkJCUguYWRkRG93bmxvYWQgKHNlbGYuX3JlbmFtZVVybCh1cmwsIGZpbGUpLCBmaWxlKTsKCQkJCW5leHQgKCk7CgkJCX0pOwoJCX0pOwoJfSwKCgkvKioKCSAqIEBwcml2YXRlCgkgKiDmibnph4/kuIvovb3kuovku7bmjqXnrqHlh73mlbAKCSAqIEBwYXJhbSAge0V2ZW50fSBlICAg5LqL5Lu2CgkgKi8KCV9iYXRjaERvd25sb2FkOiBmdW5jdGlvbiAoZSkgewoJCXZhciBhcnJTb25ncyA9IEpTT04ucGFyc2UgKGUuZGV0YWlsKTsKCQl2YXIgJHEgPSB0aGlzLiRxOwoKCQkkcS5hZGQuYXBwbHkoJHEsIGFyclNvbmdzKTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBtdXNpYy5iYWlkdS55aW55dWV5dW4uanMgKi8KewoJaWQ6ICdtdXNpYy5iYWlkdS55aW55dWV5dW4nLAoJbmFtZTogJ+mfs+S5kOS6keS4i+i9vScsCglob3N0OiAneWlueXVleXVuLmJhaWR1LmNvbScsCglub1N1Ykhvc3Q6IHRydWUsCglwYXRoOiAnLycsCgoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCUgud2FpdFVudGlsKCd1c2VyTW9kZWwuc2V0JywgZnVuY3Rpb24gKCkgewoJCQl1bnNhZmVFeGVjKGZ1bmN0aW9uIChzY3JpcHROYW1lLCBob29rQmF0Y2gpIHsKCQkJCXZhciBiYWtVc2VyU2V0SW5mbyA9IHVzZXJNb2RlbC5zZXQ7CgkJCQl1c2VyTW9kZWwuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsLCBvcHRzKSB7CgkJCQkJaWYgKGtleSA9PT0gJ3VzZXJJbmZvJyAmJiB2YWwpIHsKCQkJCQkJdmFsLnZpcCA9IHZhbC5nb2xkZW4gPSB0cnVlOwoJCQkJCX0KCQkJCQlyZXR1cm4gYmFrVXNlclNldEluZm8uYXBwbHkodXNlck1vZGVsLCBhcmd1bWVudHMpOwoJCQkJfTsKCQkJCQoJCQkJLy8gRm9yY2UgdXBkYXRlIHVzZXIgZGF0YSB2aWEgaG9vawoJCQkJdXNlck1vZGVsLnNldCgndXNlckluZm8nLCB1c2VyTW9kZWwuZ2V0KCd1c2VySW5mbycpKTsKCQkJfSk7CgkJfSk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMuZGpjYy5qcyAqLwp7CglpZDogJ211c2ljLmRqY2MnLAoJbmFtZTogJ0RKQ0Mg6Iie5puyJywKCWhvc3Q6IFsnd3d3LmRqY2MuY29tJy8qICwgJ3d3dy5kai5jYycgKi9dLAoJbm9TdWJIb3N0OiB0cnVlLAoKCXBhdGg6IFsnL2RqLycsICcvcGxheS5waHAnXSwKCW1pc3NpbmdEb21haW41OiAnaHR0cDovL2Rvd24uZGpjYy5jb20vbXVzaWMvJywKCglvblN0YXJ0OiBmdW5jdGlvbiAoKSB7CgkJSC53YWl0VW50aWwgKCckLnBvc3QnLCBmdW5jdGlvbiAoKSB7CgkJCWNvbnNvbGUuaW5mbyAoJ+aJp+ihjCBWSVAg56C06KejIChwbGF5LnBocCDpobXpnaLml6DmlYgpIC4uJyk7CgkJCXVuc2FmZUV4ZWMgKGZ1bmN0aW9uIChzY3JpcHRIb21lLCBzY3JpcHROYW1lKSB7CgkJCQlmdW5jdGlvbiBybmROdW1iZXIgKCkgewoJCQkJCXJldHVybiB+fig5OTk5OSAqIE1hdGgucmFuZG9tKCkpOwoJCQkJfQoKCQkJCWNvbnNvbGUuaW5mbyAoc2NyaXB0SG9tZSk7CgkJCQl2YXIgX3Bvc3QgPSAkLnBvc3Q7CgkJCQkkLnBvc3QgPSBmdW5jdGlvbiAoYWRkciwgY2IpIHsKCQkJCQlpZiAoYWRkciA9PSAnL2FqYXgucGhwP2FqYXg9dXNlcmluZm8nKSB7CgkJCQkJCXJldHVybiBfcG9zdC5jYWxsICgkLCBhZGRyLCBmdW5jdGlvbiAocykgewoJCQkJCQkJaWYgKHMgPT0gJycpCgkJCQkJCQkJcyA9IFsxLCBzY3JpcHROYW1lLCAwLCBzY3JpcHRIb21lLCAwLCAwLAoJCQkJCQkJCQlybmROdW1iZXIoKSwgcm5kTnVtYmVyKCksIDAsIDAsIDIsCgkJCQkJCQkJCSflsIrotLXnmoQgJyArIHNjcmlwdE5hbWUgKyAnIOeUqOaItycsICc55bm0JwoJCQkJCQkJCV0uam9pbignKndyZionKTsKCgkJCQkJCQljYiAocyk7CgkJCQkJCX0pOwoJCQkJCX0KCQkJCQlyZXR1cm4gX3Bvc3QuYXBwbHkgKCQsIGFyZ3VtZW50cyk7CgkJCQl9OwoKCQkJCXJldHVybiBmdW5jdGlvbiAoKSB7fTsKCQkJfSwgSC5zY3JpcHRIb21lLCBILnNjcmlwdE5hbWUpOwoJCX0pOwoKCQkvLyDmkq3mlL7lmajliqvmjIEgW+aAgOeWkeWkseaViD9dCgkJSC53YWl0VW50aWwgKCdqd3BsYXllci5hcGknLCBmdW5jdGlvbiAoKSB7CgkJCXVuc2FmZUV4ZWMgKGZ1bmN0aW9uICgpIHsKCQkJCXZhciBfc3AgPSB3aW5kb3cuandwbGF5ZXIuYXBpLnNlbGVjdFBsYXllcjsKCQkJCXdpbmRvdy5qd3BsYXllci5hcGkuc2VsZWN0UGxheWVyID0gZnVuY3Rpb24gKHNlbCkgewoJCQkJCXZhciBtUGxheWVyID0gX3NwIChzZWwpOwoJCQkJCXZhciBfc2V0dXAgPSBtUGxheWVyLnNldHVwOwoJCQkJCW1QbGF5ZXIuc2V0dXAgPSBmdW5jdGlvbiAob3B0aW9ucykgewoJCQkJCQljb25zb2xlLmluZm8gKCdzZXR1cCcsIG9wdGlvbnMpOwoJCQkJCQl2YXIgX29wbCA9IG9wdGlvbnMuZXZlbnRzLm9uUGxheWxpc3RJdGVtOwoJCQkJCQlvcHRpb25zLmV2ZW50cy5vblBsYXlsaXN0SXRlbSA9IGZ1bmN0aW9uIChldmVudFBsYXlsaXN0Q2hhbmdlKSB7CgkJCQkJCQlkb2N1bWVudC5kaXNwYXRjaEV2ZW50ICggbmV3IEN1c3RvbUV2ZW50IChILnNjcmlwdE5hbWUsIHsKCQkJCQkJCQlkZXRhaWw6IEpTT04uc3RyaW5naWZ5IChtUGxheWVyLmdldFBsYXlsaXN0SXRlbSAoKSkKCQkJCQkJCX0pICk7CgkJCQkJCQlyZXR1cm4gX29wbC5hcHBseSAodGhpcywgYXJndW1lbnRzKTsKCQkJCQkJfTsKCQkJCQkJcmV0dXJuIF9zZXR1cC5hcHBseSAobVBsYXllciwgYXJndW1lbnRzKTsKCQkJCQl9OwoJCQkJCXJldHVybiBtUGxheWVyOwoJCQkJfTsKCQkJfSk7CgkJfSk7CgoJCXRoaXMuZGxMaW5rMSA9ICQoJzxhPicpLnRleHQgKCfor5XlkKzkuIvovb0nKS5hdHRyICgndGFyZ2V0JywgJ19ibGFuaycpOwoJCXRoaXMuZGxMaW5rMiA9ICQoJzxhPicpLnRleHQgKCfpq5jmuIXkuIvovb0nKS5hdHRyICgndGFyZ2V0JywgJ19ibGFuaycpOwoKCQkvLyDkuIvovb3mlbDmja7op6PmnpAKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIChILnNjcmlwdE5hbWUsIGZ1bmN0aW9uIChlKSB7CgkJCXZhciBzb25nT2JqID0gSlNPTi5wYXJzZSAoZS5kZXRhaWwpOwoJCQlpZiAoSC5iZWdpbldpdGggKHNvbmdPYmouZmlsZSwgd3JmSncuUGxheWVyLmRvbWFpblswXSkpCgkJCQlzb25nT2JqLmZpbGUgPSBzb25nT2JqLmZpbGUuc2xpY2UgKHdyZkp3LlBsYXllci5kb21haW5bMF0ubGVuZ3RoKTsKCgkJCXRoaXMuZGxMaW5rMS5hdHRyICgnaHJlZicsIEgudXJpICh3cmZKdy5QbGF5ZXIuZG9tYWluWzBdICsgc29uZ09iai5maWxlICwgc29uZ09iai50aXRsZSArICcubXAzJykpOwoJCQl0aGlzLmRsTGluazIuYXR0ciAoJ2hyZWYnLCBILnVyaSAobWlzc2luZ0RvbWFpbjUgKyAoc29uZ09iai5maWxlMiB8fCBzb25nT2JqLmZpbGUpLCBzb25nT2JqLnRpdGxlICsgJy7pq5jmuIUubXAzJykpOwoJCQlILmluZm8gKHNvbmdPYmopOwoJCX0uYmluZCh0aGlzKSwgZmFsc2UpOwoJfSwKCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKCQkkKCcjbGlzdHRhYnMnKQoJCQkuYXBwZW5kICh0aGlzLmRsTGluazEpCgkJCS5hcHBlbmQgKHRoaXMuZGxMaW5rMikKCQkJLmNzcyAoJ2hlaWdodCcsICdpbml0aWFsJykKCQkJLmNzcyAoJ21pbi1oZWlnaHQnLCAnMTYwJyk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMuZGpray5qcyAqLwp7CglpZDogJ211c2ljLmRqa2snLAoJbmFtZTogJ0RKIOWXqOWXqCcsCglob3N0OiAnd3d3LmRqa2suY29tJywKCW5vU3ViSG9zdDogdHJ1ZSwKCWNzczogLyogUmVzb3VyY2U6IGNvbS5kamtrLmRsLmNzcyAqLwpILmV4dHJhY3QoZnVuY3Rpb24gKCkgeyAvKgojanhfZGxfd3JhcHBlciB7CiAgICBmbG9hdDogcmlnaHQ7CiAgICBtYXJnaW4tcmlnaHQ6IDEuNWVtOwp9CgojanhfZGxfd3JhcHBlciA+IGEgewoJdHJhbnNpdGlvbjogY29sb3IgLjRzOwoJY29sb3I6ICNhYWE7Cn0KCiNqeF9kbF93cmFwcGVyID4gYTpob3ZlciB7Cgljb2xvcjogI2ZmZjsKCXRleHQtZGVjb3JhdGlvbjogbm9uZTsKfQoqL30pLAoKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQl0aGlzLmRsSG9sZGVyID0gJCgnPGRpdiBpZD0ianhfZGxfd3JhcHBlciI+Jyk7CgkJdGhpcy5kbEhvbGRlci5hcHBlbmQoJ+S4i+i9vTogJyk7CgkJdGhpcy5kbEhxICAgICA9ICQoJzxhPicpLnRleHQoJ+mrmOa4hScpLmFwcGVuZFRvICh0aGlzLmRsSG9sZGVyKS5wcm9wKCdkb3dubG9hZCcsIHRydWUpOwoJCXRoaXMuZGxIb2xkZXIuYXBwZW5kKCcgfCAnKTsKCQl0aGlzLmRsTGluayAgID0gJCgnPGE+JykudGV4dCgn6K+V5ZCsJykuYXBwZW5kVG8gKHRoaXMuZGxIb2xkZXIpLnByb3AoJ2Rvd25sb2FkJywgdHJ1ZSk7CgoJCUgualBsYXllclBhdGNoZXIgKGZ1bmN0aW9uIChzb25nT2JqKSB7CgkJCXZhciBzb25nQWRkciAgPSBzb25nT2JqLm1wMyB8fCBzb25nT2JqLm00YTsKCQkJdmFyIHNvbmdUaXRsZSA9IHNvbmdPYmoudGl0bGUgfHwgJCgnI3BsYXlUaXRsZSAuanAtdGl0bGUnKS50ZXh0KCkucmVwbGFjZSgvLivvvJovLCAnJyk7CgkJCQoJCQl0aGlzLmRsTGluay5hdHRyKHsKCQkJCWhyZWY6IEgudXJpKHNvbmdBZGRyLCBzb25nVGl0bGUgKyBzb25nQWRkci5zbGljZSgtNCkpLAoJCQkJdGl0bGU6ICfor5XlkKzpn7PotKg6ICcgKyBzb25nVGl0bGUKCQkJfSk7CgoJCQl0aGlzLmRsSHEuYXR0cih7CgkJCQlocmVmOiBILnVyaSh0aGlzLnVwZ3JhZGVIUShzb25nQWRkciksIHNvbmdUaXRsZSArICcubXAzJyksCgkJCQl0aXRsZTogJ+mrmOa4hemfs+i0qDogJyArIHNvbmdUaXRsZQoJCQl9KTsKCQl9LmJpbmQgKHRoaXMpKTsKCX0sCgoJLy8gU291cmNlOiA1MnBvamllCgl1cGdyYWRlSFE6IGZ1bmN0aW9uICh1cmwpIHsKCQlyZXR1cm4gdXJsCgkJICAgICAgICAgLnJlcGxhY2UodW5zYWZlV2luZG93LnNfc3RyLCAnaHR0cDovL2RvLmRqa2suY29tL21wMycpCgkJICAgICAgICAgLnJlcGxhY2UoLy4uLiQvLCAnbXAzJykKCX0sCgoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJdGhpcy5kbEhvbGRlci5hcHBlbmRUbyAoJCgnLm1haW4tcGFuZWwnKSk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMuZGp5ZS5qcyAqLwp7CglpZDogJ211c2ljLmRqeWUnLAoJbmFtZTogJ0RKIOeIt+eIt+e9kScsCglob3N0OiAnd3d3LmRqeWUuY29tJywKCW5vU3ViSG9zdDogdHJ1ZSwKCXBhdGg6ICcvcGxheWVyLycsCgljc3MgOiAvKiBSZXNvdXJjZTogY29tLmRqeWUuZGwuY3NzICovCkguZXh0cmFjdChmdW5jdGlvbiAoKSB7IC8qCiNqeF9kbF9idG4gewoJbWFyZ2luLXRvcDogN3B4OwoJZmxvYXQ6IHJpZ2h0Owp9CgojanhfZGxfYnRuID4gYSB7Cgl0cmFuc2l0aW9uOiBjb2xvciAuNHM7Cgljb2xvcjogYmxhY2s7Cn0KCiNqeF9kbF9idG4gPiBhOmhvdmVyIHsKCWNvbG9yOiAjNDQ0Owp9CiovfSksCgoJdG9NcDM6IGZ1bmN0aW9uIChzb25nKSB7CgkJcmV0dXJuIHNvbmcucmVwbGFjZSgvW2Etel0qXC4vLCAnbXAzLicpLnJlcGxhY2UoL200YSQvLCAnbXAzP3R5cGU9ZG93bicpOwoJfSwKCglvblN0YXJ0OiBmdW5jdGlvbiAoKSB7CgkJdGhpcy5saW5rSG9sZGVyID0gJCgnPHAgaWQ9Imp4X2RsX2J0biI+Jyk7CgkJdGhpcy5saW5rSG9sZGVyLmFwcGVuZCgn5LiL6L29OiAnKQoJCXRoaXMubGlua000QSA9ICQoJzxhPicpLmFwcGVuZFRvICh0aGlzLmxpbmtIb2xkZXIpLnRleHQgKCfor5XlkKwnKTsKCQl0aGlzLmxpbmtIb2xkZXIuYXBwZW5kICgnIHwgJyk7CgkJdGhpcy5saW5rTVAzID0gJCgnPGE+JykuYXBwZW5kVG8gKHRoaXMubGlua0hvbGRlcikudGV4dCAoJ21wMycpCgkJCS5hdHRyICgndGl0bGUnLCAn6K+35rOo5oSPOiDor6Xpk77mjqXlj6/og73lm6DkuLrmnI3liqHlmajphY3nva7mm7TmlrDlr7zoh7Tml6Dms5XkuIvovb0nKTsKCgkJSC5qUGxheWVyUGF0Y2hlciAoZnVuY3Rpb24gKHNvbmdPYmopIHsKCQkJdmFyIHNvbmdMaW5rID0gc29uZ09iai5tNGEucmVwbGFjZSgvXD8uKi8sICcnKTsKCQkJdmFyIHNvbmdUaXRsZSA9ICQoJyNwbGF5X3RpdGxlJykudGV4dCAoKTsKCgkJCXRoaXMubGlua000QS5hdHRyKCdocmVmJywgSC51cmkgKHNvbmdMaW5rLCBzb25nVGl0bGUgKyAnLm00YScpKTsKCQkJdGhpcy5saW5rTVAzLmF0dHIoJ2hyZWYnLCBILnVyaSAodGhpcy50b01wMyhzb25nTGluayksIHNvbmdUaXRsZSArICcubXAzJykpOwoJCX0uYmluZCAodGhpcykpOwoJfSwKCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKCQl0aGlzLmxpbmtIb2xkZXIKCQkJLmFwcGVuZFRvICgkKCcuYmZfY2tjJykpCgkJCS5jc3MoJ3BhZGRpbmctcmlnaHQnLCAnMWVtJyk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMuZG91YmFuLmpzICovCi8qKgogKiDosYbnk6Ppn7PkuZDkuIvovb3op6PmnpAgQnkgSml4dW4KICovCih7CglpZDogJ211c2ljLmRvdWJhbicsCgluYW1lOiAn6LGG55Oj6Z+z5LmQ5LiL6L296Kej5p6QJywKCWhvc3Q6ICdtdXNpYy5kb3ViYW4uY29tJywKCW5vU3ViSG9zdDogdHJ1ZSwKCW5vRnJhbWU6IGZhbHNlLAoJZGxfaWNvbjogdHJ1ZSwKCWNzczogLyogUmVzb3VyY2U6IGNvbS5kb3ViYW4ubXVzaWMuY3NzICovCkguZXh0cmFjdChmdW5jdGlvbiAoKSB7IC8qCi5jb250YWluZXIgLm1vZDEgewoJd2lkdGg6IDUyNXB4Owp9CgouY29udGFpbmVyIC5tb2QyIHsKCXdpZHRoOiA4M3B4Owp9CgoqL30pLAoKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCXZhciAkYnRuRG93bmxvYWQgPSAkKCc8YT4nKS5hdHRyKCdpZCcsICdidG4tZG93bmxvYWQnKTsKCQkkKCc8aT4nKS5hZGRDbGFzcygnanhfZGwganhfYnRuJykuYXBwZW5kVG8oJGJ0bkRvd25sb2FkKTsKCQlILmNhcHR1cmVBcmlhKCRidG5Eb3dubG9hZCk7CgoJCWZ1bmN0aW9uIGluamVjdF9kbF9pY29uICgpIHsKCQkJJGJ0bkRvd25sb2FkLnByZXBlbmRUbygnLmNvbnRhaW5lciAubW9kMicpOwoJCX0KCgkJZnVuY3Rpb24gaGFuZGxlX3VybCAoc29uZykgewoJCQl2YXIgdXJsID0gSC51cmkoc29uZy5nZXQoJ3VybCcpLCBzb25nLmdldCgndGl0bGUnKSArICIgWyIgKyBzb25nLmdldCgnYXJ0aXN0X25hbWUnKSArICJdLm1wMyIpOwoJCQkkYnRuRG93bmxvYWQuYXR0cignaHJlZicsIHVybCk7CgkJfQoKCQlleHBvcnRGdW5jdGlvbihoYW5kbGVfdXJsLCB1bnNhZmVXaW5kb3csIHsKCQkJZGVmaW5lQXM6ICJkbF9qaXh1biIKCQl9KTsKCgkJZXhwb3J0RnVuY3Rpb24oaW5qZWN0X2RsX2ljb24sIHVuc2FmZVdpbmRvdywgewoJCQlkZWZpbmVBczogImluaXRfaml4dW4iCgkJfSk7CgoJCXVuc2FmZUV4ZWMoZnVuY3Rpb24gKCkgewoJCQlyZXF1aXJlKFsncGxheWVyL2FwcCcsICdwbGF5ZXIvbW9kZWxzL3NvbmcnLCAncGxheWVyL3ZpZXdzL3BsYXlpbmZvJ10sIGZ1bmN0aW9uIChBcHAsIFNvbmcsIFBsYXlJbmZvKSB7CgkJCQlzZXRUaW1lb3V0KGluaXRfaml4dW4sIDI1KTsKCgkJCQl2YXIgc3AgPSBTb25nLnByb3RvdHlwZS5zdGFydFBsYXlpbmc7CgkJCQlTb25nLnByb3RvdHlwZS5zdGFydFBsYXlpbmcgPSBmdW5jdGlvbiAoKSB7CgkJCQkJZGxfaml4dW4odGhpcyk7CgkJCQkJcmV0dXJuIHNwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CgkJCQl9OwoKCQkJCXZhciBwaXIgPSBQbGF5SW5mby5wcm90b3R5cGUucmVuZGVyOwoJCQkJUGxheUluZm8ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHsKCQkJCQl2YXIgciA9IHBpci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwoJCQkJCWluaXRfaml4dW4oKTsKCQkJCQlyZXR1cm4gcjsKCQkJCX07CgkJCX0pOwoJCX0pOwoJfQp9KSwKLyogQ29tcGlsZWQgZnJvbSBtdXNpYy5kdW9sZS5qcyAqLwp7CglpZDogJ211c2ljLmR1b2xlJywKCW5hbWU6ICflpJrkuZDpn7PkuZAnLAoJaG9zdDogJ3d3dy5kdW9sZS5jb20nLAoJbm9TdWJIb3N0OiB0cnVlLAoKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCXZhciBidG5QcmV2U29uZyA9ICQoJyNwbGF5ZXJfcmlnaHQgLmxhc3QnKSwKCQkJYnRuRG93bmxvYWQgPSBidG5QcmV2U29uZy5jbG9uZSgpOwoJCQoJCSQoJyNwbGF5ZXJfcmlnaHQnKS5hbmltYXRlKHsKCQkJJ3dpZHRoJzogJys9MzInCgkJfSwgNTAwKTsKCQkKCQl2YXIgc29uZ0luZm8gPSAkKCdhLm11c2ljX2luZm8nKS5jc3MoewoJCQknY3Vyc29yJzogJ3RleHQnCgkJfSkucmVtb3ZlQXR0cignaHJlZicpOwoKCgkJdmFyIG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIgKGZ1bmN0aW9uICgpIHsKCQkJaWYgKHNvbmdJbmZvWzBdLmhhc0F0dHJpYnV0ZSgnaHJlZicpKQoJCQkJc29uZ0luZm8ucmVtb3ZlQXR0ciAoJ2hyZWYnKTsKCQl9LmJpbmQgKHRoaXMpKTsKCQltby5vYnNlcnZlIChzb25nSW5mb1swXSwgewoJCQlhdHRyaWJ1dGVzOiB0cnVlCgkJfSk7CgoJCWJ0bkRvd25sb2FkLmluc2VydEJlZm9yZShidG5QcmV2U29uZy5wcmV2KCkpLnJlbW92ZUNsYXNzKCdsYXN0JykuY3NzKHsKCQkJJ3dpZHRoJzogJzAnLAoJCQknZGlzcGxheSc6ICdpbmxpbmUnLAoJCQknYmFja2dyb3VuZC1wb3NpdGlvbic6ICctMTUwcHggLTEwNHB4JwoJCX0pLmNzcyhILm1ha2VSb3RhdGVDc3MoOTApKS5hbmltYXRlKHsKCQkJJ3dpZHRoJzogJys9MzInCgkJfSwgNTAwKS5hdHRyKCd0YXJnZXQnLCAnX2JsYW5rJyk7CgkJCgkJdmFyIG9sZFBsYXlOZXcgPSB1bnNhZmVXaW5kb3cuZHVvbGVQbGF5ZXIucGxheU5ldzsKCQl2YXIgcmFuZG9tSWQ7CgoJCXVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5ICh7CgkJCXBsYXlOZXc6IChmdW5jdGlvbiAodCwgbikgewoJCQkJZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCAoCgkJCQkJbmV3IEN1c3RvbUV2ZW50IChILnNjcmlwdE5hbWUsIHtkZXRhaWw6IEpTT04uc3RyaW5naWZ5ICh7CgkJCQkJCW1wMzogdCwKCQkJCQkJaW5mbzogdGhpcy5jdXJNdXNpYwoJCQkJCX0pfSkKCQkJCSk7CgoJCQkJdGhyb3cgbmV3IEVycm9yVW5zYWZlU3VjY2VzcyAoKTsKCQkJfSkuYmluZCh1bnNhZmVXaW5kb3cuZHVvbGVQbGF5ZXIpCgkJfSwgdW5zYWZlV2luZG93LmR1b2xlUGxheWVyLCAnLmR1b2xlUGxheWVyJyk7CgoJCWRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgKEguc2NyaXB0TmFtZSwgZnVuY3Rpb24gKGUpIHsKCQkJdmFyIHNvbmdPYmogID0gSlNPTi5wYXJzZSAoZS5kZXRhaWwpLAoJCQkJc29uZ0luZm8gPSBzb25nT2JqLmluZm87CgoJCQlidG5Eb3dubG9hZC5hdHRyKHsKCQkJCWhyZWY6IEgudXJpIChzb25nT2JqLm1wMywgc29uZ0luZm8uc29uZ19uYW1lICsgJyBbJyArIHNvbmdJbmZvLmFsYnVtX25hbWUgKyAnXSAtICcgKyBzb25nSW5mby5zaW5nZXJfbmFtZSArICcubXAzJyksCgkJCQl0aXRsZTogJ+WNleWHu+S4i+i9vTogJyArIHNvbmdJbmZvLnNvbmdfbmFtZQoJCQl9KTsKCQl9LCBmYWxzZSk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMuZHVvbWkuZWFyLmpzICovCnsKCWlkOiAnbXVzaWMuZHVvbWkuZWFyJywKCW5hbWU6ICfpgrvlsYXnmoTogLPmnLUnLAoJaG9zdDogJ2Vhci5kdW9taS5jb20nLAoJbm9TdWJIb3N0OiB0cnVlLAoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJSC53b3JkcHJlc3NBdWRpbyAoKTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBtdXNpYy5rdWdvdS5qcyAqLwovKioKICog6YW354uX6Z+z5LmQ6Kej5p6QIEJ5IEppeHVuCiAqIOaKk+WMhemFt+eLl+mfs+S5kCA6RAogKi8KKHsKCWlkOiAnbXVzaWMua3Vnb3UnLAoJbmFtZTogJ+mFt+eLl+mfs+S5kOS4i+i9veino+aekCcsCglob3N0OiBbJ3dlYi5rdWdvdS5jb20nLCAna3Vnb3UuY29tJywgJ3d3dy5rdWdvdS5jb20nXSwKCW5vU3ViSG9zdDogdHJ1ZSwKCW5vRnJhbWU6IHRydWUsCgloaWRlOiAnI2FkdicsCgljc3M6IC8qIFJlc291cmNlOiBjb20ua3Vnb3UuY3NzICovCkguZXh0cmFjdChmdW5jdGlvbiAoKSB7IC8qCi5kaWFsb2ctc2hhZG93IHsKCWRpc3BsYXk6IGZsZXg7CglqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKCWFsaWduLWl0ZW1zOiBjZW50ZXI7Cglwb3NpdGlvbjogZml4ZWQ7CglsZWZ0OiAwOwoJdG9wOiAwOwoJaGVpZ2h0OiAxMDAlOwoJd2lkdGg6IDEwMCU7CgliYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLC4zKTsKCXotaW5kZXg6IDEwMDsKfQoKLmRpYWxvZy1jb250YWluZXIgewoJbWluLXdpZHRoOiBjYWxjKDc2OHB4ICsgMmVtKTsKCW1pbi1oZWlnaHQ6IDIwZW07CglwYWRkaW5nOiAxZW07CgliYWNrZ3JvdW5kOiAjZmZmOwoJYm94LXNoYWRvdzogMnB4IDJweCAycHggIzY2NjsKCWJvcmRlcjogMXB4IHNvbGlkIHJnYmEoNiw2LDYsLjMpOwoJcG9zaXRpb246IHJlbGF0aXZlOwoJcGFkZGluZy10b3A6IDIuNWVtOwp9CgouZGlhbG9nLWJhciB7Cglwb3NpdGlvbjogYWJzb2x1dGU7CglsZWZ0OiAwOwoJdG9wOiAwOwoJcGFkZGluZzogLjRlbTsKCXdpZHRoOiBjYWxjKDEwMCUgLSAuOGVtKTsKCWJvcmRlci1ib3R0b206IDFweCBzb2xpZCB3aGl0ZTsKCWJhY2tncm91bmQ6ICMwMEE3RjI7Cgljb2xvcjogd2hpdGU7Cn0KCi5kaWFsb2ctYmFyLWJ0biB7CglmbG9hdDogcmlnaHQ7Cgl3aWR0aDogMWVtOwoJaGVpZ2h0OiAxZW07Cglib3JkZXI6IDFweCBzb2xpZCB3aGl0ZTsKCXRleHQtYWxpZ246IGNlbnRlcjsKCWxpbmUtaGVpZ2h0OiAxLjI7CglwYWRkaW5nOiAwIC41ZW07CgltYXJnaW4tbGVmdDogLjVlbTsKfQoKLmRpYWxvZy1jb250ZW50IGlmcmFtZSB7CgloZWlnaHQ6IDMwZW07Cgl3aWR0aDogMTAwJTsKfQoqL30pLAoKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQlpZiAoSC5jb25maWcuZFVyaVR5cGUgPT09IDIvKiBVUklfVVNFX0FSSUEgKi8pIHsKCQkJSC5zZXR1cEFyaWEoKTsKCQl9Cgl9LAoKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCXZhciBfQ09OU1RfQkFTRSA9ICdodHRwczovL2ppeHVubW9lLmdpdGh1Yi5pby9jdXdjbDRjL2t1Z291LWRsJzsKCgkJdmFyICRkbFNoYWRvdyA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RpYWxvZy1zaGFkb3cnKS5oaWRlKCkuYXBwZW5kVG8oJ2JvZHknKTsKCQl2YXIgJGRsRGlhbG9nID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZGlhbG9nLWNvbnRhaW5lcicpLmFwcGVuZFRvKCRkbFNoYWRvdyk7CgkJdmFyICRkbERpYWxvZ1RpdGxlID0gJCgnPGRpdj4nKS5hZGRDbGFzcygnZGlhbG9nLWJhcicpLmFwcGVuZFRvKCRkbERpYWxvZykudGV4dCgn5LiL6L2956qX5Y+jJyk7CgkJdmFyICRkbERpYWxvZ0NvbnRhaW5lciA9ICQoJzxkaXY+JykuYWRkQ2xhc3MoJ2RpYWxvZy1jb250ZW50JykuYXBwZW5kVG8oJGRsRGlhbG9nKTsKCQl2YXIgJGRsRGlhbG9nQ2xvc2VCdG4gPSAkKCc8c3Bhbj4nKS5hZGRDbGFzcygnZGlhbG9nLWJhci1idG4nKS5hcHBlbmRUbygkZGxEaWFsb2dUaXRsZSkudGV4dCgn5YWzJyk7CgkJdmFyICRkbERpYWxvZ01hbmFnZUJ0biA9ICQoJzxzcGFuPicpLmFkZENsYXNzKCdkaWFsb2ctYmFyLWJ0bicpLmFwcGVuZFRvKCRkbERpYWxvZ1RpdGxlKS50ZXh0KCfnrqEnKTsKCgkJLy8g5YWz6Zet5oyJ6ZKu6KKr54K55Ye7CgkJJGRsRGlhbG9nQ2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkgewoJCQkkZGxTaGFkb3cuaGlkZSgpOwoJCX0pOwoKCQkkZGxEaWFsb2dNYW5hZ2VCdG4uY2xpY2soZnVuY3Rpb24gKCkgewoJCQkkd25kRG93bmxvYWRCb3gudG9nZ2xlKCk7CgkJCSR3bmREb3dubG9hZE1hbmFnZXIudG9nZ2xlKCk7CgkJfSk7CgoJCXZhciAkd2FpdE1zZyA9ICQoJzxkaXY+JykudGV4dCgn5q2j5Zyo6I635Y+W55u45YWz5L+h5oGvLi4nKS5hcHBlbmRUbygkZGxEaWFsb2dDb250YWluZXIpOwoKCQl2YXIgZnJhbWVEbERpYWxvZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwoJCXZhciAkd25kRG93bmxvYWRCb3ggPSAkKGZyYW1lRGxEaWFsb2cpLmhpZGUoKS5hcHBlbmRUbygkZGxEaWFsb2dDb250YWluZXIpOwoJCWZyYW1lRGxEaWFsb2cuc3JjID0gX0NPTlNUX0JBU0U7CgoJCXZhciBmcmFtZURsTWFuYWdlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpOwoJCXZhciAkd25kRG93bmxvYWRNYW5hZ2VyID0gJChmcmFtZURsTWFuYWdlcikuaGlkZSgpLmFwcGVuZFRvKCRkbERpYWxvZ0NvbnRhaW5lcik7CgkJZnJhbWVEbE1hbmFnZXIuc3JjID0gX0NPTlNUX0JBU0UgKyAnL2RsLmh0bWwnOwoKCQl2YXIgYWN0aW9uRGxEaWFsb2cgID0gWydzZXQnLCAnY2xlYXInXTsKCQl2YXIgYWN0aW9uRGxNYW5hZ2VyID0gWydhZGQnXTsKCQlmdW5jdGlvbiBwb3N0IChhY3Rpb24sIGRhdGEpIHsKCQkJdmFyIGZyYW1lID0gYWN0aW9uRGxEaWFsb2cuaW5kZXhPZihhY3Rpb24pICE9IC0xID8gZnJhbWVEbERpYWxvZyA6IGZyYW1lRGxNYW5hZ2VyOwoJCQl2YXIgbXNnID0gewoJCQkJYWN0aW9uOiBhY3Rpb24sCgkJCQlkYXRhOiBkYXRhCgkJCX07CgoJCQlmcmFtZS5jb250ZW50V2luZG93LnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KG1zZyksICcqJyk7CgkJfQoKCQlmdW5jdGlvbiBoYW5kbGVEb3dubG9hZCAoc29uZ3MpIHsKCQkJcG9zdCgnY2xlYXInKTsKCQkJJHdhaXRNc2cuaGlkZSgpOwoJCQkkd25kRG93bmxvYWRCb3guc2hvdygpOwoJCQkkd25kRG93bmxvYWRNYW5hZ2VyLmhpZGUoKTsKCQkJJGRsU2hhZG93LnNob3coKTsKCQkJdmFyIHJlc291cmNlID0gSlNPTi5wYXJzZSh1bmVzY2FwZShzb25ncykpLm1hcChmdW5jdGlvbiAoc29uZykgewoJCQkJcmV0dXJuIHsKCQkJCQl0eXBlOiAnYXVkaW8nLAoJCQkJCWlkOiAwLAoJCQkJCWhhc2g6IHNvbmcuSGFzaAoJCQkJfTsKCQkJfSk7CgoJCQl2YXIgcGF5bG9hZCA9IHsKCQkJCSJ1c2VyaWQiOiAwLAoJCQkJInRva2VuIjogIiIsCgkJCQkidmlwIjogMSwKCQkJCSJiZWhhdmlvciI6ICJkb3dubG9hZCIsCgkJCQkicmVsYXRlIjogMSwKCQkJCSJyZXNvdXJjZSI6IHJlc291cmNlLAoJCQkJImFwcGlkIjogMTAwMSwKCQkJCSJjbGllbnR2ZXIiOiAiODAzMSIsCgkJCQkic291cmNlIjogewoJCQkJCSJtb2R1bGUiOiAiMSIsCgkJCQkJInR5cGUiOiAiMCIsCgkJCQkJImlkIjogMAoJCQkJfQoJCQl9OwoKCQkJR01feG1saHR0cFJlcXVlc3QoewoJCQkJbWV0aG9kOiAiUE9TVCIsCgkJCQl1cmw6ICJodHRwOi8vbWVkaWEuc3RvcmUua3Vnb3UuY29tL3YxL2dldF9yZXNfcHJpdmlsZWdlIiwKCQkJCWRhdGE6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLAoJCQkJaGVhZGVyczogewoJCQkJCSJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIgoJCQkJfSwKCQkJCW9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKCQkJCQlwb3N0KCdzZXQnLCBKU09OLnBhcnNlKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCkpOwoJCQkJCSR3YWl0TXNnLmhpZGUoKTsKCQkJCQkkd25kRG93bmxvYWRCb3guc2hvdygpOwoJCQkJfSwKCQkJCW9uZXJyb3I6IGZ1bmN0aW9uICgpIHsKCQkJCQlhbGVydCgn5o6l5Y+j6I635Y+W5aSx6LSlLCDor7fnqI3lkI7ph43or5UhJyk7CgkJCQkJJGRsU2hhZG93LmhpZGUoKTsKCQkJCX0KCQkJfSk7CgkJfQoKCQl2YXIgbG9vcGVyID0gbmV3IEludGVydmFsTG9vcChbXSwgcHJvY19oYXNoLCA1MDApOwoJCWxvb3Blci5sb29wKCk7CgkJd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCBvbk1lc3NhZ2UsIGZhbHNlKTsKCQlmdW5jdGlvbiBvbk1lc3NhZ2UgKGUpIHsKCQkJdmFyIGRhdGEgPSBKU09OLnBhcnNlKGUuZGF0YSk7CgkJCWlmIChkYXRhLmFjdGlvbiA9PSAnY2FuY2VsJykgewoJCQkJJGRsU2hhZG93LmhpZGUoKTsKCQkJfSBlbHNlIGlmIChkYXRhLmFjdGlvbiA9PSAnZG93bmxvYWQnKSB7CgkJCQkkd25kRG93bmxvYWRCb3guaGlkZSgpOwoJCQkJJHduZERvd25sb2FkTWFuYWdlci5zaG93KCk7CgoJCQkJbG9vcGVyLmFkZC5hcHBseShsb29wZXIsIGRhdGEuZGF0YSk7CgkJCX0gZWxzZSB7CgkJCQlILmVycm9yKCdVbmRlZmluZWQgYWN0aW9uOiAnICsgZGF0YS5hY3Rpb24pOwoJCQl9CgkJfQoKCQlmdW5jdGlvbiBoYW5kbGVfZGwgKHNvbmcpIHsKCQkJdmFyIGZpbGUgPSBzb25nLmZpbGVOYW1lICsgJy4nICsgc29uZy5leHROYW1lOwoJCQl2YXIgdXJsID0gc29uZy51cmw7CgoJCQlwb3N0KCdhZGQnLCBzb25nKTsKCQkJaWYgKEguY29uZmlnLmRVcmlUeXBlID09PSAyLyogVVJJX1VTRV9BUklBICovKSB7CgkJCQlILmFkZFRvQXJpYSh1cmwsIGZpbGUpOwoJCQl9CgkJfQoKCQlmdW5jdGlvbiBwcm9jX2hhc2ggKG5leHQsIGhhc2gpIHsKCQkJaGFzaCA9IGhhc2gudG9Mb3dlckNhc2UoKTsKCQkJdmFyIGtleSA9IENyeXB0b0pTLk1ENShoYXNoICsgJ2tnY2xvdWQnKS50b1N0cmluZygpOwoJCQlHTV94bWxodHRwUmVxdWVzdCh7CgkJCQltZXRob2Q6ICdHRVQnLAoJCQkJdXJsOiAnaHR0cDovL3RyYWNrZXJjZG4ua3Vnb3UuY29tL2kvP2NtZD00Jmhhc2g9JyArIGhhc2ggKyAnJmtleT0nICsga2V5ICsgJyZwaWQ9MSZmb3JjZURvd249MCZ2aXA9MScsCgkJCQlvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewoJCQkJCXZhciBzb25nID0gSlNPTi5wYXJzZShyZXNwb25zZS5yZXNwb25zZVRleHQpOwoJCQkJCWhhbmRsZV9kbChzb25nKTsKCQkJCQluZXh0KCk7CgkJCQl9LAoJCQkJb25lcnJvcjogZnVuY3Rpb24gKCkgewoJCQkJCUguZXJyb3IoJ0Vycm9yIHdoaWxlIGZldGNoaW5nIGRhdGEgZm9yICVzJywgaGFzaCk7CgkJCQkJbmV4dCgpOwoJCQkJfQoJCQl9KTsKCQl9CgoJCS8qIOWvvOWHuuWHveaVsCAqLwoJCWV4cG9ydEZ1bmN0aW9uKGhhbmRsZURvd25sb2FkLCB1bnNhZmVXaW5kb3csIHsKCQkJZGVmaW5lQXM6ICJkbF9qaXh1biIKCQl9KTsKCgkJdW5zYWZlRXhlYyhmdW5jdGlvbiAoKSB7CgkJCWRvd25Mb2FkID0gZGxfaml4dW47CgkJfSk7Cgl9Cn0pLAovKiBDb21waWxlZCBmcm9tIG11c2ljLm95aW55dWUuanMgKi8KewoJaWQ6ICdtdXNpYy5veWlueXVlJywKCW5hbWU6ICflmaLpn7PkuZDkuIvovb3op6PmnpAnLAoJaG9zdDogJ295aW55dWUuY29tJywKCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKCQlpZiAoSC5iZWdpbldpdGggKGxvY2F0aW9uLnBhdGhuYW1lLCAnL0Rvd24uYXNweCcpKSB7CgkJCXRoaXMuZG93blBhZ2UgKCk7CgkJCXJldHVybiA7CgkJfQoKCQlILndhaXRVbnRpbCAoJ3BsYXllci5zZXRVcmwnLCBmdW5jdGlvbiAoKSB7CgkJCXVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5ICh7CgkJCQlzZXRVcmw6IGZ1bmN0aW9uIChzb25nVXJsKSB7CgkJCQkJJCgnLmZ1bmNfaWNvbjQgPiBhJykuYXR0cih7CgkJCQkJCSdocmVmJzogc29uZ1VybCwKCQkJCQkJJ3RhcmdldCc6ICdfYmxhbmsnCgkJCQkJfSkuaHRtbCgnPGIvPuebtOmTvuS4i+i9vScpOwoKCQkJCQl0aHJvdyBuZXcgRXJyb3JVbnNhZmVTdWNjZXNzICgpOwoJCQkJfQoJCQl9LCB1bnNhZmVXaW5kb3cucGxheWVyLCAnLnBsYXllcicpCgkJfSk7Cgl9LAoKCWRvd25QYWdlOiBmdW5jdGlvbiAoKSB7CgkJdmFyICRkbCA9ICQoJzxwPicpLnByZXBlbmRUbyAoJCgnLnNpbmdfdmlldycpKS50ZXh0KCfmraPlnKjop6PmnpDpn7PkuZDlnLDlnYDigKYnKTsKCQl0aGlzLmZldGNoICgkX0dFVC5pZCwgZnVuY3Rpb24gKHNvbmdVcmwpIHsKCgkJCSRkbC50ZXh0KCfop6PmnpDlrozmr5U6ICcpLmFwcGVuZCAoJCgnPGE+JykuYXR0cih7CgkJCQlocmVmOiBzb25nVXJsLAoJCQkJdGFyZ2V0OiAnX2JsYW5rJwoJCQl9KS50ZXh0KCfngrnmiJHkuIvovb0nKSk7CgoJCX0sIGZ1bmN0aW9uICgpIHsKCQkJJGRsLnRleHQgKCcqIOS4i+i9veino+aekOWksei0pe+8jOivt+iuv+mXruatjOabsumhteino+aekOOAgicpCgkJCQkuY3NzICgnY29sb3InLCAncmVkJyk7CgkJfSk7Cgl9LAoKCWZldGNoOiBmdW5jdGlvbiAoc29uZ0lkLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWxDYWxsYmFjaykgewoJCSQuYWpheCAoewoJCQl1cmw6ICcvbG9hZC9sb2Fkc29uZy5hc2h4JywKCQkJbWV0aG9kOiAnUE9TVCcsCgkJCWRhdGE6IHsKCQkJCXNvbmdpZDogc29uZ0lkLAoJCQkJaWQ6IDMKCQkJfSwKCQkJZGF0YVR5cGU6ICd0ZXh0JwoJCX0pLnN1Y2Nlc3MgKGZ1bmN0aW9uICh1cmwpIHsKCQkJaWYgKHVybCAmJiB1cmwgIT0gJzAnKSB7CgkJCQlzdWNjZXNzQ2FsbGJhY2sgKHVybCk7CgkJCX0gZWxzZSB7CgkJCQlmYWlsQ2FsbGJhY2sgKCk7CgkJCX0KCQl9KS5lcnJvciAoZnVuY3Rpb24gKCkgewoJCQlmYWlsQ2FsbGJhY2sgKCk7CgkJfSk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMucXEuaXBsaW1pdC5qcyAqLwooewoJaWQ6ICdtdXNpYy5xcS5pcGxpbWl0JywKCW5hbWU6ICdRUSDpn7PkuZDjgIHnlLXlj7DmtbflpJborr/pl67pmZDliLbop6PpmaQnLAoJaG9zdDogWyd5LnFxLmNvbScsICdpLnkucXEuY29tJywgJ2ZtLnFxLmNvbSddLAoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCS8vIE1WIOmhtemdouino+mUgQoJCWlmIChkb2N1bWVudC5jb29raWUuaW5kZXhPZignaXBfbGltaXQ9MScpID09IC0xKSB7CgkJCWRvY3VtZW50LmNvb2tpZSA9ICdpcF9saW1pdCA9IDE7IGV4cGlyZXM9JyArIChuZXcgRGF0ZSgnMjA5OS8wMS8wMScpKS50b0dNVFN0cmluZygpICsgIjsgZG9tYWluPS5xcS5jb207IjsKCQl9Cgl9LAoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJSC5pbmZvICgn562J5YCZ5rW35aSW6K6/6Zeu6ZmQ5Yi25qih57uE5Yqg6L294oCmJyk7CgkJSC53YWl0VW50aWwgKCdNVVNJQy53aWRnZXQubWFpbi5JUF9saW1pdC5pc0xpbWl0JywgZnVuY3Rpb24gKCkgewoJCQlILmluZm8gKCfmtbflpJborr/pl67pmZDliLbop6PpmaQuJyk7CgkJCXVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uICh7CgkJCQkvLyDop6PpmaTjgIxRUemfs+S5kOaaguaXtuS4jeiDveWvueaCqOaJgOWcqOeahOWbveWutuaIluWcsOWMuuaPkOS+m+acjeWKoeOAjemZkOWItgoJCQkJaXNMaW1pdDogZnVuY3Rpb24gKCkge30KCQkJfSwgdW5zYWZlV2luZG93Lk1VU0lDLndpZGdldC5tYWluLklQX2xpbWl0LCAnLk1VU0lDLndpZGdldC5tYWluLklQX2xpbWl0Jyk7CgkJfSk7Cgl9Cn0pLAovKiBDb21waWxlZCBmcm9tIG11c2ljLnFxLnkuanMgKi8KewoJaWQ6ICdtdXNpYy5xcS55JywKCW5hbWU6ICdRUSDpn7PkuZDkuIvovb3op6PmnpAnLAoJaG9zdDogWyd5LnFxLmNvbScsICdzb3NvLm11c2ljLnFxLmNvbSddLAoJbm9TdWJIb3N0OiB0cnVlLAoKCWNzczogLyogUmVzb3VyY2U6IGNvbS5xcS55LmRsLmNzcyAqLwpILmV4dHJhY3QoZnVuY3Rpb24gKCkgeyAvKgpAbWVkaWEgc2NyZWVuIHsKCS5tX3BsYXllciAuYmFyX29wIHsKCQlsZWZ0OiAgMjA4cHg7CgkJd2lkdGg6IDMxMHB4OwoJfQoKCS5qeF9kbF9idCB7CgkJdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOwoJfQoKCS5qeF9kbF9idCA+IGEgewoJCXdpZHRoOiAgIDEwMCU7CgkJaGVpZ2h0OiAgMTAwJTsKCQlkaXNwbGF5OiBibG9jazsKCQlvdXRsaW5lOiAwICFpbXBvcnRhbnQ7Cgl9Cn0KCiovfSksCglvbkJvZHk6IGZ1bmN0aW9uICgpIHsKCQlpZiAoSC5jb25maWcuZFVyaVR5cGUgPT0gMSkgewoJCQlILndhcm4gKAoJCQkJJyVzXG4lcycsCgkJCQkn5b2T5YmN54mI5pys55qE5Y2P6K6u5bCa5pyq5pSv5o+0IENvb2tpZSDovpPlhaUsIOWbnua7muiHs+i/nuaOpeeJiCcsCgkJCQkn5aaC5p6c5oKo56Gu5a6e6ZyA6KaB6Ieq5Yqo5aGr5YWl55So5oi35ZCNLCDor7fmlLnnlKggQXJpYTIg54mIJwoJCQkpOwoKCQkJSC5jb25maWcuZFVyaVR5cGUgPSAwOwoJCX0KCgkJdmFyIHN0eWxlVG9GaXggPSB0aGlzLnN0eWxlQmxvY2s7CgoJCUgud2FpdFVudGlsICgnTVVTSUMubW9kdWxlLndlYlBsYXllci5pbnRlckZhY2UuZ2V0U29uZ1VybCcsIGZ1bmN0aW9uICgpIHsKCQkJSC5maXhTdHlsZU9yZGVyIChzdHlsZVRvRml4KTsKCgkJCXZhciBkbEJ0biA9ICQoJzxhPicpCgkJCQkuYWRkQ2xhc3MoJ2FyaWEtY29va2llJykKCQkJCS5hdHRyKCd0aXRsZScsICfmkq3mlL7pn7PkuZAsIOWNs+WIu+S4i+i9vScpCgkJCQkuYXBwZW5kVG8gKAoJCQkJCSQoJzxzdHJvbmc+JykKCQkJCQkJLmFkZENsYXNzICgnbmV4dF9idCBqeF9kbF9idCcpCgkJCQkJCS5pbnNlcnRBZnRlciAoJy5uZXh0X2J0JykKCQkJCSk7CgoJCQl1bnNhZmVFeGVjIChmdW5jdGlvbiAoc2NyaXB0TmFtZSkgewoJCQkJdmFyIG9sZEdldFNvbmcgPSB3aW5kb3cuTVVTSUMubW9kdWxlLndlYlBsYXllci5pbnRlckZhY2UuZ2V0U29uZ1VybDsKCgkJCQl3aW5kb3cuTVVTSUMubW9kdWxlLndlYlBsYXllci5pbnRlckZhY2UuZ2V0U29uZ1VybCA9IGZ1bmN0aW9uIChzb25nT2JqLCBjYikgewoJCQkJCWRvY3VtZW50LmRpc3BhdGNoRXZlbnQgKCBuZXcgQ3VzdG9tRXZlbnQgKHNjcmlwdE5hbWUsIHtkZXRhaWw6IHsKCQkJCQkJaG9zdDogJ2h0dHA6Ly9zdHJlYW0nICsgKHBhcnNlSW50KHNvbmdPYmoubXN0cmVhbSkgKyAxMCkgKyAnLnFxbXVzaWMucXEuY29tLycsCgkJCQkJCXBhdGg6ICJNODAwIiArIHNvbmdPYmoubW1pZCArICIubXAzIiwKCQkJCQkJbmFtZTogc29uZ09iai5tc29uZyArICdbJyArIHNvbmdPYmoubXNpbmdlciArICddJwoJCQkJCX0gfSkgKTsKCgkJCQkJcmV0dXJuIG9sZEdldFNvbmcuYXBwbHkgKHRoaXMsIGFyZ3VtZW50cyk7CgkJCQl9OwoJCQl9LCBILnNjcmlwdE5hbWUpOwoKCQkJZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAoSC5zY3JpcHROYW1lLCBmdW5jdGlvbiAoZSkgewoJCQkJdmFyIHNvbmdPYmogPSBlLmRldGFpbDsKCgkJCQlkbEJ0bi5hdHRyICh7CgkJCQkJaHJlZjogSC51cmkgKHNvbmdPYmouaG9zdCArIHNvbmdPYmoucGF0aCwgc29uZ09iai5uYW1lICsgJy5tcDMnKSwKCQkJCQl0aXRsZTogJ+S4i+i9vTogJyArIHNvbmdPYmoubmFtZQoJCQkJfSk7CgkJCX0sIGZhbHNlKTsKCQl9LCA3MDAwLCA1MDApOwoKCQlILndhaXRVbnRpbCAoJ01VU0lDLndpZGdldC50cmFja1NlcnYuZm9ybWF0TXVzaWMnLCBmdW5jdGlvbiAoKSB7CgkJCXVuc2FmZUV4ZWMoZnVuY3Rpb24gKCkgewoJCQkJdmFyIF9mb3JtYXRNdXNpYyA9IE1VU0lDLndpZGdldC50cmFja1NlcnYuZm9ybWF0TXVzaWM7CgkJCQlNVVNJQy53aWRnZXQudHJhY2tTZXJ2LmZvcm1hdE11c2ljID0gZnVuY3Rpb24gKCkgewoJCQkJCXZhciBfbXVzaWMgPSBfZm9ybWF0TXVzaWMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKCgkJCQkJX211c2ljLm1zdGF0dXMgPSBwYXJzZUludChfbXVzaWMubXN0YXR1cykgfHwgMTsKCgkJCQkJX211c2ljLm1zaXplID0gX211c2ljLm1zaXplIHx8IDE7CgkJCQkJX211c2ljLm1pbnRlcnZhbCA9IF9tdXNpYy5taW50ZXJ2YWwgfHwgMTsKCgkJCQkJaWYgKF9tdXNpYy5tc29uZ3VybCkgewoJCQkJCQl2YXIgX3ByZTsKCQkJCQkJaWYgKF9tdXNpYy5zaXplMzIwKSB7CgkJCQkJCQlfcHJlID0gJ004MDAnOwoJCQkJCQl9IGVsc2UgaWYgKF9tdXNpYy5zaXplMTI4KSB7CgkJCQkJCQlfcHJlID0gJ001MDAnOwoJCQkJCQl9CgoJCQkJCQlpZiAoX3ByZSkgewoJCQkJCQkJX211c2ljLm1zb25ndXJsID0gJ2h0dHA6Ly9zdHJlYW0nICsgKHBhcnNlSW50KF9tdXNpYy5tc3RyZWFtKSArIDEwKSArCgkJCQkJCQkJCQkJCScucXFtdXNpYy5xcS5jb20vJyArIF9wcmUgKyBfbXVzaWMubW1pZCArICcubXAzJzsKCQkJCQkJfQoJCQkJCX0KCgkJCQkJcmV0dXJuIF9tdXNpYzsKCQkJCX07CgoJCQkJdmFyIGdldFZpcCA9IGdfdXNlci5nZXRWaXBJbmZvOwoJCQkJZ191c2VyLmdldFZpcEluZm8gPSBmdW5jdGlvbiAoc3VjY2Vzc0NiLCBmYWlsQ2IpIHsKCQkJCQlyZXR1cm4gZ191c2VyLmdldFZpcEluZm8gKGZ1bmN0aW9uIChpbmZvKSB7CgkJCQkJCWlmICgxICE9IGluZm8udmlwKSBpbmZvLnZpcCA9IDE7CgkJCQkJCWlmIChzdWNjZXNzQ2IpIHN1Y2Nlc3NDYiAoaW5mbyk7CgkJCQkJfSwgZmFpbENiKTsKCQkJCX07CgkJCX0pOwoJCX0sIDcwMDAsIDUwMCk7Cgl9Cn0sCi8qIENvbXBpbGVkIGZyb20gbXVzaWMuc29uZ3Rhc3RlLmpzICovCnsKCWlkOiAnbXVzaWMuc29uZ3Rhc3RlJywKCW5hbWU6ICdTb25nVGFzdGUg5LiL6L296Kej5p6QJywKCWhvc3Q6IFsnc29uZ3Rhc3RlLmNvbSddLAoKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCXZhciBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7CgkJaWYgKEguYmVnaW5XaXRoIChwYXRoLCAnL2FsYnVtLycpIHx8IEguYmVnaW5XaXRoIChwYXRoLCAnL211c2ljLycpKSB7CgkJCXRoaXMuYWxidW0gKCk7CgkJfSBlbHNlIGlmIChILmJlZ2luV2l0aCAocGF0aCwgJy9zb25nLycpKSB7CgkJCXRoaXMuc2luZ2xlICgpOwoJCX0gZWxzZSBpZiAoSC5iZWdpbldpdGggKHBhdGgsICcvcGxheW11c2ljLnBocCcpKSB7CgkJCXRoaXMucGxheWxpc3QgKCk7CgkJfQoJfSwKCgoJYWxidW06IGZ1bmN0aW9uICgpIHsKCQlILmxvZyAoJ1NUIDo6IOS4k+i+kemhtemdouiwg+aVtCcpOwoJCXZhciBidG5fcGxheUFsbCA9ICQoJCgnLnNvbmdfZnVuX2J0bicpLmNoaWxkcmVuKClbMV0pOwoJCXZhciBidG5fbm9Qb3BQbGF5ID0gYnRuX3BsYXlBbGwuY2xvbmUoKS5hdHRyKHsKCQkJJ3ZhbHVlJzogJ+W9k+WJjeeql+WPo+aSreaUvicsCgkJCSdvbmNsaWNrJzogJycKCQl9KS5pbnNlcnRBZnRlciAoYnRuX3BsYXlBbGwpOwoKCQlidG5fbm9Qb3BQbGF5LmNsaWNrKGZ1bmN0aW9uICgpIHsKCQkJdmFyIGlkcyA9IFtdLmZpbHRlci5jYWxsICh1bnNhZmVXaW5kb3cuY2hrQXJyYXksIGZ1bmN0aW9uIChlKSB7CgkJCQlyZXR1cm4gZS5jaGVja2VkOwoJCQl9KS5tYXAgKGZ1bmN0aW9uIChlKSB7CgkJCQlyZXR1cm4gZS52YWx1ZTsKCQkJfSkuam9pbignLCcpOwoKCQkJaWYgKCFpZHMpIHsKCQkJCWlkcyA9IFtdLm1hcC5jYWxsKHVuc2FmZVdpbmRvdy5jaGtBcnJheSwgZnVuY3Rpb24gKGUpIHsKCQkJCQlyZXR1cm4gZS52YWx1ZTsKCQkJCX0pLmpvaW4gKCcsJyk7CgkJCX0KCgkJCWxvY2F0aW9uLmhyZWYgPSAnL3BsYXltdXNpYy5waHA/c29uZ19pZD0nICsgaWRzOwoJCX0pOwoJfSwKCglzaW5nbGU6IGZ1bmN0aW9uICgpIHsKCQl2YXIgYXJncyAgICA9ICQoIiNwbGF5aWNvbiBhIikuYXR0cignaHJlZicpLnJlcGxhY2UoL1xzL2csICcnKS5yZXBsYWNlKC8iL2csICInIikuc3BsaXQoIiciKTsKCQl2YXIgc1VSTCAgICA9IGFyZ3MgWzA1XSwKCQkJc1R5cGUgICA9IGFyZ3MgWzExXSwKCQkJc0hlYWQgICA9IGFyZ3MgWzEzXSwKCQkJc29uZ0lkICA9IGFyZ3MgWzE1XSwKCQkJc0xlbmd0aCA9IGFyZ3MgWzE2XS5tYXRjaCAoL1xkezIsfS8pWzBdOwoKCQl2YXIgcSA9ICQuRGVmZXJyZWQoKTsKCQlxLnRoZW4gKGZ1bmN0aW9uIChzb25nVXJsKSB7CgkJCUgubG9nICgnU1QgOjog6Kej5p6Q6Z+z5LmQ5Zyw5Z2AIDo6ICVzJywgc29uZ1VybCk7CgkJCXZhciBzb25nTmFtZSA9ICQoJy5taWRfdGl0JykudGV4dCgpOwoKCQkJJCgnYSNjdXN0b21fMScpLmF0dHIoewoJCQkJJ2hyZWYnOiBILnVyaShzb25nVXJsLCBzb25nTmFtZSArIHNvbmdVcmwuc2xpY2UoLTQpKSwKCQkJCSd0aXRsZSc6ICfkuIvovb06ICcgKyBzb25nTmFtZQoJCQl9KS50ZXh0KCfnm7TmjqXkuIvovb0nKTsKCQl9KTsKCgkJaWYgKEguY29udGFpbnMoc1VSTCwgJ3JheWZpbGUnKSkgewoJCQlxLnJlc29sdmUgKHNIZWFkICsgc1VSTCArIHVuc2FmZVdpbmRvdy5HZXRTb25nVHlwZShzVHlwZSkpOwoJCX0gZWxzZSB7CgkJCSQuYWpheCh7CgkJCQl0eXBlOiAnUE9TVCcsCgkJCQl1cmw6ICcvdGltZS5waHAnLAoJCQkJY2FjaGU6IHRydWUsCgkJCQlkYXRhOiAnc3RyPScgKyBzVVJMICsgJyZzaWQ9JyArIHNvbmdJZCArICcmdD0nICsgc0xlbmd0aCwKCQkJCWRhdGFUeXBlOiAndGV4dCcsCgkJCX0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHIpIHsKCQkJCXEucmVzb2x2ZSAocik7CgkJCX0pOwoJCX0KCX0sCgoJcGxheWxpc3Q6IGZ1bmN0aW9uICgpIHsKCQkvLyDkuIvovb3op6PmnpAgLSBIb29rIOabtOaNouatjOabsueahOWHveaVsO+8jOmBv+WFjemHjeWkjeivu+WPluatjOabsiArIOS4jemcgOimgeWkmuasoeivt+axguacjeWKoeWZqOS4jeWuueaYk+aOiee6v+OAggoJCUgubG9nICgnU1QgOjog5YiX6KGo5qih5byP6Kej5p6QJyk7CgoJCXZhciBwRG93bmxvYWQgPSAkKCcjbGVmdF9tdXNpY19kaXYgPiAucF9mdW4gPiBhOmxhc3QnKQoJCQkudGV4dCgn55u05o6l5LiL6L29JykKCQkJLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTsKCgkJdW5zYWZlT3ZlcndyaXRlRnVuY3Rpb25TYWZlUHJveHkgKHsKCQkJY2hhbmdlU29uZzogZnVuY3Rpb24gKG5hbWUsIHVybCwgaXNMb2dvU2hvd24pIHsKCQkJCS8vIDIwMTMuMDMuMTkgJiAyMDEzLjA0LjA5IOS/ruatozoKCQkJCS8vICAg5bey57uP5Yig6Zmk55qE5q2M5puy6Ieq5Yqo6Lez5Yiw5LiL5LiA5puyCgkJCQlpZiAoIDAgPT0gbmFtZS50cmltKCkubGVuZ3RoICkgewoJCQkJCXVuc2FmZVdpbmRvdy5wdS5kb1BsYXlOZXh0KDIpOwoJCQkJCXJldHVybjsKCQkJCX0KCQkJCUgubG9nICgn6K+35rGC5q2M5puyIDo6ICVzIDo6ICVzJywgbmFtZSwgdXJsKTsKCQkJCXBEb3dubG9hZC5hdHRyKHsKCQkJCQknaHJlZic6IEgudXJpKHVybCwgbmFtZSArIHVybC5zbGljZSgtNCkpLAoJCQkJCSd0aXRsZSc6ICfkuIvovb06ICcgKyBuYW1lCgkJCQl9KTsKCQkJCWRvY3VtZW50LnRpdGxlID0gJ1NUIC0gJyArIG5hbWU7CgoJCQkJLy8g6L2s5o6l57uZ5Y6f5Ye95pWwCgkJCQl0aHJvdyBuZXcgRXJyb3JVbnNhZmVTdWNjZXNzKCk7CgkJCX0sCgoJCQlkZWxTb25nRGl2OiBmdW5jdGlvbiAoc29uZ2lkLCBpc2JveCkgewoJCQkJSC5sb2cgKCfliKDpmaTmrYzmm7IgOjogJyArIHNvbmdpZC50b1N0cmluZygpKTsKCQkJCSQoJyMnICsgc29uZ2lkKS5oaWRlKCk7CgoJCQkJdmFyIG5ld19zb25nbGlzdCA9IFtdOwoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCB1bnNhZmVXaW5kb3cuYXJyX2lkcy5sZW5ndGg7IGkrKykgewoJCQkJCWlmICh1bnNhZmVXaW5kb3cuYXJyX2lkc1tpXSA9PSBzb25naWQpIHsKCQkJCQkJaWYgKHNvbmdpZCA9PSB1bnNhZmVXaW5kb3cuY3VyX3NpZCkKCQkJCQkJCXVuc2FmZVdpbmRvdy5wdS5kb1BsYXlOZXh0KDEpOwoJCQkJCQl1bnNhZmVXaW5kb3cuYXJyX2lkc1tpXSA9IDA7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfSk7CgoJCS8vIDIwMTMuMDMuMTkg5re75YqgOgoJCS8vICAg6YeN5bu65pKt5pS+5YiX6KGo5Zyw5Z2ACgkJJCgncC5wX2xpc3RfdHh0JykuYXBwZW5kKCQoJzxhPicpLnRleHQoJ+mHjeW7uuaSreaUvuWIl+ihqCcpLmNsaWNrKGZ1bmN0aW9uICgpIHsKCQkJbG9jYXRpb24uc2VhcmNoID0gJz9zb25nX2lkPScgKyB1bnNhZmVXaW5kb3cuYXJyX2lkcy5qb2luKCcsJyk7CgkJfSkuY3NzKCdjdXJzb3InLCAncG9pbnRlcicpKTsKCQkKCQlILmxvZyAoJ1NUIDo6IOetieW+hee9kemhteWKoOi9vS4uLicpOwoJCUgud2FpdFVudGlsICgncHUuZG9QbGF5TmV4dCcsIGZ1bmN0aW9uICgpIHsKCQkJSC5sb2cgKCdTVCA6OiDlrpjmlrnmkq3mlL7lmajliKDpmaTlip/og73kv67mraPlkK/liqgnKTsKCgkJCXVuc2FmZU92ZXJ3cml0ZUZ1bmN0aW9uU2FmZVByb3h5ICh7CgkJCQlkb1BsYXlOZXh0OiBmdW5jdGlvbiAodCkgewoJCQkJCXZhciBub3csIGF2bCwgaTsKCQkJCQlmb3IgKGkgPSAwOyBpIDwgdW5zYWZlV2luZG93LmFycl9pZHMubGVuZ3RoOyBpKyspIHsKCQkJCQkJaWYgKHVuc2FmZVdpbmRvdy5hcnJfaWRzW2ldID09IHVuc2FmZVdpbmRvdy5jdXJfc2lkKSB7CgkJCQkJCQlub3cgPSBpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQkJLy8g5a+75om+5LiL5LiA6aaW5pyq5Yig6Zmk55qE5q2M5puy44CCCgkJCQkJLy8gICAqIDIwMTMuMDEuMjkg5L+u5q2jCgkJCQkJLy8JIDEuIOS4iuS4gOmmluafpeaJvuWksei0peeahOaDheWGteS4i+S8mua7muWbnuWIsOW9k+WJjemfs+S5kOeahOmUmeivr+OAggoJCQkJCS8vCSAyLiDlpoLmnpzmsqHmnInlj6/lkKzmrYzmm7Lmg4XlhrXkuIvml6DpmZDlvqrnjq/nmoTplJnor6/jgIIKCQkJCQkKCQkJCQlub3cgPSBNYXRoLmFicygobm93IHx8IDApICsgdCk7CgkJCQkJYXZsID0gMDsKCQkJCQkKCQkJCQkvLyDmo4Dmn6XmmK/lkKbmnInmrYzmm7LliankvZkKCQkJCQlmb3IgKGkgPSAwOyBpIDwgdW5zYWZlV2luZG93LmFycl9pZHMubGVuZ3RoOyBpKyspIHsKCQkJCQkJaWYgKHVuc2FmZVdpbmRvdy5hcnJfaWRzW2ldKSB7CgkJCQkJCQlhdmwrKzsKCQkJCQkJfQoJCQkJCX0KCQkJCQlpZiAoYXZsID09PSAwKSB7CgkJCQkJCWFsZXJ0KCfmrYzpg73ooqvliKDlhYnkuobov5jlkKzllaUuLi4nKTsKCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCQkKCQkJCQkvLyDlr7vmib7nqbrkvY0KCQkJCQl3aGlsZSAodHJ1ZSkgewoJCQkJCQlpZiAodW5zYWZlV2luZG93LmFycl9pZHNbbm93XSkgewoJCQkJCQkJSC5sb2cgKCfliIfmjaLmrYzmm7IgOjogJyArIG5vdy50b1N0cmluZygpKTsKCQkJCQkJCXVuc2FmZVdpbmRvdy5wdS51dGlscyhub3cpOwoJCQkJCQkJdW5zYWZlV2luZG93LmN1cl9zaWQgPSB1bnNhZmVXaW5kb3cuYXJyX2lkc1tub3ddOwoJCQkJCQkJdW5zYWZlV2luZG93LnBsYXlTb25nUmlnaHQoKTsKCQkJCQkJCXJldHVybjsKCQkJCQkJfQoJCQkJCQlub3cgKz0gdCA+PSAwID8gMSA6IC0xOwoJCQkJCQlpZiAodW5zYWZlV2luZG93LmFycl9pZHMubGVuZ3RoIDw9IG5vdykgewoJCQkJCQkJbm93ID0gMDsKCQkJCQkJfQoJCQkJCQlpZiAobm93IDwgMCkgewoJCQkJCQkJbm93ID0gdW5zYWZlV2luZG93LmFycl9pZHMubGVuZ3RoOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9LCB1bnNhZmVXaW5kb3cucHUsICcucHUnKTsKCQl9KTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBtdXNpYy54aWFtaS5qcyAqLwp7CglpZDogJ211c2ljLnhpYW1pJywKCW5hbWU6ICfomb7nsbPpn7PkuZAnLAoJaG9zdDogJ3d3dy54aWFtaS5jb20nLAoJbm9TdWJIb3N0OiB0cnVlLAoJZGxfaWNvbjogdHJ1ZSwKCWNzczogLyogUmVzb3VyY2U6IGNvbS54aWFtaS5mbS5jc3MgKi8KSC5leHRyYWN0KGZ1bmN0aW9uICgpIHsgLyoKLS0geGlhbWkgRk0gcGxheWVyIGNzcwoKLmp4X2RsIHsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKCWNvbG9yOiAjZGRkOwoJcmlnaHQ6IDk5cHg7Cgl3aWR0aDogMThweDsKCWhlaWdodDogMThweDsKCWZvbnQtc2l6ZTogMThweDsKCXRyYW5zaXRpb246IGNvbG9yIC4zczsKfQoKLmp4X2RsOmhvdmVyIHsKCWNvbG9yOiAjYWFhOwp9CiovfSksCgoJb25TdGFydDogZnVuY3Rpb24gKCkgewoJCXZhciB0aGF0ID0gdGhpczsKCQlILmhvb2tSZXF1aXJlICgnU0VJWUEnLCAnZG93bmxvYWQnLCBmdW5jdGlvbiAoc2NyaXB0TmFtZSwgX1NFSVlBLCBfZG93bmxvYWQsIHNvbmdJZCkgewoJCQlkb2N1bWVudC5kaXNwYXRjaEV2ZW50IChuZXcgQ3VzdG9tRXZlbnQgKHNjcmlwdE5hbWUgKyAnLWRsQnlJZCcsIHsgZGV0YWlsOiBzb25nSWQgfSkpOwoKCQkJcmV0dXJuIHRydWU7CgkJfSwgSC5zY3JpcHROYW1lKTsKCgkJSC53YWl0VW50aWwgKCdLSVNTWS51c2UnLCBmdW5jdGlvbiAoKSB7CgkJCXVuc2FmZUV4ZWMgKGZ1bmN0aW9uIChzY3JpcHROYW1lKSB7CgkJCQl3aW5kb3cuS0lTU1kudXNlICgncGFnZS9tb2RzL3BsYXllcicsIGZ1bmN0aW9uIChfS0lTU1ksIG1QbGF5ZXIpIHsKCQkJCQl2YXIgX3NldE11c2ljSW5mbyA9IG1QbGF5ZXIucHJvdG90eXBlLnNldE11c2ljSW5mbzsKCQkJCQltUGxheWVyLnByb3RvdHlwZS5zZXRNdXNpY0luZm8gPSBmdW5jdGlvbiAoc29uZ09iaikgewoJCQkJCQl0aGlzLmlzVklQID0gdHJ1ZTsKCQkJCQkJZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCAobmV3IEN1c3RvbUV2ZW50IChzY3JpcHROYW1lICsgJy1kbEJ5T2JqJywgeyBkZXRhaWw6IEpTT04ucGFyc2UgKHNvbmdPYmopIH0pKTsKCQkJCQkJcmV0dXJuIF9zZXRNdXNpY0luZm8uYXBwbHkgKHRoaXMsIGFyZ3VtZW50cyk7CgkJCQkJfTsKCQkJCX0pOwoJCQl9LCBILnNjcmlwdE5hbWUpOwoJCX0pOwoKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIChILnNjcmlwdE5hbWUgKyAnLWRsQnlJZCcsIGZ1bmN0aW9uIChlKSB7CgkJCXRoYXQuZmV0Y2ggKGUuZGV0YWlsLCBmdW5jdGlvbiAoc29uZ09iaikgewoJCQkJR01fb3BlbkluVGFiICggSC51cmkgKHNvbmdPYmouc3JjLCBzb25nT2JqLnRpdGxlICsgJ1snICsgc29uZ09iai5hcnRpc3QgKyAnXScgKyAnLm1wMycpLCBmYWxzZSApOwoJCQl9KTsKCQl9LCBmYWxzZSk7CgoJCXRoYXQuZGxCdG4gPSAkKCc8YT4nKQoJCQkuYWRkQ2xhc3MgKEguZGVmYXVsdERsSWNvbikKCQkJLmF0dHIoJ3RpdGxlJywgJ+etieW+heiOt+WPlumfs+S5kOS/oeaBr+KApicpOwoKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyIChILnNjcmlwdE5hbWUgKyAnLWRsQnlPYmonLCBmdW5jdGlvbiAoZSkgewoJCQl2YXIgc29uZ09iaiA9IGUuZGV0YWlsOwoJCQl0aGF0LmRsQnRuCgkJCQkuYXR0ciAoJ2hyZWYnLCAgSC51cmkgKHRoYXQuZGVjcnlwdCAoIHNvbmdPYmoudXJsICksIHNvbmdPYmouc29uZyArICdbJyArIHNvbmdPYmouYXJ0aXN0ICsgJ10nICsgJy5tcDMnKSkKCQkJCS5hdHRyICgndGl0bGUnLCAn5LiL6L29OiAnICsgc29uZ09iai5zb25nICsgJyBbYnkgJyArIHNvbmdPYmouYXJ0aXN0ICsgJ10nKTsKCQl9LCBmYWxzZSk7Cgl9LAoKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCUgud2FpdFVudGlsIChmdW5jdGlvbiAoKSB7CgkJCXJldHVybiAkKCcjSl90cmFja0ZhdicpLmxlbmd0aDsKCQl9LCBmdW5jdGlvbiAoKSB7CgkJCXRoaXMuZGxCdG4uaW5zZXJ0QmVmb3JlICgkKCcjSl90cmFja0ZhdicpKTsKCQl9LmJpbmQgKHRoaXMpKTsKCX0sCgoJZmV0Y2g6IGZ1bmN0aW9uIChzb25nSWQsIGNhbGxiYWNrKSB7CgkJaWYgKCFjYWxsYmFjayB8fCAhY2FsbGJhY2suY2FsbCkKCQkJcmV0dXJuIDsKCgkJdmFyIHRoYXQgPSB0aGlzOwoJCSQuYWpheCh7CgkJCXR5cGU6ICdHRVQnLAoJCQl1cmw6ICcvc29uZy9wbGF5bGlzdC9pZC8nICsgc29uZ0lkICsgJy9vYmplY3RfbmFtZS9kZWZhdWx0L29iamVjdF9pZC8wJywKCQkJY2FjaGU6IHRydWUsCgkJCWRhdGFUeXBlOiAneG1sJwoJCX0pLnN1Y2Nlc3MgKGZ1bmN0aW9uICh4bWxEb2MpIHsKCQkJdmFyIHNvbmdPYmogPSB7fTsKCQkJW10uZm9yRWFjaC5jYWxsICh4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUgKCd0cmFjaycpWzBdLmNoaWxkcmVuLCBmdW5jdGlvbiAoZSkgewoJCQkJLy8gY29uc29sZS5sb2cgKCclcyA9PiAlcycsIGUudGFnTmFtZSwgZS50ZXh0Q29udGVudCk7CgkJCQlzb25nT2JqW2UudGFnTmFtZV0gPSBlLnRleHRDb250ZW50OwoJCQl9KTsKCQkJc29uZ09iai5zcmMgPSB0aGF0LmRlY3J5cHQgKHNvbmdPYmoubG9jYXRpb24pOwoJCQljYWxsYmFjayAoIHNvbmdPYmogKTsKCQl9KTsKCX0sCgoJZGVjcnlwdDogZnVuY3Rpb24gKGVuY3J5cHRlZEFkZHJlc3MpIHsKCQl2YXIgc3BsaXRlciA9IHBhcnNlSW50KGVuY3J5cHRlZEFkZHJlc3NbMF0pLAoJCQlsaW5rID0gZW5jcnlwdGVkQWRkcmVzcy5zbGljZSgxKSwKCQkJcmVtYWluZGVyID0gbGluay5sZW5ndGggJSBzcGxpdGVyLAoJCQl0bXAgPSAwLAoJCQlyZXQgPSAnJywKCQkJYXJyID0gW107CgoJCWZvciAodmFyIGkgPSAwOyBpIDwgc3BsaXRlcjsgaSsrKSB7CgkJCWFyci5wdXNoICgocmVtYWluZGVyID4gaSA/IDEgOiAwKSArIChsaW5rLmxlbmd0aCAtIHJlbWFpbmRlcikgLyBzcGxpdGVyKTsKCQl9CgoJCWZvciAoaSA9IDA7IGkgPCBhcnJbMV07IGkrKywgdG1wID0gMCkgewoJCQlmb3IgKHZhciBqID0gMDsgaiA8IHNwbGl0ZXI7IGorKykgewoJCQkJcmV0ICs9IGxpbmtbdG1wICsgaV07CgkJCQl0bXAgKz0gYXJyW2pdOwoJCQl9CgkJfQoJCXJldHVybiB1bmVzY2FwZShyZXQuc3Vic3RyKDAsIGxpbmsubGVuZ3RoKSkucmVwbGFjZSgvXF4vZywgJzAnKS5yZXBsYWNlKC9cKy9nLCAnICcpOwoJfQp9LAovKiBDb21waWxlZCBmcm9tIG11c2ljLnlpbnl1ZXRhaS5qcyAqLwp7CglpZDogJ211c2ljLnlpbnl1ZXRhaScsCgluYW1lOiAn6Z+z5oKm5Y+w5LiL6L296Kej5p6QJywKCWhvc3Q6IFsneWlueXVldGFpLmNvbSddLAoKCV9saW5rSG9sZGVyOiBudWxsLAoJb25Cb2R5OiBmdW5jdGlvbiAoKSB7CgkJaWYgKEguYmVnaW5XaXRoIChsb2NhdGlvbi5wYXRobmFtZSwgJy92aWRlby8nKSkgewoJCQl0aGlzLl9saW5rSG9sZGVyID0gJCgnPHNwYW4+JykuY3NzICh7CgkJCQljb2xvcjogJ3doaXRlJywKCQkJCWZvbnRTaXplOiAnc21hbGwnLAoJCQkJbWFyZ2luTGVmdDogJzEuNWVtJwoJCQl9KS5hcHBlbmRUbyAoJCgnLnZjaGFydCwgLnBsX3RpdGxlJykuZmlyc3QoKSk7CgoJCQl0aGlzLmZldGNoKGxvY2F0aW9uLnBhdGhuYW1lLm1hdGNoKC9cZCskLylbMF0pOwoJCX0gZWxzZSB7CgkJCUgud2FpdFVudGlsIChmdW5jdGlvbiAoKSB7CgkJCQlyZXR1cm4gJCgnLkpfdmlkZW9faW5mbycpLmxlbmd0aDsKCQkJfSwgdGhpcy5wcm9jTGlzdFBhZ2UuYmluZCAodGhpcykpOwoJCX0KCX0sCgoJcHJvY0xpc3RQYWdlOiBmdW5jdGlvbiAoKSB7CgkJSC5pbmZvICgn5bCx57uqLicpOwoKCQl2YXIgbW8gPSBuZXcgTXV0YXRpb25PYnNlcnZlciAoZnVuY3Rpb24gKCkgewoJCQlILmluZm8gKCdNViDlt7Lmm7TmlrAsIOaKk+WPluaWsOeahOS4i+i9veWcsOWdgC4uJyk7CgkJCXRoaXMuX2xpbmtIb2xkZXIgPSAkKCc8cD4nKS5wcmVwZW5kVG8gKCcuSl9tdl9jb250ZW50Jyk7CgkJCXRoaXMuZmV0Y2goJCgnLkpfdmlkZW9faW5mbyA+IGEnKS5hdHRyKCdocmVmJykubWF0Y2ggKC9cZCsvKSk7CgkJfS5iaW5kICh0aGlzKSk7CgoJCW1vLm9ic2VydmUgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5KX3ZpZGVvX2luZm8nKSwgewoJCQljaGlsZExpc3Q6IHRydWUKCQl9KTsKCX0sCgoJZmV0Y2g6IGZ1bmN0aW9uICh2aWRlb0lkKSB7CgkJdmFyIHRoYXQgPSB0aGlzOwoJCUdNX3htbGh0dHBSZXF1ZXN0ICh7CgkJCW1ldGhvZDogJ0dFVCcsCgkJCXVybDogJ2h0dHA6Ly93d3cueWlueXVldGFpLmNvbS9pbnNpdGUvZ2V0LXZpZGVvLWluZm8/anNvbj10cnVlJnZpZGVvSWQ9JyArIHZpZGVvSWQsCgkJCW9ubG9hZDogZnVuY3Rpb24gKHUpIHsKCQkJCXRyeSB7CgkJCQkJdmFyIHIgPSBKU09OLnBhcnNlICh1LnJlc3BvbnNlVGV4dCk7CgkJCQl9IGNhdGNoIChlKSB7CgkJCQkJdGhhdC5fbGlua0hvbGRlci50ZXh0KCfop6PmnpDlpLHotKXvvJrmlbDmja7moLzlvI/plJnor6/jgIInKTsKCQkJCQlyZXR1cm4gOwoJCQkJfQoKCQkJCWlmIChyLmVycm9yKSB7CgkJCQkJdGhhdC5fbGlua0hvbGRlci50ZXh0KCfop6PmnpDlpLHotKXvvJonICsgci5tZXNzYWdlKTsKCQkJCQlyZXR1cm4gOwoJCQkJfQoKCQkJCUguaW5mbyAoJ+ino+aekOWujOavlSwg5Yqg5YWl5LiL6L295Zyw5Z2ALi4nKTsKCQkJCXRoYXQuYWRkRG93bmxvYWQgKHIudmlkZW9JbmZvLmNvcmVWaWRlb0luZm8pOwoJCQl9LAoJCQlvbmVycm9yOiBmdW5jdGlvbiAocikgewoJCQkJdGhhdC5fbGlua0hvbGRlci50ZXh0KCflvojmirHmrYksIOino+aekOS4i+i9veWcsOWdgOWksei0pS4uJyk7CgkJCX0KCQl9KTsKCX0sCgoJYWRkRG93bmxvYWQ6IGZ1bmN0aW9uICh2aWRlb0luZm8pIHsKCQl0aGlzLl9saW5rSG9sZGVyLnRleHQoJ+S4i+i9vTogJyk7CgkJdmFyIHJhd0xpbmtzID0gdmlkZW9JbmZvLnZpZGVvVXJsTW9kZWxzOwoKCQlmb3IgKHZhciBpID0gcmF3TGlua3MubGVuZ3RoOyBpLS07ICkgewoJCQkkKCc8YT4nKS50ZXh0KHJhd0xpbmtzW2ldLlF1YWxpdHlMZXZlbE5hbWUpCgkJCQkvLyBUT0RPIGZpeCB0aGUgbmFtZQoJCQkJLmF0dHIoJ2hyZWYnLCBILnVyaSgKCQkJCQlyYXdMaW5rc1tpXS52aWRlb1VybCwgCgkJCQkJSC5zcHJpbnRmKCclcyBbJXNdWyVzXSVzJywKCQkJCQkJdmlkZW9JbmZvLnZpZGVvTmFtZSwKCQkJCQkJdmlkZW9JbmZvLmFydGlzdE5hbWUsCgoJCQkJCQlyYXdMaW5rc1tpXS5RdWFsaXR5TGV2ZWxOYW1lLAoJCQkJCQlILmdldExpbmtFeHQocmF3TGlua3NbaV0udmlkZW9VcmwpKQoJCQkJKSkKCQkJCS5hdHRyKCd0aXRsZScsICfkuIvovb06ICcgKyB2aWRlb0luZm8udmlkZW9OYW1lKS5hcHBlbmRUbyh0aGlzLl9saW5rSG9sZGVyKQoJCQkJLmFkZENsYXNzICgnY19jZjknKTsKCgkJCXRoaXMuX2xpbmtIb2xkZXIuYXBwZW5kKCcgfCAnKTsKCQl9CgoJCXRoaXMuX2xpbmtIb2xkZXIuYXBwZW5kKEguc3ByaW50ZiAoJ+aPkOS+mzogJXMgJXMgJywgSC5zY3JpcHROYW1lLCBILnZlcnNpb24pKTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBwaHBkaXNrLmEuanMgKi8KewoJaWQ6ICdwaHBkaXNrLmEnLAoJbmFtZTogJ+mAmueUqCBwaHBEaXNrLmEg572R55uY6KeE5YiZJywKCS8vIOebuOWFs+inhOWImTog6Lez6L2sIC9maWxlLXh4eCAtPiAvZG93bmxvYWQucGhwP2lkPXh4eCZrZXk9eHh4CgkKCWhvc3Q6IFsKCQknNzlwYW4uY29tJywgJzAzeGcuY29tJywKCQkKCQknN212LmNjJywgJ3Bhbi41Mnp6Lm9yZycsICcyNThwYW4uY29tJywgJ2h1aW1laWt1LmNvbScKCV0sCgoJaGlkZTogWycjY29kZV9ib3gnLCAnI2Rvd25fYm94MicsICcjY29kZWZybScsICcuYWQnLCAnW2NsYXNzXj0iYmFubmVyIl0nXSwKCXNob3c6ICcjZG93bl9ib3gnLAoKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQl1bnNhZmVPdmVyd3JpdGVGdW5jdGlvblNhZmVQcm94eSAoewoJCQlvcGVuOiB0RnVuYwoJCX0pOwoJfSwKCW9uQm9keTogZnVuY3Rpb24gKCkgewoJCUgud2FpdFVudGlsICgnZG93bl9maWxlX2xpbmsnLCBmdW5jdGlvbiAoKSB7CgkJCS8vIOmBv+WFjeWcsOWdgOiiq+imhueblgoJCQl1bnNhZmVXaW5kb3cudXBkYXRlX3NlYyA9IG51bGw7CgkJCS8vIOW8uuWItuaYvuekuuWcsOWdgAoJCQl1bnNhZmVXaW5kb3cuZG93bl9maWxlX2xpbmsgKCk7CgoJCQkvLyDlvLrliLbmmL7npLrkuIvovb3lnLDlnYAKCQkJaWYgKHVuc2FmZVdpbmRvdy5zaG93X2Rvd25fdXJsKQoJCQkJdW5zYWZlV2luZG93LnNob3dfZG93bl91cmwgKCdkb3duX2ExJyk7CgoJCQl2YXIganVtcFVybCA9ICQoJyNkb3duX2xpbmsnKS5maW5kKCdhJykuYXR0cignaHJlZicpOwoKCQkJLy8g54S25ZCO6Lez6L+H5Y67CgkJCWlmIChqdW1wVXJsKSB7CgkJCQlILnJlRGlyV2l0aFJlZiAoanVtcFVybCk7CgkJCX0gZWxzZSB7CgkJCQlhbGVydCAoSC5zcHJpbnRmKCdbJXNdOiDlupTnlKggJXMg5aSx6LSlOlxu5om+5LiN5Yiw6Lez6L2s5Zyw5Z2ALicsIEguc2NyaXB0TmFtZSwgdGhpcy5uYW1lKSk7CgkJCX0KCQl9KTsKCX0KfSwKLyogQ29tcGlsZWQgZnJvbSBwaHBkaXNrLnouanMgKi8KewoJaWQ6ICdwaHBkaXNrLnonLAoJbmFtZTogJ+mAmueUqCBwaHBEaXNrLnog572R55uY6KeE5YiZJywKCS8vIOinhOWImTog55u05o6l6Lez6L2sIC9maWxlLXh4eCAtPiAvZG93bi14eHgKCS8vICAgICAgIOW5tumakOiXjyBkb3duX2JveDIsIOaYvuekuiBkb3duX2JveAoJCglob3N0OiBbCgkJJ3dwYW4uY2MnLCAneXBhbi5jYycsCgkJJ2F6cGFuLmNvbScsICdneGRpc2suY29tJywgJzJrdWFpLmNvbScsICcxd3AubWUnLCAKCQknNzdwYW4uY2MnLCAndnZwYW4uY29tJywgJ2ZtZGlzay5jb20nLCAnYngwNjM1LmNvbScsCgkJJzEwcGFuLmNjJywgJzFwYW4uY2MnLCAnMTIzd3p3cC5jb20nLCAnd3dwNS5jb20nLAoJCSdmeWRpc2suY29tJwoJXSwKCWhpZGU6IFsKCQkvLyBhenBhbiwgZ3hkaXNrCgkJJy5Eb3ducGFnZWJveCcsCgoJCScudGFsa19zaG93JywgJy5iYW5uZXJfMicsICcud18zMDUnLAoKCQkvLyAya3VhaS5jb20KCQknLmFkJywgJyN2Y29kZScsICcjdHVpJywgJy5kY29kZScsICcjZG93bl9ib3gyJywgJyNkbF90aXBzJywgJy5uYWwnLCAnLnNjYmFyX2hvdF90ZCcsICcjaW5jb2RlJwoJXSwKCXNob3c6IFsKCQkvLyAya3VhaS5jb20KCQknI2Rvd25fYm94JywgJyNkbF9hZGRyJwoJXSwKCW9uU3RhcnQ6IGZ1bmN0aW9uICgpIHsKCQl1bnNhZmVEZWZpbmVGdW5jdGlvbiAoJ2Rvd25fcHJvY2VzcycsIHRGdW5jKTsKCQlILnBocERpc2tBdXRvUmVkaXIgKCk7Cgl9Cn0KIF07CgoJaWYgKEguY29uZmlnLmJVc2VDdXN0b21SdWxlcykgewoJCXRyeSB7CgkJCVtdLnNwbGljZS5hcHBseSAoc2l0ZXMsIFswLCAwXS5jb25jYXQoZXZhbCAoSC5zcHJpbnRmKCdbJXNcbl0nLCBILmNvbmZpZy5zQ3VzdG9tUnVsZSkpKSk7CgkJfSBjYXRjaCAoZSkgewoJCQlILmluZm8gKCfop6PmnpDoh6rlrprkuYnop4TliJnml7blj5HnlJ/plJnor686ICVzJywgZS5tZXNzYWdlKTsKCQl9Cgl9CgoJdmFyIGhhbmRsZVNpdGUgPSAoZnVuY3Rpb24gKCkgewoJCS8vIOaJqeWxleinhOWImeWHveaVsApILnJ1bGUgPSB7CgljaGVja1BhdGg6IGZ1bmN0aW9uIChwYXRoLCBydWxlKSB7CgkJaWYgKHJ1bGUgaW5zdGFuY2VvZiBBcnJheSkgewoJCQlpZiAocnVsZS5sZW5ndGggPT09IDApCgkJCQlyZXR1cm4gZmFsc2U7CgoJCQlmb3IgKHZhciBpID0gcnVsZS5sZW5ndGg7IGktLTsgKSB7CgkJCQlpZiAodGhpcy5jaGVja1BhdGgocGF0aCwgcnVsZVtpXSkpCgkJCQkJcmV0dXJuIHRydWU7CgkJCX0KCgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCXJldHVybiAoCgkJCS8vIEZ1bmN0aW9uCgkJCShydWxlLmNhbGwgJiYgcnVsZShwYXRoKSkKCgkJCS8vIFN0cmluZwoJCQl8fCAodHlwZW9mIHJ1bGUgPT0gJ3N0cmluZycgJiYgSC5iZWdpbldpdGggKHBhdGgsIHJ1bGUpKQoKCQkJLy8gUmVnZXggbWF0Y2gKCQkJfHwgKHJ1bGUgaW5zdGFuY2VvZiBSZWdFeHAgJiYgcnVsZS50ZXN0IChwYXRoKSkKCgkJCS8vIEZhaWxlZCB0byBtYXRjaCBhbnl0aGluZyA6PAoJCQl8fCBmYWxzZQoJCSk7Cgl9LAoJCgljaGVjazogZnVuY3Rpb24gKHNpdGUsIGV2ZSkgewoJCS8vIOWtkOaooeWdlywg5peg5Z+f5ZCN57uR5a6aCgkJaWYgKCFzaXRlLmhvc3QpCgkJCXJldHVybiA7CgoJCWZvciAodmFyIGkgPSA1OyBpLS07ICkgewoJCQlpZiAodHlwZW9mIGV2ZSA9PSAnc3RyaW5nJykgewoJCQkJZXZlID0gc2l0ZVtldmVdOwoJCQl9IGVsc2UgewoJCQkJYnJlYWs7CgkJCX0KCQl9CgoJCWlmICh0eXBlb2YgZXZlID09ICdzdHJpbmcnKSB7CgkJCUguZXJyb3IgKCdSZXBldGl0aXZlICcgKyBldmVudCArICcgaGFuZGxlciAoJyArIGV2ZSArICcpLCBza2lwIC4uJyk7CgkJCWV2ZSA9IG51bGw7CgkJCXJldHVybiA7CgkJfQoJCQoJCS8vIE1ha2UgdGhpcyB0byBhbiBhcnJheS4KCQlpZiAodHlwZW9mIHNpdGUuaG9zdCA9PSAnc3RyaW5nJykKCQkJc2l0ZS5ob3N0ID0gWyBzaXRlLmhvc3QgXTsKCgkJLy8gU2hvdWxkIGhhdmUgYXQgbGVhc3Qgb25lIHNpdGUgc2V0dXAuCgkJaWYgKCFzaXRlLmhvc3QubGVuZ3RoKSB7CgkJCUguZXJyb3IgKCdSVUxFOiBrZXkgYGhvc3RgIGlzIG1pc3NpbmchJyk7CgkJCXJldHVybiA7CgkJfQoJCQoJCQoJCS8vIOajgOafpeWfn+WQjQoJCXZhciBob3N0TWF0Y2g7CgkJaWYgKCFILmNvbnRhaW5zIChzaXRlLmhvc3QsIEgubG93ZXJIb3N0KSkgewoJCQkvLyDmmK/lkKbmo4Dmn6XlrZDln5/lkI0/CgkJCWlmIChzaXRlLm5vU3ViSG9zdCkKCQkJCXJldHVybiA7CgoJCQlob3N0ID0gSC5sb3dlckhvc3Q7CgoJCQl3aGlsZSAoKGhvc3RNYXRjaCA9IGhvc3QubWF0Y2ggKC9eLis/XC4oLispLykpKSB7CgkJCQlpZiAoSC5jb250YWlucyAoc2l0ZS5ob3N0LCBob3N0ID0gaG9zdE1hdGNoWzFdKSkgewoJCQkJCWJyZWFrOwoJCQkJfQoJCQl9CgoJCQkvLyBObyBtYXRjaGluZyBob3N0IG5hbWUKCQkJaWYgKCFob3N0TWF0Y2gpIHJldHVybjsKCQl9CgkJCgkJLy8g5qOA5p+l6Lev5b6ECgkJaWYgKHNpdGUucGF0aCAmJiAhdGhpcy5jaGVja1BhdGgobG9jYXRpb24ucGF0aG5hbWUsIHNpdGUucGF0aCkpIHsKCQkJcmV0dXJuIDsKCQl9CgkJCgkJcmV0dXJuIHRydWU7Cgl9LAoKCXJ1bjogZnVuY3Rpb24gKHNpdGUsIGV2ZW50KSB7CgkJaWYgKCFzaXRlIHx8ICFldmVudCkKCQkJcmV0dXJuIDsKCQkKCQl2YXIgZXZlID0gc2l0ZVtldmVudF07CgoJCWlmIChzaXRlLl9zdHlsZUFwcGxpZWQpCgkJCS8vIOS/ruatoyBDU1Mg5Y+v6IO96KKr6KaG55uW55qE6ZSZ6K+vCgkJCUguZml4U3R5bGVPcmRlciAoc2l0ZS5zdHlsZUJsb2NrKTsKCgkJaWYgKCFzaXRlLl9zdHlsZUFwcGxpZWQpIHsKCQkJc2l0ZS5fc3R5bGVBcHBsaWVkID0gdHJ1ZTsKCQkJSC5sb2cgKCflupTnlKggWyVzXSDnmoTmoLflvI/ooajigKYnLCBzaXRlLm5hbWUgfHwgJ+aXoOWQjScpOwoKCQkJdmFyIHN0eWxlQmxvY2sgPSBILmluamVjdFN0eWxlICgpOwoJCQlILnN0eWxlQmxvY2sgPSBzdHlsZUJsb2NrOwoKCQkJaWYgKHR5cGVvZiBzaXRlLmhpZGUgPT0gJ3N0cmluZycpCgkJCQlILmZvcmNlSGlkZS5jYWxsICAoc3R5bGVCbG9jaywgc2l0ZS5oaWRlKTsKCQkJZWxzZSBpZiAoc2l0ZS5oaWRlICYmIHNpdGUuaGlkZS5sZW5ndGgpCgkJCQlILmZvcmNlSGlkZS5hcHBseSAoc3R5bGVCbG9jaywgc2l0ZS5oaWRlKTsKCgkJCWlmICh0eXBlb2Ygc2l0ZS5zaG93ID09ICdzdHJpbmcnKQoJCQkJSC5mb3JjZVNob3cuY2FsbCAgKHN0eWxlQmxvY2ssIHNpdGUuc2hvdyk7CgkJCWVsc2UgaWYgKHNpdGUuc2hvdyAmJiBzaXRlLnNob3cubGVuZ3RoKQoJCQkJSC5mb3JjZVNob3cuYXBwbHkgKHN0eWxlQmxvY2ssIHNpdGUuc2hvdyk7CgoJCQkvLyDoh6rlrprkuYkgY3NzIOazqOWFpQoJCQlpZiAodHlwZW9mIHNpdGUuY3NzID09ICdzdHJpbmcnKQoJCQkJSC5pbmplY3RTdHlsZS5jYWxsICAoc3R5bGVCbG9jaywgc2l0ZS5jc3MpOwoJCQllbHNlIGlmIChzaXRlLmNzcyAmJiBzaXRlLmNzcy5sZW5ndGgpCgkJCQlILmluamVjdFN0eWxlLmFwcGx5IChzdHlsZUJsb2NrLCBzaXRlLmNzcyk7CgoJCQkvLyDkuIvovb3mjInpkq4KCQkJaWYgKHNpdGUuZGxfaWNvbikgewoJCQkJaWYgKHNpdGUuZGxfaWNvbi5tYXApIHsKCQkJCQlzaXRlLmRsX2ljb24gPSBzaXRlLmRsX2ljb24uam9pbiAoJzo6YmVmb3JlLCAnKTsKCQkJCX0gZWxzZSBpZiAodHlwZW9mIHNpdGUuZGxfaWNvbiAhPSAnc3RyaW5nJykgewoJCQkJCXNpdGUuZGxfaWNvbiA9IEguZGVmYXVsdERsQ2xhc3M7CgkJCQl9CgoJCQkJSC5pbmplY3RTdHlsZS5jYWxsIChzdHlsZUJsb2NrLCBILnNwcmludGYoLyogUmVzb3VyY2U6IEFBLmRsX2J0bi5jc3MgKi8KSC5leHRyYWN0KGZ1bmN0aW9uICgpIHsgLyoKQGZvbnQtZmFjZSB7Cglmb250LWZhbWlseTogY2NjOwoJc3JjOiB1cmwoaHR0cHM6Ly9jZG4uYm9vdGNzcy5jb20vZm9udC1hd2Vzb21lLzQuMi4wL2ZvbnRzL2ZvbnRhd2Vzb21lLXdlYmZvbnQud29mZikgZm9ybWF0KCd3b2ZmJyk7Cglmb250LXdlaWdodDogbm9ybWFsOwoJZm9udC1zdHlsZTogbm9ybWFsOwp9Cgolczo6YmVmb3JlIHsKCWZvbnQtZmFtaWx5OiBjY2M7Cgljb250ZW50OiAiXGYwMTkiOwoJcGFkZGluZy1yaWdodDogLjVlbTsKfQoKLmp4X2hpZGUgewoJZGlzcGxheTogbm9uZTsKfQoqL30pLCBzaXRlLmRsX2ljb24pKTsKCQkJfQoKCQkJc2l0ZS5zdHlsZUJsb2NrID0gc3R5bGVCbG9jazsKCQl9CgoJCWlmICghZXZlKSByZXR1cm4gOwoJCUguaW5mbyAoJ+aJp+ihjOinhOWImTogJXM8SUQ6ICVzPlvkuovku7Y6ICVzXScsIHNpdGUubmFtZSB8fCAnPOacquefpT4nLCBzaXRlLmlkIHx8ICfmnKrnn6UnLCBldmVudCk7CgoJCXJldHVybiBldmUuY2FsbCAoc2l0ZSk7Cgl9LAoKCS8qKgoJICogZ2V0IHJ1bGUgYnkgSUQKCSAqIEBwYXJhbSAge1N0cmluZ30gaWQgUnVsZSBpZAoJICogQHJldHVybiB7UnVsZX0gICAgICBSdWxlIE9iamVjdAoJICovCglnZXQ6IGZ1bmN0aW9uIChpZCkgewoJCXJldHVybiBzaXRlcy5maWx0ZXIoZnVuY3Rpb24gKHNpdGUpIHsgcmV0dXJuIHNpdGUuaWQgPT0gaWQ7IH0pLnBvcCgpOwoJfSwKCQoJZXhlYzogZnVuY3Rpb24gKGlkLCBldmVudCkgewoJCXJldHVybiB0aGlzLnJ1bih0aGlzLmdldChpZCksIGV2ZW50KTsKCX0KfTsKCnJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHsKCWZvciAodmFyIGkgPSBzaXRlcy5sZW5ndGg7IGktLTsgKSB7CgkJaWYgKEguaXNGcmFtZSAmJiBzaXRlc1tpXS5ub0ZyYW1lKQoJCQljb250aW51ZTsKCQkKCQlpZiAoSC5ydWxlLmNoZWNrKHNpdGVzW2ldLCBldmVudCkgJiYgSC5ydWxlLnJ1bihzaXRlc1tpXSwgZXZlbnQpKQoJCQlyZXR1cm4gdHJ1ZTsKCX0KfTsKCX0pKCk7CgoJdHJ5IHsKCQlHTV9yZWdpc3Rlck1lbnVDb21tYW5kIChILnNwcmludGYoJ+mFjee9riAlc1slc10nLCBILnNjcmlwdE5hbWUsIEgudmVyc2lvbiksIGZ1bmN0aW9uICgpIHsKCQkJR01fb3BlbkluVGFiKCdodHRwczovL2ppeHVubW9lLmdpdGh1Yi5pby9jdXdjbDRjL2NvbmZpZy8nLCBmYWxzZSk7CgkJfSk7CgoJCUgubG9nICgnb25TdGFydCDlh4blpIfpmLbmrrUgOjog5byA5aeLJyk7CgkJaGFuZGxlU2l0ZSAoJ29uU3RhcnQnKTsKCQlILmxvZyAoJ29uU3RhcnQg5YeG5aSH6Zi25q61IDo6IOe7k+adnycpOwoKCQlkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICgnRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHsKCQkJSC5sb2cgKCdvbkJvZHkg6Zi25q61IDo6IOW8gOWniycpOwoJCQloYW5kbGVTaXRlICgnb25Cb2R5Jyk7CgkJCUgubG9nICgnb25Cb2R5IOmYtuautSA6OiDnu5PmnZ8nKTsKCQl9LCBmYWxzZSk7CgoJfSBjYXRjaCAoZSkgewoJCWlmIChlLmlzRXhpdCkgewoJCQlILmxvZy5hcHBseSAoIDAsIFtdLmNvbmNhdC5hcHBseSAoIFsn6ISa5pys6YCA5Ye6LCDplJnor6/kv6Hmga8nXSwgZS5tZXNzYWdlICkgKTsKCQl9IGVsc2UgewoJCQlILmVycm9yICgn6K+35Yqh5b+F5bCG5LiL6L+w6ZSZ6K+v6L+96Liq5Luj56CB5o+Q5Lqk6IezICVzXG5cbiVzJywgSC5yZXBvcnRVcmwsIGUubWVzc2FnZSk7CgkJfQoJfQp9KSAoKTs="}]}